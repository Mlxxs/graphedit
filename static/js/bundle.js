define("Bundle",["exports","PublicState","EmojiMini"],function(e,t,n){"use strict";function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function g(e,t,n){return g=f()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=Function.bind.apply(e,i),a=new r;return n&&p(a,n.prototype),a},g.apply(null,arguments)}function m(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){function n(){return g(e,arguments,d(this).constructor)}if(null===e||!m(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?y(e):t}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=k(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function S(e,t){return T(e)||L(e,t)||N()}function C(e){return x(e)||A(e)||I()}function x(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function T(e){if(Array.isArray(e))return e}function A(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function L(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function O(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function R(e,t,n,i,r){var a={};return Object.keys(i).forEach(function(e){a[e]=i[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function M(e){if(!e)return[];if(!Array.isArray(e))return e[Symbol.iterator]?M(Array.from(e)):[e];for(var t=!0,n=0;n<e.length;n++)if(Array.isArray(e[n])||null==e[n]){t=!1;break}if(t)return e;for(var i=[],r=0;r<e.length;r++)if(Array.isArray(e[r]))for(var a=M(e[r]),o=0;o<a.length;o+=1)i.push(a[o]);else null!=e[r]&&i.push(e[r]);return i}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.location.host,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self.location.origin;return!e||(e.startsWith("//")?e.startsWith("//"+t):!new RegExp("^(?:[a-z]+:)?//","i").test(e)||e.startsWith(n))}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.location.host,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self.location.origin;if(!P(e,t,n))throw Error("Trying to trim non-local url!");return e?e.startsWith("//"+t)?e.slice(("//"+t).length):e.startsWith(n)?e.slice(n.length):e:e}function B(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n}function _(e){return null!=e&&void 0!==e[Symbol.iterator]}function F(e,t){if(null==e&&null==t)return 0;if(null==t)return 1;if(null==e)return-1;if(H(e)&&H(t))return e-t;var n=e.toString(),i=t.toString();return n===i?0:n<i?-1:1}function U(e){return e=e.trim(),e=e.replace(/[^a-zA-Z0-9-\s]/g,""),e=e.replace(/\s+/g,"-"),e=e.replace(/-{2,}/g,"-"),e=e.toLowerCase()}function z(e,t){return"number"==typeof e||e instanceof Number?e+t:e}function W(e,t){return e.__proto__=t.prototype,e}function H(e){return"number"==typeof e||e instanceof Number}function V(e){return"string"==typeof e||e instanceof String}function G(e){return!(!e||"object"!==i(e)||e.nodeType)&&(!e.constructor||e.constructor==Object)}function j(){var e=arguments[0]||{};"object"!==i(e)&&"function"!=typeof e&&(e={});for(var t=1;t<arguments.length;t+=1){var n=arguments[t];if(null!=n)for(var r=0,a=Object.entries(n);r<a.length;r++){var o=S(a[r],2),s=o[0],l=o[1];if(l&&G(l)||Array.isArray(l)){var u=void 0,c=e[s];u=Array.isArray(l)?c&&Array.isArray(c)?c:[]:c&&G(c)?c:{},e[s]=j(u,l)}else e[s]=l}}return e}function Y(e,t){return s({},e,t)}function J(e){for(var t="",n=0;n<e.length;n++)"A"<=e[n]&&e[n]<="Z"?(n>0&&(t+="-"),t+=e[n].toLowerCase()):t+=e[n];return t==e?e:t}function q(e){var t=(document.cookie||"").split(";"),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s=s.trim(),s.startsWith(e+"="))return decodeURIComponent(s.substring(e.length+1))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return null}function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14400;document.cookie="".concat(e,"=").concat(encodeURIComponent(JSON.stringify(t)),";path=/;max-age=").concat(n)}function K(e){K.objectWeakMap||(K.objectWeakMap=new WeakMap,K.constructorWeakMap=new WeakMap,K.totalObjectCount=0);var t=K.objectWeakMap,n=K.constructorWeakMap;if(!t.has(e)){var i=e.constructor||e.__proto__||Object,r=(n.get(i)||0)+1;n.set(i,r);var a=r+"-"+ ++K.totalObjectCount;t.set(e,a)}return t.get(e)}function Q(e,t){for(var n=String(e);n.length<t;)n="0"+n;return n}function Z(e){var t=["th","st","nd","rd"],n=e%10;return!(Math.floor(e/10)%10==1)&&t[n]||t[0]}function $(e){return e+Z(e)}function ee(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=g(e,i);return a.__proto__=t.prototype,a}function te(e){if(!e.toString().includes(" extends ")){var t=e.__proto__,n=Object.getOwnPropertySymbols(e).concat(Object.getOwnPropertyNames(e)),i=e.create||function(){return ee.apply(void 0,[t,i].concat(Array.prototype.slice.call(arguments)))},r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=Object.getOwnPropertyDescriptor(e,u);Object.defineProperty(i,u,c)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i.prototype=e.prototype,i.__proto__=e.__proto__,i.prototype.constructor=i,i}}function ne(e,t){var n,i,r,a,o,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=!0,i=!1,r=void 0,l.prev=3,a=e[Symbol.iterator]();case 5:if(n=(o=a.next()).done){l.next=12;break}return s=o.value,l.next=9,t(s);case 9:n=!0,l.next=5;break;case 12:l.next=18;break;case 14:l.prev=14,l.t0=l.catch(3),i=!0,r=l.t0;case 18:l.prev=18,l.prev=19,n||null==a.return||a.return();case 21:if(l.prev=21,!i){l.next=24;break}throw r;case 24:return l.finish(21);case 25:return l.finish(18);case 26:case"end":return l.stop()}},xu,null,[[3,14,18,26],[19,,21,25]])}function ie(e,t){var n,i,r,a,o,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=!0,i=!1,r=void 0,l.prev=3,a=e[Symbol.iterator]();case 5:if(n=(o=a.next()).done){l.next=13;break}if(s=o.value,!t(s)){l.next=10;break}return l.next=10,s;case 10:n=!0,l.next=5;break;case 13:l.next=19;break;case 15:l.prev=15,l.t0=l.catch(3),i=!0,r=l.t0;case 19:l.prev=19,l.prev=20,n||null==a.return||a.return();case 22:if(l.prev=22,!i){l.next=25;break}throw r;case 25:return l.finish(22);case 26:return l.finish(19);case 27:case"end":return l.stop()}},Tu,null,[[3,15,19,27],[20,,22,26]])}function re(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function ae(e){var t=new FileReader,n=re(t);return t.readAsArrayBuffer(e),n}function oe(e){var t=new FileReader,n=re(t);return t.readAsText(e),n}function se(e){var t=e.getAllResponseHeaders()||"",n=t.split(/\r?\n/),i=new Headers,r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=u.split(":"),h=c.shift().trim();if(h){var d=c.join(":").trim();i.append(h,d)}}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[]";if(!G(e))return e;for(var n=new URLSearchParams,i=0,r=Object.keys(e);i<r.length;i++){var a=r[i],o=e[a];if(Array.isArray(o)){var s=!0,l=!1,u=void 0;try{for(var c,h=o[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;n.append(a+t,d)}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}}else n.set(a,o)}return n}function ue(e,t){return e.url&&(e=e.url),t&&(e+="?"+t),e}function ce(e){if(e.type&&(e.method=e.type.toUpperCase()),e.contentType&&e.headers.set("Content-Type",e.contentType),e.headers.set("X-Requested-With","XMLHttpRequest"),G(e.data)){var t=e.method.toUpperCase();if("GET"===t||"HEAD"===t)e.urlParams=e.urlParams||e.data,!1===e.cache&&(e.urlParams=le(e.urlParams,e.arraySearchParamSuffix),e.urlParams.set("_",Date.now()));else{for(var n=new FormData,i=0,r=Object.keys(e.data);i<r.length;i++){var a=r[i],o=e.data[a];if(Array.isArray(o)){var s=!0,l=!1,u=void 0;try{for(var c,h=o[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;n.append(a+"[]",d)}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}}else n.append(a,o)}e.body=n}}else e.body=e.body||e.data;return e}function he(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(G(e))return he.apply(void 0,[e.url].concat(Array.prototype.slice.call(arguments)));var r=Object.assign.apply(Object,[{}].concat(n));r.headers=new Headers(r.headers||{});var a=r.preprocessors||he.defaultPreprocessors||[],o=!0,s=!1,l=void 0;try{for(var u,c=a[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){r=(0,u.value)(r)||r}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}r.onSuccess=r.onSuccess||r.success,r.onError=r.onError||r.error,r.onComplete=r.onComplete||r.complete,"boolean"==typeof r.cache&&(r.cache=r.cache?"force-cache":"reload"),r.method=r.method||"GET";var h=r.urlParams||r.urlSearchParams;if(h){var d=le(h,r.arraySearchParamSuffix);e=e instanceof Request?new Request(ue(e.url,d),e):new Request(ue(e,d),{})}return new _u(e,r)}function de(e){var t="add"+e,n="remove"+e;return function(e){var i=Array.prototype.slice.call(arguments,1),r=e[t].apply(e,C(i));return r||(r=function(){e[n].apply(e,C(i))}),this.addCleanupJob(r),r}}function pe(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],n=0,i=t;n<i.length;n++){var r=i[n];if(e.hasOwnProperty(r))return!0}return!1}function fe(e,t){return pe(t[t.length-1])?e.apply(void 0,C(t).concat([[]])):function(){return e.apply(void 0,Array.prototype.slice.call(arguments).concat([t]))}}function ge(e){return function(t){return Object.defineProperty(this,e,{configurable:!0,writable:!0,enumerable:!0,value:t}),t}}function me(e,t,n,i){var r=S(i,2),a=r[0],o=void 0===a?oc:a,s=r[1],l=void 0===s?{}:s;if("function"!=typeof n.value)throw new SyntaxError("Only functions can be marked as deprecated");var u="".concat(e.constructor.name,"#").concat(t);return l.url&&(o+="\n\n        See ".concat(l.url," for more details.\n\n")),Object.assign({},n,{value:function(){return console.warn("DEPRECATION ".concat(u,": ").concat(o)),n.value.apply(this,arguments)}})}function ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fe(me,t)}function ye(e,t,n){var i=n.configurable,r=n.enumerable,a=n.initializer,o=n.value;return{configurable:i,enumerable:r,get:function(){if(this!==e){var n=a?a.call(this):o;return Object.defineProperty(this,t,{configurable:i,enumerable:r,writable:!0,value:n}),n}},set:ge(t)}}function be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fe(ye,t)}function ke(e,t,n){var i=t?t.call(e):n;return"function"==typeof i&&(i=i()),i}function we(e,t,n){var i=n.initializer,r=n.value;return e["__style__"+t]={initializer:i,value:r},n.initializer=function(){var e=ke(this,i,r);return this.css(e)},delete n.value,be(e,t,n)}function Ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fe(we,t)}function Se(e,t,n){var i=n.initializer,r=n.value;return n.initializer=function(){var e=Object.getPrototypeOf(this.__proto__)["__style__"+t],n=ke(this,e.initializer,e.value),a=ke(this,i,r);return a=Object.assign(n,a)},delete n.value,Ee(e,t,n)}function Ce(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fe(Se,t)}function xe(e,t,n){return n.writable=!1,n}function Te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fe(xe,t)}function Ae(e){if(0===e.length)return[];for(var t=[0],n=0,i=1;i<e.length;i+=1){for(;n>0&&e[i]!==e[n];)n=t[n];e[i]===e[n]&&(n+=1),t.push(n)}return t}function Le(e){return function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.captureContent=!0,n}return h(t,e),o(t,[{key:"wrap",value:function(e){if(e.length>0){e[0]=e[0].substring(e[0].indexOf(this.pattern)+this.pattern.length);var t=e.pop();return t=t.substring(0,t.lastIndexOf(this.endPattern)),e.push(t),{tag:this.tag,children:e}}}}]),t}(e)}function Ie(e){return function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.groupConsecutive=!1,n}return h(t,e),o(t,[{key:"isValidElement",value:function(e){return e.content&&"p"===e.content.tag&&e.content.children.length>0&&!e.content.children[0].tag&&e.content.children[0].startsWith(this.pattern)}},{key:"modify",value:function(e,t){for(var n=[],i=0;i<e.length;i+=1){var r=e[i];if(this.isValidElement(r))if(this.groupConsecutive){var a=[],o=void 0,s=void 0;for(o=e[i].start;i<e.length&&this.isValidElement(e[i]);)a.push(this.wrapItem(e[i].content.children)),i+=1;i-=1,s=e[i].end,n.push({start:o,end:s,content:this.wrap(a)})}else{var l=Object.assign({},r,{content:this.wrap(r.content.children)});n.push(l)}else n.push(r)}return n}},{key:"wrapItem",value:function(e){var t=e[0],n=t.indexOf(this.pattern),i=n+this.pattern.length;return e[0]=t.substring(i),{tag:this.itemTag,children:e}}},{key:"wrap",value:function(e){return{tag:this.tag,children:e}}}]),t}(e)}function Ne(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"processChildren",value:function(e,t){return 0===e.length?[]:[t.substring(e[0].start,e[e.length-1].end)]}}]),t}(e)}function Oe(){var e=[];e.push(function(){var e,t=new lc("Ala bala    portocala");if("A"!==(e=t.char()))throw Error("char seems to fail. Expected: 'A' , got '"+e+"'");if("la"!==(e=t.word()))throw Error("word seems to fail. Expected: 'la' , got '"+e+"'");if("bala"!==(e=t.word()))throw Error("word seems to fail. Expected: 'bala' , got '"+e+"'");if("portocala"!==(e=t.word()))throw Error("word seems to fail. Expected: 'portocala' , got '"+e+"'")}),e.push(function(){var e,t=new lc("Ala bala    portocala");if("Ala"!==(e=t.word()))throw Error("word seems to fail. Expected: 'Ala' , got '"+e+"'");if(" "!==(e=t.char()))throw Error("word seems to fail. Expected: ' ' , got '"+e+"'");if("bala    portocala"!==(e=t.line()))throw Error("line seems to fail. Expected: 'bala    portocala' , got '"+e+"'")}),e.push(function(){var e,t=new lc("Buna bate toba\n Bunica bate tare\nBunica bate tobaaa \nCu maciuca-n casa mare!");if("Buna bate toba"!==(e=t.line()))throw Error("line seems to fail. Expected: 'Buna bate toba' , got '"+e+"'");if("Bunica"!==(e=t.word()))throw Error("word seems to fail. Expected: 'Bunica' , got '"+e+"'");if(" bate tare"!==(e=t.line("\n")))throw Error("line seems to fail. Expected: ' bate tare' , got '"+e+"'");if("Bunica bate"!==(e=t.line("\n",11)))throw Error("line seems to fail. Expected: 'Bunica bate' , got '"+e+"'");if("tobaaa"!==(e=t.word()))throw Error("line seems to fail. Expected: 'tobaaa' , got '"+e+"'");if(t.char(),""!==(e=t.line()))throw Error("line seems to fail. Expected: '' , got '"+e+"'");if("Cu maciuca-n casa mare!"!==(e=t.line("\n",100)))throw Error("line seems to fail. Expected: 'Cu maciuca-n casa mare!' , got '"+e+"'")});for(var t=0,n=0;n<e.length;n+=1)try{e[n](),console.log("Test ",n," ran successfully.")}catch(e){t+=1,console.log("Failed StringStream test ",n,"! Reason: ",e)}console.log("Finished running all tests. Failed: ",t)}function Re(e,t){var n=new Map(e),i=!0,r=!1,a=void 0;try{for(var o,s=(t||[])[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l&&(Array.isArray(l)||(l=[l]),n.set(l[0],l[1]||{}))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}n.reverseNameMap=new Map;var u=!0,c=!1,h=void 0;try{for(var d,p=n[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=S(d.value,2),g=f[0],m=f[1];m=m||{},m.domName=m.domName||g,n.reverseNameMap.set(m.domName,g),n.set(g,m)}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}return n}function Me(e){document.STEM_DEBUG&&(e.node.stemElement=e)}function Pe(e){if(e instanceof Lc.Element&&(e=e.node),!e)return{left:0,top:0};for(var t=e.style&&e.style.position,n=0,i=0;e;){var r=e.style||{};if("absolute"===t&&"relative"===r.position)return{left:n,top:i};n+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent}return{left:n,top:i}}function De(e,t){e instanceof Lc.Element&&(e=e.node);var n=window.getComputedStyle(e,null);return t?n.getPropertyValue(t):n}function Be(e,t){e.parent.eraseChild(e,!1),t.appendChild(e)}function _e(e,t,n,i){var r=t?t.call(e):n;return"function"==typeof r&&(r=r()),Array.isArray(r)&&(r=Object.assign.apply(Object,[{}].concat(C(r)))),r}function Fe(e){return"__style__"+e}function Ue(e){return"__keyframes__"+e}function ze(){function e(e,i,r){var a=r.initializer,o=r.value;return r.objInitializer=function(){var n=_e(this,a,o);if(n.prefferedClassName=i,t.selector&&(n.selectorName=t.selector),t.inherit){var r=Object.getPrototypeOf(e)[Fe(i)];r||console.error("You're trying to inherit a rule that isn't implemented in the parent: "+i);return n=j({},_e(this,r.objInitializer,r.value),n)}return n},e[t.getKey(i)]=Object.assign({},r),r.initializer=function(){var e=r.objInitializer.call(this);return this[n](e)},delete r.value,sc(e,i,r)}var t=Object.assign.apply(Object,[{}].concat(Array.prototype.slice.call(arguments)));t.targetMethodName||console.error('WARNING: targetMethodName not specified in the options (default is "css")');var n=t.targetMethodName||"css";return e}function We(e){return ze(Object.assign({targetMethodName:"css",getKey:Fe,inherit:!1},e))}function He(e,t){return s({},e,t)}function Ve(e){return He(":hover",e)}function Ge(e){return He(":active",e)}function je(e){return He(":focus",e)}function Ye(e,t){return t>=0?Qc.interpolate(e,"#fff",t):Je(e,-t)}function Je(e,t){if(t>=0){for(var n=Qc.parseColor(Qc.interpolate(e,"#000",t)),i=0;i<3;i+=1){var r=Math.pow(255-n[i],.7);n[i]=parseInt(n[i]-r*t),n[i]<0&&(n[i]=0)}return Qc.convertToRgba(n)}return Ye(e,-t)}function qe(e,t){return Qc.isLight(e)?Je(e,t):Ye(e,t)}function Xe(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=[];t=n?Qc.isLight(e)?[.05,0,.05,.1,.15,.3,.8]:[-.3,0,.1,.2,.23,.1,-1]:[.1,0,-.2,-.3,-.35,-.2,-1];for(var r=0;r<t.length;r+=1)i.push(Je(e,t[r]));return i}function Ke(e){return"function"==typeof e&&(e="function"==typeof e.getInstance?e.getInstance():e()),e}function Qe(e){return e?Ke(e.theme&&e.theme.get(e)||e.styleSheet):null}function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$c.Global;return function(n){t.register(n,e)}}function $e(e){return qe(e,1)}function et(e,t,n){var i=n.value;return Object.assign({},n,{value:function(){return this.isLoaded()?i.call.apply(i,[this].concat(Array.prototype.slice.call(arguments))):(this.enqueueMethodCall(i,arguments),null)}})}function tt(e,t){Ep.ALL.push(t),t.isVariable()?Ep.VARIABLE_DURATION.push(t):Ep.FIXED_DURATION.push(t),Ep.CANONICAL[t.name]=t,t.pluralName&&(Ep.CANONICAL[t.pluralName]=t);var n=t.pluralName;Sp[e]=new Sp(s({},n,1))}function nt(){for(var e in Ep){var t=Ep[e];t instanceof Ep&&tt(e,t)}}function it(e,t){return e=Ap(e),t=Ap(t),e.diff(t)>+Ep.DAY||e.getDate()!==t.getDate()}function rt(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if("function"==typeof e[s])return e[s](),s}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return null}function at(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"client";return function(r){if(!e(r.targetTouches[0][i+"X"])){var a=r.targetTouches[0][i+"X"],o=new Hu,s=Ap.now(),l=function(e){t(e.targetTouches[0][i+"X"],a,Ap.now()-s)&&o.dispatch(!0)},u=function(){o.dispatch(!1)};document.addEventListener("touchmove",l),document.addEventListener("touchend",u),o.addListener(function(e){e&&n(),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",u)})}}}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kf,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qf;document.addEventListener("touchstart",at(function(n){return e.leftSidePanel.visible||0!==window.pageXOffset||n>t},function(e,t,r){return e-t>=n&&(e-t)/r>=i},function(){return e.toggleLeftSidePanel()})),e.leftSidePanel.addNodeListener("touchstart",at(function(){return!e.leftSidePanel.visible},function(e,t){return t-e>=n&&t-e>=i},function(){return e.toggleLeftSidePanel()}))}function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kf,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qf;document.addEventListener("touchstart",at(function(n){return e.rightSidePanel.visible||window.innerWidth-n>t},function(e,t,r){return t-e>=n&&(t-e)/r>=i},function(){return e.toggleRightSidePanel()})),e.rightSidePanel.addNodeListener("touchstart",at(function(){return!e.rightSidePanel.visible},function(e,t,r){return e-t>=n&&(e-t)/r>=i},function(){return e.toggleRightSidePanel()}))}function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kf,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qf;rc.isTouchDevice()&&(e.leftSidePanel&&ot(e,t,n,i),e.rightSidePanel&&st(e,t,n,i))}function ut(e){return{borderColor:Xe(e)[4]}}function ct(e){var t=Xe(e);return{color:t[6],backgroundColor:t[1],borderBottomColor:t[4]}}function ht(e){var t=hb.get(e);return t||(t=new cb(e),hb.set(e,t)),new Promise(function(e,n){t.resolve(e,n)})}function dt(e,t){Array.isArray(e)||(e=[e]);var n=e.map(function(e){return ht(e)});Promise.all(n).then(function(){t.apply(void 0,arguments)})}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yb,n=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{collapsed:!0}}},{key:"getCollapsibleStyleSheet",value:function(){return this.options.collapsibleStyleSheet||this.constructor.collapsibleStyleSheet}},{key:"expand",value:function(e){this.options.collapsed=!1,this.dispatch("expand");var t=this.getCollapsibleStyleSheet();e.addClass(t.collapsing),e.removeClass("hidden"),setTimeout(function(){e.removeClass(t.collapsed)},100)}},{key:"collapse",value:function(e){var t=this;this.options.collapsed=!0,this.dispatch("collapse");var n=this.getCollapsibleStyleSheet();e.addClass(n.collapsing),e.addClass(n.collapsed);var i=function(){t.options.collapsed&&e.addClass("hidden")};e.addNodeListener("transitionend",i)}}]),t}(e);return n.collapsibleStyleSheet=new t,n}function ft(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),e.renderCollapsible&&(this.renderCollapsible=e.renderCollapsible)}},{key:"render",value:function(){return[Lc.createElement("thead",null,this.renderTableHead()),this.renderTableBody()]}},{key:"getRowClass",value:function(){return Sb}},{key:"setColumns",value:function(e){var n=this,i={value:function(e){var t=n.getRowClass(e);return t===Sb||t.prototype instanceof Sb?Lc.createElement("a",{ref:"toggleButton",className:"".concat(Eb.button," ").concat(Eb.collapsedButton)}):Lc.createElement("a",{ref:"toggleButton"})},cellStyle:{width:"1%",whiteSpace:"nowrap"}};w(d(t.prototype),"setColumns",this).call(this,[i].concat(e))}}]),t}(e)}function gt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ef;return Ze(gb)(t=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.table)}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.columnSortingOrder=e.columnSortingOrder||[]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);var n=!0,i=!1,r=void 0;try{for(var a,o=this.columns[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var t=a.value;e["columnHeader"+t.id].addClickListener(function(){e.sortByColumn(t),e.dispatch("reorder")})}()}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"renderColumnHeader",value:function(e){var i=Lc.createElement(n,{className:this.styleSheet.sortIcon});return this.sortBy===e&&(i=this.sortDescending?Lc.createElement(n,{className:this.styleSheet.sortIcon,style:{visibility:"inherit"},direction:Mc.DOWN}):Lc.createElement(n,{className:this.styleSheet.sortIcon,style:{visibility:"inherit"},direction:Mc.UP})),Lc.createElement("div",{style:{position:"relative"}},w(d(t.prototype),"renderColumnHeader",this).call(this,e)," ",i)}},{key:"sortByColumn",value:function(e){e===this.sortBy?this.sortDescending=1!=this.sortDescending:this.sortDescending=!0,this.sortBy=e,this.redraw()}},{key:"getComparator",value:function(){var e=this;if(!this.sortBy&&0===this.columnSortingOrder.length)return null;var t=function(e,t,n){if(!n)return 0;var i=n.rawValue?n.rawValue(e):n.value(e),r=n.rawValue?n.rawValue(t):n.value(t);return n.cmp(i,r)};return function(n,i){var r;if(e.sortBy&&0!==(r=t(n,i,e.sortBy)))return e.sortDescending?-r:r;for(var a=0;a<e.columnSortingOrder.length;a+=1)if(r=t(n,i,e.columnSortingOrder[a]),e.columnSortingOrder[a].sortDescending&&(r=-r),0!==r)return r;return 0}}},{key:"sortEntries",value:function(e){var t=e.slice();return this.getComparator()&&t.sort(this.getComparator()),t}},{key:"getEntries",value:function(){return this.sortEntries(w(d(t.prototype),"getEntries",this).call(this))}},{key:"columnDefaults",value:function(e,n){w(d(t.prototype),"columnDefaults",this).call(this,e,n),e.hasOwnProperty("cmp")||(e.cmp=F)}}]),t}(e))||t}function mt(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(e)}function vt(e){return function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.lowIndex=0,n.highIndex=0,n}return h(t,e),o(t,[{key:"getRangePanelStyleSheet",value:function(){return Mb.getInstance()}},{key:"getRowHeight",value:function(){return this.options.rowHeight||this.getRangePanelStyleSheet().rowHeight}},{key:"getEntriesManager",value:function(){return this.entriesManager||(this.entriesManager=new Pb(w(d(t.prototype),"getEntries",this).call(this))),this.entriesManager}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.getRangePanelStyleSheet().default)}},{key:"render",value:function(){var e=this.getRangePanelStyleSheet(),t=this.getRowHeight()*this.getEntriesManager().getEntriesCount()+1+"px",n=this.containerHead?this.containerHead.getHeight():0;this.computeIndices();var i=this.node&&this.node.scrollLeft||0;return[Lc.createElement("div",{ref:"tableContainer",className:e.tableContainer,style:{paddingTop:n+"px",marginLeft:i+"px"}},Lc.createElement("div",{ref:"scrollablePanel",className:e.scrollablePanel},Lc.createElement("div",{ref:"fakePanel",className:e.fakePanel,style:{height:t}}),Lc.createElement("table",{ref:"container",className:"".concat(this.styleSheet.table," ").concat(e.table),style:{marginLeft:-i+"px"}},Lc.createElement("thead",{ref:"containerHead"},this.renderContainerHead()),Lc.createElement("tbody",{ref:"containerBody"},this.renderContainerBody())))),Lc.createElement("div",{ref:"footer",className:e.footer,style:{marginLeft:i+"px"}},Lc.createElement("span",{ref:"tableFooterText"},this.getFooterContent()),Lc.createElement(yg,{ref:"jumpToInput",placeholder:"jump to...",style:{textAlign:"center"}}),Lc.createElement(Md,{ref:"jumpToButton",size:Dc.SMALL,className:e.jumpToButton},"Go"))]}},{key:"applyScrollState",value:function(){this.scrollablePanel.node.scrollTop=this.scrollState}},{key:"saveScrollState",value:function(){this.scrollablePanel&&this.scrollablePanel.node&&(this.scrollState=this.scrollablePanel.node.scrollTop)}},{key:"renderContainerHead",value:function(){return this.renderTableHead()}},{key:"renderContainerBody",value:function(){this.rows=[];for(var e=this.getEntriesManager().getEntriesRange(this.lowIndex,this.highIndex),t=0;t<e.length;t+=1){var n=e[t],i=this.getRowClass(n);this.rows.push(Lc.createElement(i,l({key:this.getEntryKey(n,t+this.lowIndex),index:t+this.lowIndex},this.getRowOptions(n),{parent:this})))}return this.rows}},{key:"getFooterContent",
value:function(){return this.lowIndex+1>this.highIndex?"No results. Jump to ":"".concat(this.lowIndex+1," âžž ").concat(this.highIndex," of ").concat(this.getEntriesManager().getEntriesCount(),". ")}},{key:"jumpToIndex",value:function(e){var t=parseInt(e-(this.highIndex-this.lowIndex)/2+1),n=t/(this.getEntriesManager().getEntriesCount()+.5);this.scrollablePanel.node.scrollTop=n*this.scrollablePanel.node.scrollHeight}},{key:"computeIndices",value:function(){if(this.tableContainer&&this.containerHead&&this.footer){var e=this.scrollablePanel.node.scrollTop/this.scrollablePanel.node.scrollHeight,t=this.getEntriesManager().getEntriesCount();this.lowIndex=parseInt(e*(t+.5)),isNaN(this.lowIndex)&&(this.lowIndex=0),this.highIndex=Math.min(this.lowIndex+parseInt((this.getHeight()-this.containerHead.getHeight()-this.footer.getHeight())/this.getRowHeight()),t)}}},{key:"setScroll",value:function(){if(!this.inSetScroll){if(!document.body.contains(this.node))return this.tableFooterText.setChildren(this.getFooterContent()),void this.containerBody.setChildren(this.renderContainerBody());this.inSetScroll=!0,this.computeIndices(),this.tableContainer.setStyle("paddingTop",this.containerHead.getHeight()+"px"),this.fakePanel.setHeight(this.getRowHeight()*this.getEntriesManager().getEntriesCount()+"px"),this.scrollablePanel.setHeight(this.getRowHeight()*(this.highIndex-this.lowIndex)+"px"),this.tableFooterText.setChildren(this.getFooterContent()),this.containerBody.setChildren(this.renderContainerBody()),this.container.setWidth(this.fakePanel.getWidth()+"px"),this.inSetScroll=!1}}},{key:"addCompatibilityListeners",value:function(){var e=this;this.addNodeListener("mousedown",function(){e.container.setStyle("pointerEvents","all")}),this.container.addNodeListener("mouseup",function(t){var n=new MouseEvent("click",t),i=document.elementFromPoint(parseFloat(t.clientX),parseFloat(t.clientY));setTimeout(function(){e.container.setStyle("pointerEvents","none"),i.dispatchEvent(n)},100)}),this.addListener("setActive",function(){e.setScroll()}),this.addListener("resize",function(){e.setScroll()}),window.addEventListener("resize",function(){e.setScroll()})}},{key:"addTableAPIListeners",value:function(){var e=this;this.addListener("entriesChange",function(t){t.leftIndex>=e.highIndex||t.rightIndex<e.lowIndex||e.setScroll()}),this.addListener("showCurrentUser",function(){var t=e.getEntriesManager().getEntries().map(function(e){return e.userId}).indexOf(USER.id)+1;e.jumpToIndex(t)}),this.attachListener(this.getEntriesManager(),"update",function(){e.setScroll()})}},{key:"addSelfListeners",value:function(){var e=this;this.scrollablePanel.addNodeListener("scroll",function(){e.setScroll()}),this.addNodeListener("scroll",function(){e.tableContainer.setStyle("marginLeft",e.node.scrollLeft),e.footer.setStyle("marginLeft",e.node.scrollLeft),e.container.setStyle("marginLeft",-e.node.scrollLeft)}),window.addEventListener("resize",function(){e.tableContainer.setStyle("marginLeft",0),e.footer.setStyle("marginLeft",0),e.container.setStyle("marginLeft",0)}),this.jumpToInput.addNodeListener("keyup",function(t){"Enter"===t.code&&e.jumpToIndex(parseInt(e.jumpToInput.getValue()))}),this.jumpToButton.addClickListener(function(){e.jumpToIndex(parseInt(e.jumpToInput.getValue()))})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addCompatibilityListeners(),this.addTableAPIListeners(),this.addSelfListeners(),setTimeout(function(){e.redraw()})}}]),t}(Lc.Primitive(e,"div"))}function yt(e){if(gk!==e){gk=e;var t=!0,n=!1,i=void 0;try{for(var r,a=Lc.TranslationElements.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.redraw()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}}function bt(e){return""===(e+"").trim()}function kt(e,t){for(var n="",i=!1,r=[],a=0;a<e.length;)if("\\"===e[a]){if("\\"!==e[a+1]&&'"'!==e[a+1])throw"A backslash must be followed by another backslash or double quotes";n+=e[a+1],a+=2}else if('"'===e[a])if(!0!==i||a+1!==e.length&&!bt(e[a+1])){if(!1!==i||""!==n)throw"Double quotes must be preceded by backslash if they are inside a word";i=!0,a+=1}else i=!1,r.push(n),n="",a+=2;else!i&&bt(e[a])?(""!==n&&(r.push(n),n=""),a+=1):(n+=e[a],a+=1);if(""!==n&&r.push(n),!0===i)throw"Double quotes can't be left open";return r}function wt(e,t){t=t||{};var n=wt.canvas||(wt.canvas=document.createElement("canvas")),i=n.getContext("2d");return i.font=(t.fontSize||12)+"px "+(t.font||"Segoe UI"),i.measureText(e).width}function Et(e){for(var t=[],n=0,i=!1,r=1,a=0;a<e.length;a+=1)-1!=="0123456789".indexOf(e[a])?(i=!0,n=10*n+e.charCodeAt(a)-48):-1==="-".indexOf(e[a])||i?(i&&t.push(r*n),n=0,r=1,-1!=="-".indexOf(e[a])&&(r=-1),i=!1):r=-1;return i&&t.push(r*n),t}function St(e,t,n,i,r){return{position:"absolute",height:e+"px",width:e+"px",border:t+"px solid "+n,borderRadius:e+"px",borderRight:t+"px transparent",borderBottom:t+"px transparent",rotate:"0deg",transform:"rotate(45deg)",animationName:i,animationDuration:r,animationIterationCount:"infinite",animationTimingFunction:"linear"}}function Ct(e,t,n,i,r){return Lc.createElement("div",{style:St(e,t,n,i,r)})}function xt(e){return"/messages/"+e+"/"}function Tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[{toString:function(){return e}}].concat(C(Bk.all()))}function At(){return[{toString:function(){return""}},{value:jT.Status.WAITING,toString:function(){return"Waiting"}},{value:jT.Status.COMPILING,toString:function(){return"Compiling"}},{value:jT.Status.RUNNING,toString:function(){return"Running"}},{value:jT.Status.DONE,toString:function(){return"Done"}}]}function Lt(){return[{toString:function(){return""}},{value:jT.ResultStatus.TIME_LIMIT_EXCEEDED,toString:function(){return"Time Limit Exceeded"}},{value:jT.ResultStatus.MEMORY_LIMIT_EXCEEDED,toString:function(){return"Memory Limit Exceeded"}},{value:jT.ResultStatus.RUNTIME_ERROR,toString:function(){return"Runtime Error"}},{value:jT.ResultStatus.KILLED_BY_SIGNAL,toString:function(){return"Killed by signal"}},{value:jT.ResultStatus.WRONG_ANSWER,toString:function(){return"Wrong answer"}},{value:jT.ResultStatus.ACCEPTED,toString:function(){return"Accepted"}},{value:jT.ResultStatus.UNKNOWN,toString:function(){return"Internal Judge Error!"}}]}function It(e,t,n,i,r){var a=i(e,n),o=i(t,n);return a<o?-1:a>o?1:r?r(e,t,n):0}function Nt(e){var t=e.split(/[ \n]/),n=[],i=[],r=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(0===u.indexOf("#")){var c=u.replace("#","").split("-").join(" "),h=hk.getTagByNameInsensitive(c,!1);h&&i.push(h.id)}else""!==u&&n.push(u)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return[i,n]}function Ot(e,t){if(!t||0===t.length)return!0;if(!e)return!1;var n=new Set,i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)for(var l=o.value,u=hk.get(l);u;)n.add(u.id),u=hk.get(u.parentId)}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}var c=!0,h=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var g=p.value;if(!n.has(g))return!1}}catch(e){h=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(h)throw d}}return!0}function Rt(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(-1===e.longName.toLocaleLowerCase().indexOf(s.toLocaleLowerCase())){var l=!1;if(e.tagIds){var u=!0,c=!1,h=void 0;try{for(var d,p=e.tagIds[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;l=l||-1!==hk.get(f).name.toLocaleLowerCase().indexOf(s.toLocaleLowerCase())}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}}if(!l)return!1}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return!0}function Mt(){var e=yf.now().add({minutes:1}),t=3e5-e%3e5;return e.add(t,"milliseconds"),e}function Pt(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=PN.getCollapsedClassName()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.removeGutterDecoration(t,s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var h,d=PN.getUncollapsedClassName()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;e.removeGutterDecoration(t,p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}function Dt(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=PN.getCollapsedClassName()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.removeGutterDecoration(t.start.row,s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var h,d=PN.getUncollapsedClassName()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;e.addGutterDecoration(t.start.row,p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}function Bt(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=PN.getUncollapsedClassName()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.removeGutterDecoration(t.start.row,s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var h,d=PN.getCollapsedClassName()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;e.addGutterDecoration(t.start.row,p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}function _t(e,t){for(var n=[],i=0;i<e.length;i+=1)"editable"===e[i].type?n.push(null):n.push(e[i].lines.join("\n")+"\n");var r=new Map;if(!function e(i,a){if(-1===a)return-1===i;var o=i+" "+a;if(r.has(o))return-2!==r.get(o);if(n[a]){for(;-1!==n[a].indexOf("\r");)n[a]=n[a].replace("\r","");i+1<n[a].length||t.substring(i-n[a].length+1,i+1)!==n[a]||!e(i-n[a].length,a-1)?r.set(o,-2):r.set(o,i-n[a].length)}else{for(var s=0;s<=i;s+=1)e(i-s,a-1)&&r.set(o,i-s);r.has(o)||r.set(o,-2)}return-2!==r.get(o)}(t.length-1,n.length-1))return console.error("Failed to identify template."),null;for(var a=[],o=t.length-1,s=n.length-1;s>=0;s-=1){var l=r.get(o+" "+s);a.push([l+1,o]),o=l}a.reverse();for(var u=[],c=0;c<a.length;c+=1)if("editable"!==e[c].type){var h=a[c],d=function(e){for(var t=0;t+1<e.length&&"\n"!=e[e.length-1-t];)t+=1;return t},p=(t.substring(0,h[0]).match(/\n/g)||[]).length,f=d(t.substring(0,h[0]));f&&(f+=1);var g=(t.substring(0,h[1]+1).match(/\n/g)||[]).length,m=d(t.substring(0,h[1]+1));m&&(m+=1);var v=window.ace.require("ace/range").Range;u.push(new v(p,f,g,m))}return u}function Ft(e,t,n,i,r,a){var o=_t(e,t);if(!o)return null;var s=0,l=!0,u=!1,c=void 0;try{for(var h,d=e[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;if("editable"!==p.type){var f=o[s++];if(n.push(r.addMarker(f,PN.getInstance().readOnly)),a&&(f.start=r.doc.createAnchor(f.start),f.end=r.doc.createAnchor(f.end),f.end.$insertRight=!0),"collapsed"===p.type){var g=window.ace.require("ace/range").Range;i.push(r.addFold("...",new g(f.start.row,f.start.column,f.end.row-1,1e4))),i[i.length-1].isFolded=!0,Bt(r,f)}else"collapsible"===p.type?(i.push({isFolded:!1}),Dt(r,f)):"uncollapsible"===p.type&&i.push(null)}}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return o}function Ut(e,t){var n=t.getQuestions();if(e===NO.ALL)return n;if(e===NO.GENERAL)return n.filter(function(e){return!e.contestTaskId});var i=t.getContestTasks().find(function(t){return t.longName===e});return n.filter(function(e){return e.contestTaskId===i.id})}function zt(e,t,n,i){var r={name:"Translation for "+e.name+" in "+t.name,baseArticleId:e.id,dependency:e.dependency,languageId:t.id,isPublic:e.isPublic,markup:e.markup,userCreatedId:n};zu.postJSON("/create_article/",r).then(function(e){return i.hide()},function(e){return i.messageArea.showMessage(e.message,"red")})}function Wt(e,t){e.node.textContent=t,e.show(),setTimeout(function(){e.hide()},5e3)}function Ht(e){return""===e?0:"s"===e[e.length-1]||"S"===e[e.length-1]?1e3*parseFloat(e.substr(0,e.length-1)):parseFloat(e)||0}function Vt(e){return""===e?0:e.length>=2&&"MB"===e.substring(e.length-2,e.length).toUpperCase()?1024*parseFloat(e.substring(0,e.length-2)):parseFloat(e)||0}function Gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.getBox(),i=new Map,r=new Set,a=new Map,o=new Map,s=new Map,l=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1===n?o.set(t,0):o.set(t,o.get(n)+1),s.set(t,[]),r.add(t);for(var i=t.getIncidentEdges(),a=0;a<i.length;a+=1){var l=i[a].getTarget()===t?i[a].getSource():i[a].getTarget();r.has(l)||(s.get(t).push(l),e(l,t))}},u=function e(t){a.set(t,0);for(var n=s.get(t),i=0;i<n.length;i+=1)e(n[i]),a.set(t,a.get(t)+a.get(n[i]));0===a.get(t)&&a.set(t,1)},c=function e(t,n,r){i.has(t)||i.set(t,{}),i.get(t).x=(n+r)/2;for(var o=(r-n)/a.get(t),l=n,u=s.get(t),c=0;c<u.length;c+=1)e(u[c],l,l+o*a.get(u[c])),l+=o*a.get(u[c])};if(t)l(t),u(t),c(t,n.x,n.x+n.width);else{for(var h=0,d=[],p=0;p<e.nodes.length;p+=1)r.has(e.nodes[p])||(l(e.nodes[p]),u(e.nodes[p]),h+=a.get(e.nodes[p]),d.push(e.nodes[p]));for(var f=n.width/h,g=n.x,m=0,v=d;m<v.length;m++){var y=v[m],b=g+f*a.get(y);c(y,g,b),g=b}}return function(){for(var t=1,r=0;r<e.nodes.length;r+=1)t=Math.max(t,1+o.get(e.nodes[r]));var a;a=t>1?(n.height-30-80)/(t-1):0;for(var s=0;s<e.nodes.length;s+=1){var l=e.nodes[s];i.has(l)||i.set(l,{}),i.get(l).y=n.y+30+a*o.get(l)}}(),i}function jt(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.getBox(),i=new Map,r=new Set,a=new Map,o=new Map,s=new Map;t.nodeFathers=new Map;t.roots=[];for(var l=0,u=0;u<e.nodes.length;u+=1)r.has(e.nodes[u])||(t.roots.push(e.nodes[u]),function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1===i?o.set(n,0):(o.set(n,o.get(i)+1),t.nodeFathers.set(n,i)),s.set(n,[]),r.add(n);for(var a=n.getIncidentEdges(),l=0;l<a.length;l+=1)if(a[l].getTarget()!==n){var u=a[l].getTarget();r.has(u)||(s.get(n).push(u),e(u,n))}}(e.nodes[u]));for(var c=0;c<t.roots.length;c+=1)!function e(t){a.set(t,0);for(var n=s.get(t),i=0;i<n.length;i+=1)e(n[i]),a.set(t,a.get(t)+a.get(n[i]));0===a.get(t)&&a.set(t,1)}(t.roots[c]),l+=a.get(t.roots[c]);for(var h=n.width/l,d=n.x,p=0;p<t.roots.length;p+=1){var f=d+h*a.get(t.roots[p]);!function e(t,n,r){i.has(t)||i.set(t,{}),i.get(t).x=(n+r)/2;for(var o=(r-n)/a.get(t),l=n,u=s.get(t),c=0;c<u.length;c+=1)e(u[c],l,l+o*a.get(u[c])),l+=o*a.get(u[c])}(t.roots[p],d,f),d=f}return function(){for(var t=1,r=0;r<e.nodes.length;r+=1)t=Math.max(t,1+o.get(e.nodes[r]));var a;a=t>1?(n.height-30-80)/(t-1):0;for(var s=0;s<e.nodes.length;s+=1){var l=e.nodes[s];i.has(l)||i.set(l,{}),i.get(l).y=n.y+30+a*o.get(l)}}(),i}function Yt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jt(e){return 1===e.length&&(e=qt(e)),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var a=i+r>>>1;e(t[a],n)<0?i=a+1:r=a}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var a=i+r>>>1;e(t[a],n)>0?r=a:i=a+1}return i}}}function qt(e){return function(t,n){return Yt(e(t),n)}}function Xt(e,t,n){var i,r,a,o,s=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(o=Kt(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(r=Math.ceil(t-e+1));++s<r;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(e-s)/o;return i&&a.reverse(),a}function Kt(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=e_?10:a>=t_?5:a>=n_?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=e_?10:a>=t_?5:a>=n_?2:1)}function Qt(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=e_?r*=10:a>=t_?r*=5:a>=n_&&(r*=2),t<e?-r:r}function Zt(){}function $t(e,t){var n=new Zt;if(e instanceof Zt)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var i,r=-1,a=e.length;if(null==t)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t(i=e[r],r,e),i)}else if(e)for(var o in e)n.set(o,e[o]);return n}function en(){}function tn(e,t){var n=new en;if(e instanceof en)e.each(function(e){n.add(e)});else if(e){var i=-1,r=e.length;if(null==t)for(;++i<r;)n.add(e[i]);else for(;++i<r;)n.add(t(e[i],i,e))}return n}function nn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rn(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function an(){}function on(e){var t;return e=(e+"").trim().toLowerCase(),(t=c_.exec(e))?(t=parseInt(t[1],16),new hn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=h_.exec(e))?sn(parseInt(t[1],16)):(t=d_.exec(e))?new hn(t[1],t[2],t[3],1):(t=p_.exec(e))?new hn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=f_.exec(e))?ln(t[1],t[2],t[3],t[4]):(t=g_.exec(e))?ln(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=m_.exec(e))?dn(t[1],t[2]/100,t[3]/100,1):(t=v_.exec(e))?dn(t[1],t[2]/100,t[3]/100,t[4]):y_.hasOwnProperty(e)?sn(y_[e]):"transparent"===e?new hn(NaN,NaN,NaN,0):null}function sn(e){return new hn(e>>16&255,e>>8&255,255&e,1)}function ln(e,t,n,i){return i<=0&&(e=t=n=NaN),new hn(e,t,n,i)}function un(e){return e instanceof an||(e=on(e)),e?(e=e.rgb(),new hn(e.r,e.g,e.b,e.opacity)):new hn}function cn(e,t,n,i){return 1===arguments.length?un(e):new hn(e,t,n,null==i?1:i)}function hn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function dn(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gn(e,t,n,i)}function pn(e){if(e instanceof gn)return new gn(e.h,e.s,e.l,e.opacity);if(e instanceof an||(e=on(e)),!e)return new gn;if(e instanceof gn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,s=a-r,l=(a+r)/2;return s?(o=t===a?(n-i)/s+6*(n<i):n===a?(i-t)/s+2:(t-n)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new gn(o,s,l,e.opacity)}function fn(e,t,n,i){return 1===arguments.length?pn(e):new gn(e,t,n,null==i?1:i)}function gn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function mn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function vn(e){if(e instanceof bn)return new bn(e.l,e.a,e.b,e.opacity);if(e instanceof Tn){var t=e.h*b_;return new bn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof hn||(e=un(e));var n=Sn(e.r),i=Sn(e.g),r=Sn(e.b),a=kn((.4124564*n+.3575761*i+.1804375*r)/w_),o=kn((.2126729*n+.7151522*i+.072175*r)/E_);return new bn(116*o-16,500*(a-o),200*(o-kn((.0193339*n+.119192*i+.9503041*r)/S_)),e.opacity)}function yn(e,t,n,i){return 1===arguments.length?vn(e):new bn(e,t,n,null==i?1:i)}function bn(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function kn(e){return e>A_?Math.pow(e,1/3):e/T_+C_}function wn(e){return e>x_?e*e*e:T_*(e-C_)}function En(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Sn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Cn(e){if(e instanceof Tn)return new Tn(e.h,e.c,e.l,e.opacity);e instanceof bn||(e=vn(e));var t=Math.atan2(e.b,e.a)*k_;return new Tn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function xn(e,t,n,i){return 1===arguments.length?Cn(e):new Tn(e,t,n,null==i?1:i)}function Tn(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function An(e){if(e instanceof In)return new In(e.h,e.s,e.l,e.opacity);e instanceof hn||(e=un(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(D_*i+M_*t-P_*n)/(D_+M_-P_),a=i-r,o=(R_*(n-r)-N_*a)/O_,s=Math.sqrt(o*o+a*a)/(R_*r*(1-r)),l=s?Math.atan2(o,a)*k_-120:NaN;return new In(l<0?l+360:l,s,r,e.opacity)}function Ln(e,t,n,i){return 1===arguments.length?An(e):new In(e,t,n,null==i?1:i)}function In(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function Nn(e){return function(){return e}}function On(e,t){return function(n){return e+n*t}}function Rn(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Mn(e,t){var n=t-e;return n?On(e,n>180||n<-180?n-360*Math.round(n/360):n):Nn(isNaN(e)?t:e)}function Pn(e){return 1==(e=+e)?Dn:function(t,n){return n-t?Rn(t,n,e):Nn(isNaN(t)?n:t)}}function Dn(e,t){var n=t-e;return n?On(e,n):Nn(isNaN(e)?t:e)}function Bn(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=Vn(e[n],t[n]);for(;n<i;++n)o[n]=t[n];return function(e){for(n=0;n<r;++n)o[n]=a[n](e);return o}}function _n(e,t){var n=new Date;return e=+e,t-=e,function(i){return n.setTime(e+t*i),n}}function Fn(e,t){return e=+e,t-=e,function(n){return e+t*n}}function Un(e,t){var n,r={},a={};null!==e&&"object"===i(e)||(e={}),null!==t&&"object"===i(t)||(t={});for(n in t)n in e?r[n]=Vn(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}function zn(e){return function(){return e}}function Wn(e){return function(t){return e(t)+""}}function Hn(e,t){var n,i,r,a=W_.lastIndex=H_.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=W_.exec(e))&&(i=H_.exec(t));)(r=i.index)>a&&(r=t.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Fn(n,i)})),a=H_.lastIndex;return a<t.length&&(r=t.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?Wn(l[0].x):zn(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function Vn(e,t){var n,r=i(t);return null==t||"boolean"===r?Nn(t):("number"===r?Fn:"string"===r?(n=on(t))?(t=n,z_):Hn:t instanceof on?z_:t instanceof Date?_n:Array.isArray(t)?Bn:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Un:Fn)(e,t)}function Gn(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}}function jn(e,t,n,i,r,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*V_,skewX:Math.atan(l)*V_,scaleX:o,scaleY:s}}function Yn(e){return"none"===e?G_:(B_||(B_=document.createElement("DIV"),__=document.documentElement,F_=document.defaultView),B_.style.transform=e,e=F_.getComputedStyle(__.appendChild(B_),null).getPropertyValue("transform"),__.removeChild(B_),e=e.slice(7,-1).split(","),jn(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function Jn(e){return null==e?G_:(U_||(U_=document.createElementNS("http://www.w3.org/2000/svg","g")),U_.setAttribute("transform",e),(e=U_.transform.baseVal.consolidate())?(e=e.matrix,jn(e.a,e.b,e.c,e.d,e.e,e.f)):G_)}function qn(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}function a(e,i,r,a,o,s){if(e!==r||i!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:Fn(e,r)},{i:l-2,x:Fn(i,a)})}else(r||a)&&o.push("translate("+r+t+a+n)}function o(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Fn(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}function s(e,t,n,a){e!==t?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Fn(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}function l(e,t,n,i,a,o){if(e!==n||t!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Fn(e,n)},{i:s-2,x:Fn(t,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}return function(t,n){var i=[],r=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,i,r),o(t.rotate,n.rotate,i,r),s(t.skewX,n.skewX,i,r),l(t.scaleX,t.scaleY,n.scaleX,n.scaleY,i,r),t=n=null,function(e){for(var t,n=-1,a=r.length;++n<a;)i[(t=r[n]).i]=t.x(e);return i.join("")}}}function Xn(e){return((e=Math.exp(e))+1/e)/2}function Kn(e){return((e=Math.exp(e))-1/e)/2}function Qn(e){return((e=Math.exp(2*e))-1)/(e+1)}function Zn(e,t){var n,i,r=e[0],a=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-r,h=l-a,d=c*c+h*h;if(d<K_)i=Math.log(u/o)/J_,n=function(e){return[r+e*c,a+e*h,o*Math.exp(J_*e*i)]};else{var p=Math.sqrt(d),f=(u*u-o*o+X_*d)/(2*o*q_*p),g=(u*u-o*o-X_*d)/(2*u*q_*p),m=Math.log(Math.sqrt(f*f+1)-f),v=Math.log(Math.sqrt(g*g+1)-g);i=(v-m)/J_,n=function(e){var t=e*i,n=Xn(m),s=o/(q_*p)*(n*Qn(J_*t+m)-Kn(m));return[r+s*c,a+s*h,o*n/Xn(J_*t+m)]}}return n.duration=1e3*i,n}function $n(e){return function t(n){function i(t,i){var r=e((t=Ln(t)).h,(i=Ln(i)).h),a=Dn(t.s,i.s),o=Dn(t.l,i.l),s=Dn(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,i.gamma=t,i}(1)}function ei(e){return function(){return e}}function ti(e){return+e}function ni(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ei(t)}function ii(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:i(e)}}}function ri(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:i(e)}}}function ai(e,t,n,i){var r=e[0],a=e[1],o=t[0],s=t[1];return a<r?(r=n(a,r),o=i(s,o)):(r=n(r,a),o=i(o,s)),function(e){return o(r(e))}}function oi(e,t,n,i){var r=Math.min(e.length,t.length)-1,a=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)a[s]=n(e[s],e[s+1]),o[s]=i(t[s],t[s+1]);return function(t){var n=$B(e,t,1,r)-1;return o[n](a[n](t))}}function si(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function li(e,t){function n(){return r=Math.min(s.length,l.length)>2?oi:ai,a=o=null,i}function i(t){return(a||(a=r(s,l,c?ii(e):e,u)))(+t)}var r,a,o,s=$_,l=$_,u=Vn,c=!1;return i.invert=function(e){return(o||(o=r(l,s,ni,c?ri(t):t)))(+e)},i.domain=function(e){return arguments.length?(s=a_.call(e,ti),n()):s.slice()},i.range=function(e){return arguments.length?(l=o_.call(e),n()):l.slice()},i.rangeRound=function(e){return l=o_.call(e),u=Gn,n()},i.clamp=function(e){return arguments.length?(c=!!e,n()):c},i.interpolate=function(e){return arguments.length?(u=e,n()):u},n()}function ui(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ci(e){return e=ui(Math.abs(e)),e?e[1]:NaN}function hi(e,t){return function(n,i){for(var r=n.length,a=[],o=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),a.push(n.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function di(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}function pi(e,t){e=e.toPrecision(t);e:for(var n,i=e.length,r=1,a=-1;r<i;++r)switch(e[r]){case".":a=n=r;break;case"0":0===a&&(a=r),n=r;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e}function fi(e,t){var n=ui(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(Q_=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+ui(e,Math.max(0,t+a-1))[0]}function gi(e,t){var n=ui(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}function mi(e){return new vi(e)}function vi(e){if(!(t=tF.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",i=t[2]||">",r=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],l=!!t[7],u=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(l=!0,c="g"):eF[c]||(c=""),(o||"0"===n&&"="===i)&&(o=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=a,this.zero=o,this.width=s,this.comma=l,this.precision=u,this.type=c}function yi(e){return e}function bi(e){function t(e){function t(e){var t,r,s,c=m,k=v;if("c"===g)k=y(e)+k,e="";else{e=+e;var w=e<0;if(e=y(Math.abs(e),f),w&&0==+e&&(w=!1),c=(w?"("===u?u:"-":"-"===u||"("===u?"":u)+c,k=("s"===g?aF[8+Q_/3]:"")+k+(w&&"("===u?")":""),b)for(t=-1,r=e.length;++t<r;)if(48>(s=e.charCodeAt(t))||s>57){k=(46===s?a+e.slice(t+1):e.slice(t))+k,e=e.slice(0,t);break}}p&&!h&&(e=i(e,1/0));var E=c.length+e.length+k.length,S=E<d?new Array(d-E+1).join(n):"";switch(p&&h&&(e=i(S+e,S.length?d-k.length:1/0),S=""),l){case"<":e=c+e+k+S;break;case"=":e=c+S+e+k;break;case"^":e=S.slice(0,E=S.length>>1)+c+e+k+S.slice(E);break;default:e=S+c+e+k}return o(e)}e=mi(e);var n=e.fill,l=e.align,u=e.sign,c=e.symbol,h=e.zero,d=e.width,p=e.comma,f=e.precision,g=e.type,m="$"===c?r[0]:"#"===c&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",v="$"===c?r[1]:/[%p]/.test(g)?s:"",y=eF[g],b=!g||/[defgprs%]/.test(g);return f=null==f?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),t.toString=function(){return e+""},t}function n(e,n){var i=t((e=mi(e),e.type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(ci(n)/3))),a=Math.pow(10,-r),o=aF[8+r/3];return function(e){return i(a*e)+o}}var i=e.grouping&&e.thousands?hi(e.grouping,e.thousands):yi,r=e.currency,a=e.decimal,o=e.numerals?di(e.numerals):yi,s=e.percent||"%";return{format:t,formatPrefix:n}}function ki(e){return Math.max(0,-ci(Math.abs(e)))}function wi(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ci(t)/3)))-ci(Math.abs(e)))}function Ei(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ci(t)-ci(e))+1}function Si(e,t,n){var i,r=e[0],a=e[e.length-1],o=Qt(r,a,null==t?10:t);switch(n=mi(null==n?",f":n),n.type){case"s":var s=Math.max(Math.abs(r),Math.abs(a));return null!=n.precision||isNaN(i=wi(o,s))||(n.precision=i),rF(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=Ei(o,Math.max(Math.abs(r),Math.abs(a))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=ki(o))||(n.precision=i-2*("%"===n.type))}return iF(n)}function Ci(e){var t=e.domain;return e.ticks=function(e){var n=t();return Xt(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Si(t(),e,n)},e.nice=function(n){null==n&&(n=10);var i,r=t(),a=0,o=r.length-1,s=r[a],l=r[o];return l<s&&(i=s,s=l,l=i,i=a,a=o,o=i),i=Kt(s,l,n),i>0?(s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i,i=Kt(s,l,n)):i<0&&(s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i,i=Kt(s,l,n)),i>0?(r[a]=Math.floor(s/i)*i,r[o]=Math.ceil(l/i)*i,t(r)):i<0&&(r[a]=Math.ceil(s*i)/i,r[o]=Math.floor(l*i)/i,t(r)),e},e}function xi(){var e=li(ni,Fn);return e.copy=function(){return si(e,xi())},Ci(e)}function Ti(e,t){e=e.slice();var n,i=0,r=e.length-1,a=e[i],o=e[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),e[i]=t.floor(a),e[r]=t.ceil(o),e}function Ai(e,t,n,i){function r(t){return e(t=new Date(+t)),t}return r.floor=r,r.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},r.round=function(e){var t=r(e),n=r.ceil(e);return e-t<n-e?t:n},r.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return s;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<i);return s},r.filter=function(n){return Ai(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););})},n&&(r.count=function(t,i){return oF.setTime(+t),sF.setTime(+i),e(oF),e(sF),Math.floor(n(oF,sF))},r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?function(t){return i(t)%e==0}:function(t){return r.count(0,t)%e==0}):r:null}),r}function Li(e){return Ai(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uF)/cF})}function Ii(e){return Ai(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/cF})}function Ni(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Oi(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ri(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Mi(e){function t(e,t){return function(n){var i,r,a,o=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(r=NF[i=e.charAt(++s)])?i=e.charAt(++s):r="e"===i?" ":"0",(a=t[i])&&(i=a(n,r)),o.push(i),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function n(e,t){
return function(n){var r,a,o=Ri(1900),s=i(o,e,n+="",0);if(s!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=Oi(Ri(o.y)),a=r.getUTCDay(),r=a>4||0===a?EF.ceil(r):EF(r),r=kF.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=t(Ri(o.y)),a=r.getDay(),r=a>4||0===a?mF.ceil(r):mF(r),r=fF.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Oi(Ri(o.y)).getUTCDay():t(Ri(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Oi(o)):t(o)}}function i(e,t,n,i){for(var r,a,o=0,s=t.length,l=n.length;o<s;){if(i>=l)return-1;if(37===(r=t.charCodeAt(o++))){if(r=t.charAt(o++),!(a=H[r in NF?t.charAt(o++):r])||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function r(e,t,n){var i=N.exec(t.slice(n));return i?(e.p=O[i[0].toLowerCase()],n+i[0].length):-1}function a(e,t,n){var i=P.exec(t.slice(n));return i?(e.w=D[i[0].toLowerCase()],n+i[0].length):-1}function o(e,t,n){var i=R.exec(t.slice(n));return i?(e.w=M[i[0].toLowerCase()],n+i[0].length):-1}function s(e,t,n){var i=F.exec(t.slice(n));return i?(e.m=U[i[0].toLowerCase()],n+i[0].length):-1}function l(e,t,n){var i=B.exec(t.slice(n));return i?(e.m=_[i[0].toLowerCase()],n+i[0].length):-1}function u(e,t,n){return i(e,E,t,n)}function c(e,t,n){return i(e,S,t,n)}function h(e,t,n){return i(e,C,t,n)}function d(e){return A[e.getDay()]}function p(e){return T[e.getDay()]}function f(e){return I[e.getMonth()]}function g(e){return L[e.getMonth()]}function m(e){return x[+(e.getHours()>=12)]}function v(e){return A[e.getUTCDay()]}function y(e){return T[e.getUTCDay()]}function b(e){return I[e.getUTCMonth()]}function k(e){return L[e.getUTCMonth()]}function w(e){return x[+(e.getUTCHours()>=12)]}var E=e.dateTime,S=e.date,C=e.time,x=e.periods,T=e.days,A=e.shortDays,L=e.months,I=e.shortMonths,N=Bi(x),O=_i(x),R=Bi(T),M=_i(T),P=Bi(A),D=_i(A),B=Bi(L),_=_i(L),F=Bi(I),U=_i(I),z={a:d,A:p,b:f,B:g,c:null,d:ir,e:ir,f:lr,H:rr,I:ar,j:or,L:sr,m:ur,M:cr,p:m,Q:Fr,s:Ur,S:hr,u:dr,U:pr,V:fr,w:gr,W:mr,x:null,X:null,y:vr,Y:yr,Z:br,"%":_r},W={a:v,A:y,b:b,B:k,c:null,d:kr,e:kr,f:xr,H:wr,I:Er,j:Sr,L:Cr,m:Tr,M:Ar,p:w,Q:Fr,s:Ur,S:Lr,u:Ir,U:Nr,V:Or,w:Rr,W:Mr,x:null,X:null,y:Pr,Y:Dr,Z:Br,"%":_r},H={a:a,A:o,b:s,B:l,c:u,d:Ji,e:Ji,f:$i,H:Xi,I:Xi,j:qi,L:Zi,m:Yi,M:Ki,p:r,Q:tr,s:nr,S:Qi,u:Ui,U:zi,V:Wi,w:Fi,W:Hi,x:c,X:h,y:Gi,Y:Vi,Z:ji,"%":er};return z.x=t(S,z),z.X=t(C,z),z.c=t(E,z),W.x=t(S,W),W.X=t(C,W),W.c=t(E,W),{format:function(e){var n=t(e+="",z);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",Ni);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",W);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,Oi);return t.toString=function(){return e},t}}}function Pi(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function Di(e){return e.replace(MF,"\\$&")}function Bi(e){return new RegExp("^(?:"+e.map(Di).join("|")+")","i")}function _i(e){for(var t={},n=-1,i=e.length;++n<i;)t[e[n].toLowerCase()]=n;return t}function Fi(e,t,n){var i=OF.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Ui(e,t,n){var i=OF.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function zi(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Wi(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Hi(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function Vi(e,t,n){var i=OF.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Gi(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function ji(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Yi(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Ji(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function qi(e,t,n){var i=OF.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function Xi(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Ki(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Qi(e,t,n){var i=OF.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Zi(e,t,n){var i=OF.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function $i(e,t,n){var i=OF.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function er(e,t,n){var i=RF.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function tr(e,t,n){var i=OF.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function nr(e,t,n){var i=OF.exec(t.slice(n));return i?(e.Q=1e3*+i[0],n+i[0].length):-1}function ir(e,t){return Pi(e.getDate(),t,2)}function rr(e,t){return Pi(e.getHours(),t,2)}function ar(e,t){return Pi(e.getHours()%12||12,t,2)}function or(e,t){return Pi(1+fF.count(bF(e),e),t,3)}function sr(e,t){return Pi(e.getMilliseconds(),t,3)}function lr(e,t){return sr(e,t)+"000"}function ur(e,t){return Pi(e.getMonth()+1,t,2)}function cr(e,t){return Pi(e.getMinutes(),t,2)}function hr(e,t){return Pi(e.getSeconds(),t,2)}function dr(e){var t=e.getDay();return 0===t?7:t}function pr(e,t){return Pi(gF.count(bF(e),e),t,2)}function fr(e,t){var n=e.getDay();return e=n>=4||0===n?vF(e):vF.ceil(e),Pi(vF.count(bF(e),e)+(4===bF(e).getDay()),t,2)}function gr(e){return e.getDay()}function mr(e,t){return Pi(mF.count(bF(e),e),t,2)}function vr(e,t){return Pi(e.getFullYear()%100,t,2)}function yr(e,t){return Pi(e.getFullYear()%1e4,t,4)}function br(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pi(t/60|0,"0",2)+Pi(t%60,"0",2)}function kr(e,t){return Pi(e.getUTCDate(),t,2)}function wr(e,t){return Pi(e.getUTCHours(),t,2)}function Er(e,t){return Pi(e.getUTCHours()%12||12,t,2)}function Sr(e,t){return Pi(1+kF.count(CF(e),e),t,3)}function Cr(e,t){return Pi(e.getUTCMilliseconds(),t,3)}function xr(e,t){return Cr(e,t)+"000"}function Tr(e,t){return Pi(e.getUTCMonth()+1,t,2)}function Ar(e,t){return Pi(e.getUTCMinutes(),t,2)}function Lr(e,t){return Pi(e.getUTCSeconds(),t,2)}function Ir(e){var t=e.getUTCDay();return 0===t?7:t}function Nr(e,t){return Pi(wF.count(CF(e),e),t,2)}function Or(e,t){var n=e.getUTCDay();return e=n>=4||0===n?SF(e):SF.ceil(e),Pi(SF.count(CF(e),e)+(4===CF(e).getUTCDay()),t,2)}function Rr(e){return e.getUTCDay()}function Mr(e,t){return Pi(EF.count(CF(e),e),t,2)}function Pr(e,t){return Pi(e.getUTCFullYear()%100,t,2)}function Dr(e,t){return Pi(e.getUTCFullYear()%1e4,t,4)}function Br(){return"+0000"}function _r(){return"%"}function Fr(e){return+e}function Ur(e){return Math.floor(+e/1e3)}function zr(e){return e.toISOString()}function Wr(e){var t=new Date(e);return isNaN(t)?null:t}function Hr(e){return new Date(e)}function Vr(e){return e instanceof Date?+e:+new Date(+e)}function Gr(e,t,n,i,r,a,o,s,l){function u(s){return(o(s)<s?f:a(s)<s?g:r(s)<s?m:i(s)<s?v:t(s)<s?n(s)<s?y:b:e(s)<s?k:w)(s)}function c(t,n,i,r){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(i-n)/t,o=Jt(function(e){return e[2]}).right(E,a);o===E.length?(r=Qt(n/zF,i/zF,t),t=e):o?(o=E[a/E[o-1][2]<E[o][2]/a?o-1:o],r=o[1],t=o[0]):(r=Math.max(Qt(n,i,t),1),t=s)}return null==r?t:t.every(r)}var h=li(ni,Fn),d=h.invert,p=h.domain,f=l(".%L"),g=l(":%S"),m=l("%I:%M"),v=l("%I %p"),y=l("%a %d"),b=l("%b %d"),k=l("%B"),w=l("%Y"),E=[[o,1,PF],[o,5,5*PF],[o,15,15*PF],[o,30,30*PF],[a,1,DF],[a,5,5*DF],[a,15,15*DF],[a,30,30*DF],[r,1,BF],[r,3,3*BF],[r,6,6*BF],[r,12,12*BF],[i,1,_F],[i,2,2*_F],[n,1,FF],[t,1,UF],[t,3,3*UF],[e,1,zF]];return h.invert=function(e){return new Date(d(e))},h.domain=function(e){return arguments.length?p(a_.call(e,Vr)):p().map(Hr)},h.ticks=function(e,t){var n,i=p(),r=i[0],a=i[i.length-1],o=a<r;return o&&(n=r,r=a,a=n),n=c(e,r,a,t),n=n?n.range(r,a+1):[],o?n.reverse():n},h.tickFormat=function(e,t){return null==t?u:l(t)},h.nice=function(e,t){var n=p();return(e=c(e,n[0],n[n.length-1],t))?p(Ti(n,e)):h},h.copy=function(){return si(h,Gr(e,t,n,i,r,a,o,s,l))},h}function jr(){return Gr(bF,yF,gF,fF,pF,dF,hF,lF,TF).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function Yr(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}function Jr(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function qr(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),HF.hasOwnProperty(t)?{space:HF[t],local:e}:e}function Xr(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===WF&&t.documentElement.namespaceURI===WF?t.createElement(e):t.createElementNS(n,e)}}function Kr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Qr(e){var t=qr(e);return(t.local?Kr:Xr)(t)}function Zr(){}function $r(e){return null==e?Zr:function(){return this.querySelector(e)}}function ea(e){"function"!=typeof e&&(e=$r(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=t[r],l=s.length,u=i[r]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new Lo(i,this._parents)}function ta(){return[]}function na(e){return null==e?ta:function(){return this.querySelectorAll(e)}}function ia(e){"function"!=typeof e&&(e=na(e));for(var t=this._groups,n=t.length,i=[],r=[],a=0;a<n;++a)for(var o,s=t[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(i.push(e.call(o,o.__data__,u,s)),r.push(o));return new Lo(i,r)}function ra(e){"function"!=typeof e&&(e=YF(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,o=t[r],s=o.length,l=i[r]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new Lo(i,this._parents)}function aa(e){return new Array(e.length)}function oa(){return new Lo(this._enter||this._groups.map(aa),this._parents)}function sa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function la(e){return function(){return e}}function ua(e,t,n,i,r,a){for(var o,s=0,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],i[s]=o):n[s]=new sa(e,a[s]);for(;s<l;++s)(o=t[s])&&(r[s]=o)}function ca(e,t,n,i,r,a,o){var s,l,u,c={},h=t.length,d=a.length,p=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(p[s]=u=JF+o.call(l,l.__data__,s,t),u in c?r[s]=l:c[u]=l);for(s=0;s<d;++s)u=JF+o.call(e,a[s],s,a),(l=c[u])?(i[s]=l,l.__data__=a[s],c[u]=null):n[s]=new sa(e,a[s]);for(s=0;s<h;++s)(l=t[s])&&c[p[s]]===l&&(r[s]=l)}function ha(e,t){if(!e)return p=new Array(this.size()),u=-1,this.each(function(e){p[++u]=e}),p;var n=t?ca:ua,i=this._parents,r=this._groups;"function"!=typeof e&&(e=la(e));for(var a=r.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=i[u],h=r[u],d=h.length,p=e.call(c,c&&c.__data__,u,i),f=p.length,g=s[u]=new Array(f),m=o[u]=new Array(f);n(c,h,g,m,l[u]=new Array(d),p,t);for(var v,y,b=0,k=0;b<f;++b)if(v=g[b]){for(b>=k&&(k=b+1);!(y=m[k])&&++k<f;);v._next=y||null}}return o=new Lo(o,i),o._enter=s,o._exit=l,o}function da(){return new Lo(this._exit||this._groups.map(aa),this._parents)}function pa(e){for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,u=t[s],c=n[s],h=u.length,d=o[s]=new Array(h),p=0;p<h;++p)(l=u[p]||c[p])&&(d[p]=l);for(;s<i;++s)o[s]=t[s];return new Lo(o,this._parents)}function fa(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&o!==i.nextSibling&&o.parentNode.insertBefore(i,o),o=i);return this}function ga(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ma);for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o,s=n[a],l=s.length,u=r[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(t)}return new Lo(r,this._parents).order()}function ma(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function va(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ya(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function ba(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function ka(){var e=0;return this.each(function(){++e}),e}function wa(){return!this.node()}function Ea(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,a=t[n],o=0,s=a.length;o<s;++o)(r=a[o])&&e.call(r,r.__data__,o,a);return this}function Sa(e){return function(){this.removeAttribute(e)}}function Ca(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xa(e,t){return function(){this.setAttribute(e,t)}}function Ta(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Aa(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function La(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ia(e,t){var n=qr(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?Ca:Sa:"function"==typeof t?n.local?La:Aa:n.local?Ta:xa)(n,t))}function Na(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Oa(e){return function(){this.style.removeProperty(e)}}function Ra(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ma(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Pa(e,t,n){return arguments.length>1?this.each((null==t?Oa:"function"==typeof t?Ma:Ra)(e,t,null==n?"":n)):Da(this.node(),e)}function Da(e,t){return e.style.getPropertyValue(t)||Na(e).getComputedStyle(e,null).getPropertyValue(t)}function Ba(e){return function(){delete this[e]}}function _a(e,t){return function(){this[e]=t}}function Fa(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ua(e,t){return arguments.length>1?this.each((null==t?Ba:"function"==typeof t?Fa:_a)(e,t)):this.node()[e]}function za(e){return e.trim().split(/^|\s+/)}function Wa(e){return e.classList||new Ha(e)}function Ha(e){this._node=e,this._names=za(e.getAttribute("class")||"")}function Va(e,t){for(var n=Wa(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Ga(e,t){for(var n=Wa(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function ja(e){return function(){Va(this,e)}}function Ya(e){return function(){Ga(this,e)}}function Ja(e,t){return function(){(t.apply(this,arguments)?Va:Ga)(this,e)}}function qa(e,t){var n=za(e+"");if(arguments.length<2){for(var i=Wa(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?Ja:t?ja:Ya)(n,t))}function Xa(){this.textContent=""}function Ka(e){return function(){this.textContent=e}}function Qa(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Za(e){return arguments.length?this.each(null==e?Xa:("function"==typeof e?Qa:Ka)(e)):this.node().textContent}function $a(){this.innerHTML=""}function eo(e){return function(){this.innerHTML=e}}function to(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function no(e){return arguments.length?this.each(null==e?$a:("function"==typeof e?to:eo)(e)):this.node().innerHTML}function io(){this.nextSibling&&this.parentNode.appendChild(this)}function ro(){return this.each(io)}function ao(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oo(){return this.each(ao)}function so(e){var t="function"==typeof e?e:Qr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function lo(){return null}function uo(e,t){var n="function"==typeof e?e:Qr(e),i=null==t?lo:"function"==typeof t?t:$r(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function co(){var e=this.parentNode;e&&e.removeChild(this)}function ho(){return this.each(co)}function po(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function fo(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function go(e){return this.select(e?fo:po)}function mo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vo(e,t,n){return e=yo(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function yo(e,t,n){return function(i){var r=XF;XF=i;try{e.call(this,this.__data__,t,n)}finally{XF=r}}}function bo(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function ko(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,a=t.length;i<a;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function wo(e,t,n){var i=qF.hasOwnProperty(e.type)?vo:yo;return function(r,a,o){var s,l=this.__on,u=i(t,a,o);if(l)for(var c=0,h=l.length;c<h;++c)if((s=l[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function Eo(e,t,n){var i,r,a=bo(e+""),o=a.length;{if(!(arguments.length<2)){for(s=t?wo:ko,null==n&&(n=!1),i=0;i<o;++i)this.each(s(a[i],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<o;++i)if((r=a[i]).type===l.type&&r.name===l.name)return l.value}}function So(e,t,n,i){var r=XF;e.sourceEvent=XF,XF=e;try{return t.apply(n,i)}finally{XF=r}}function Co(e,t,n){var i=Na(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function xo(e,t){return function(){return Co(this,e,t)}}function To(e,t){return function(){return Co(this,e,t.apply(this,arguments))}}function Ao(e,t){return this.each(("function"==typeof t?To:xo)(e,t))}function Lo(e,t){this._groups=e,this._parents=t}function Io(){return new Lo([[document.documentElement]],KF)}function No(e){return"string"==typeof e?new Lo([[document.querySelector(e)]],[document.documentElement]):new Lo([[e]],KF)}function Oo(){for(var e,t=XF;e=t.sourceEvent;)t=e;return t}function Ro(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}function Mo(e){var t=Oo();return t.changedTouches&&(t=t.changedTouches[0]),Ro(e,t)}function Po(e,t,n){arguments.length<3&&(n=t,t=Oo().changedTouches);for(var i,r=0,a=t?t.length:0;r<a;++r)if((i=t[r]).identifier===n)return Ro(e,i);return null}function Do(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Bo(){return new Do}function _o(e){return function(){return e}}function Fo(e){this._context=e}function Uo(e){return new Fo(e)}function zo(e){return e[0]}function Wo(e){return e[1]}function Ho(){function e(e){var s,l,u,c=e.length,h=!1;for(null==r&&(o=a(u=Bo())),s=0;s<=c;++s)!(s<c&&i(l=e[s],s,e))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,s,e),+n(l,s,e));if(u)return o=null,u+""||null}var t=zo,n=Wo,i=_o(!0),r=null,a=Uo,o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:_o(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:_o(+t),e):n},e.defined=function(t){return arguments.length?(i="function"==typeof t?t:_o(!!t),e):i},e.curve=function(t){return arguments.length?(a=t,null!=r&&(o=a(r)),e):a},e.context=function(t){return arguments.length?(null==t?r=o=null:o=a(r=t),e):r},e}function Vo(){function e(e){var t,c,h,d,p,f=e.length,g=!1,m=new Array(f),v=new Array(f);for(null==s&&(u=l(p=Bo())),t=0;t<=f;++t){if(!(t<f&&o(d=e[t],t,e))===g)if(g=!g)c=t,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),h=t-1;h>=c;--h)u.point(m[h],v[h]);u.lineEnd(),u.areaEnd()}g&&(m[t]=+n(d,t,e),v[t]=+r(d,t,e),u.point(i?+i(d,t,e):m[t],a?+a(d,t,e):v[t]))}if(p)return u=null,p+""||null}function t(){return Ho().defined(o).curve(l).context(s)}var n=zo,i=null,r=_o(0),a=Wo,o=_o(!0),s=null,l=Uo,u=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:_o(+t),i=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:_o(+t),e):n},e.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:_o(+t),e):i},e.y=function(t){return arguments.length?(r="function"==typeof t?t:_o(+t),a=null,e):r},e.y0=function(t){return arguments.length?(r="function"==typeof t?t:_o(+t),e):r},e.y1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:_o(+t),e):a},e.lineX0=e.lineY0=function(){return t().x(n).y(r)},e.lineY1=function(){return t().x(n).y(a)},e.lineX1=function(){return t().x(i).y(r)},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:_o(!!t),e):o},e.curve=function(t){return arguments.length?(l=t,null!=s&&(u=l(s)),e):l},e.context=function(t){return arguments.length?(null==t?s=u=null:u=l(s=t),e):s},e}function Go(e){return e<0?-1:1}function jo(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Go(a)+Go(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Yo(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Jo(e,t,n){var i=e._x0,r=e._y0,a=e._x1,o=e._y1,s=(a-i)/3;e._context.bezierCurveTo(i+s,r+s*t,a-s,o-s*n,a,o)}function qo(e){this._context=e}function Xo(e){this._context=new Ko(e)}function Ko(e){this._context=e}function Qo(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i)throw new Error("illegal type: "+e);i[e]=[]}return new Zo(i)}function Zo(e){this._=e}function $o(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function es(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function ts(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=eU,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}function ns(){XF.preventDefault(),XF.stopImmediatePropagation()}function is(e){var t=e.document.documentElement,n=No(e).on("dragstart.drag",ns,!0);"onselectstart"in t?n.on("selectstart.drag",ns,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function rs(e,t){var n=e.document.documentElement,i=No(e).on("dragstart.drag",null);t&&(i.on("click.drag",ns,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function as(){return lU||(hU(os),lU=cU.now()+uU)}function os(){lU=0}function ss(){this._call=this._time=this._next=null}function ls(e,t,n){var i=new ss;return i.restart(e,t,n),i}function us(){as(),++iU;for(var e,t=tU;t;)(e=lU-t._time)>=0&&t._call.call(null,e),t=t._next;--iU}function cs(){lU=(sU=cU.now())+uU,iU=rU=0;try{us()}finally{iU=0,ds(),lU=0}}function hs(){var e=cU.now(),t=e-sU;t>oU&&(uU-=t,sU=e)}function ds(){for(var e,t,n=tU,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:tU=t);nU=e,ps(i)}function ps(e){if(!iU){rU&&(rU=clearTimeout(rU));e-lU>24?(e<1/0&&(rU=setTimeout(cs,e-cU.now()-uU)),aU&&(aU=clearInterval(aU))):(aU||(sU=cU.now(),aU=setInterval(hs,oU)),iU=1,hU(cs))}}function fs(e,t,n){var i=new ss;return t=null==t?0:+t,i.restart(function(n){i.stop(),e(n+t)},t,n),i}function gs(e,t,n,i,r,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};bs(e,n,{name:t,index:i,group:r,on:dU,tween:pU,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:fU})}function ms(e,t){var n=ys(e,t);if(n.state>fU)throw new Error("too late; already scheduled");return n}function vs(e,t){var n=ys(e,t);if(n.state>mU)throw new Error("too late; already started");return n}function ys(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function bs(e,t,n){function i(e){n.state=gU,n.timer.restart(r,n.delay,n.time),n.delay<=e&&r(e-n.delay)}function r(i){var u,c,h,d;if(n.state!==gU)return o();for(u in l)if(d=l[u],d.name===n.name){if(d.state===vU)return fs(r);d.state===yU?(d.state=kU,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete l[u]):+u<t&&(d.state=kU,d.timer.stop(),delete l[u])}if(fs(function(){n.state===vU&&(n.state=yU,n.timer.restart(a,n.delay,n.time),a(i))}),n.state=mU,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mU){for(n.state=vU,s=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++c]=d);s.length=c+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(o),n.state=bU,1),r=-1,a=s.length;++r<a;)s[r].call(null,i);n.state===bU&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){n.state=kU,n.timer.stop(),delete l[t];for(var i in l)return;delete e.__transition}var s,l=e.__transition;l[t]=n,n.timer=ls(i,0,n.time)}function ks(e,t){var n,i,r,a=e.__transition,o=!0;if(a){t=null==t?null:t+"";for(r in a)(n=a[r]).name===t?(i=n.state>mU&&n.state<bU,n.state=kU,n.timer.stop(),i&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete e.__transition}}function ws(e){return this.each(function(){ks(this,e)})}function Es(e,t){var n,i;return function(){var r=vs(this,e),a=r.tween;if(a!==n){i=n=a;for(var o=0,s=i.length;o<s;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function Ss(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=vs(this,e),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}a.tween=r}}function Cs(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=ys(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((null==t?Es:Ss)(n,e,t))}function xs(e,t,n){var i=e._id;return e.each(function(){var e=vs(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return ys(e,i).value[t]}}function Ts(e,t){var n;return("number"==typeof t?Fn:t instanceof on?z_:(n=on(t))?(t=n,z_):Hn)(e,t)}function As(e){return function(){this.removeAttribute(e)}}function Ls(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Is(e,t,n){var i,r;return function(){var a=this.getAttribute(e);return a===n?null:a===i?r:r=t(i=a,n)}}function Ns(e,t,n){var i,r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===n?null:a===i?r:r=t(i=a,n)}}function Os(e,t,n){var i,r,a;return function(){var o,s=n(this);return null==s?void this.removeAttribute(e):(o=this.getAttribute(e),o===s?null:o===i&&s===r?a:a=t(i=o,r=s))}}function Rs(e,t,n){var i,r,a;return function(){var o,s=n(this);return null==s?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),o===s?null:o===i&&s===r?a:a=t(i=o,r=s))}}function Ms(e,t){var n=qr(e),i="transform"===n?Y_:Ts;return this.attrTween(e,"function"==typeof t?(n.local?Rs:Os)(n,i,xs(this,"attr."+e,t)):null==t?(n.local?Ls:As)(n):(n.local?Ns:Is)(n,i,t+""))}function Ps(e,t){function n(){var n=this,i=t.apply(n,arguments);return i&&function(t){n.setAttributeNS(e.space,e.local,i(t))}}return n._value=t,n}function Ds(e,t){function n(){var n=this,i=t.apply(n,arguments);return i&&function(t){n.setAttribute(e,i(t))}}return n._value=t,n}function Bs(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=qr(e);return this.tween(n,(i.local?Ps:Ds)(i,t))}function _s(e,t){return function(){ms(this,e).delay=+t.apply(this,arguments)}}function Fs(e,t){return t=+t,function(){ms(this,e).delay=t}}function Us(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?_s:Fs)(t,e)):ys(this.node(),t).delay}function zs(e,t){return function(){vs(this,e).duration=+t.apply(this,arguments)}}function Ws(e,t){return t=+t,function(){vs(this,e).duration=t}}function Hs(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?zs:Ws)(t,e)):ys(this.node(),t).duration}function Vs(e,t){if("function"!=typeof t)throw new Error;return function(){vs(this,e).ease=t}}function Gs(e){var t=this._id;return arguments.length?this.each(Vs(t,e)):ys(this.node(),t).ease}function js(e){"function"!=typeof e&&(e=YF(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a,o=t[r],s=o.length,l=i[r]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new dl(i,this._parents,this._name,this._id)}function Ys(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var l,u=t[s],c=n[s],h=u.length,d=o[s]=new Array(h),p=0;p<h;++p)(l=u[p]||c[p])&&(d[p]=l);for(;s<i;++s)o[s]=t[s];return new dl(o,this._parents,this._name,this._id)}function Js(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function qs(e,t,n){var i,r,a=Js(t)?ms:vs;return function(){var o=a(this,e),s=o.on;s!==i&&(r=(i=s).copy()).on(t,n),o.on=r}}function Xs(e,t){var n=this._id;return arguments.length<2?ys(this.node(),n).on.on(e):this.each(qs(n,e,t))}function Ks(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Qs(){return this.on("end.remove",Ks(this._id))}function Zs(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=$r(e));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,l,u=i[o],c=u.length,h=a[o]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=e.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,gs(h[d],t,n,d,h,ys(s,n)));return new dl(a,this._parents,t,n)}function $s(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=na(e));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var l,u=i[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,p=e.call(l,l.__data__,h,u),f=ys(l,n),g=0,m=p.length;g<m;++g)(d=p[g])&&gs(d,t,n,g,p,f);a.push(p),o.push(l)}return new dl(a,o,t,n)}function el(){return new wU(this._groups,this._parents)}function tl(e,t){var n,i,r;return function(){var a=Da(this,e),o=(this.style.removeProperty(e),Da(this,e));return a===o?null:a===n&&o===i?r:r=t(n=a,i=o)}}function nl(e){return function(){this.style.removeProperty(e)}}function il(e,t,n){var i,r;return function(){var a=Da(this,e);return a===n?null:a===i?r:r=t(i=a,n)}}function rl(e,t,n){var i,r,a;return function(){var o=Da(this,e),s=n(this);return null==s&&(this.style.removeProperty(e),s=Da(this,e)),o===s?null:o===i&&s===r?a:a=t(i=o,r=s)}}function al(e,t,n){var i="transform"==(e+="")?j_:Ts;return null==t?this.styleTween(e,tl(e,i)).on("end.style."+e,nl(e)):this.styleTween(e,"function"==typeof t?rl(e,i,xs(this,"style."+e,t)):il(e,i,t+""),n)}function ol(e,t,n){function i(){var i=this,r=t.apply(i,arguments);return r&&function(t){i.style.setProperty(e,r(t),n)}}return i._value=t,i}function sl(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,ol(e,t,null==n?"":n))}function ll(e){return function(){this.textContent=e}}function ul(e){return function(){
var t=e(this);this.textContent=null==t?"":t}}function cl(e){return this.tween("text","function"==typeof e?ul(xs(this,"text",e)):ll(null==e?"":e+""))}function hl(){for(var e=this._name,t=this._id,n=fl(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=ys(o,t);gs(o,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new dl(i,this._parents,e,n)}function dl(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function pl(e){return Io().transition(e)}function fl(){return++EU}function gl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function ml(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return CU.time=as(),CU;return n}function vl(e){var t,n;e instanceof dl?(t=e._id,e=e._name):(t=fl(),(n=CU).time=as(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],l=s.length,u=0;u<l;++u)(o=s[u])&&gs(o,e,t,u,s,n||ml(o,t));return new dl(i,this._parents,e,t)}function yl(e){return function(){return e}}function bl(e,t,n){this.target=e,this.type=t,this.transform=n}function kl(e,t,n){this.k=e,this.x=t,this.y=n}function wl(){XF.stopImmediatePropagation()}function El(){XF.preventDefault(),XF.stopImmediatePropagation()}function Sl(){return!XF.button}function Cl(){var e,t,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,e=n.width.baseVal.value,t=n.height.baseVal.value):(e=n.clientWidth,t=n.clientHeight),[[0,0],[e,t]]}function xl(){return this.__zoom||xU}function Tl(){return-XF.deltaY*(XF.deltaMode?120:1)/500}function Al(){return"ontouchstart"in this}function Ll(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Il(){function e(e){e.property("__zoom",xl).on("wheel.zoom",s).on("mousedown.zoom",l).on("dblclick.zoom",u).filter(b).on("touchstart.zoom",c).on("touchmove.zoom",h).on("touchend.zoom touchcancel.zoom",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(e,t){return t=Math.max(k[0],Math.min(k[1],t)),t===e.k?e:new kl(t,e.x,e.y)}function n(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new kl(e.k,i,r)}function i(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function r(e,t,n){e.on("start.zoom",function(){a(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){a(this,arguments).end()}).tween("zoom",function(){var e=this,r=arguments,o=a(e,r),s=m.apply(e,r),l=n||i(s),u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,h="function"==typeof t?t.apply(e,r):t,d=S(c.invert(l).concat(u/c.k),h.invert(l).concat(u/h.k));return function(e){if(1===e)e=h;else{var t=d(e),n=u/t[2];e=new kl(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}})}function a(e,t){for(var n,i=0,r=C.length;i<r;++i)if((n=C[i]).that===e)return n;return new o(e,t)}function o(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=m.apply(e,t)}function s(){function e(){i.wheel=null,i.end()}if(g.apply(this,arguments)){var i=a(this,arguments),r=this.__zoom,o=Math.max(k[0],Math.min(k[1],r.k*Math.pow(2,y.apply(this,arguments)))),s=Mo(this);if(i.wheel)i.mouse[0][0]===s[0]&&i.mouse[0][1]===s[1]||(i.mouse[1]=r.invert(i.mouse[0]=s)),clearTimeout(i.wheel);else{if(r.k===o)return;i.mouse=[s,r.invert(s)],ks(this),i.start()}El(),i.wheel=setTimeout(e,A),i.zoom("mouse",v(n(t(r,o),i.mouse[0],i.mouse[1]),i.extent,w))}}function l(){function e(){if(El(),!i.moved){var e=XF.clientX-s,t=XF.clientY-l;i.moved=e*e+t*t>L}i.zoom("mouse",v(n(i.that.__zoom,i.mouse[0]=Mo(i.that),i.mouse[1]),i.extent,w))}function t(){r.on("mousemove.zoom mouseup.zoom",null),rs(XF.view,i.moved),El(),i.end()}if(!f&&g.apply(this,arguments)){var i=a(this,arguments),r=No(XF.view).on("mousemove.zoom",e,!0).on("mouseup.zoom",t,!0),o=Mo(this),s=XF.clientX,l=XF.clientY;is(XF.view),wl(),i.mouse=[o,this.__zoom.invert(o)],ks(this),i.start()}}function u(){if(g.apply(this,arguments)){var i=this.__zoom,a=Mo(this),o=i.invert(a),s=i.k*(XF.shiftKey?.5:2),l=v(n(t(i,s),a,o),m.apply(this,arguments),w);El(),E>0?No(this).transition().duration(E).call(r,l,a):No(this).call(e.transform,l)}}function c(){if(g.apply(this,arguments)){var e,t,n,i,r=a(this,arguments),o=XF.changedTouches,s=o.length;for(wl(),t=0;t<s;++t)n=o[t],i=Po(this,o,n.identifier),i=[i,this.__zoom.invert(i),n.identifier],r.touch0?r.touch1||(r.touch1=i):(r.touch0=i,e=!0);if(p&&(p=clearTimeout(p),!r.touch1))return r.end(),void((i=No(this).on("dblclick.zoom"))&&i.apply(this,arguments));e&&(p=setTimeout(function(){p=null},T),ks(this),r.start())}}function h(){var e,i,r,o,s=a(this,arguments),l=XF.changedTouches,u=l.length;for(El(),p&&(p=clearTimeout(p)),e=0;e<u;++e)i=l[e],r=Po(this,l,i.identifier),s.touch0&&s.touch0[2]===i.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===i.identifier&&(s.touch1[0]=r);if(i=s.that.__zoom,s.touch1){var c=s.touch0[0],h=s.touch0[1],d=s.touch1[0],f=s.touch1[1],g=(g=d[0]-c[0])*g+(g=d[1]-c[1])*g,m=(m=f[0]-h[0])*m+(m=f[1]-h[1])*m;i=t(i,Math.sqrt(g/m)),r=[(c[0]+d[0])/2,(c[1]+d[1])/2],o=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],o=s.touch0[1]}s.zoom("touch",v(n(i,r,o),s.extent,w))}function d(){var e,t,n=a(this,arguments),i=XF.changedTouches,r=i.length;for(wl(),f&&clearTimeout(f),f=setTimeout(function(){f=null},T),e=0;e<r;++e)t=i[e],n.touch0&&n.touch0[2]===t.identifier?delete n.touch0:n.touch1&&n.touch1[2]===t.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var p,f,g=Sl,m=Cl,v=Ll,y=Tl,b=Al,k=[0,1/0],w=[[-1/0,-1/0],[1/0,1/0]],E=250,S=Zn,C=[],x=Qo("start","zoom","end"),T=500,A=150,L=0;return e.transform=function(e,t){var n=e.selection?e.selection():e;n.property("__zoom",xl),e!==n?r(e,t):n.interrupt().each(function(){a(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},e.scaleTo=function(r,a){e.transform(r,function(){var e=m.apply(this,arguments),r=this.__zoom,o=i(e),s=r.invert(o),l="function"==typeof a?a.apply(this,arguments):a;return v(n(t(r,l),o,s),e,w)})},e.translateBy=function(t,n,i){e.transform(t,function(){return v(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof i?i.apply(this,arguments):i),m.apply(this,arguments),w)})},e.translateTo=function(t,n,r){e.transform(t,function(){var e=m.apply(this,arguments),t=this.__zoom,a=i(e);return v(xU.translate(a[0],a[1]).scale(t.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof r?-r.apply(this,arguments):-r),e,w)})},o.prototype={start:function(){return 1==++this.active&&(this.index=C.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(C.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){So(new bl(e,t,this.that.__zoom),x.apply,x,[t,this.that,this.args])}},e.wheelDelta=function(t){return arguments.length?(y="function"==typeof t?t:yl(+t),e):y},e.filter=function(t){return arguments.length?(g="function"==typeof t?t:yl(!!t),e):g},e.touchable=function(t){return arguments.length?(b="function"==typeof t?t:yl(!!t),e):b},e.extent=function(t){return arguments.length?(m="function"==typeof t?t:yl([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):m},e.scaleExtent=function(t){return arguments.length?(k[0]=+t[0],k[1]=+t[1],e):[k[0],k[1]]},e.translateExtent=function(t){return arguments.length?(w[0][0]=+t[0][0],w[1][0]=+t[1][0],w[0][1]=+t[0][1],w[1][1]=+t[1][1],e):[[w[0][0],w[0][1]],[w[1][0],w[1][1]]]},e.constrain=function(t){return arguments.length?(v=t,e):v},e.duration=function(t){return arguments.length?(E=+t,e):E},e.interpolate=function(t){return arguments.length?(S=t,e):S},e.on=function(){var t=x.on.apply(x,arguments);return t===x?e:t},e.clickDistance=function(t){return arguments.length?(L=(t=+t)*t,e):Math.sqrt(L)},e}function Nl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=Math.abs(t.domain()[0]-t.domain()[1]);if(-1===n){var r=0;if(i>1e3)r=0;else if(i>1){for(var a=0,o=1;o<i;)a+=1,o*=10;r=4-a}else{for(var s=0,l=1;.1*l>i;)s+=1,l*=.1;r=3+s}e=""+e.toFixed(r)}else e=""+e.toFixed(n);for(;-1!==e.indexOf(".")&&e.endsWith("0");)e=e.slice(0,e.length-1);return e.endsWith(".")&&(e=e.slice(0,e.length-1)),e}function Ol(e,t){var n=e.domain(),i=e.range();return i[0]+(i[1]-i[0])*(t-n[0])/(n[1]-n[0])}function Rl(e,t,n,i,r,a,o){if(i===a){if(Math.abs(t)<1e-6)return;var s=-(e*i+n)/t;if(Math.min(r,o)>s||Math.max(r,o)<s)return;return{x:i,y:s}}if(!(Math.abs(e)<1e-6)){var l=-(t*r+n)/e;if(!(Math.min(i,a)>l||Math.max(i,a)<l))return{x:l,y:r}}}function Ml(e,t,n,i,r){var a=Rl(e,t,n,i[0],r[0],i[0],r[1]),o=Rl(e,t,n,i[1],r[0],i[1],r[1]),s=Rl(e,t,n,i[0],r[0],i[1],r[0]),l=Rl(e,t,n,i[0],r[1],i[1],r[1]);return a?o?[a.x,a.y,o.x,o.y]:s?[a.x,a.y,s.x,s.y]:l?[a.x,a.y,l.x,l.y]:[a.x,a.y,a.x,a.y]:o?s?[o.x,o.y,s.x,s.y]:l?[o.x,o.y,l.x,l.y]:[o.x,o.y,o.x,o.y]:s?l?[s.x,s.y,l.x,l.y]:[s.x,s.y,s.x,s.y]:l?[l.x,l.y,l.x,l.y]:[0,0,0,0]}function Pl(e){for(var t="",n=0;n<jU.length;n+=1){var i=!0,r=!1,a=void 0;try{for(var o,s=(e[jU[n]+"s"]||[])[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;t+=JU[jU[n]](l)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}return t}function Dl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Au,r={contestId:e.id,evalTaskId:t.evalTaskId,sourceSize:t.sourceSizeLimit||65536};zu.postJSON("/contest/add_task/",r).then(n,i)}function Bl(){var e=E(["",""]);return Bl=function(){return e},e}function _l(){var e=E(["",""]);return _l=function(){return e},e}function Fl(e,t){rk.getCurrentUser().saveCustomSetting("theme:"+e,t)}function Ul(e){rk.getCurrentUser().saveCustomSetting("themeId",e)}function zl(e,t){zu.postJSON("/baseconfig/run_command/",e).then(t)}function Wl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Au,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au;zu.postJSON("/edit_translation/",e).then(t,n)}function Hl(e){return window.innerWidth<=e?"none !important":null}function Vl(){if(window.hasOwnProperty("RTCPeerConnection"))return window.RTCPeerConnection;if(window.hasOwnProperty("webkitRTCPeerConnection"))return window.webkitRTCPeerConnection;if(window.hasOwnProperty("mozRTCPeerConnection"))return window.mozRTCPeerConnection;throw Error("RTC Peer connection is not supported in your browser")}function Gl(){var e=this;this.addClickListener(function(t){t.shiftKey||t.ctrlKey||t.metaKey||!e.options.href||!P(e.options.href)||e.options.newTab||e.options.target&&"_self"!==e.options.target||(t.preventDefault(),t.stopPropagation(),nm.changeURL(D(e.options.href)))})}function jl(){var e=Object.assign({},rk.getCurrentUser().getCustomSetting("theme",{})),t=rk.getCurrentUser().getCustomSetting("themeId");if(t)if("custom"!==t)$c.setProperties(_Z[t]);else for(var n in e){var i=e[n];"null"!==i&&null!==i||(i=FZ[n]),$c.setProperties(s({},n,i))}}function Yl(e,t,n){e.prototype[t]||(e.prototype[t]=n)}function Jl(){window.userMediaStreamer.requestCallConfirmation=function(e,t,n){var i=Lc.createElement(M$,{userId:e});i.show(),i.addListener("accept",function(){t()}),i.addListener("reject",function(){n()})}}var ql=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;return Math.abs(e)<t},Xl=function(e){return Math.floor(Math.random()*e)},Kl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return ql(e-t,n)},Ql=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return ql(e.x-t.x,n)&&ql(e.y-t.y,n)},Zl=function(e){return e*e},$l=function(e,t){return Math.sqrt(Zl(e.x-t.x)+Zl(e.y-t.y))},eu=function(e,t){return(t.a*e.x+t.b*e.y+t.c)/Math.sqrt(Zl(t.a)+Zl(t.b))},tu=function(e,t){return Math.abs(eu(e,t))},nu=function(e,t,n,i){return i=i||1e-6,Math.abs($l(e,t)+$l(e,n)-$l(t,n))<=i},iu=function(e,t){var n=(t.a*e.x+t.b*e.y+t.c)/(Zl(t.a)+Zl(t.b));return{x:e.x-t.a*n,y:e.y-t.b*n}},ru=function(e,t){return{a:t.y-e.y,b:e.x-t.x,c:e.y*t.x-e.x*t.y}},au=function(e,t){return su(lu(e,t))},ou=function(e){return e*Math.PI/180},su=function(e){return 180*e/Math.PI},lu=function(e,t){return t=t||{x:0,y:0},Math.atan2(e.y-t.y,e.x-t.x)},uu=function(e,t,n){return n=n||{x:0,y:0},(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x)},cu=function(e,t,n){return t=t||{x:0,y:0},{x:Math.cos(n)*(e.x-t.x)-Math.sin(n)*(e.y-t.y)+t.x,y:Math.sin(n)*(e.x-t.x)+Math.cos(n)*(e.y-t.y)+t.y}},hu=function(e,t,n){return{x:e.x+t,y:e.y+n}},du=function(e,t,n,i){return i=i||n,{x:(e.x-t.x)*n+t.x,y:(e.y-t.y)*i+t.y}},pu=function(e,t,n){return n=n||{x:0,y:0},{x:t*Math.cos(e)+n.x,y:t*Math.sin(e)+n.y}},fu=function(e,t){var n,i,r,a;return(i=$l(e,t))>e.r+t.r?[]:(r=(Zl(e.r)-Zl(t.r)+Zl(i))/(2*i),Zl(e.r)-Zl(r)<0?[]:(a=Math.sqrt(Zl(e.r)-Zl(r)),n=[],n.push({x:r/i*(t.x-e.x)+a/i*(t.y-e.y)+e.x,y:r/i*(t.y-e.y)-a/i*(t.x-e.x)+e.y}),n.push({x:r/i*(t.x-e.x)-a/i*(t.y-e.y)+e.x,y:r/i*(t.y-e.y)+a/i*(t.x-e.x)+e.y}),n))},gu=function(e,t,n){return e<t?t:e>n?n:e},mu=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},vu=function(e){return $l({x:0,y:0},e)},yu=function(e){var t=vu(e);return Math.abs(t)<1e-6?{x:0,y:0}:{x:e.x/t,y:e.y/t}},bu=function(e,t){return{x:e.x*t,y:e.y*t}},ku=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},wu=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Eu=function(e,t,n){return.5*Math.abs(uu(e,t,n))},Su=function(e,t,n){return!isNaN(e)&&(t<=e&&e<=n)},Cu=function(e,t){var n,i,r,a=0;for(i=0;i<e.length;i+=1)if(e.x===t)return e.y;for(i=0;i<e.length;i+=1){for(n=e[i].y,r=0;r<e.length;r+=1)i!==r&&(n=n*(t-e[r].x)/(e[i].x-e[r].x));a+=n}return a},xu=regeneratorRuntime.mark(ne),Tu=regeneratorRuntime.mark(ie),Au=function(){},Lu=function(){function e(){r(this,e)}return o(e,[{key:"wrap",value:function(e){throw Error("Implement wrap method")}},{key:"call",value:function(e){return this.wrap(e)()}},{key:"toFunction",value:function(){var e=this;return function(t){return e.wrap(t)}}}]),e}(),Iu=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.index=1,n.lastExecuted=0,n}return h(t,e),o(t,[{key:"wrap",value:function(e){var t=this,n=this.index++;return function(){if(n>t.lastExecuted)return t.lastExecuted=n,e.apply(void 0,arguments)}}}]),t}(Lu),Nu=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),e=b(this,d(t).call(this)),e.lastCallTime=0,e.pendingCall=null,e.pendingCallArgs=[],e.pendingCallExpectedTime=0,e.numCalls=0,e.totalCallDuration=0,Object.assign(y(e),n),e}return h(t,e),o(t,[{key:"isThrottleOnAnimationFrame",value:function(){return this.throttle===this.constructor.ON_ANIMATION_FRAME}},{key:"clearPendingCall",value:function(){this.pendingCall=null,this.pendingCallArgs=[],this.pendingCallExpectedTime=0}},{key:"cancel",value:function(){this.pendingCall&&this.pendingCall.cancel(),this.clearPendingCall()}},{key:"flush",value:function(){this.pendingCall&&this.pendingCall.flush(),this.clearPendingCall()}},{key:"cleanup",value:function(){this.cancel()}},{key:"computeExecutionDelay",value:function(e){var t=null;return null!=this.throttle&&(t=Math.max(this.lastCallTime+this.throttle-e,0)),null!=this.debounce&&(t=Math.min(null!=t?t:this.debounce,this.debounce)),t}},{key:"replacePendingCall",value:function(e,t,n){if(this.cancel(),this.isThrottleOnAnimationFrame()){var i=requestAnimationFrame(t);return void(e.cancel=function(){return cancelAnimationFrame(i)})}var r=Date.now(),a=this.computeExecutionDelay(r);if(this.dropThrottled)return 0==a&&t();var o=setTimeout(t,a);e.cancel=function(){return clearTimeout(o)},this.pendingCall=e,this.pendingCallArgs=n,this.pendingCallExpectedTime=r+a}},{key:"updatePendingCall",value:function(e){if(this.pendingCallArgs=e,!this.isThrottleOnAnimationFrame()){var t=Date.now();this.pendingCallExpectedTime=t+this.computeExecutionDelay(t)}}},{key:"wrap",value:function(e){var t=this,n=function n(){var r=Date.now();!t.isThrottleOnAnimationFrame()&&r+1<t.pendingCallExpectedTime?t.replacePendingCall(i,n,t.pendingCallArgs):(t.lastCallTime=r,t.clearPendingCall(),e.apply(void 0,C(t.pendingCallArgs)))},i=function i(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t.pendingCall&&e===t.pendingCall.originalFunc?t.updatePendingCall(a):t.replacePendingCall(i,n,a)};return i.originalFunc=e,i.cancel=Au,i.flush=function(){i===t.pendingCall&&(t.cancel(),i())},i}}]),t}(Lu);Nu.ON_ANIMATION_FRAME=Symbol(),Nu.AUTOMATIC=Symbol();var Ou=function(){function e(){r(this,e),this.map=new Map}return o(e,[{key:"normalizeKey",value:function(e){return e}},{key:"normalizeValue",value:function(e){return e}},{key:"append",value:function(e,t){var n=this.normalizeKey(e),i=this.normalizeValue(t);this.map.has(n)?this.map.get(n).push(i):this.map.set(n,[i])}},{key:"has",value:function(e){return this.map.has(this.normalizeKey(e))}},{key:"delete",value:function(e){this.map.delete(this.normalizeKey(e))}},{key:"set",value:function(e,t){this.map.set(this.normalizeKey(e),[this.normalizeValue(t)])}},{key:"get",value:function(e){var t=this.normalizeKey(e);return this.map.has(t)?this.map.get(t)[0]:null}},{key:"getAll",value:function(e){var t=this.normalizeKey(e);return this.map.has(t)?this.map.get(t).slice():null}},{key:"forEach",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=this.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=S(a.value,2),l=s[0],u=s[1];e.call(t,u,l,this)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"keys",value:function(){return ne(this.entries(),function(e){return e[0]})}},{key:"values",value:function(){return ne(this.entries(),function(e){return e[1]})}},{key:"entries",value:regeneratorRuntime.mark(function e(){var t,n,i,r,a,o,s,l,u,c,h,d,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,i=void 0,e.prev=3,r=this.map.entries()[Symbol.iterator]();case 5:if(t=(a=r.next()).done){e.next=36;break}o=S(a.value,2),s=o[0],l=o[1],u=!0,c=!1,h=void 0,e.prev=10,d=l[Symbol.iterator]();case 12:if(u=(p=d.next()).done){e.next=19;break}return f=p.value,e.next=16,[s,f];case 16:u=!0,e.next=12;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(10),c=!0,h=e.t0;case 25:e.prev=25,e.prev=26,u||null==d.return||d.return();case 28:if(e.prev=28,!c){e.next=31;break}throw h;case 31:return e.finish(28);case 32:return e.finish(25);case 33:t=!0,e.next=5;break;case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(3),n=!0,i=e.t1;case 42:e.prev=42,e.prev=43,t||null==r.return||r.return();case 45:if(e.prev=45,!n){e.next=48;break}throw i;case 48:return e.finish(45);case 49:return e.finish(42);case 50:case"end":return e.stop()}},e,this,[[3,38,42,50],[10,21,25,33],[26,,28,32],[43,,45,49]])})},{key:Symbol.iterator,value:function(){return this.entries()}}],[{key:"iterator",value:function(e){return e[Symbol.iterator]}}]),e}(),Ru=function(e){function t(e){var n;if(r(this,t),n=b(this,d(t).call(this)),e instanceof t){var i=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=S(s.value,2),c=u[0],h=u[1];n.append(c,h)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}else if(e)for(var p=0,f=Object.keys(e);p<f.length;p++){var g=f[p];n.append(g,e[g])}return n}return h(t,e),o(t,[{key:"normalizeKey",value:function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}},{key:"normalizeValue",value:function(e){return"string"!=typeof e&&(e=String(e)),e}}]),t}(Ou);Ru.polyfill=!0;var Mu=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,t),e=b(this,d(t).call(this,n));var i=String(n);0===i.indexOf("?")&&(i=i.slice(1));var a=!0,o=!1,s=void 0;try{for(var l,u=i.split("&")[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,h=c.indexOf("=");if(-1!==h){var p=e.constructor.decode(c.slice(0,h)),f=e.constructor.decode(c.slice(h+1));e.append(p,f)}}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return e}return h(t,e),o(t,[{key:"normalizeKey",value:function(e){return e.toString()}},{key:"normalizeValue",value:function(e){return e.toString()}},{key:"toString",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.map.entries()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=S(r.value,2),s=o[0],l=o[1],u=this.constructor.encode(s),c=!0,h=!1,d=void 0;try{for(var p,f=l[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var g=p.value;e.push(u+"="+this.constructor.encode(g))}}catch(e){h=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(h)throw d}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e.join("&")}}],[{key:"encode",value:function(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}},{key:"decode",value:function(e){return decodeURIComponent(e.replace(/\+/g," "))}}]),t}(Ou);Mu.polyfill=!0;var Pu=function(){function e(){r(this,e),this.bodyUsed=!1}return o(e,[{key:"setBodyUsed",value:function(){if(this.bodyUsed)return Promise.reject(new TypeError("Already read"));this.bodyUsed=!0}},{key:"initialize",value:function(e){if(this._bodyInit=e,e)if("string"==typeof e||e instanceof String)this._bodyText=e;else if(Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(DataView.prototype.isPrototypeOf(e))this._bodyArrayBuffer=this.constructor.cloneBuffer(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!ArrayBuffer.prototype.isPrototypeOf(e)&&!ArrayBuffer.isView(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=this.constructor.cloneBuffer(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e||e instanceof String?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))}},{key:"blob",value:function(){var e=this.setBodyUsed();return e||(this._bodyBlob?Promise.resolve(this._bodyBlob):this._bodyArrayBuffer?Promise.resolve(new Blob([this._bodyArrayBuffer])):this._bodyFormData?Promise.resolve(this._bodyFormData):Promise.resolve(new Blob([this._bodyText])))}},{key:"arrayBuffer",value:function(){return this._bodyArrayBuffer?this.setBodyUsed()||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}},{key:"readArrayBufferAsText",value:function(){for(var e=new Uint8Array(this._bodyArrayBuffer),t=new Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(e[n]);return t.join("")}},{key:"text",value:function(){var e=this.setBodyUsed();if(e)return e;if(this._bodyBlob)return oe(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(this.readArrayBufferAsText());if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}},{key:"formData",value:function(){return this.text().then(this.constructor.decode)}},{key:"json",value:function(){return this.text().then(JSON.parse)}}],[{key:"decode",value:function(e){var t=new FormData,n=!0,i=!1,r=void 0;try{for(var a,o=e.trim().split("&")[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s){var l=s.split("="),u=l.shift().replace(/\+/g," "),c=l.join("=").replace(/\+/g," ");t.append(decodeURIComponent(u),decodeURIComponent(c))}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"cloneBuffer",value:function(e){if(e.slice)return e.slice();var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}}]),e}(),Du=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),n=b(this,d(t).call(this));var a=i.body;if(("string"==typeof e||e instanceof String)&&(e={url:e}),e.bodyUsed)throw new TypeError("Already read");!a&&e.hasOwnProperty("_bodyInit")&&null!=e._bodyInit&&(a=e._bodyInit,e.bodyUsed=!0),n.method=n.constructor.normalizeMethod(i.method||e.method||"GET"),n.url=e.url;var o=i.headers||e.headers||null;if(n.headers=o?new Headers(o):new Headers,n.context=i.context||e.context||"",n.referrer=i.referrer||e.referrer||"about:client",n.referrerPolicy=i.referrerPolicy||e.referrerPolicy||"",n.mode=i.mode||e.mode||null,n.credentials=i.credentials||e.credentials||"omit",n.cache=i.cache||e.cache||"default",("GET"===n.method||"HEAD"===n.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");return n.initialize(a),n}return h(t,e),o(t,[{key:"clone",value:function(){return new t(this,{body:this._bodyInit})}}],[{key:"normalizeMethod",value:function(e){var t=e.toUpperCase();return this.methods.indexOf(t)>-1?t:e}}]),t}(Pu);Du.methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];var Bu=function(e){function t(e,n){var i;return r(this,t),i=b(this,d(t).call(this)),n=n||{},i.type="default",n.hasOwnProperty("status")?i.status=n.status:i.status=200,i.ok=i.status>=200&&i.status<300,n.hasOwnProperty("statusText")?i.statusText=n.statusText:i.statusText="OK",i.headers=new Headers(n.headers),i.url=n.url||"",i.initialize(e),i}return h(t,e),o(t,[{key:"clone",value:function(){return new t(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})}}],[{key:"error",value:function(){var e=new t(null,{status:0,statusText:""});return e.type="error",e}},{key:"redirect",value:function(e,n){if(-1===this.redirectStatuses.indexOf(n))throw new RangeError("Invalid status code");return new t(null,{status:n,headers:{location:e}})}}]),t}(Pu);Bu.redirectStatuses=[301,302,303,307,308],window&&(function(e){e.Request=e.Request||Du}(window),function(e){e.Response=e.Response||Bu}(window),function(e){e.Headers=e.Headers||Ru}(window),function(e){e.URLSearchParams=e.URLSearchParams||Mu}(window));var _u=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),t=new Request(t,i);var a=new XMLHttpRequest;this.options=i,this.request=t,this.xhr=a,this.promise=new Promise(function(e,r){n.promiseResolve=e,n.promiseReject=r,a.onload=function(){var e=n.getResponseHeaders(),t=a.response||a.responseText,r={status:a.status,statusText:a.statusText,headers:e,url:a.responseURL||e.get("X-Request-URL")},o=new Response(t,r);"function"==typeof o[i.dataType]?o[i.dataType]().then(function(e){n.resolve(e)}):n.resolve(o)},a.onerror=function(){n.reject(new TypeError("Network error"))},a.ontimeout=function(){n.reject(new TypeError("Network timeout"))},a.open(t.method,t.url,!0),"include"===t.credentials&&(a.withCredentials=!0),a.responseType="blob";var o=!1;t.headers.forEach(function(e,t){i.body instanceof FormData&&"content-type"===t.toLowerCase()||("application/json"===e&&"content-type"===t.toLowerCase()&&(o=!0),a.setRequestHeader(t,e))}),i.body instanceof FormData?n.send(i.body):o?n.send(JSON.stringify(i.body)):t.blob().then(function(e){var t=e instanceof FormData||e.size?e:null;n.send(t)})})}return o(e,[{key:"getResponseHeaders",value:function(){return se(this.xhr)}},{key:"send",value:function(e){this.getXHR().send(e)}},{key:"getPostprocessors",value:function(){return this.options.postprocessors||he.defaultPostprocessors}},{key:"getErrorPostprocessors",value:function(){return this.options.errorPostprocessors||he.defaultErrorPostprocessors}},{key:"resolve",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.getPostprocessors()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;try{e=o(e,this)||e}catch(e){return void this.reject(e)}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}if(this.options.onSuccess){var s;(s=this.options).onSuccess.apply(s,arguments)}else this.promiseResolve.apply(this,arguments);this.options.onComplete&&this.options.onComplete()}},{key:"reject",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.getErrorPostprocessors()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){e=(0,r.value)(e)||e}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}if(this.options.onError){var o;(o=this.options).onError.apply(o,arguments)}else if(this._chained)this.promiseReject.apply(this,arguments);else if(this.options.errorHandler){var s;(s=this.options).errorHandler.apply(s,arguments)}else{var l;(l=console).error.apply(l,["Unhandled fetch error"].concat(Array.prototype.slice.call(arguments)))}this.options.onComplete&&this.options.onComplete()}},{key:"then",value:function(e,t){return this._chained=!0,t=t||this.options.errorHandler,this.getPromise().then(e,t)}},{key:"catch",value:function(){var e;return this._chained=!0,(e=this.getPromise()).catch.apply(e,arguments)}},{key:"getXHR",value:function(){return this.xhr}},{key:"getPromise",value:function(){return this.promise}},{key:"getRequest",value:function(){return this.request}},{key:"abort",value:function(){this.getXHR().abort()}},{key:"addXHRListener",value:function(e,t){var n;(n=this.getXHR()).addEventListener.apply(n,arguments)}},{key:"addProgressListener",value:function(e){this.addXHRListener.apply(this,["progress"].concat(Array.prototype.slice.call(arguments)))}}]),e}();he.defaultPreprocessors=[],he.defaultPostprocessors=[],he.defaultErrorPostprocessors=[],he.polyfill=!0;var Fu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),null===this.constructor._baseAjax?this.constructor._baseAjax=this:0===arguments.length&&(t=this.constructor._baseAjax),this.parentHandler=t,this.preprocessors=t?[]:Array.from(he.defaultPreprocessors),this.postprocessors=t?[]:Array.from(he.defaultPostprocessors),this.errorPostprocessors=t?[]:Array.from(he.defaultErrorPostprocessors),this.errorHandler=n}return o(e,[{key:"fetch",value:function(e){for(var t={preprocessors:this.getPreprocessors(),postprocessors:this.getPostprocessors(),errorPostprocessors:this.getErrorPostprocessors(),errorHandler:this.getErrorHandler()},n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];e[r]&&delete t[r]}for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];return he.apply(void 0,[e,t].concat(o))}},{key:"request",value:function(){return this.fetch.apply(this,arguments)}},{key:"get",value:function(e,t){return this.fetch.apply(this,Array.prototype.slice.call(arguments).concat([{method:"GET"}]))}},{key:"getJSON",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.get.apply(this,[e,{dataType:"json",data:t}].concat(i))}},{key:"post",value:function(e,t){return this.fetch.apply(this,Array.prototype.slice.call(arguments).concat([{method:"POST"}]))}},{key:"postJSON",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.post.apply(this,[e,{dataType:"json",data:t}].concat(i))}},{key:"addPreprocessor",value:function(e){this.preprocessors.push(e)}},{key:"getPreprocessors",value:function(){var e=this.parentHandler&&this.parentHandler.getPreprocessors()||[];return[].concat(C(this.preprocessors),C(e))}},{key:"addPostprocessor",value:function(e){this.postprocessors.push(e)}},{key:"getPostprocessors",
value:function(){return[].concat(C(this.parentHandler&&this.parentHandler.getPostprocessors()||[]),C(this.postprocessors))}},{key:"addErrorPostprocessor",value:function(e){this.errorPostprocessors.push(e)}},{key:"getErrorPostprocessors",value:function(){return[].concat(C(this.parentHandler&&this.parentHandler.getErrorPostprocessors()||[]),C(this.errorPostprocessors))}},{key:"getErrorHandler",value:function(){return this.errorHandler||this.parentHandler&&this.parentHandler.getErrorHandler()}}]),e}();Fu._baseAjax=null;var Uu=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zu,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r(this,t),n=b(this,d(t).call(this,i,a)),n.url=e,n}return h(t,e),o(t,[{key:"get",value:function(e){var n;return(n=w(d(t.prototype),"get",this)).call.apply(n,[this,this.url].concat(Array.prototype.slice.call(arguments)))}},{key:"getJSON",value:function(e){return w(d(t.prototype),"getJSON",this).call(this,this.url,e)}},{key:"post",value:function(e){var n;return(n=w(d(t.prototype),"post",this)).call.apply(n,[this,this.url].concat(Array.prototype.slice.call(arguments)))}},{key:"postJSON",value:function(e){return w(d(t.prototype),"postJSON",this).call(this,this.url,e)}}]),t}(Fu),zu=new Fu,Wu=function(){function e(t,n){r(this,e),this.dispatcher=t,this.callback=n}return o(e,[{key:"remove",value:function(){if(!this.dispatcher)return void console.warn("Removing a dispatcher twice");this.dispatcher.removeListener(this.callback),this.dispatcher=void 0,this.callback=void 0}},{key:"cleanup",value:function(){this.remove()}}]),e}(),Hu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t,this.listeners=[]}return o(e,[{key:"callbackExists",value:function(e){for(var t=0;t<this.listeners.length;t+=1)if(this.listeners[t]===e)return!0;return!1}},{key:"addListener",value:function(e){return"function"!=typeof e?void console.error("The listener needs to be a function: ",e):this.callbackExists(e)?void console.error("Can't re-register for the same callback: ",this," ",e):(this.listeners.push(e),new Wu(this,e))}},{key:"addListenerOnce",value:function(e){var t=this.addListener(function(){e.apply(void 0,arguments),t.remove()});return t}},{key:"addListenerSingle",value:function(e){this.removeAllListeners(),this.addListener(e)}},{key:"addListenerSingleOnce",value:function(e){this.removeAllListeners(),this.addListenerOnce(e)}},{key:"removeListener",value:function(e){for(var t=0;t<this.listeners.length;t+=1)if(this.listeners[t]===e)return this.listeners.splice(t,1)[0]}},{key:"removeAllListeners",value:function(){this.listeners=[]}},{key:"dispatch",value:function(e){for(var t=0;t<this.listeners.length;){var n=this.listeners[t];n.apply(void 0,arguments),n===this.listeners[t]&&t++}}}]),e}(),Vu=Symbol("Dispatchers"),Gu=function(){function e(){r(this,e)}return o(e,[{key:"getDispatcher",value:function(e,t){var n=this.dispatchers.get(e);return!n&&t&&(n=new Hu,this.dispatchers.set(e,n)),n}},{key:"dispatch",value:function(e,t){var n=this.getDispatcher(e);if(n)if(arguments.length<=2)n.dispatch(t);else{var i=Array.prototype.slice.call(arguments,1);n.dispatch.apply(n,C(i))}}},{key:"addListenerGeneric",value:function(e,t,n){var i=this;return Array.isArray(t)?new Yu(t.map(function(t){return i[e](t,n)})):this.getDispatcher(t,!0)[e](n)}},{key:"addListener",value:function(e,t){return this.addListenerGeneric("addListener",e,t)}},{key:"addListenerOnce",value:function(e,t){return this.addListenerGeneric("addListenerOnce",e,t)}},{key:"addListenerSingle",value:function(e,t){return this.addListenerGeneric("addListenerSingle",e,t)}},{key:"addListenerSingleOnce",value:function(e,t){return this.addListenerGeneric("addListenerSingleOnce",e,t)}},{key:"removeListener",value:function(e,t){var n=this.getDispatcher(e);n&&n.removeListener(t)}},{key:"removeAllListeners",value:function(e){var t=this.getDispatcher(e);t&&t.removeAllListeners()}},{key:"cleanup",value:function(){this.runCleanupJobs(),delete this[Vu]}},{key:"addCleanupJob",value:function(e){return this.hasOwnProperty("_cleanupJobs")||(this._cleanupJobs=new Yu),this._cleanupJobs.add(e),e}},{key:"runCleanupJobs",value:function(){this._cleanupJobs&&this._cleanupJobs.cleanup()}},{key:"detachListener",value:function(e){this._cleanupJobs?this._cleanupJobs.remove(e):e.remove()}},{key:"attachTimeout",value:function(e,t){var n=!1,i=setTimeout(function(){n=!0,e.apply(void 0,arguments)},t);return this.addCleanupJob(function(){n||clearTimeout(i)}),i}},{key:"attachInterval",value:function(e,t){var n=setInterval(e,t);return this.addCleanupJob(function(){clearInterval(n)}),n}},{key:"dispatchers",get:function(){return this[Vu]||(this[Vu]=new Map)}}]),e}();Gu.prototype.attachListener=de("Listener"),Gu.prototype.attachEventListener=de("EventListener"),Gu.prototype.attachCreateListener=de("CreateListener"),Gu.prototype.attachUpdateListener=de("UpdateListener"),Gu.prototype.attachDeleteListener=de("DeleteListener"),Gu.prototype.attachChangeListener=de("ChangeListener"),Hu.Global=new Gu;var ju=function(){function e(){r(this,e)}return o(e,[{key:"run",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.timeout||(this.timeout=setTimeout(function(){e(),t.timeout=void 0},n))}}]),e}(),Yu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,e),this.jobs=t}return o(e,[{key:"add",value:function(e){this.jobs.push(e)}},{key:"cleanup",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.jobs[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;"function"==typeof a.cleanup?a.cleanup():"function"==typeof a.remove?a.remove():a()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.jobs=[]}},{key:"remove",value:function(e){if(e){var t=this.jobs.indexOf(e);t>=0&&this.jobs.splice(t,1),e.remove()}else this.cleanup()}}]),e}(),Ju=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setActive",value:function(e,t,n){(n||e!==this._active)&&(this._active=e,this.dispatch(e),t&&this.addListenerOnce(function(n){n!=e&&t(n)}))}},{key:"getActive",value:function(){return this._active}}]),t}(Hu),qu=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},Xu=function(e){function t(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),i=b(this,d(t).call(this)),i.blob=e,i.fileName=n,i.options=a,i.options.autoBom&&(i.blob=qu(i.blob)),i.saveLink=document.createElement("a");var o,s="download"in i.saveLink,l=/constructor/i.test(window.HTMLElement)||window.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent),c="application/octet-stream"===e.type;if(i.readyState=t.INIT,s)return o=window.URL.createObjectURL(e),setTimeout(function(){i.saveLink.href=o,i.saveLink.download=i.fileName,i.click(),i.revoke(o),i.readyState=t.DONE},0),b(i);if((u||c&&l)&&window.FileReader){var h=new FileReader;return h.onloadend=function(){var e=u?h.result:h.result.replace(/^data:[^;]*;/,"data:attachment/file;");window.open(e,"_blank")||(window.location.href=e),e=void 0,i.readyState=t.DONE},h.readAsDataURL(e),i.readyState=t.INIT,b(i)}if(o||(o=window.URL.createObjectURL(e)),c)window.location.href=o;else{window.open(o,"_blank")||(window.location.href=o)}return i.readyState=t.DONE,i.revoke(o),i}return h(t,e),o(t,[{key:"click",value:function(){var e=new MouseEvent("click");this.saveLink.dispatchEvent(e)}},{key:"revoke",value:function(e){setTimeout(function(){"string"==typeof e?window.URL.revokeObjectURL(e):e.remove()},4e4)}}],[{key:"saveAs",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"text/plain;charset=utf-8"};if(!(e instanceof Blob)){var r=e;Array.isArray(r)||(r=[r]),e=new Blob(r,i)}return new t(e,n)}}]),t}(Gu);Xu.readyState=Xu.INIT=0,Xu.WRITING=1,Xu.DONE=2,"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&(Xu.saveAs=function(e,t,n){return t=t||e.name||"download",n||(e=qu(e)),navigator.msSaveOrOpenBlob(e,t)});var Ku,Qu=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this)),n.linkToParent(e),n}return h(t,e),o(t,[{key:"linkToParent",value:function(e){this.parent=e}},{key:"name",value:function(){return this.constructor.pluginName()}}],[{key:"pluginName",value:function(){return this.name}}]),t}(Gu),Zu=function(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"registerPlugin",value:function(e){this.hasOwnProperty("plugins")||(this.plugins=new Map);var t=new e(this),n=t.name();this.plugins.has(n)&&console.error("You are overwriting an existing plugin: ",n," for object ",this),this.plugins.set(n,t)}},{key:"removePlugin",value:function(e){var t=this.getPlugin(e);t?(t.remove(this),this.plugins.delete(t.name())):console.error("Can't remove plugin ",e)}},{key:"getPlugin",value:function(e){return"string"!=typeof e&&(e=e.pluginName()),this.plugins?this.plugins.get(e):null}}]),t}(e)};Ku=Symbol.iterator;var $u=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r(this,t),n=b(this,d(t).call(this)),n.storage=e,n.name=i,n.prefix=i+n.constructor.SEPARATOR,n}return h(t,e),o(t,[{key:"getPrefix",value:function(){return this.prefix}},{key:"getRawKey",value:function(e){return this.getPrefix()+e}},{key:"serialize",value:function(e){return JSON.stringify(e)}},{key:"deserialize",value:function(e){return e&&JSON.parse(e)}},{key:"set",value:function(e,t){try{this.storage.setItem(this.getRawKey(e),this.serialize(t))}catch(e){return!1}return!0}},{key:"delete",value:function(e){this.storage.removeItem(this.getRawKey(e))}},{key:"getRaw",value:function(e){return this.storage.getItem(this.getRawKey(e))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getRaw(e);return null==n?t:this.deserialize(n)}},{key:"has",value:function(e){return null!=this.getRaw(e)}},{key:"keys",value:function(){for(var e=[],t=this.storage.length,n=this.getPrefix().length,i=0;i<t;i++){var r=this.storage.key(i);r.startsWith(this.getPrefix())&&e.push(r.substr(n))}return e}},{key:"values",value:function(){var e=this;return this.keys().map(function(t){return e.get(t)})}},{key:"entries",value:function(){var e=this;return this.keys().map(function(t){return[t,e.get(t)]})}},{key:Ku,value:function(){return this.entries()}},{key:"clear",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.keys()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.delete(a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}]),t}(Gu);$u.SEPARATOR="-@#%-";var ec=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(this,t),b(this,d(t).call(this,window.sessionStorage,e))}return h(t,e),t}($u),tc=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(this,t),b(this,d(t).call(this,window.localStorage,e))}return h(t,e),o(t,[{key:"addChangeListener",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e;return n&&(i=function(n){n.oldValue=t.deserialize(n.oldValue),n.newValue=t.deserialize(n.newValue),e(n)}),this.constructor.getChangeDispatchable().addListener(this.name,i)}}],[{key:"getChangeDispatchable",value:function(){var e=this;return this.CHANGE_DISPATCHABLE||(this.CHANGE_DISPATCHABLE=new Gu,window.addEventListener("storage",function(t){var n=t.key.indexOf(e.SEPARATOR);if(-1!==n){var i=t.key.substr(0,n),r=t.key.substr(n+e.SEPARATOR.length),a={originalEvent:t,key:r,oldValue:t.oldValue,newValue:t.newValue};e.CHANGE_DISPATCHABLE.dispatch(i,a)}})),this.CHANGE_DISPATCHABLE}}]),t}($u),nc=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this)),window.onhashchange=function(){e.routeCallback()},e}return h(t,e),o(t,[{key:"routeCallback",value:function(){var e=this.getLocation();e&&this.dispatch("route",e)}},{key:"addRouteListener",value:function(e){return this.addListener("route",e)}},{key:"removeRouteListener",value:function(e){this.removeListener("route",e)}},{key:"route",value:function(){var e=Array.from(arguments);e=M(e);var t="#"+e.join("/");t!==window.location.hash&&(history.pushState({},"",t),this.routeCallback())}},{key:"routeNewTab",value:function(){var e=Array.from(arguments);e=M(e);var t=window.location.origin+window.location.pathname+"#"+e.join("/");window.open(t,"_blank")}},{key:"getLocation",value:function(){var e=window.location.hash;if(0===e.length)return{location:e,args:[]};if(/^#(?:[\w+-]\/?)+$/.test(e)){var t=e.slice(1).split("/");return 0===t[t.length-1].length&&t.pop(),{location:e,args:t}}return console.log("Invalid hash route ",e),null}}]),t}(Gu),ic=new nc,rc=function(){function e(){r(this,e)}return o(e,null,[{key:"isTouchDevice",value:function(){return this.hasOwnProperty("_isTouchDevice")||(this._isTouchDevice=!!("createTouch"in window.document||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0||"ontouchstart"in window)),this._isTouchDevice}},{key:"isMobileDevice",value:function(){if(!this.hasOwnProperty("_isMobileDevice")){var e=["Android","webOS","iPad","iPhone","iPod","BlackBerry","Windows Phone"];this._isMobileDevice=!1;for(var t=0,n=e;t<n.length;t++){var i=n[t];-1!==navigator.userAgent.indexOf(i)&&(this._isMobileDevice=!0)}}return this._isMobileDevice}},{key:"isLandscape",value:function(){var e=window.screen&&window.screen.width?window.screen.width:window.innerWidth,t=window.screen&&window.screen.height?window.screen.height:window.innerHeight;return e>t||t<380}},{key:"getEventTouchIdentifier",value:function(e){return Math.min.apply(Math,C(C(e.touches).map(function(e){return e.identifier})))}},{key:"getEventTouch",value:function(e){var t=this.getEventTouchIdentifier(e);return C(e.touches).find(function(e){return e.identifier===t})}},{key:"getEventCoord",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"client",i=n+t;return e[i]?e[i]:e.touches?this.getEventTouch(e)[i]:e.originalEvent?this.getEventCoord(e.originalEvent,t,n):void console.warn("Couldn't find coordinates for event. Maybe wrong reference point? (client/page/screen)")}},{key:"getEventX",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"client";return this.getEventCoord(e,"X",t)}},{key:"getEventY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"client";return this.getEventCoord(e,"Y",t)}},{key:"getBrowser",value:function(){return window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?"Opera":"undefined"!=typeof InstallTrigger?"Firefox":Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?"Safari":document.documentMode?"Internet Explorer":window.StyleMedia?"Edge":window.chrome&&window.chrome.webstore?"Chrome":"Unknown"}},{key:"supportsEvent",value:function(e){if(!this.cachedSupportedValues.has(e)){var t=document.createElement("div"),n="on"+e,i=n in t;i||(t.setAttribute(n,"return;"),i="function"==typeof t[n]),t=null,this.cachedSupportedValues.set(e,i)}return this.cachedSupportedValues.get(e)}}]),e}();rc.cachedSupportedValues=new Map;var ac=function(){function e(){r(this,e),this._values=new Array(8),this._length=0,this._offset=this._values.length/2|0}return o(e,[{key:"shouldShrink",value:function(){return this._values.length>4*this._length+8}},{key:"maybeShrink",value:function(){this.shouldShrink()&&this.rebalance(!0)}},{key:"rebalance",value:function(e){var t=this._values.length,n=this._length,i=1.618*n+8|0;if(e||t<i){for(var r=new Array(i),a=i/2-n/2|0,o=0;o<n;o+=1)r[a+o]=this._values[this._offset+o];this._values=r,this._offset=a}else{var s=t/2-n/2|0;this._values.copyWithin(s,this._offset,this._offset+this._length),s<this._offset?this._values.fill(void 0,s+this._length,this._offset+this._length):this._values.fill(void 0,this._offset+this._length,s+this._length),this._offset=s}}},{key:"pushFront",value:function(e){0==this._offset&&this.rebalance(),this._values[--this._offset]=e,this._length+=1}},{key:"popFront",value:function(){var e=this.peekBack();return this._values[this._offset++]=void 0,this._length-=1,this.maybeShrink(),e}},{key:"peekFront",value:function(){if(0==this._length)throw Error("Invalid operation, empty deque");return this._values[this._offset]}},{key:"pushBack",value:function(e){this._offset+this._length===this._values.length&&this.rebalance(),this._values[this._offset+this._length]=e,this._length+=1}},{key:"popBack",value:function(){var e=this.peekFront();return this._length-=1,this._values[this._offset+this._length]=void 0,this.maybeShrink(),e}},{key:"peekBack",value:function(){if(0==this._length)throw Error("Invalid operation, empty deque");return this._values[this._offset+this._length-1]}},{key:"get",value:function(e){if(e<0||e>=this._length)throw Error("Invalid index",e);return this._values[this._offset+e]}},{key:"toArray",value:function(){return this._values.slice(this._offset,this._offset+this._length)}},{key:"toString",value:function(){return this.toArray().toString()}},{key:"entries",value:function(){return this.toArray()[Symbol.iterator]}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"length",get:function(){return this._length},set:function(e){throw Error("Can't resize a deque")}}]),e}();ac.prototype.pop=ac.prototype.popBack,ac.prototype.push=ac.prototype.pushBack,ac.prototype.shift=ac.prototype.popFront,ac.prototype.unshift=ac.prototype.pushFront;var oc="This function will be removed in future versions.",sc=be,lc=function(){function e(t,n){r(this,e),this.string=t,this.pointer=0}return o(e,[{key:"done",value:function(){return this.pointer>=this.string.length}},{key:"advance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pointer+=e}},{key:"char",value:function(){var e=this.string.charAt(this.pointer);return this.pointer+=1,e}},{key:"whitespace",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:/\s/,t=this.pointer;!this.done()&&e.test(this.at(0));)this.pointer+=1;return this.string.substring(t,this.pointer)}},{key:"word",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:/\S/;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.whitespace();for(var t=this.pointer;!this.done()&&e.test(this.at(0));)this.pointer+=1;return this.string.substring(t,this.pointer)}},{key:"number",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.whitespace();if(this.startsWith("NaN"))return this.advance("NaN".length),NaN;var e="+";"-"!==this.at(0)&&"+"!==this.at(0)||(e=this.char());if(this.startsWith("Infinity"))return this.advance("Infinity".length),"+"===e?1/0:-1/0;var t=function(e){return e>="0"||e<="9"};if("0"===this.at(0)&&("X"===this.at(1)||"x"===this.at(1))){this.advance(2);for(var n=this.pointer;!this.done()&&function(e){return t(e)||e>="A"&&e<="F"||e>="a"&&e<="f"}(this.at(0));)this.pointer+=1;return parseInt(e+this.string.substring(n),16)}for(var i=this.pointer;!this.done()&&t(this.at(1));)if(this.pointer+=1,"."===this.peek){for(this.advance(1);!this.done()&&t(this.at(1));)this.pointer+=1;break}return parseFloat(e+this.string.substring(i,this.pointer))}},{key:"line",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:/\r*\n/,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(e instanceof RegExp){var n,i,r=this.string.substring(this.pointer),a=r.match(e);return null===a?(n=r.length,i=0):(n=a.index,i=a[0].length),n>=t?(this.pointer+=t,r.substring(0,t)):(this.advance(n+i),r.substring(0,n))}var o=this.string.indexOf(e,this.pointer);if(-1===o&&(o=this.string.length),o-this.pointer>t){var s=this.string.substring(this.pointer,this.pointer+t);return this.advance(t),s}var l=this.string.substring(this.pointer,o);return this.pointer=o+e.length,l}},{key:"at",value:function(e){return this.string.charAt(this.pointer+e)}},{key:"peek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.string.substring(this.pointer,this.pointer+e)}},{key:"startsWith",value:function(e){return e instanceof RegExp?(e=new RegExp("^"+e.toString().slice(1,-1)),e.test(this.string.substring(this.pointer))):this.peek(e.length)===e}},{key:"search",value:function(e){var t;return t=e instanceof RegExp?this.string.substring(this.pointer).search(e):this.string.indexOf(e,this.pointer)-this.pointer,t<0?-1:t}},{key:"clone",value:function(){var e=new this.constructor(this.string);return e.pointer=this.pointer,e}}]),e}(),uc=function(){function e(t){var n=this;r(this,e),this.options=t,this.steps=0,this.startNode={value:null,startNode:!0},this.node=this.startNode;var i=this.startNode,a=t.pattern.charAt(0),o={value:a,startNode:!0},s=Ae(t.pattern),l=[o];if(t.leftWhitespace){var u={value:" ",whitespaceNode:!0};u.next=function(e){return e===a?o:/\s/.test(e)?u:n.startNode},i.next=function(e){return/\s/.test(e)?u:n.startNode},this.node=u}else i.next=function(e){return e===a?o:n.startNode};i=o;for(var c=1;c<t.pattern.length;c+=1)!function(e){var r=t.pattern[e],a={value:r};l.push(a);var o=0===s[e-1]?n.startNode:l[s[e-1]-1];i.next=function(e){return e===r?a:o.next(e)},i=a}(c);if(i.patternLastNode=!0,t.captureContent){this.capture=[];var h={value:"",captureNode:!0},d=t.endPattern.charAt(0),p={value:d},f=Ae(t.endPattern),g=[p];i.next=h.next=function(e){return e===d?p:h},i=p;for(var m=1;m<t.endPattern.length;m+=1)!function(e){var n=t.endPattern[e],r={value:n};g.push(r);var a=0===f[e-1]?h:g[f[e-1]-1];i.next=function(e){return e===n?r:a.next(e)},i=r}(m);i.endPatternLastNode=!0}i.endNode=!0,i.next=function(e){return n.startNode.next(e)}}return o(e,[{key:"nextState",value:function(e){return this.steps+=1,this.node=this.node.next(e),this.node.startNode&&(this.steps=0,delete this.patternStep,delete this.endPatternStep),this.node.patternLastNode&&(this.patternStep=this.steps-this.options.pattern.length+1),this.node.endPatternLastNode&&(this.endPatternStep=this.steps-this.options.pattern.length+1),this.node}},{key:"done",value:function(){return this.node.endNode}}]),e}(),cc=function(){function e(t){r(this,e)}return o(e,[{key:"modify",value:function(e,t){for(var n=new uc({pattern:this.pattern,captureContent:this.captureContent,endPattern:this.endPattern,leftWhitespace:this.leftWhitespace}),i=0,r=e[i],a=[],o=0;o<t.length;o+=1){var s=t[o];if(o>=r.end&&(a.push(r),i+=1,r=e[i]),r.isJSX)n.nextState("\\"+s);else if(n.nextState(s),n.done()){for(var l=o-(n.steps-n.patternStep),u=o-(n.steps-n.endPatternStep)+this.endPattern.length,c=[];a.length>0&&l<=a[a.length-1].start;){var h=a.pop();c.push(h)}if(a.length>0&&l<a[a.length-1].end){var d=a.pop();a.push({isString:!0,start:d.start,end:l}),c.push({isString:!0,start:l,end:d.end})}r.start<l&&a.push({isString:!0,start:r.start,end:l}),c.reverse(),c.push({isString:!0,start:Math.max(r.start,l),end:u}),a.push({content:this.wrap(this.processChildren(c,t)),start:l,end:u}),r={isString:!0,start:u,end:r.end}}}return r.start<t.length&&a.push(r),a}},{key:"processChildren",value:function(e,t){var n=this;return e.map(function(e){return n.processChild(e,t)})}},{key:"processChild",value:function(e,t){return e.isDummy?"":e.isString?t.substring(e.start,e.end):e.content}}]),e}(),hc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.pattern="```",n.endPattern="\n```",n.leftWhitespace=!0,n.captureContent=!0,n}return h(t,e),o(t,[{key:"processChildren",value:function(e,t){if(this.codeOptions=null,e.length>0){var n=t.substring(e[0].start,e[e.length-1].end);n=n.substring(n.indexOf(this.pattern)+this.pattern.length),n=n.substring(0,n.lastIndexOf(this.endPattern));var i=n.indexOf("\n")+1,r=n.substring(0,i).trim();if(n=n.substring(i),r.length>0){this.codeOptions={};var a=new lc(r);this.codeOptions.aceMode=a.word(),Object.assign(this.codeOptions,Cc.parseOptions(a))}return n}return""}},{key:"getElement",value:function(e){return{tag:this.constructor.tag||"pre",children:[e]}}},{key:"wrap",value:function(e,t){var n=this.getElement(e),i={aceMode:"c_cpp",maxLines:32};return this.codeOptions&&(Object.assign(i,this.codeOptions),delete this.codeOptions),Object.assign(i,n),i}}]),t}(cc),dc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.pattern="#",n}return h(t,e),o(t,[{key:"wrap",value:function(e){var t=e[0],n=t.indexOf("#"),i=n+1,r=1,a=t.charAt(i);if(a>="1"&&a<="6")r=parseInt(a),i+=1;else if("#"===a)for(;r<6&&"#"===t.charAt(i);)r+=1,i+=1;return e[0]=t.substring(i),{tag:"h"+r,children:e}}}]),t}(Ie(cc)),pc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.pattern="---",n}return h(t,e),o(t,[{key:"wrap",value:function(e){return{tag:"hr"}}}]),t}(Ie(cc)),fc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.tag="ul",n.itemTag="li",n.pattern="- ",n.groupConsecutive=!0,n}return h(t,e),t}(Ie(cc)),gc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.tag="ol",n.itemTag="li",n.pattern="1. ",n.groupConsecutive=!0,n}return h(t,e),t}(Ie(cc)),mc=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"modify",value:function(e,t){for(var n=[],i=[],r=0,a=e[r],o=0,s=0;s<t.length;s+=1)if(s>=a.end&&(i.push(a),r+=1,a=e[r]),!a.isJSX&&"\n"===t[s]){if(a.start<s&&i.push({isString:!0,start:a.start,end:s}),n.push({content:this.wrap(this.processChildren(i,t)),start:o,end:s+1}),i=[],o=s+1,"\n"===t[s+1]){var l=void 0,u=void 0;for(l=s;s+1<t.length&&"\n"===t[s+1];)s+=1;u=s+1,n.push({content:{tag:"br"},start:l,end:u}),o=s+1}a={isString:!0,start:o,end:a.end}}return a.start<t.length&&i.push(a),i.length>0&&n.push({content:this.wrap(this.processChildren(i,t)),start:o,end:t.length}),n}},{key:"wrap",value:function(e){return{tag:"p",children:e}}}]),t}(cc),vc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.leftWhitespace=!0,n.pattern="*",n.endPattern="*",n.tag="strong",n}return h(t,e),t}(Le(cc)),yc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.leftWhitespace=!0,n.pattern="/",n.endPattern="/",n.tag="em",n}return h(t,e),t}(Le(cc)),bc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.pattern="`",n.endPattern="`",n.tag="code",n}return h(t,e),o(t,[{key:"processChildren",value:function(e,t){return 0===e.length?[]:[t.substring(e[0].start,e[e.length-1].end)]}}]),t}(Ne(Le(cc))),kc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.pattern="$",n.endPattern="$",n.tag="var",n}return h(t,e),t}(Ne(Le(cc))),wc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.pattern="$$",n.endPattern="$$",n.tag="Latex",n}return h(t,e),t}(Ne(Le(cc))),Ec=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"modify",value:function(e,t){for(var n=this,i=[],r=0,a=e[r],o=0,s=function(e,r){var o=t.substring(e,r);n.constructor.isCorrectUrl(o)&&(a.start<e&&i.push({isString:!0,start:a.start,end:e}),i.push({isJSX:!0,content:{tag:"a",href:o,children:[n.constructor.trimProtocol(o)],target:"_blank"},start:e,end:r}),a={isString:!0,start:r,end:a.end})},l=0;l<t.length;l+=1)l>=a.end&&(i.push(a),r+=1,a=e[r]),a.isJSX||/\s/.test(t[l])&&(s(o,l),o=l+1);return o<t.length&&s(o,t.length),a.start<t.length&&i.push(a),i}}],[{key:"isCorrectUrl",value:function(e){if(e.startsWith("http://")||e.startsWith("https://"))return!0}},{key:"trimProtocol",value:function(e){return"s"===e[4]?e.substring(8,e.length):e.substring(7,e.length)}}]),t}(cc),Sc=cc,Cc=function(){function e(t){r(this,e),t=t||{},this.modifiers=t.modifiers||this.constructor.modifiers,this.uiElements=t.uiElements||new Map}return o(e,[{key:"parse",value:function(e){if(!e)return[];for(var t=[],n=this.parseUIElements(e),i=this.modifiers.length-1;i>=0;i-=1){n=this.modifiers[i].modify(n,e)}var r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u.isDummy||(u.isString?t.push(e.substring(u.start,u.end)):t.push(u.content))}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return t}},{key:"parseUIElements",value:function(e){for(var t=new lc(e),n=[],i=0;!t.done();){if("<"===t.char()&&/[a-zA-Z]/.test(t.at(0))){t.pointer-=1;var r=t.pointer,a=void 0;try{a=this.parseUIElement(t)}catch(e){continue}this.uiElements.has(a.tag)&&(n.push({isString:!0,start:i,end:r}),n.push({content:a,isJSX:!0,start:r,end:t.pointer}),i=t.pointer)}}return i<e.length&&n.push({isString:!0,start:i,end:e.length}),n}},{key:"parseUIElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\/?>/;if(e.whitespace(),e.done())return null;if("<"!==e.at(0))throw Error("Invalid UIElement declaration.");var n={};return e.char(),n.tag=e.word(),e.whitespace(),Object.assign(n,this.parseOptions(e,t)),e.line(t),n}},{key:"parseOptions",value:function(e,t){return this.constructor.parseOptions(e,t)}},{key:"parseTextLine",value:function(e){for(var t=[],n=e.pointer,i=e.pointer;!e.done()&&!e.startsWith(/\s+\r*\n/);)if("<"!==e.at(0)){var r=e.char();"\\"===r&&(r+=e.char())}else{t.push({content:e.string.substring(i,e.pointer),start:i,end:e.pointer});var a=e.pointer,o=this.parseUIElement(e,/\/*>/);t.push({content:o,start:a,end:e.pointer}),i=e.pointer}var s=e.string.substring(n,e.pointer);return s.length>0&&t.push(s),e.line(),t}}],[{key:"parseOptions",value:function(e,t){var n={};for(e.whitespace();!e.done();){e.whitespace();var i=/[\w$]/,r=void 0;if(i.test(e.at(0))&&(r=e.word(i)),e.whitespace(),t&&0===e.search(t)){n[r]=!0;break}if(!r)throw Error("Invalid option name");if("="===e.peek()){if(e.char(),e.whitespace(),e.done())throw Error("No argument given for option: "+r);if('"'===e.peek()){var a="",o=!1;for(e.char();!e.done();){var s=e.char();if('"'===s){o=!0;break}a+=s}if(!o)throw Error("Argument string not closed: "+a);n[r]=a}else{if("{"!==e.peek())throw Error("Invalid argument for option: "+r+". Need string or JSON.");var l=0,u=!1,c="";for(e.char();!e.done();){var h=e.char();if("{"===h)l+=1;else if("}"===h){if(!(l>0)){n[r]=c.length>0?this.parseJSON5(c):void 0,u=!0;break}l-=1}c+=h}if(!u)throw Error("Invalid JSON argument for option: "+r+". Input: "+c)}}else n[r]=!0;e.whitespace()}return n}}]),e}();Cc.modifiers=[new hc,new dc,new pc,new fc,new gc,new mc,new bc,new wc,new kc,new vc,new yc,new Ec],Cc.parseJSON5=function(){var e,t,n,r,a,o,s={"'":"'",'"':'"',"\\":"\\","/":"/","\n":"",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=function(e){return""===e?"EOF":"'"+e+"'"},u=function(i){var r=new SyntaxError;throw r.message=i+" at line "+t+" column "+n+" of the JSON5 data. Still to read: "+JSON.stringify(a.substring(e-1,e+19)),r.at=e,r.lineNumber=t,r.columnNumber=n,r},c=function(i){return i&&i!==r&&u("Expected "+l(i)+" instead of "+l(r)),r=a.charAt(e),e++,n++,("\n"===r||"\r"===r&&"\n"!==h())&&(t++,n=0),r},h=function(){return a.charAt(e)},d=function(){var e=r;for("_"!==r&&"$"!==r&&(r<"a"||r>"z")&&(r<"A"||r>"Z")&&u("Bad identifier as unquoted key");c()&&("_"===r||"$"===r||r>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9");)e+=r;return e},p=function(){var e,t="",n="",i=10;if("-"!==r&&"+"!==r||(t=r,c(r)),"I"===r)return e=b(),("number"!=typeof e||isNaN(e))&&u("Unexpected word for number"),"-"===t?-e:e;if("N"===r)return e=b(),isNaN(e)||u("expected word to be NaN"),e;switch("0"===r&&(n+=r,c(),"x"===r||"X"===r?(n+=r,c(),i=16):r>="0"&&r<="9"&&u("Octal literal")),i){case 10:for(;r>="0"&&r<="9";)n+=r,c();if("."===r)for(n+=".";c()&&r>="0"&&r<="9";)n+=r;if("e"===r||"E"===r)for(n+=r,c(),"-"!==r&&"+"!==r||(n+=r,c());r>="0"&&r<="9";)n+=r,c();break;case 16:for(;r>="0"&&r<="9"||r>="A"&&r<="F"||r>="a"&&r<="f";)n+=r,c()}if(e="-"===t?-n:+n,isFinite(e))return e;u("Bad number")},f=function(){var e,t,n,i,a="";if('"'===r||"'"===r)for(i=r;c();){if(r===i)return c(),a
;if("\\"===r)if(c(),"u"===r){for(n=0,t=0;t<4&&(e=parseInt(c(),16),isFinite(e));t+=1)n=16*n+e;a+=String.fromCharCode(n)}else if("\r"===r)"\n"===h()&&c();else{if("string"!=typeof s[r])break;a+=s[r]}else{if("\n"===r)break;a+=r}}u("Bad string")},g=function(){"/"!==r&&u("Not an inline comment");do{if(c(),"\n"===r||"\r"===r)return void c()}while(r)},m=function(){"*"!==r&&u("Not a block comment");do{for(c();"*"===r;)if(c("*"),"/"===r)return void c("/")}while(r);u("Unterminated block comment")},v=function(){"/"!==r&&u("Not a comment"),c("/"),"/"===r?g():"*"===r?m():u("Unrecognized comment")},y=function(){for(;r;)if("/"===r)v();else{if(!/\s/.test(r))return;c()}},b=function(){switch(r){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null;case"I":return c("I"),c("n"),c("f"),c("i"),c("n"),c("i"),c("t"),c("y"),1/0;case"N":return c("N"),c("a"),c("N"),NaN}u("Unexpected "+l(r))},k=function(){var e=[];if("["===r)for(c("["),y();r;){if("]"===r)return c("]"),e;if(","===r?u("Missing array element"):e.push(o()),y(),","!==r)return c("]"),e;c(","),y()}u("Bad array")},w=function(){var e,t={};if("{"===r)for(c("{"),y();r;){if("}"===r)return c("}"),t;if(e='"'===r||"'"===r?f():d(),y(),c(":"),t[e]=o(),y(),","!==r)return c("}"),t;c(","),y()}u("Bad object")};return o=function(){switch(y(),r){case"{":return w();case"[":return k();case'"':case"'":return f();case"-":case"+":case".":return p();default:return r>="0"&&r<="9"?p():b()}},function(s,l){var c;return a=String(s),e=0,t=1,n=1,r=" ",c=o(),y(),r&&u("Syntax error"),"function"==typeof l?function e(t,n){var r,a,o=t[n];if(o&&"object"===i(o))for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(a=e(o,r),void 0!==a?o[r]=a:delete o[r]);return l.call(t,n,o)}({"":c},""):c}}();var xc=new Set(["border-bottom-width","border-left-width","border-right-width","border-top-width","border-width","bottom","font-size","font-stretch","height","layer-grid-char","layer-grid-char-spacing","layer-grid-line","left","letter-spacing","line-height","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","outline-width","padding","padding-bottom","padding-left","padding-right","padding-top","right","size","top","width","word-spacing"]),Tc=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return Array.from(this).join(" ")}}],[{key:"create",value:function(e){return W(new Set(String(e||"").split(" ")),this)}}]),t}(v(Set)),Ac=function(){function e(t){r(this,e),Object.assign(this,t),this.className instanceof Tc&&(this.className=Tc.create(String(this.className))),this.style&&(this.style=Object.assign({},this.style))}return o(e,[{key:"setAttribute",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.constructor.defaultAttributesMap;i.has(e)||(this.whitelistedAttributes=this.whitelistedAttributes||{},this.whitelistedAttributes[e]=!0),this[e]=t,n&&this.applyAttribute(e,n,i)}},{key:"applyStyleToNode",value:function(e,t,n){"function"==typeof t&&(t=t()),(t instanceof Number||"number"==typeof t)&&0!=t&&xc.has(J(e))&&(t+="px"),n&&n.style[e]!==t&&(n.style[e]=t)}},{key:"setStyle",value:function(e,t,n){if("string"==typeof e||e instanceof String){if(void 0===t)return void this.removeStyle(e,n);this.style=this.style||{},this.style[e]=t,this.applyStyleToNode(e,t,n)}else for(var i=0,r=Object.keys(e);i<r.length;i++){var a=r[i];this.setStyle(a,e[a],n)}}},{key:"removeStyle",value:function(e,t){this.style&&delete this.style[e],t&&t.style[e]&&delete t.style[e]}},{key:"getClassNameSet",value:function(){return this.className instanceof Tc||(this.className=Tc.create(this.className||"")),this.className}},{key:"addClass",value:function(e,t){e=this.constructor.getClassArray(e);var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.getClassNameSet().add(s),t&&t.classList.add(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"removeClass",value:function(e,t){e=this.constructor.getClassArray(e);var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.getClassNameSet().delete(s),t&&t.classList.remove(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"hasClass",value:function(e){return this.getClassNameSet().has("string"==typeof e?e:e.className)}},{key:"applyAttribute",value:function(e,t,n){var i=n.get(e);if(!i){if(!(this.whitelistedAttributes&&e in this.whitelistedAttributes))return;i={domName:e}}var r=this[e];"function"==typeof r&&(r=r()),i.noValue&&(r=r?"":void 0),void 0!==r?t.setAttribute(i.domName,r):t.removeAttribute(i.domName)}},{key:"applyClassName",value:function(e){if(this.className){var t=String(this.className);e.className!=t&&(e.className=t)}else e.className&&e.removeAttribute("class")}},{key:"apply",value:function(e,t){for(var n={},i=(this.whitelistedAttributes,e.attributes),r=i.length-1;r>=0;r--){var a=i[r],o=a.name;if("style"!==o&&"class"!==o){var s=t.reverseNameMap.get(o);if(this.hasOwnProperty(s)){var l=this[s],u=t.get(s);u&&u.noValue&&(l=l?"":void 0),null!=l?(e.setAttribute(o,l),n[s]=!0):e.removeAttribute(o)}else e.removeAttribute(o)}}for(var c in this)n[c]||this.applyAttribute(c,e,t);if(this.applyClassName(e),e.removeAttribute("style"),this.style)for(var h in this.style)this.applyStyleToNode(h,this.style[h],e)}}],[{key:"getClassArray",value:function(e){return e?Array.isArray(e)?e.map(function(e){return String(e).trim()}):String(e).trim().split(" "):[]}}]),e}();Ac.defaultAttributesMap=Re([["id"],["action"],["colspan"],["default"],["disabled",{noValue:!0}],["fixed"],["forAttr",{domName:"for"}],["hidden"],["href"],["rel"],["minHeight"],["minWidth"],["role"],["target"],["HTMLtitle",{domName:"title"}],["type"],["placeholder"],["src"],["height"],["width"],["tabIndex"]]);var Lc={renderingStack:[]},Ic=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"canOverwrite",value:function(e){return this.constructor===e.constructor&&this.getNodeType()===e.getNodeType()}},{key:"applyRef",value:function(){if(this.options&&this.options.ref){this.options.ref.parent[this.options.ref.name]=this}}},{key:"removeRef",value:function(){if(this.options&&this.options.ref){var e=this.options.ref.parent,t=this.options.ref.name;e[t]===this&&(e[t]=void 0)}}},{key:"onMount",value:function(){}},{key:"onUnmount",value:function(){}},{key:"destroyNode",value:function(){this.onUnmount(),this.cleanup(),this.removeRef(),this.node&&this.node.remove(),delete this.node}}]),t}(Gu);Lc.TextElement=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(this,t),e=b(this,d(t).call(this)),n&&n.hasOwnProperty("value")?(e.value=n.value,e.options=n):e.value=null!=n?n:"",e}return h(t,e),o(t,[{key:"mount",value:function(e,t){this.parent=e,this.node?this.redraw():(this.createNode(),this.applyRef()),e.node.insertBefore(this.node,t),this.onMount()}},{key:"getNodeType",value:function(){return Node.TEXT_NODE}},{key:"copyState",value:function(e){this.value=e.value,this.options=e.options}},{key:"createNode",value:function(){return this.node=document.createTextNode(this.getValue()),Me(this),this.node}},{key:"setValue",value:function(e){this.value=null!=e?e:"",this.node&&this.redraw()}},{key:"getValue",value:function(){return String(this.value)}},{key:"redraw",value:function(){if(this.node){var e=this.getValue();this.node.nodeValue!==e&&(this.node.nodeValue=e)}this.applyRef()}}]),t}(Ic);var Nc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),e=b(this,d(t).call(this)),e.children=[],e.options=n,e.setOptions(n),e.state=e.getDefaultState(),e}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(e){}},{key:"getDefaultState",value:function(){return{}}},{key:"getPreservedOptions",value:function(){}},{key:"setOptions",value:function(e){var t=this.getDefaultOptions(e);t&&(e=Object.assign(t,e)),this.options=e}},{key:"updateOptions",value:function(e){this.setOptions(Object.assign(this.options,e)),this.redraw()}},{key:"updateState",value:function(e){this.state=c({},this.state,{},e),this.redraw()}},{key:"setChildren",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.updateOptions({children:M(t)})}},{key:"copyState",value:function(e){var t=e.options,n=this.getPreservedOptions();n&&(t=Object.assign({},t,n)),this.setOptions(t),this.addListenersFromOptions()}},{key:"getNodeType",value:function(){return this.options.nodeType||"div"}},{key:"getGivenChildren",value:function(){return this.options.children||[]}},{key:"render",value:function(){return this.options.children}},{key:"createNode",value:function(){return this.node=document.createElement(this.getNodeType()),Me(this),this.node}},{key:"cleanup",value:function(){this.runCleanupJobs();var e=!0,n=!1,i=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.destroyNode()}}catch(e){n=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}this.clearNode(),w(d(t.prototype),"cleanup",this).call(this)}},{key:"overwriteChild",value:function(e,t){return e.copyState(t),e}},{key:"getElementKeyMap",value:function(e){if(e&&e.length){for(var t=new Map,n=0;n<e.length;n+=1){var i=e[n].options&&e[n].options.key||"autokey"+n;t.set(i,e[n])}return t}}},{key:"getChildrenToRender",value:function(){return this.render()}},{key:"getChildrenForRedraw",value:function(){Lc.renderingStack.push(this);var e=M(this.getChildrenToRender());return Lc.renderingStack.pop(),e}},{key:"redraw",value:function(){if(!this.node)return console.error("Element not yet mounted. Redraw aborted!",this),!1;var e=this.getChildrenForRedraw();if(e===this.children){for(var t=0;t<e.length;t+=1)e[t].redraw();return this.applyNodeAttributes(),this.applyRef(),!0}for(var n=this.node,i=this.getElementKeyMap(this.children),r=0;r<e.length;r++){var a=e[r],o=r>0?e[r-1].node:null,s=o?o.nextSibling:n.firstChild;a.getNodeType||(a=e[r]=new Lc.TextElement(a));var l=a.options&&a.options.key||"autokey"+r,u=i&&i.get(l);u&&e[r].canOverwrite(u)?(u!==e[r]&&(e[r]=this.overwriteChild(u,e[r])),e[r].redraw(),e[r].node!==s&&n.insertBefore(e[r].node,s)):a.mount(this,s)}if(this.children.length)for(var c=new Set(e),h=0;h<this.children.length;h+=1)c.has(this.children[h])||this.children[h].destroyNode();return this.children=e,this.applyNodeAttributes(),this.applyRef(),!0}},{key:"getOptionsAsNodeAttributes",value:function(){return W(this.options,Ac)}},{key:"getNodeAttributes",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.getOptionsAsNodeAttributes():new Ac(this.options)}},{key:"extraNodeAttributes",value:function(e){}},{key:"applyNodeAttributes",value:function(){var e;this.extraNodeAttributes!=Au?(e=this.getNodeAttributes(!0),this.extraNodeAttributes(e)):e=this.getNodeAttributes(!1),e.apply(this.node,this.constructor.domAttributesMap)}},{key:"setAttribute",value:function(e,t){this.getOptionsAsNodeAttributes().setAttribute(e,t,this.node,this.constructor.domAttributesMap)}},{key:"setStyle",value:function(e,t){if("object"!==i(e))this.getOptionsAsNodeAttributes().setStyle(e,t,this.node);else for(var n=0,r=Array.from(Object.entries(e));n<r.length;n++){var a=S(r[n],2),o=a[0],s=a[1];this.setStyle(o,s)}}},{key:"removeStyle",value:function(e){this.getOptionsAsNodeAttributes().removeStyle(e,this.node)}},{key:"addClass",value:function(e){this.getOptionsAsNodeAttributes().addClass(e,this.node)}},{key:"removeClass",value:function(e){this.getOptionsAsNodeAttributes().removeClass(e,this.node)}},{key:"hasClass",value:function(e){return this.getOptionsAsNodeAttributes().hasClass(e)}},{key:"toggleClass",value:function(e){this.hasClass(e)?this.removeClass(e):this.addClass(e)}},{key:"addListenersFromOptions",value:function(){var e=this;for(var t in this.options)!function(t){if("string"==typeof t&&t.startsWith("on")&&t.length>2){var n=t.substring(2),i="add"+n+"Listener",r="on"+n+"Handler";"function"!=typeof e[i]||e.hasOwnProperty(r)||(e[r]=function(n){Lc.event=n,e.options[t]&&e.options[t](e,n)},e[i](e[r]))}}(t)}},{key:"refLink",value:function(e){return{parent:this,name:e}}},{key:"refLinkArray",value:function(e,t){return this.hasOwnProperty(e)||(this[e]=[]),{parent:this[e],name:t}}},{key:"bindToNode",value:function(e,t){return this.node=e,t&&(this.clearNode(),this.redraw()),this}},{key:"mount",value:function(e,t){if(e.node||(e=(new Lc.Element).bindToNode(e)),this.parent=e,this.node)return e.insertChildNodeBefore(this,t),void this.dispatch("changeParent",this.parent);this.createNode(),this.redraw(),e.insertChildNodeBefore(this,t),this.addListenersFromOptions(),this.onMount()}},{key:"appendChild",value:function(e){if(this.children!==this.options.children)throw"Can't properly handle appendChild, you need to implement it for "+this.constructor;return this.options.children.push(e),e.mount(this,null),e}},{key:"insertChild",value:function(e,t){if(this.children!==this.options.children)throw"Can't properly handle insertChild, you need to implement it for "+this.constructor;t=t||0,this.options.children.splice(t,0,e);var n=t+1<this.options.children.length?this.children[t+1].node:null;return e.mount(this,n),e}},{key:"eraseChild",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.options.children.indexOf(e);return n<0?null:this.eraseChildAtIndex(n,t)}},{key:"eraseChildAtIndex",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e<0||e>=this.options.children.length)return void console.error("Erasing child at invalid index ",e,this.options.children.length);if(this.children!==this.options.children)throw"Can't properly handle eraseChild, you need to implement it for "+this.constructor;var n=this.options.children.splice(e,1)[0];return t?n.destroyNode():this.node.removeChild(n.node),n}},{key:"eraseAllChildren",value:function(){for(;this.children.length>0;)this.eraseChildAtIndex(this.children.length-1)}},{key:"show",value:function(){this.removeClass("hidden")}},{key:"hide",value:function(){this.addClass("hidden")}},{key:"insertChildNodeBefore",value:function(e,t){this.node.insertBefore(e.node,t)}},{key:"clearNode",value:function(){for(;this.node&&this.node.lastChild;)this.node.removeChild(this.node.lastChild)}},{key:"isInDocument",value:function(){return document.body.contains(this.node)}},{key:"getWidthOrHeight",value:function(e){var t=this.node;return t?parseFloat("width"===e?t.offsetWidth:t.offsetHeight)||0:0}},{key:"getHeight",value:function(){return this.getWidthOrHeight("height")}},{key:"getWidth",value:function(){return this.getWidthOrHeight("width")}},{key:"setHeight",value:function(e){this.setStyle("height",z(e,"px")),this.dispatch("resize")}},{key:"setWidth",value:function(e){this.setStyle("width",z(e,"px")),this.dispatch("resize")}},{key:"addNodeListener",value:function(e,t){for(var n,i=this,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];(n=this.node).addEventListener.apply(n,[e,t].concat(a));var s={remove:function(){i.removeNodeListener.apply(i,[e,t].concat(a))}};return this.addCleanupJob(s),s}},{key:"removeNodeListener",value:function(e,t){this.node.removeEventListener(e,t)}},{key:"addClickListener",value:function(e){return this.addNodeListener("click",e)}},{key:"removeClickListener",value:function(e){this.removeNodeListener("click",e)}},{key:"addDoubleClickListener",value:function(e){return this.addNodeListener("dblclick",e)}},{key:"removeDoubleClickListener",value:function(e){this.removeNodeListener("dblclick",e)}},{key:"addChangeListener",value:function(e){return this.addNodeListener("change",e)}},{key:"styleSheet",get:function(){return this.getStyleSheet()},set:function(e){this.options.styleSheet=e,this.redraw()}}],[{key:"create",value:function(e,t){var n=new this(t);return n.mount(e,null),n}}]),t}(Ic);Lc.createElement=function(e,t){if(!e)return void console.error("Create element needs a valid object tag, did you mistype a class name?");t=t||{};for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t.children=M(i),t.ref){if("string"==typeof t.ref){if(!(Lc.renderingStack.length>0))throw Error("Failed to automatically link ref, there needs to be an element in the rendering stack");t.ref={parent:Lc.renderingStack[Lc.renderingStack.length-1],name:t.ref}}t.key&&console.error("Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\nAre you using the options from another object? Shame!",t),t.key="_ref"+t.ref.name}return t.hasOwnProperty("class")&&console.error("Invalid UI Element attribute: class. Did you mean className?"),"string"==typeof e&&(t.nodeType=e,e=Nc),new e(t)},Nc.domAttributesMap=Ac.defaultAttributesMap,Nc.prototype.extraNodeAttributes=Au,Lc.Element=Nc,Lc.str=function(e){return new Lc.TextElement(e)};var Oc=new WeakMap;Lc.Primitive=function(e,t){t||(t=e,e=Lc.Element);var n=Oc.get(e);n||(n=new Map,Oc.set(e,n));var i=n.get(t);return i||(i=function(e){function n(){return r(this,n),b(this,d(n).apply(this,arguments))}return h(n,e),o(n,[{key:"getNodeType",value:function(){return t}}]),n}(e),n.set(t,i),i)};var Rc={HORIZONTAL:1,VERTICAL:2},Mc={UP:"up",LEFT:"left",DOWN:"down",RIGHT:"right"},Pc={NONE:null,DEFAULT:"default",INFO:"info",PRIMARY:"primary",SECONDARY:"secondary",SUCCESS:"success",WARNING:"warning",DANGER:"danger",ERROR:"danger"},Dc={NONE:null,EXTRA_SMALL:"xs",SMALL:"sm",MEDIUM:"default",DEFAULT:"default",LARGE:"lg",EXTRA_LARGE:"xl"},Bc={NONE:null,LIKE:1,DISLIKE:0},_c={DEFAULT:1,RUNNING:2,SUCCESS:3,FAILED:4},Fc=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.setOptions(e),n}return h(t,e),o(t,[{key:"setOptions",value:function(e){this.options=e,this.options.attributes=this.options.attributes||{},this.attributes=new Map;for(var t in this.options.attributes)this.attributes.set(t,this.options.attributes[t])}},{key:"getValue",value:function(){var e=this.options.selector+"{",t=!0,n=!1,i=void 0;try{for(var r,a=this.attributes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=S(r.value,2),s=o[0],l=o[1];"function"==typeof l&&(l=l()),null!=l&&(s=J(s),(l instanceof Number||"number"==typeof l)&&0!=l&&xc.has(s)&&(l+="px"),e+=s+":"+l+";")}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e+"}"}},{key:"copyState",value:function(e){this.setOptions(e.options)}},{key:"setAttribute",value:function(e,t){this.attributes.set(e,t),this.redraw()}},{key:"deleteAttribute",value:function(e){this.attributes.delete(e),this.redraw()}}]),t}(Lc.TextElement),Uc=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeAttributes",value:function(){var e=new Ac({});return this.options.name&&e.setAttribute("name",this.options.name),e}}]),t}(Lc.Primitive("style")),zc=new Set([":",">"," ","+","~","[","."]),Wc=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.getClassName()}},{key:"valueOf",value:function(){return" "+this.getClassName()}},{key:"getClassName",value:function(){return this.className?this.className:(this.constructor.instanceCounter=(this.constructor.instanceCounter||0)+1,this.className=(this.options.name||"autocls")+"-"+this.constructor.instanceCounter,this.className)}},{key:"getSelector",value:function(){return this.options.selectorName||"."+this.getClassName()}},{key:"getStyleInstances",value:function(e,t){var n=[],i={},r=!1;for(var a in t){var o=t[a];if(null!=o){if("string"==typeof o||o instanceof String||"number"==typeof o||o instanceof Number||"function"==typeof o)i[a]=o,r=!0;else{var s=String(a).charAt(0);if(!zc.has(s)){console.error("First character of your selector is invalid.");continue}var l=this.getStyleInstances(e+a,o);n.push.apply(n,C(l))}}}return r&&n.unshift(new Fc({selector:e,key:e,attributes:i})),n}},{key:"render",value:function(){var e=this.options.style||{};return"function"==typeof e&&(e=e()),e.selectorName&&(this.options.selectorName=e.selectorName,delete e.selectorName),this.getStyleInstances(this.getSelector(),e)}},{key:"setStyle",value:function(e,t){this.options.style[e]=t,this.children[0].setAttribute(e,t)}},{key:"setSubStyle",value:function(e,t,n){throw Error("Implement me!")}},{key:"getStyleObject",value:function(){return this.options.style}}]),t}(Uc),Hc=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.getKeyframeName()}},{key:"getKeyframeName",value:function(){return this.keyframeName?this.keyframeName:(this.constructor.instanceCounter=(this.constructor.instanceCounter||0)+1,this.keyframeName=(this.options.name||"autokeyframe")+"-"+this.constructor.instanceCounter,this.keyframeName)}},{key:"getValue",value:function(e){var t="{";for(var n in e){var i=e[n];"function"==typeof i&&(i=i()),null!=i&&(t+=J(n)+":"+i+";")}return t+"}"}},{key:"getKeyframeInstance",value:function(e){var t="{";for(var n in e){var i=e[n];t+=n+" "+this.getValue(i)}return t+"}"}},{key:"render",value:function(){return"@keyframes "+this.getKeyframeName()+this.getKeyframeInstance(this.options.keyframe||{})}}]),t}(Uc),Vc=ze({targetMethodName:"css",getKey:Fe,inherit:!1}),Gc=ze({targetMethodName:"css",getKey:Fe,inherit:!0}),jc=ze({targetMethodName:"keyframes",getKey:Ue,inherit:!1}),Yc=ze({targetMethodName:"keyframes",getKey:Ue,inherit:!0}),Jc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),e=b(this,d(t).call(this)),e.options=Object.assign({parent:document.head,name:n.name||e.constructor.getElementName()},n),e.elements=new Set,e.options.delayedMount||e.ensureMounted(),e.getTheme().addStyleSheet(y(e)),e}return h(t,e),o(t,[{key:"ensureMounted",value:function(){if(!this.styleElement){var e={children:[],name:this.options.name};this.styleElement=Uc.create(this.options.parent,e)}}},{key:"getTheme",value:function(){return this.options.theme||this.constructor.theme}},{key:"setTheme",value:function(e){this.options.theme=e}},{key:"getThemeProperty",value:function(e,t){var n=this.getTheme();return n&&n.getProperty(e,t)||t}},{key:"ensureFirstUpdate",value:function(){this._firstUpdate||(this._firstUpdate=!0,this.ensureMounted(),this.dispatch("beforeUpdate",this))}},{key:"css",value:function(e){this.ensureFirstUpdate(),arguments.length>1&&(e=Object.assign.apply(Object,[{}].concat(Array.prototype.slice.call(arguments))));var t={style:e},n="prefferedClassName";e[n]&&(t.name=e[n],delete e[n]);var i=new Wc(t);this.elements.add(i);var r=i.render(),a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;this.styleElement.appendChild(c)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}},{key:"keyframes",value:function(e){this.ensureFirstUpdate(),arguments.length>1&&(e=Object.assign.apply(Object,[{}].concat(Array.prototype.slice.call(arguments))));var t=new Hc({keyframe:e});return this.elements.add(t),this.styleElement.appendChild(t),t}},{key:"addBeforeUpdateListener",value:function(e){return this.addListener("beforeUpdate",e)}},{key:"update",value:function(){if(this._firstUpdate){this.dispatch("beforeUpdate",this);for(var e=0,t=Object.keys(this);e<t.length;e++){var n=t[e];if(this[n]instanceof Wc){var i=this["__style__"+n],r=i&&i.objInitializer;r&&(this[n].options.style=r.call(this))}}var a=[],o=!0,s=!1,l=void 0;try{for(var u,c=this.elements[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value;if(h instanceof Uc){var d=h.render();a.push.apply(a,C(d))}}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}this.styleElement.options.children=a,this.styleElement.redraw()}}},{key:"themeProperties",get:function(){var e=this.getTheme();return e&&e.getProperties()||{}}},{key:"themeProps",get:function(){return this.themeProperties}}],[{key:"getInstance",value:function(){return this.hasOwnProperty("singletonInstance")||(this.singletonInstance=new this),this.singletonInstance}},{key:"initialize",value:function(){var e=this.getInstance();for(var t in this.prototype)e[t]||console.log("This is here to prevent a bundling optimization bug")}},{key:"getElementName",value:function(){this.elementNameCounter=(this.elementNameCounter||0)+1;var e=this.name;return this.elementNameCounter>1&&(e+="-"+this.elementNameCounter),e}}]),t}(Gu),qc=function(){function e(t,n){r(this,e),this.classList=t,this.element=n}return o(e,[{key:"set",value:function(e,t){t||(t=e,e=this.element);var n=!0,i=!1,r=void 0;try{for(var a,o=this.classList[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s===t?e.addClass(s):e.removeClass(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}}],[{key:"fromObject",value:function(t,n){var i=[];for(var r in t)t.hasOwnProperty(r)&&i.push(t[r]);return Object.assign(new e(i,n),t)}}]),e}(),Xc=new WeakMap,Kc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Qc=function(){function e(t){r(this,e),t&&this.setColor(t)}return o(e,[{key:"setColor",value:function(e){this.color=this.constructor.parseColor(e)}},{key:"getColor",value:function(){var e=this.getRgba();return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}}],[{key:"parseColor",value:function(t){if(t instanceof e)return t.color;if(t instanceof Array)return 3===t.length&&t.push(1),t;t=t.trim().toLowerCase(),Kc.hasOwnProperty(t)&&(t=Kc[t]);var n=[],i=t.match(/^#([0-9a-f]{3})$/i);i&&(n=[17*parseInt(i[1].charAt(0),16),17*parseInt(i[1].charAt(1),16),17*parseInt(i[1].charAt(2),16),1]);var r=t.match(/^#([0-9a-f]{6})$/i);r&&(n=[parseInt(r[1].substr(0,2),16),parseInt(r[1].substr(2,2),16),parseInt(r[1].substr(4,2),16),1]);var a=t.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+.*\d*)\s*\)$/i);a&&(n=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseFloat(a[4])]);var o=t.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);return o&&(n=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),1]),n}},{key:"interpolate",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=e.parseColor(t),a=e.parseColor(n);return e.convertToRgba([parseInt(r[0]*(1-i)+a[0]*i),parseInt(r[1]*(1-i)+a[1]*i),parseInt(r[2]*(1-i)+a[2]*i),parseInt(r[3]*(1-i)+a[3]*i)])}},{key:"addOpacity",value:function(t,n){var i=e.parseColor(t);return e.convertToRgba([parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),n])}},{key:"convertToRgba",value:function(e){return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}},{key:"isLight",value:function(t){var n=e.parseColor(t);return.3*n[0]+.59*n[1]+.11*n[2]>188}}]),e}(),Zc=function(){function e(){r(this,e)}return o(e,null,[{key:"getPersistentColor",value:function(e){return e<this.FIRST_COLORS.length?this.FIRST_COLORS[e]:(this.cache.has(e)||this.cache.set(e,this.getRandomColor()),this.cache.get(e))}},{key:"getRandomColor",value:function(){for(var e="3456789ABC",t="#",n=0;n<6;n+=1)t+=e.charAt(parseInt(Math.random()*e.length));return t}}]),e}();Zc.FIRST_COLORS=["#337ab7","#5cb85c","#f0ad4e","#5bc0de","#d9534f"],Zc.cache=new Map;var $c=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(this,t),e=b(this,d(t).call(this)),e.classSet=new Set,e.styleSheetSet=new Set,e.properties={},e.updateThrottler=new Nu({throttle:50}),e.updateThrottled=e.updateThrottler.wrap(function(){return e.updateStyleSheets()}),e.styleSheetSymbol=Symbol("Theme"+n),window.addEventListener("resize",e.updateThrottled),e}return h(t,e),o(t,[{key:"register",value:function(e,t){e.theme=this,e.styleSheet||(e.styleSheet=t),this.set(e,t)}},{key:"set",value:function(e,t){e[this.styleSheetSymbol]=t,this.classSet.add(e)}},{key:"get",value:function(e){return"function"!=typeof e&&(e=e.constructor),e[this.styleSheetSymbol]}},{key:"getProperties",value:function(){return this.properties}},{key:"getProperty",value:function(e,t){var n=this.properties[e]||t;return"function"==typeof n?n():n}},{key:"setProperties",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object.assign(this.properties,e),t&&this.updateThrottled()}},{key:"setProperty",value:function(e,t){this.properties[e]=t}},{key:"getAllStyleSheets",value:function(){var e=new Set(this.styleSheetSet),t=!0,n=!1,i=void 0;try{for(var r,a=this.classSet.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.add(this.get(o))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return Array.from(e).map(function(e){return e.getInstance?e.getInstance():e})}},{key:"addStyleSheet",value:function(e){this.styleSheetSet.add(e)}},{key:"removeStyleSheet",value:function(e){this.styleSheetSet.delete(e)}},{key:"updateStyleSheets",value:function(){this.dispatch("beforeUpdateStyleSheets");var e=!0,t=!1,n=void 0;try{for(var i,r=this.getAllStyleSheets()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;a.update&&a.update()}
}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.dispatch("afterUpdateStyleSheets")}},{key:"props",get:function(){var e=this,t=this[this.constructor.PropsSymbol];return t||(t=this[this.constructor.PropsSymbol]=new Proxy(this.properties,{get:function(e,t,n){return e[t]},set:function(t,n,i){return e.setProperty(n,i),e.updateThrottled(),i}})),t}}],[{key:"register",value:function(e,t){var n;return(n=this.Global).register.apply(n,arguments)}},{key:"get",value:function(e){var t;return(t=this.Global).get.apply(t,arguments)}},{key:"addStyleSheet",value:function(e){this.Global.addStyleSheet(e)}},{key:"setProperties",value:function(e){var t;(t=this.Global).setProperties.apply(t,arguments)}},{key:"getProperties",value:function(){return this.Global.getProperties()}},{key:"props",get:function(){return this.Global.props}}]),t}(Gu);$c.PropsSymbol=Symbol("Props"),$c.Global=new $c("Global"),Lc.Element.prototype.getStyleSheet=function(){return Qe(this.options)||Qe(this.constructor)},Jc.theme=$c.Global;var eh,th,nh,ih,rh,ah,oh,sh,lh,uh,ch,hh,dh,ph,fh,gh,mh={};$c.setProperties({COLOR_BACKGROUND:"#fff",COLOR_BACKGROUND_ALTERNATIVE:"#eee",COLOR_BACKGROUND_BODY:"#f8f8f8",COLOR_FOREGROUND_BODY:"#f2f2f2",COLOR_BACKGROUND_BADGE:"#777",COLOR_PRIMARY:"#337ab7",COLOR_SECONDARY:"#358ba4",COLOR_SUCCESS:"#5cb85c",COLOR_INFO:"#5bc0de",COLOR_WARNING:"#f0ad4e",COLOR_DANGER:"#d9534f",COLOR_LINK:"#337ab7",FONT_SIZE_EXTRA_SMALL:"10px",FONT_SIZE_SMALL:"12px",FONT_SIZE_DEFAULT:"14px",FONT_SIZE_LARGE:"17px",FONT_SIZE_EXTRA_LARGE:"21px",BASE_BORDER_RADIUS:0,BASE_BOX_SHADOW:"0px 0px 10px rgb(160, 162, 168)",BASE_BORDER_WIDTH:0,BASE_BORDER_STYLE:"solid",BASE_BORDER_COLOR:"#ddd",BUTTON_BORDER_RADIUS:"0.2rem",CARD_PANEL_HEADER_HEIGHT:30,CARD_PANEL_HEADER_HEIGHT_LARGE:40,CARD_PANEL_HEADING_PADDING:10,CARD_PANEL_HEADING_PADDING_LARGE:20,CARD_PANEL_TEXT_TRANSFORM:"inherit",DARK_BOX_SHADOW:"0px 0px 10px rgba(0, 0, 0, .6)",ROW_LIST_ROW_HEIGHT:30,ROW_LIST_ROW_HEIGHT_LARGE:40,ROW_LIST_ROW_PADDING:10,ROW_LIST_ROW_PADDING_LARGE:20,ROW_LIST_ROW_BORDER_WIDTH:1,FONT_FAMILY_SANS_SERIF:"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif",FONT_FAMILY_SERIF:"serif",FONT_FAMILY_MONOSPACE:"'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace",FONT_FAMILY_DEFAULT:function(){return $c.getProperties().FONT_FAMILY_SANS_SERIF},NAV_MANAGER_NAVBAR_HEIGHT:50,NAV_MANAGER_BOX_SHADOW_NAVBAR:"0px 0px 10px rgb(0, 0, 0)",NAV_MANAGER_BOX_SHADOW_SIDE_PANEL:"0px 0px 10px #202e3e",MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP:0,MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE:0,MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP:0,MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE:0,FLAT_TAB_AREA_COLOR_BACKGROUND:"#f3f3f3",FLAT_TAB_AREA_LINE_HEIGHT:30,FLAT_TAB_AREA_PADDING_SIDES:10},!1);var vh=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"Level",value:function(e){if(this[e])return this[e];for(var t=0,n=Object.keys(Pc);t<n.length;t++){var i=n[t];if(e==Pc[i])return this[i]}return""}},{key:"Size",value:function(e){for(var t=0,n=Object.keys(Dc);t<n.length;t++){var i=n[t];if(e==Dc[i])return this[i]}return""}}]),t}(Jc),yh=function(e){var t,n,i,a,s,l,u,c;return t=function(t){function p(){var e,t;r(this,p);for(var o=arguments.length,h=new Array(o),f=0;f<o;f++)h[f]=arguments[f];return t=b(this,(e=d(p)).call.apply(e,[this].concat(h))),O(t,"BASE",n,y(t)),O(t,"PRIMARY",i,y(t)),O(t,"SECONDARY",a,y(t)),O(t,"SUCCESS",s,y(t)),O(t,"INFO",l,y(t)),O(t,"WARNING",u,y(t)),O(t,"DANGER",c,y(t)),t}return h(p,t),o(p,[{key:"colorStyleRule",value:function(t,n){return e(t,n||$e(t))}}]),p}(vh),n=R(t.prototype,"BASE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND)}}),i=R(t.prototype,"PRIMARY",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)}}),a=R(t.prototype,"SECONDARY",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_SECONDARY)}}),s=R(t.prototype,"SUCCESS",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_SUCCESS)}}),l=R(t.prototype,"INFO",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_INFO)}}),u=R(t.prototype,"WARNING",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_WARNING)}}),c=R(t.prototype,"DANGER",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProperties.COLOR_DANGER)}}),t},bh=(eh=ih=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"HORIZONTAL",th,y(n)),O(n,"VERTICAL",nh,y(n)),n}return h(t,e),o(t,[{key:"Orientation",value:function(e){for(var t=0,n=Object.keys(Rc);t<n.length;t++){var i=n[t];if(e==Rc[i])return this[i]}}}]),t}(Jc),th=R(eh.prototype,"HORIZONTAL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",">*":{marginLeft:"20px",flex:"1"},">:first-child":{marginLeft:"0px"}}}}),nh=R(eh.prototype,"VERTICAL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",">*":{marginTop:"20px",flex:"1"},">:first-child":{marginTop:"0px"}}}}),eh),kh=(rh=ch=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"EXTRA_SMALL",ah,y(n)),O(n,"SMALL",oh,y(n)),O(n,"MEDIUM",sh,y(n)),O(n,"LARGE",lh,y(n)),O(n,"EXTRA_LARGE",uh,y(n)),n}return h(t,e),o(t,[{key:"getSizeStyle",value:function(e,t){return{margin:rc.isMobileDevice()?"0 ".concat(e,"px"):"0% ".concat(t,"%")}}},{key:"Size",value:function(e){for(var t=0,n=Object.keys(Dc);t<n.length;t++){var i=n[t];if(e==Dc[i])return this[i]}}}]),t}(Jc),ah=R(rh.prototype,"EXTRA_SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(6,15)}}),oh=R(rh.prototype,"SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(4,10)}}),sh=R(rh.prototype,"MEDIUM",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(4,6)}}),lh=R(rh.prototype,"LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(2,3)}}),uh=R(rh.prototype,"EXTRA_LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(2,1)}}),rh),wh=(hh=gh=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.extraTop=function(){return n.themeProperties[rc.isMobileDevice()?"MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE":"MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP"]},O(n,"fullHeight",dh,y(n)),O(n,"hidden",ph,y(n)),O(n,"fullContainer",fh,y(n)),n}return h(t,e),t}(Jc),dh=R(hh.prototype,"fullHeight",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%"}}}),ph=R(hh.prototype,"hidden",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"hidden"}}}),fh=R(hh.prototype,"fullContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{width:"100%",height:function(){return"calc(100% + "+e.extraTop()+"px)"},marginTop:function(){return-e.extraTop()}}}}),hh);mh.FlexContainer=bh.getInstance(),mh.Container=kh.getInstance(),mh.Utils=wh.getInstance();for(var Eh,Sh,Ch,xh,Th,Ah,Lh,Ih,Nh,Oh,Rh,Mh,Ph,Dh,Bh,_h,Fh,Uh,zh,Wh,Hh,Vh,Gh,jh,Yh,Jh,qh,Xh,Kh,Qh,Zh,$h,ed,td,nd,id,rd,ad,od,sd,ld,ud,cd,hd,dd,pd,fd,gd,md,vd,yd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLevel",value:function(){return this.options.level||this.parent&&this.parent.getLevel&&this.parent.getLevel()}},{key:"setLevel",value:function(e){this.updateOptions({level:e})}},{key:"getSize",value:function(){return this.options.size||this.parent&&this.parent.getSize&&this.parent.getSize()}},{key:"setSize",value:function(e){this.updateOptions({size:e})}}]),t}(Lc.Element),bd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[this.beforeChildren(),this.getLabel(),w(d(t.prototype),"render",this).call(this)]}},{key:"getLabel",value:function(){return null!=this.options.label?this.options.label:""}},{key:"setLabel",value:function(e){this.updateOptions({label:e})}},{key:"getFaIcon",value:function(){return this.options.faIcon}},{key:"setFaIcon",value:function(e){this.options.faIcon=e,this.redraw()}},{key:"beforeChildren",value:function(){if(!this.getFaIcon())return null;var e={className:"fa fa-"+this.getFaIcon()};return this.getLabel()&&(e.style={marginRight:"5px"}),Lc.createElement("span",e)}}]),t}(yd),kd=function(e){var t=Xe(e),n={backgroundColor:t[2],color:t[6],textDecoration:"none"},i={backgroundColor:t[1],borderColor:t[5],color:t[6]};return Object.assign({},i,{":hover":n,":hover:disabled":i,":focus":n,":active":n})},wd=(Eh=Ih=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"DEFAULT",Sh,y(n)),O(n,"EXTRA_SMALL",Ch,y(n)),O(n,"SMALL",xh,y(n)),O(n,"MEDIUM",Th,y(n)),O(n,"LARGE",Ah,y(n)),O(n,"EXTRA_LARGE",Lh,y(n)),n}return h(t,e),t}(yh(kd)),Sh=R(Eh.prototype,"DEFAULT",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{fontWeight:"bold",border:"0.1em solid transparent",padding:"0.07em 0.4em",borderRadius:"0.3em",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"bottom",lineHeight:4/3+"",display:"inline-block",touchAction:"manipulation",":disabled":{opacity:"0.7",cursor:"not-allowed"}},{"font-size":"12px"},this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)]}}),Ch=R(Eh.prototype,"EXTRA_SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px",padding:"0.05em 0.2em",borderWidth:"0.05em"}}}),xh=R(Eh.prototype,"SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px"}}}),Th=R(Eh.prototype,"MEDIUM",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ah=R(Eh.prototype,"LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),Lh=R(Eh.prototype,"EXTRA_LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px",padding:"0.05em 0.2em"}}}),Eh),Ed=(Nh=Ze(wd))(Oh=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.DEFAULT),this.getSize()&&e.addClass(this.styleSheet.Size(this.getSize())),this.getLevel()&&e.addClass(this.styleSheet.Level(this.getLevel()))}}]),t}(Lc.Primitive(bd,"span")))||Oh,Sd=function(e){var t=Xe(e);return{backgroundColor:t[1],borderColor:t[5],color:t[6]}},Cd=(Rh=Uh=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"DEFAULT",Mh,y(n)),O(n,"EXTRA_SMALL",Ph,y(n)),O(n,"SMALL",Dh,y(n)),O(n,"MEDIUM",Bh,y(n)),O(n,"LARGE",_h,y(n)),O(n,"EXTRA_LARGE",Fh,y(n)),n}return h(t,e),t}(yh(Sd)),Mh=R(Rh.prototype,"DEFAULT",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{display:"inline-block",padding:"0.25em 0.55em",fontWeight:"700",lineHeight:"1",color:"#fff",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"middle",backgroundColor:"#777",borderRadius:"0.8em"},{"font-size":"12px"},this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)]}}),Ph=R(Rh.prototype,"EXTRA_SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px",padding:"0.1em 0.2em"}}}),Dh=R(Rh.prototype,"SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px"}}}),Bh=R(Rh.prototype,"MEDIUM",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_h=R(Rh.prototype,"LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),Fh=R(Rh.prototype,"EXTRA_LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px",padding:"0.1em 0.2em"}}}),Rh),xd=(zh=Ze(Cd))(Wh=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.DEFAULT),this.getSize()&&e.addClass(this.styleSheet.Size(this.getSize())),this.getLevel()&&e.addClass(this.styleSheet.Level(this.getLevel()))}}]),t}(Lc.Primitive(bd,"span")))||Wh,Td=function(e){return{backgroundColor:Xe(e)[1]}},Ad=(Hh=Zh=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"container",Vh,y(n)),O(n,"DEFAULT",Gh,y(n)),O(n,"striped",jh,y(n)),O(n,"active",Yh,y(n)),O(n,"EXTRA_SMALL",Jh,y(n)),O(n,"SMALL",qh,y(n)),O(n,"MEDIUM",Xh,y(n)),O(n,"LARGE",Kh,y(n)),O(n,"EXTRA_LARGE",Qh,y(n)),n}return h(t,e),t}(yh(Td)),Vh=R(Hh.prototype,"container",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"20px",marginBottom:"20px",overflow:"hidden",backgroundColor:"#f5f5f5",borderRadius:"4px",boxShadow:"inset 0 1px 2px rgba(0, 0, 0, .1)"}}}),Gh=R(Hh.prototype,"DEFAULT",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{float:"left",width:"0",height:"100%",lineHeight:"20px",color:"#fff",textAlign:"center",backgroundColor:"#337ab7",boxShadow:"inset 0 -1px 0 rgba(0, 0, 0, .15)",transition:"width .6s ease",fontColor:"#ffffff"},{fontSize:"12px"},this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)]}}),jh=R(Hh.prototype,"striped",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundImage:"linear-gradient(45deg, rgba(255, 255, 255, .15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .15) 50%, rgba(255, 255, 255, .15) 75%, transparent 75%, transparent)",backgroundSize:"40px 40px"}}}),Yh=R(Hh.prototype,"active",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{animation:"progress-bar-stripes 2s linear infinite"}}}),Jh=R(Hh.prototype,"EXTRA_SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"8px"}}}),qh=R(Hh.prototype,"SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px"}}}),Xh=R(Hh.prototype,"MEDIUM",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Kh=R(Hh.prototype,"LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),Qh=R(Hh.prototype,"EXTRA_LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px",padding:"0.1em 0.2em"}}}),Hh),Ld=($h=Ze(Ad))(ed=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.container)}},{key:"render",value:function(){var e=100*(this.options.value||0),t=Rc.HORIZONTAL;this.options.hasOwnProperty("orientation")&&(t=this.options.orientation);var n;n=t===Rc.HORIZONTAL?{width:e+"%",height:this.options.height+"px"}:{height:e+"%",width:"5px"};var i={className:this.styleSheet.DEFAULT,style:n};return this.options.disableTransition&&Object.assign(i.style,{transition:"none"}),this.options.level&&(i.className+=" "+this.styleSheet.Level(this.getLevel())),this.options.striped&&(i.className+=" "+this.styleSheet.striped),this.options.active&&(i.className+=" "+this.styleSheet.active),this.options.color&&(i.style.backgroundColor=this.options.color),Lc.createElement("div",i,Lc.createElement("span",null,this.options.label))}},{key:"set",value:function(e){e<0?e=0:e>1&&(e=1),this.options.value=e,this.redraw()}}]),t}(yd))||ed,Id=function(e){var t=Xe(e),n={backgroundColor:t[2]},i={backgroundColor:t[3]},r={backgroundColor:t[4]},a={backgroundColor:t[1],borderColor:t[5],color:t[6]},o=Object.assign({},a);return Object.assign({},a,{":hover":n,":hover:disabled":o,":focus":n,":active":i,":hover:active":r,":focus:active":r,".active":r})},Nd=(td=ld=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.base={outline:"0",border:"0.1em solid transparent",padding:"0.4em 0.8em",borderRadius:n.themeProperties.BUTTON_BORDER_RADIUS||n.themeProperties.BASE_BORDER_RADIUS,textAlign:"center",whiteSpace:"nowrap",verticalAlign:"middle",lineHeight:4/3+"",marginBottom:"0",display:"inline-block",touchAction:"manipulation",userSelect:"none",":disabled":{opacity:"0.7",cursor:"not-allowed"}},O(n,"DEFAULT",nd,y(n)),O(n,"EXTRA_SMALL",id,y(n)),O(n,"SMALL",rd,y(n)),O(n,"MEDIUM",ad,y(n)),O(n,"LARGE",od,y(n)),O(n,"EXTRA_LARGE",sd,y(n)),n}return h(t,e),o(t,[{key:"getLevel",value:function(e){return w(d(t.prototype),"getLevel",this).call(this,e)||this.INFO}}]),t}(yh(Id)),nd=R(td.prototype,"DEFAULT",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.base,{fontSize:"14px"},this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND)]}}),id=R(td.prototype,"EXTRA_SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"12px",padding:"0.2em 0.4em",borderWidth:"0.05em"}}}),rd=R(td.prototype,"SMALL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"12px"}}}),ad=R(td.prototype,"MEDIUM",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),od=R(td.prototype,"LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px"}}}),sd=R(td.prototype,"EXTRA_LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"21px",padding:"0.2em 0.4em"}}}),td),Od=(ud=dd=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"HORIZONTAL",cd,y(n)),O(n,"VERTICAL",hd,y(n)),n}return h(t,e),o(t,[{key:"Orientation",value:function(e){for(var t=0,n=Object.keys(Rc);t<n.length;t++){var i=n[t];if(e==Rc[i])return this[i]}}}]),t}(Jc),cd=R(ud.prototype,"HORIZONTAL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{"margin-left":"5px",display:"inline-block",pointerEvents:"initial"},">:first-child":{"margin-left":"0px"}}}}),hd=R(ud.prototype,"VERTICAL",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{"margin-top":"5px",display:"block",pointerEvents:"initial"},">:first-child":{"margin-top":"0px"}}}}),ud),Rd=(pd=gd=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"DEFAULT",fd,y(n)),n}return h(t,e),t}(Jc),fd=R(pd.prototype,"DEFAULT",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{pointerEvents:"initial",borderRadius:"0"},">:last-child":{borderTopRightRadius:"0.3em",borderBottomRightRadius:"0.3em"},">:first-child":{borderTopLeftRadius:"0.3em",borderBottomLeftRadius:"0.3em"}}}}),pd),Md=(md=Ze(Nd))(vd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.DEFAULT),this.getSize()&&e.addClass(this.styleSheet.Size(this.getSize())),this.getLevel()&&e.addClass(this.styleSheet.Level(this.getLevel()))}},{key:"disable",value:function(){this.options.disabled=!0,this.node.disabled=!0}},{key:"enable",value:function(){this.options.disabled=!1,this.node.disabled=!1}},{key:"setEnabled",value:function(e){this.options.disabled=!e,this.node.disabled=!e}}]),t}(Lc.Primitive(bd,"button")))||vd,Pd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.state=this.options&&this.options.state||e.state||_c.DEFAULT,w(d(t.prototype),"setOptions",this).call(this,e),this.options.statusOptions=this.options.statusOptions||[];for(var n=0;n<4;n+=1)if("string"==typeof this.options.statusOptions[n]){var i=this.options.statusOptions[n];this.options.statusOptions[n]={label:i,faIcon:""}}}},{key:"setState",value:function(e){this.options.state=e,e===_c.DEFAULT?this.enable():e===_c.RUNNING&&this.disable(),this.redraw()}},{key:"render",value:function(){var e=this.options.statusOptions[this.options.state-1];return this.options.label=e.label,this.options.faIcon=e.faIcon,w(d(t.prototype),"render",this).call(this)}}]),t}(Md),Dd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this)||{},{resetToDefaultTimeout:1e3})}},{key:"getAjaxHandler",value:function(){return this.options.ajaxHandler||zu}},{key:"setAjaxHandler",value:function(e){this.options.ajaxHandler=e}},{key:"clearResetTimeout",value:function(){this.stateResetTimeout&&(clearTimeout(this.stateResetTimeout),delete this.stateResetTimeout)}},{key:"scheduleStateReset",value:function(){var e=this;this.clearResetTimeout(),this.stateResetTimeout=setTimeout(function(){e.setState(_c.DEFAULT),e.clearResetTimeout()},this.resetToDefaultTimeout)}},{key:"ajax",value:function(e){var t,n=this;this.setState(_c.RUNNING);for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var o=(t=this.getAjaxHandler())[e].apply(t,r);return o.getPromise().then(function(e){n.setState(_c.SUCCESS),n.scheduleStateReset()},function(e){n.setState(_c.FAILED),n.scheduleStateReset()}),o}},{key:"ajaxCall",value:function(e){return this.ajax("fetch",e)}}]),t}(Pd),Bd=0,_d=["fetch","request","get","post","getJSON","postJSON"];Bd<_d.length;Bd++)!function(){var e=_d[Bd];Dd.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.ajax.apply(this,[e].concat(n))}}();var Fd,Ud,zd,Wd,Hd,Vd,Gd=function(e){return function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n._clickCallbacks=new Map,n._clickDragListeners=new Map,n}return h(t,e),o(t,[{key:"addClickListener",value:function(e){var n=this;if(!this._clickCallbacks.has(e)){var i=function(){n._okForClick&&e()};if(this._clickCallbacks.set(e,i),w(d(t.prototype),"addClickListener",this).call(this,i),!this._clickDragListeners.has(e)){var r={onStart:function(){n.dragForClickStarted()},onDrag:function(){n.dragForClick()}};this._clickDragListeners.set(e,r),this.addDragListener(r)}}}},{key:"dragForClickStarted",value:function(){this._okForClick=!0}},{key:"dragForClick",value:function(){this._okForClick=!1}},{key:"removeClickListener",value:function(e){var n=this._clickCallbacks.get(e);if(n&&(this._clickCallbacks.delete(e),w(d(t.prototype),"removeClickListener",this).call(this,n)),this._clickDragListeners){var i=this._clickDragListeners.get(e);i&&(this._clickDragListeners.delete(e),this.removeDragListener(i))}}},{key:"createDragGenericListenerWrapper",value:function(e,t){var n=Object.assign({},e),i=!1;return n.onWrapperDrag=function(t){if(i){var r=rc.getEventX(t),a=rc.getEventY(t),o=r-n._lastX;n._lastX=r;var s=a-n._lastY;n._lastY=a,e.onDrag(o,s)}},n.onWrapperStart=function(r){i=!0,n._lastX=rc.getEventX(r),n._lastY=rc.getEventY(r),e.onStart&&e.onStart(r),document.body.addEventListener(t,n.onWrapperDrag)},n.onWrapperEnd=function(r){i&&e.onEnd&&e.onEnd(r),i=!1,document.body.removeEventListener(t,n.onWrapperDrag)},n}},{key:"createDragListenerWrapper",value:function(e){return this.createDragGenericListenerWrapper(e,"mousemove")}},{key:"createTouchDragListenerWrapper",value:function(e){return this.createDragGenericListenerWrapper(e,"touchmove")}},{key:"addDragListener",value:function(e){var t=this.createDragListenerWrapper(e),n=this.createTouchDragListenerWrapper(e);this.addNodeListener("touchstart",n.onWrapperStart),rc.isMobileDevice()||this.addNodeListener("mousedown",t.onWrapperStart),document.body.addEventListener("touchend",n.onWrapperEnd),rc.isMobileDevice()||document.body.addEventListener("mouseup",t.onWrapperEnd),this.hasOwnProperty("_dragListeners")||(this._dragListeners=[]),this._dragListeners.push(n),this._dragListeners.push(t)}},{key:"removeDragListener",value:function(e){if(this._dragListeners)for(var t=this._dragListeners.length-1;t>=0;t-=1)this._dragListeners[t].onStart===e.onStart&&this._dragListeners[t].onDrag===e.onDrag&&this._dragListeners[t].onEnd===e.onEnd&&(this.removeNodeListener("touchstart",this._dragListeners[t].onWrapperStart),document.body.removeEventListener("touchmove",this._dragListeners[t].onWrapperDrag),document.body.removeEventListener("touchmove",this._dragListeners[t].onWrapperEnd),this.removeNodeListener("mousedown",this._dragListeners[t].onWrapperStart),document.body.removeEventListener("mousemove",this._dragListeners[t].onWrapperDrag),document.body.removeEventListener("mousemove",this._dragListeners[t].onWrapperEnd),this._dragListeners.splice(t,1))}}]),t}(e)},jd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return this.options.title}}]),t}(Lc.Element),Yd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{value:0}}},{key:"extraNodeAttributes",value:function(e){e.setStyle("display","inline-block"),e.setStyle("position","relative"),e.setStyle("cursor","pointer")}},{key:"getSliderValue",value:function(){return this.options.value*this.options.size-this.options.barSize/2}},{key:"render",value:function(){return[Lc.createElement(Ld,{ref:"progressBar",active:"true",value:this.options.value,disableTransition:!0,orientation:this.getOrientation(),style:Object.assign({position:"relative"},this.getProgressBarStyle())}),Lc.createElement("div",{ref:"slider",style:Object.assign({backgroundColor:"black",position:"absolute"},this.getSliderStyle())})]}},{key:"setValue",value:function(e){e=Math.max(e,0),e=Math.min(e,1),this.options.value=e,this.progressBar.set(this.options.value),this.slider.setStyle(this.getOrientationAttribute(),this.getSliderValue()+"px"),this.dispatch("change",this.options.value)}},{key:"getValue",value:function(){return this.options.value}},{key:"onMount",value:function(){this.addDragListener(this.getDragConfig())}}]),t}(Gd(Lc.Element)),Jd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.size=e.size||e.width||100,e.barSize=e.barSize||e.barWidth||5,w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getProgressBarStyle",value:function(){return{height:"5px",width:this.options.size+"px",top:"15px"}}},{key:"getSliderStyle",value:function(){return{width:this.options.barSize+"px",height:"20px",left:this.getSliderValue()+"px",top:"7.5px"}}},{key:"getOrientationAttribute",value:function(){return"left"}},{key:"getOrientation",value:function(){return Rc.HORIZONTAL}},{key:"getDragConfig",value:function(){var e=this;return{onStart:function(t){e.setValue((rc.getEventX(t)-Pe(e.progressBar)[e.getOrientationAttribute()])/e.options.size)},onDrag:function(t,n){e.setValue(e.options.value+t/e.options.size)}}}}]),t}(Yd),qd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.size=e.size||e.height||100,e.barSize=e.barSize||e.barHeight||5,w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getProgressBarStyle",value:function(){return{height:this.options.size+"px",width:"5px",left:"15px"}}},{key:"getSliderStyle",value:function(){return{height:this.options.barSize+"px",width:"20px",top:this.getSliderValue()+"px",left:"7.5px"}}},{key:"getOrientationAttribute",value:function(){return"top"}},{key:"getOrientation",value:function(){return Rc.VERTICAL}},{key:"getDragConfig",value:function(){var e=this;return{onStart:function(t){e.setValue((rc.getEventY(t)-Pe(e.progressBar)[e.getOrientationAttribute()])/e.options.size)},onDrag:function(t,n){e.setValue(e.options.value+n/e.options.size)}}}}]),t}(Yd),Xd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("cursor","pointer")}},{key:"getDefaultOptions",value:function(){return{newTab:!1}}},{key:"setOptions",value:function(e){return w(d(t.prototype),"setOptions",this).call(this,e),this.options.newTab&&(this.options.target="_blank"),e}},{key:"render",value:function(){return this.options.value?[this.options.value]:w(d(t.prototype),"render",this).call(this)}}]),t}(Lc.Primitive("a")),Kd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(Lc.Primitive("img")),Qd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInnerHTML",value:function(){return this.options.innerHTML||this.options.__innerHTML}},{key:"redraw",value:function(){this.node.innerHTML=this.getInnerHTML(),this.applyNodeAttributes(),this.applyRef()}}]),t}(Lc.Element),Zd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{scale:this.getDesiredScale(),initialScale:1,maximumScale:1}}},{key:"getDesiredScale",value:function(){var e=this.options.minDeviceWidth;return e?Math.min(window.screen.availWidth,e)/e:1}},{key:"getContent",value:function(){var e="width=device-width";return e+=",initial-scale="+this.options.scale,e+=",maximum-scale="+this.options.scale,e+=",user-scalable=no"}},{key:"extraNodeAttributes",value:function(e){e.setAttribute("name","viewport"),e.setAttribute("content",this.getContent())}},{key:"maybeUpdate",value:function(){var e=this.getDesiredScale();e!=this.options.scale&&this.updateOptions({scale:e})}},{key:"onMount",value:function(){var e=this;window.addEventListener("resize",function(){return e.maybeUpdate()})}}]),t}(Lc.Primitive("meta")),$d=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{margin:10}}},{key:"render",value:function(){return[Lc.createElement(Lc.TextElement,{ref:"textElement",value:this.options.value||""})]}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("marginLeft",this.options.margin+"px"),e.setStyle("marginRight",this.options.margin+"px"),e}},{key:"setValue",value:function(e){this.options.value=e,this.textElement.setValue(e)}},{key:"setColor",value:function(e){this.setStyle("color",e)}},{key:"showMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;this.setColor(n),this.clear(),this.setValue(e),i&&(this.clearValueTimeout=setTimeout(function(){return t.clear()},i))}},{key:"clear",value:function(){this.setValue(""),this.clearValueTimeout&&(clearTimeout(this.clearValueTimeout),this.clearValueTimeout=null)}}]),t
}(Lc.Primitive("span")),ep=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDesiredExcessHeightTop",value:function(){return 600}},{key:"getDesiredExcessHeightBottom",value:function(){return 600}},{key:"getHeightScrollPercent",value:function(){var e=this.node.scrollHeight,t=this.node.clientHeight;return e===t?0:this.node.scrollTop/(e-t)}},{key:"getExcessTop",value:function(){return this.node.scrollTop}},{key:"getExcessBottom",value:function(){return this.node.scrollHeight-this.node.clientHeight-this.node.scrollTop}},{key:"haveExcessTop",value:function(){return this.getExcessTop()>this.getDesiredExcessHeightTop()}},{key:"haveExcessBottom",value:function(){return this.getExcessBottom()>this.getDesiredExcessHeightBottom()}},{key:"popChildTop",value:function(){this.eraseChildAtIndex(0)}},{key:"popChildBottom",value:function(){this.eraseChildAtIndex(this.children.length-1)}},{key:"removeExcessTop",value:function(){for(;this.haveExcessTop();)this.popChildTop()}},{key:"removeExcessBottom",value:function(){for(;this.haveExcessBottom();)this.popChildBottom()}},{key:"pushChildTop",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.removeExcessBottom(),this.insertChild(e,0)}},{key:"pushChildBottom",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.removeExcessTop(),this.appendChild(e),this.appendChild(e)}},{key:"saveScrollPosition",value:function(){this.options.scrollTop=this.node.scrollTop;var e=this.node.scrollHeight-this.node.clientHeight;this.options.scrollInfo={scrollAtTop:0===this.options.scrollTop,scrollAtBottom:this.options.scrollTop===e}}},{key:"applyScrollPosition",value:function(){this.node.scrollTop=this.options.scrollTop||this.node.scrollTop}},{key:"scrollToHeight",value:function(e){this.node.scrollTop=e}},{key:"scrollToTop",value:function(){this.scrollToHeight(0)}},{key:"scrollToBottom",value:function(){this.scrollToHeight(this.node.scrollHeight)}}]),t}(Lc.Element),tp=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e=Object.assign({entries:[],entryComparator:function(e,t){return e.id-t.id},firstRenderedEntry:0,lastRenderedEntry:-1},e),w(d(t.prototype),"setOptions",this).call(this,e),this.options.children=[],this.options.staticTop&&this.options.children.push(this.options.staticTop);var n=!0,i=!1,r=void 0;try{for(var a,o=this.options.entries[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.options.children.push(this.renderEntry(s))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"getFirstVisibleIndex",value:function(){}},{key:"getLastVisibleIndex",value:function(){}},{key:"renderEntry",value:function(e){if(this.options.entryRenderer)return this.options.entryRenderer(e);console.error("You need to pass option entryRenderer or overwrite the renderEntry method")}},{key:"pushEntry",value:function(e){this.insertEntry(e,this.options.entries.length)}},{key:"insertEntry",value:function(e,t){var n=this.options.entries;if(null==t)for(t=0;t<n.length&&this.options.entryComparator(n[t],e)<=0;)t++;n.splice(t,0,e),this.options.staticTop&&(t+=1);var i=this.renderEntry(e);this.insertChild(i,t)}}]),t}(ep),np=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return this.getTimeDeltaDisplay(this.options.timeStamp)}},{key:"getDefaultOptions",value:function(){return{style:{color:"#aaa"}}}},{key:"getTimeDeltaDisplay",value:function(e){var t=Date.now(),n=parseInt((t-1e3*e)/1e3),i=[31556926,2629743,604800,86400,3600,60],r=["year","month","week","day","hour","minute"];n<0&&(n=0);for(var a=0;a<r.length;a+=1){var o=parseInt(n/i[a]);if(i[a]<=n)return o+" "+r[a]+(o>1?"s":"")+" ago"}return"Few seconds ago"}},{key:"onMount",value:function(){var e=this;this._updateListener=this.constructor.addIntervalListener(function(){e.redraw()})}},{key:"onUnmount",value:function(){this._updateListener&&this._updateListener.remove()}}],[{key:"addIntervalListener",value:function(e){var t=this;return this.updateFunction||(this.TIME_DISPATCHER=new Gu,this.updateFunction=setInterval(function(){t.TIME_DISPATCHER.dispatch("updateTimeValue")},5e3)),this.TIME_DISPATCHER.addListener("updateTimeValue",e)}}]),t}(Lc.Primitive("span")),ip=(Fd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"isLoaded",value:function(){return!!this.getAce()}},{key:"setOptions",value:function(e){var n={aceMode:"text",readOnly:!1,aceTheme:"dawn",aceKeyboardHandler:"ace",fontSize:14,tabSize:4,showLineNumber:!0,showPrintMargin:!1,printMarginSize:80};e=Object.assign(n,e),w(d(t.prototype),"setOptions",this).call(this,e),this.options.aceMode&&(this.options.aceMode=this.options.aceMode.toLowerCase()),"cpp"!==this.options.aceMode&&"c"!==this.options.aceMode||(this.options.aceMode="c_cpp"),this.getAce()&&this.applyAceOptions()}},{key:"redraw",value:function(){if(this.getAce())return this.aceResize(),void this.applyRef();w(d(t.prototype),"redraw",this).call(this)}},{key:"whenLoaded",value:function(e){this.isLoaded()?e():this.addListenerOnce("aceReady",e)}},{key:"onMount",value:function(){var e=this;if(this.addListener("resize",function(){e.aceResize()}),this.addListener("change",function(){e.aceResize()}),!window.ace)return void this.constructor.requireAce(function(){e.onDelayedMount()});this.onDelayedMount()}},{key:"onDelayedMount",value:function(){var e=this;this.ace=window.ace.edit(this.node),this.getAce().$blockScrolling=1/0,this.resolveQueuedMethods(),this.applyAceOptions(),this.getAce().renderer.$textLayer.addEventListener("changeCharacterSize",function(t){e.aceResize()}),this.dispatch("aceReady")}},{key:"getAce",value:function(){return this.ace}},{key:"getValue",value:function(){return this.getAce().getValue()}},{key:"applyAceOptions",value:function(){var e=this;if(this.setAceMode(this.options.aceMode),this.setAceKeyboardHandler(this.options.aceKeyboardHandler),this.setAceTheme(this.options.aceTheme),this.setAceFontSize(this.options.fontSize),this.setAceTabSize(this.options.tabSize),this.setAceLineNumberVisible(this.options.showLineNumber),this.setAcePrintMarginVisible(this.options.showPrintMargin),this.setAcePrintMarginSize(this.options.printMarginSize),this.setReadOnly(this.options.readOnly),this.setUseWrapMode(this.options.lineWrapping||!1),this.options.numLines&&(this.options.maxLines=this.options.minLines=this.options.numLines),this.options.maxLines&&this.setAceOptions({maxLines:this.options.maxLines}),this.options.minLines&&this.setAceOptions({minLines:this.options.minLines}),this.options.value&&this.setValue(this.options.value,-1),this.options.hasOwnProperty("enableBasicAutocompletion")||this.options.hasOwnProperty("enableLiveAutocompletion")){require(["/static/js/ext/ace/ext-language_tools.js"],function(){e.setBasicAutocompletion(e.options.enableBasicAutocompletion),e.setLiveAutocompletion(e.options.enableLiveAutocompletion),e.setSnippets(e.options.enableSnippets)})}}},{key:"aceResize",value:function(){this.getAce().resize()}},{key:"setValue",value:function(e,t){this.apiChange=!t,this.getAce().setValue(e,-1),this.apiChange=!1}},{key:"setAceOptions",value:function(e){this.getAce().setOptions(e)}},{key:"setReadOnly",value:function(e){this.getAce().setReadOnly(e)}},{key:"setAceMode",value:function(e){e.hasOwnProperty("aceMode")&&(e=e.aceMode),this.getAce().getSession().setMode("ace/mode/"+e)}},{key:"getAceKeyboardHandler",value:function(){return this.getAce().$keybindingId}},{key:"setAceKeyboardHandler",value:function(e){e.hasOwnProperty("aceName")&&(e=e.aceName),this.getAce().setKeyboardHandler("ace/keyboard/"+e)}},{key:"getAceMode",value:function(){return this.getAce().getSession().getMode()}},{key:"setAceTheme",value:function(e){e.hasOwnProperty("aceName")&&(e=e.aceName),this.getAce().setTheme("ace/theme/"+e)}},{key:"getAceTheme",value:function(){return this.getAce().getTheme()}},{key:"setAceFontSize",value:function(e){this.getAce().setOptions({fontSize:e+"px"})}},{key:"getAceFontSize",value:function(){return this.getAce().getFontSize()}},{key:"setAceTabSize",value:function(e){this.getAce().setOptions({tabSize:e})}},{key:"getAceTabSize",value:function(){return this.getAce().getOption("tabSize")}},{key:"setAceLineNumberVisible",value:function(e){this.getAce().renderer.setShowGutter(e)}},{key:"getAceLineNumberVisible",value:function(){return this.getAce().renderer.getShowGutter()}},{key:"setAcePrintMarginVisible",value:function(e){this.getAce().setShowPrintMargin(e)}},{key:"getAcePrintMarginVisible",value:function(){return this.getAce().getShowPrintMargin()}},{key:"setAcePrintMarginSize",value:function(e){this.getAce().setPrintMarginColumn(e)}},{key:"getAcePrintMarginSize",value:function(){return this.getAce().getPrintMarginColumn()}},{key:"setBasicAutocompletion",value:function(e){this.getAce().setOptions({enableBasicAutocompletion:e})}},{key:"setLiveAutocompletion",value:function(e){this.getAce().setOptions({enableLiveAutocompletion:e})}},{key:"setSnippets",value:function(e){this.getAce().setOptions({enableSnippets:e})}},{key:"setAnnotations",value:function(e){this.getAce().getSession().setAnnotations(e)}},{key:"setUseWrapMode",value:function(e){this.getAce().getSession().setUseWrapMode(e)}},{key:"setIndentedSoftWrap",value:function(e){this.getAce().setOption("indentedSoftWrap",e)}},{key:"blockScroll",value:function(){this.getAce().$blockScrolling=1/0}},{key:"setFoldStyle",value:function(e){this.getAce().getSession().setFoldStyle(e)}},{key:"setHighlightActiveLine",value:function(e){this.getAce().setHighlightActiveLine(e)}},{key:"setHighlightGutterLine",value:function(e){this.getAce().setHighlightGutterLine(e)}},{key:"setShowGutter",value:function(e){this.getAce().renderer.setShowGutter(e)}},{key:"getScrollTop",value:function(){return this.getAce().getSession().getScrollTop()}},{key:"setScrollTop",value:function(e){this.getAce().getSession().setScrollTop(e)}},{key:"addMarker",value:function(e,t,n,i){for(var r,a=this.constructor.AceRange,o=arguments.length,s=new Array(o>4?o-4:0),l=4;l<o;l++)s[l-4]=arguments[l];return(r=this.getAce().getSession()).addMarker.apply(r,[new a(e,t,n,i)].concat(s))}},{key:"removeMarker",value:function(e){this.getAce().getSession().removeMarker(e)}},{key:"getRendererLineHeight",value:function(){return this.getAce().renderer.lineHeight}},{key:"getTextRange",value:function(e,t,n,i){var r=this.constructor.AceRange;return this.getAce().getSession().doc.getTextRange(new r(e,t,n,i))}},{key:"setTextRange",value:function(e,t,n,i,r){var a=this.constructor.AceRange;this.getAce().getSession().replace(new a(e,t,n,i),r)}},{key:"removeLine",value:function(e){var t=this.constructor.AceRange;this.getAce().getSession().getDocument().remove(new t(e,0,e+1,0))}},{key:"insertAtLine",value:function(e,t){var n=this.getAce().session.getLine(e-1).length;this.getAce().gotoLine(e,n),this.insert(t)}},{key:"replaceLine",value:function(e,t){var n=this.constructor.AceRange;this.getAce().getSession().getDocument().replace(new n(e,0,e+1,0),t)}},{key:"addAceSessionEventListener",value:function(e,t){this.getAce().getSession().addEventListener(e,t)}},{key:"addAceSessionChangeListener",value:function(e){this.addAceSessionEventListener("change",e)}},{key:"addAceChangeListener",value:function(e){this.getAce().on("change",e)}},{key:"addAceEventListener",value:function(){var e;(e=this.getAce()).addEventListener.apply(e,arguments)}},{key:"focus",value:function(){this.getAce().focus()}},{key:"gotoEnd",value:function(){var e=this.getAce(),t=e.session.getLength()-1,n=e.session.getLine(t).length;e.gotoLine(t+1,n)}},{key:"setUndoManager",value:function(e){this.getAce().getSession().setUndoManager(e)}},{key:"setAceRendererOption",value:function(e,t){this.getAce().renderer.setOption(e,t)}},{key:"insert",value:function(e){this.getAce().insert(e)}},{key:"append",value:function(e){var t=this.getAce().getSession().getLength()-1;t<0&&(t=0);var n=this.getAce().getSession().getLine(t).length,i=this.getAce().isRowFullyVisible(t);this.getAce().getSession().insert({row:t,column:n},e),this.aceResize(),i&&this.getAce().scrollToLine(this.getAce().getSession().getLength()-1,!0,!0,function(){})}},{key:"copyTextToClipboard",value:function(){this.getAce().selectAll(),this.getAce().focus(),document.execCommand("copy")}}],[{key:"requireAce",value:function(e){throw Error("You need to implement requireAce")}}]),t}(function(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"isLoaded",value:function(){throw Error("Not implemented!")}},{key:"enqueueMethodCall",value:function(e,t){this.methodCallQueue=this.methodCallQueue||[],this.methodCallQueue.push([e,t])}},{key:"resolveQueuedMethods",value:function(){if(!this.isLoaded())throw Error("Cannot process scheduled jobs, element not loaded");var e=!0,t=!1,n=void 0;try{for(var i,r=(this.methodCallQueue||[])[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a,o=i.value;(a=o[0]).call.apply(a,[this].concat(C(o[1])))}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}delete this.methodCallQueue}}]),t}(e)}(Lc.Element)),R(Fd.prototype,"applyAceOptions",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"applyAceOptions"),Fd.prototype),R(Fd.prototype,"aceResize",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"aceResize"),Fd.prototype),R(Fd.prototype,"setValue",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setValue"),Fd.prototype),R(Fd.prototype,"setAceOptions",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAceOptions"),Fd.prototype),R(Fd.prototype,"setReadOnly",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setReadOnly"),Fd.prototype),R(Fd.prototype,"setAceMode",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAceMode"),Fd.prototype),R(Fd.prototype,"setAceKeyboardHandler",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAceKeyboardHandler"),Fd.prototype),R(Fd.prototype,"setAceTheme",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAceTheme"),Fd.prototype),R(Fd.prototype,"setAceFontSize",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAceFontSize"),Fd.prototype),R(Fd.prototype,"setAceTabSize",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAceTabSize"),Fd.prototype),R(Fd.prototype,"setAceLineNumberVisible",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAceLineNumberVisible"),Fd.prototype),R(Fd.prototype,"setAcePrintMarginVisible",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAcePrintMarginVisible"),Fd.prototype),R(Fd.prototype,"setAcePrintMarginSize",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAcePrintMarginSize"),Fd.prototype),R(Fd.prototype,"setBasicAutocompletion",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setBasicAutocompletion"),Fd.prototype),R(Fd.prototype,"setLiveAutocompletion",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setLiveAutocompletion"),Fd.prototype),R(Fd.prototype,"setSnippets",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setSnippets"),Fd.prototype),R(Fd.prototype,"setAnnotations",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAnnotations"),Fd.prototype),R(Fd.prototype,"setUseWrapMode",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setUseWrapMode"),Fd.prototype),R(Fd.prototype,"setIndentedSoftWrap",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setIndentedSoftWrap"),Fd.prototype),R(Fd.prototype,"blockScroll",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"blockScroll"),Fd.prototype),R(Fd.prototype,"setFoldStyle",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setFoldStyle"),Fd.prototype),R(Fd.prototype,"setHighlightActiveLine",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setHighlightActiveLine"),Fd.prototype),R(Fd.prototype,"setHighlightGutterLine",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setHighlightGutterLine"),Fd.prototype),R(Fd.prototype,"setShowGutter",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setShowGutter"),Fd.prototype),R(Fd.prototype,"setScrollTop",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setScrollTop"),Fd.prototype),R(Fd.prototype,"addMarker",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"addMarker"),Fd.prototype),R(Fd.prototype,"removeMarker",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"removeMarker"),Fd.prototype),R(Fd.prototype,"setTextRange",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setTextRange"),Fd.prototype),R(Fd.prototype,"removeLine",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"removeLine"),Fd.prototype),R(Fd.prototype,"insertAtLine",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"insertAtLine"),Fd.prototype),R(Fd.prototype,"replaceLine",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"replaceLine"),Fd.prototype),R(Fd.prototype,"addAceSessionEventListener",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"addAceSessionEventListener"),Fd.prototype),R(Fd.prototype,"addAceSessionChangeListener",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"addAceSessionChangeListener"),Fd.prototype),R(Fd.prototype,"addAceChangeListener",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"addAceChangeListener"),Fd.prototype),R(Fd.prototype,"addAceEventListener",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"addAceEventListener"),Fd.prototype),R(Fd.prototype,"focus",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"focus"),Fd.prototype),R(Fd.prototype,"gotoEnd",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"gotoEnd"),Fd.prototype),R(Fd.prototype,"setUndoManager",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setUndoManager"),Fd.prototype),R(Fd.prototype,"setAceRendererOption",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"setAceRendererOption"),Fd.prototype),R(Fd.prototype,"insert",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"insert"),Fd.prototype),R(Fd.prototype,"append",[et],Object.getOwnPropertyDescriptor(Fd.prototype,"append"),Fd.prototype),Fd),rp=(Ud=Wd=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"hideActive",zd,y(n)),n}return h(t,e),t}(Jc),zd=R(Ud.prototype,"hideActive",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{" .ace_gutter-active-line":{display:"none"}," .ace_active-line":{display:"none"}," .ace_cursor":{display:"none"}}}}),Ud),ap=(Hd=Ze(rp))(Vd=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e=Object.assign({fontSize:13,readOnly:!0,lineWrapping:!0},e),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.hideActive)}}]),t}(ip))||Vd,op=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r(this,e),this.classMap=new Map,this.fallback=t;var i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;this.addClass(u[0],u[1])}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}return o(e,[{key:"addClass",value:function(e,t){this.classMap.set(e,t)}},{key:"registerDependencies",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o&&o.registerMarkup&&o.registerMarkup(this)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"getClass",value:function(e){var t=this.classMap.get(e);return!t&&this.fallback&&(t=this.fallback.getClass(e)),t}},{key:"get",value:function(e){return this.getClass(e)}},{key:"has",value:function(e){return this.getClass(e)}}],[{key:"addClass",value:function(e,t){this.GLOBAL.addClass(e,t)}}]),e}();op.GLOBAL=new op;var sp=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.classMap||(e.classMap=new op(op.GLOBAL)),e.parser||(e.parser=new Cc({uiElements:e.classMap})),w(d(t.prototype),"setOptions",this).call(this,e),this.setValue(this.options.value||""),this.options.classMap&&(this.classMap=this.options.classMap)}},{key:"setValue",value:function(e){if("string"==typeof e){this.options.rawValue=e;try{e=this.options.parser.parse(e)}catch(t){console.error("Can't parse ",e,t),e={tag:"span",children:[e]}}}this.options.value=e}},{key:"reparse",value:function(){this.options.rawValue&&this.setValue(this.options.rawValue)}},{key:"registerDependencies",value:function(e){e.length>0&&(this.classMap.registerDependencies(e),this.reparse())}},{key:"addClass",value:function(e,t){this.classMap.addClass(e,t)}},{key:"getClass",value:function(e){return this.classMap.getClass(e)}},{key:"getValue",value:function(){return this.options.value}},{key:"convertToUI",value:function(e){var t=this;if(e instanceof Lc.TextElement||e instanceof Lc.Element)return e;if("string"==typeof e)return new Lc.TextElement(e);if(Array.isArray(e))return e.map(function(e){return t.convertToUI(e)});e.children&&(e.children=this.convertToUI(e.children));var n=this.getClass(e.tag)||e.tag;return Lc.createElement.apply(Lc,[n,e].concat(C(e.children||[])))}},{key:"render",value:function(){return this.convertToUI(this.getValue())}}]),t}(jd);op.addClass("CodeSnippet",ap);var lp=function(e,t){return function(e){function n(){return r(this,n),b(this,d(n).apply(this,arguments))}return h(n,e),o(n,[{key:"setOptions",value:function(e){return e.hasOwnProperty(t)&&!this.constructor.isSafeUri(e[t])?w(d(n.prototype),"setOptions",this).call(this,Object.assign({},e,s({},t,void 0))):w(d(n.prototype),"setOptions",this).call(this,e)}}],[{key:"isSafeUri",value:function(e){return-1===e.indexOf(":")||e.startsWith("http:")||e.startsWith("https:")||e.startsWith("mailto:")}}]),n}(e)};op.addClass("Link",lp(Xd,"href")),op.addClass("Image",lp(Kd,"src"));var up=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this)),e.stores=new Map,e.applyEventWrapper=function(t){e.applyEvent(t)},e}return h(t,e),o(t,[{key:"getStore",value:function(e){return e=e&&e.toLowerCase(),this.stores.get(e)}},{key:"getStoreForEvent",value:function(e){var t=e.objectType||e.store;return this.getStore(t)}},{key:"addStore",value:function(e){var t=e.objectType.toLowerCase();if(this.stores.has(t))throw Error("GlobalState: Adding a store for an existing object type: "+e.objectType);this.stores.set(t,e)}},{key:"applyEvent",value:function(e){if(null!=e)if(Array.isArray(e)){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.applyEvent(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}else if(!e.state||(this.importState(e.state),this.getStoreForEvent(e))){var s=this.getStoreForEvent(e);if(s)return s.applyEvent(e);console.log("GlobalState: Missing store for event: ",e)}}},{key:"get",value:function(e,t){var n=this.getStore(e);if(n){var i=Array.prototype.slice.call(arguments,1);return n.get.apply(n,C(i))}return console.error("GlobalState: Can't find store ",e),null}},{key:"importStateFromTempMap",value:function(e,t){var n=t.get(e);t.delete(e);var i=this.getStore(e);if(!i)return void console.error("Failed to import state, can't find store ",e);var r=!0,a=!1,o=void 0;try{for(var s,l=i.getDependencies()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this.importStateFromTempMap(u.toLowerCase(),t)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}i.importState(n)}},{key:"importState",value:function(e){if(Array.isArray(e)){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.importState(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}else{var s=new Map;for(var l in e)s.set(l.toLowerCase(),e[l]);for(;s.size>0;){var u=s.keys(),c=u.next().value;this.importStateFromTempMap(c,s)}}}},{key:"clear",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.stores.values()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;a.clear&&a.clear()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"toJSON",value:function(){var e={},t=!0,n=!1,i=void 0;try{for(var r,a=this.stores.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e[o.objectType]=o.toJSON()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}}]),t}(Gu),cp=new up,hp=cp;self.GlobalState=cp;var dp=Symbol("Store"),pp=Symbol("EventDispatcher"),fp=function(e){function t(e,n,i){var a;return r(this,t),a=b(this,d(t).call(this)),Object.assign(y(a),e),a.setStore(i),a}return h(t,e),o(t,[{key:"setStore",value:function(e){this[dp]=e}},{key:"getStore",value:function(){return this[dp]}},{key:"applyEvent",value:function(e){Object.assign(this,e.data)}},{key:"addUpdateListener",value:function(e){return this.addListener("update",e)}},{key:"addDeleteListener",value:function(e){return this.addListener("delete",e)}},{key:"addEventListener",value:function(e,t){var n=this;if(Array.isArray(e)){var i=e.map(function(e){return n.addEventListener(e,t)});return new Yu(i)}return this[pp]||(this[pp]=new Gu,this.addUpdateListener(function(e){n[pp].dispatch(e.type,e,n)})),this[pp].addListener(e,t)}},{key:"getStreamName",value:function(){throw"getStreamName not implemented"}},{key:"registerToStream",value:function(){this.getStore().getState().registerStream(this.getStreamName())}},{key:"toJSON",value:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e}}],[{key:"getStoreName",value:function(){return this.name}}]),t}(Gu),gp=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fp,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r(this,t),n=b(this,d(t).call(this)),n.options=a,n.objectType=e.toLowerCase(),n.ObjectWrapper=i,n.attachToState(),n}return h(t,e),o(t,[{key:"attachToState",value:function(){this.getState()&&this.getState().addStore(this)}},{key:"getState",value:function(){return this.options.hasOwnProperty("state")?this.options.state:hp}},{key:"getDependencies",value:function(){return this.options.dependencies||[]}}]),t}(Gu),mp=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.objects=new Map,n}return h(t,e),o(t,[{key:"has",value:function(e){return!!this.get(e)}},{key:"get",value:function(e){return null==e?null:this.objects.get(String(e))}},{key:"addObject",value:function(e,t){this.objects.set(String(e),t)}},{key:"clear",value:function(){this.objects.clear(),this.dispatch("update",null,null)}},{key:"getObjectIdForEvent",value:function(e){return String(e.objectId||e.data.id)}},{key:"getObjectForEvent",value:function(e){var t=this.getObjectIdForEvent(e);return this.get(t)}},{key:"all",value:function(e){var t=this.objects.values();return e||(t=Array.from(t)),t}},{key:"find",value:function(e){return this.all(!0).find(e)}},{key:"toJSON",value:function(){return this.all().map(function(e){return e.toJSON()})}},{key:"createObject",value:function(e){var t=new this.ObjectWrapper(e.data,e,this);return t.setStore(this),t}},{key:"applyCreateEvent",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getObjectForEvent(e),i="create";if(n){var r=Object.assign({},e);i="update",r.type="refresh",n.applyEvent(r),n.dispatch("update",e)}else n=this.createObject(e),this.addObject(this.getObjectIdForEvent(e),n);return t&&this.dispatch(i,n,e),n}},{key:"applyUpdateOrCreateEvent",value:function(e){var t=this.getObjectForEvent(e);return t?this.applyEventToObject(t,e):(t=this.applyCreateEvent(e,!1),this.dispatch("create",t,e)),this.dispatch("updateOrCreate",t,e),t}},{key:"applyDeleteEvent",value:function(e){var t=this.getObjectForEvent(e);return t&&(this.objects.delete(this.getObjectIdForEvent(e)),t.dispatch("delete",e,t),this.dispatch("delete",t,e)),t}},{key:"applyEventToObject",value:function(e,t){return e.applyEvent(t),e.dispatch("update",t),this.dispatch("update",e,t),e}},{key:"applyEvent",value:function(e){if(e.data=e.data||{},"create"===e.type)return this.applyCreateEvent(e);if("delete"===e.type)return this.applyDeleteEvent(e);if("updateOrCreate"===e.type)return this.applyUpdateOrCreateEvent(e);var t=this.getObjectForEvent(e);return t?this.applyEventToObject(t,e):void console.error("I don't have object of type ",this.objectType," ",e.objectId)}},{key:"importState",value:function(e){e=e||[];var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.fakeCreate(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"fakeCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fakeCreate",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var i={objectType:this.objectType,objectId:e.id,type:t,data:e};return this.applyCreateEvent(i,n)}}},{key:"addCreateListener",value:function(e,t){if(t){var n=!0,i=!1,r=void 0;try{for(var a,o=this.objects.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e(s,{objectType:this.objectType,objectId:s.id,type:"fakeCreate",data:s})}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}return this.addListener("create",e)}},{key:"addUpdateListener",value:function(e){return this.addListener("update",e)}},{key:"addDeleteListener",value:function(e){return this.addListener("delete",e)}},{key:"addChangeListener",value:function(e){return this.addListener(["create","update","delete"],e)}}]),t}(gp),vp=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),n=b(this,d(t).call(this,e,t,i)),n.addEventListener=fp.prototype.addEventListener.bind(y(n)),n}return h(t,e),o(t,[{key:"get",value:function(){return this}},{key:"all",value:function(){return[this]}},{key:"toJSON",value:function(){return JSON.stringify([this])}},{key:"applyEvent",value:function(e){Object.assign(this,e.data),this.dispatch("update",e,this)}},{key:"importState",value:function(e){Object.assign(this,e),this.dispatch("update",e,this)}},{key:"addUpdateListener",value:function(e){return this.addListener("update",e)}}]),t}(gp),yp=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(i){function a(){return r(this,a),b(this,d(a).call(this,e,t,n))}return h(a,i),o(a,null,[{key:"getObjectType",value:function(){return e}},{key:"getInstance",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:hp).getStore(this.getObjectType())}}]),a}(mp)},bp=function(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"fetch",value:function(e,t,n){var i=this;if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){var r=this.get(e);if(r)return void t(r)}this.fetchJobs||(this.fetchJobs=[]),this.fetchJobs.push({id:e,success:t,error:n}),this.fetchTimeout||(this.fetchTimeout=setTimeout(function(){i.executeAjaxFetch()},this.options.fetchTimeoutDuration||0))}},{key:"getFetchRequestData",value:function(e,t){return{ids:e}}},{key:"getFetchRequestObject",value:function(e,t){var n=this,i=this.getFetchRequestData(e,t);return{url:this.options.fetchURL,type:this.options.fetchType||"GET",dataType:"json",data:i,cache:!1,success:function(e){cp.importState(e.state||{});var i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,u=n.get(l.id);u?l.success(u):(console.error("Failed to fetch object ",l.id," of type ",n.objectType),l.error&&l.error())}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}},error:function(e){console.error("Failed to fetch objects of type ",n.objectType,":\n",e)
;var i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.error&&l.error(e)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}}}},{key:"getFetchRequests",value:function(e){var t=new Map,n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.id;t.has(l)||t.set(l,new Array),t.get(l).push(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}for(var u=this.options.maxFetchObjectCount||256,c=B(Array.from(t.keys()),u),h=B(Array.from(t.values()),u),d=[],p=0;p<c.length;p+=1)d.push(this.getFetchRequestObject(c[p],M(h[p])));return d}},{key:"executeAjaxFetch",value:function(){var e=this.fetchJobs;this.fetchJobs=null;var t=this.getFetchRequests(e),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;zu.fetch(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}clearTimeout(this.fetchTimeout),this.fetchTimeout=null}}]),t}(e)},kp=function(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"hasTemporaryId",value:function(){return("string"==typeof this.id||this.id instanceof String)&&this.id.startsWith("temp-")}},{key:"updateId",value:function(e){if(this.id!=e){var t=this.id;this.hasTemporaryId()||console.error("This is only meant to replace temporary ids!"),this.id=e,this.dispatch("updateId",{oldId:t})}}}]),t}(e)},wp=function(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"generateVirtualId",value:function(){return this.constructor.generateVirtualId()}},{key:"getVirtualObject",value:function(e){return this.objects.get("temp-"+e.virtualId)}},{key:"applyUpdateObjectId",value:function(e,t){if(e.id!==t){var n=e.id;e.updateId(t),this.objects.delete(n),this.addObject(e.id,e),this.dispatch("updateObjectId",e,n)}}},{key:"applyCreateEvent",value:function(e){if(e.virtualId){var n=this.getVirtualObject(e);n&&this.applyUpdateObjectId(n,e.objectId)}return w(d(t.prototype),"applyCreateEvent",this).apply(this,arguments)}}],[{key:"generateVirtualId",value:function(){return this.virtualIdCounter||(this.virtualIdCounter=0),this.virtualIdCounter+=1,this.virtualIdCounter}}]),t}(e)},Ep=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(this,e),this.name=t,this.pluralName=t+"s",this.baseUnit=n,this.multiplier=i,this.milliseconds=(n&&n.getMilliseconds()||1)*i,this.variableMultiplier=a.variableMultiplier||!1,this.variableDuration=this.variableMultiplier||n&&n.isVariable()}return o(e,[{key:"valueOf",value:function(){return this.milliseconds}},{key:"getName",value:function(){return this.name}},{key:"getPluralName",value:function(){return this.pluralName}},{key:"getMilliseconds",value:function(){return this.milliseconds}},{key:"isVariable",value:function(){return this.variableDuration}},{key:"hasVariableMultiplier",value:function(){return this.variableMultiplier}},{key:"getDateValue",value:function(e){}},{key:"setDateValue",value:function(e,t){}}],[{key:"toTimeUnit",value:function(t){return t instanceof e?t:this.CANONICAL[t]}}]),e}();Ep.CANONICAL={},Ep.ALL=[],Ep.FIXED_DURATION=[],Ep.VARIABLE_DURATION=[],Ep.MILLISECOND=new Ep("millisecond",null,1),Ep.SECOND=new Ep("second",Ep.MILLISECOND,1e3),Ep.MINUTE=new Ep("minute",Ep.SECOND,60),Ep.HOUR=new Ep("hour",Ep.MINUTE,60),Ep.DAY=new Ep("day",Ep.HOUR,24,{variableMultiplier:!0}),Ep.WEEK=new Ep("week",Ep.DAY,7),Ep.MONTH=new Ep("month",Ep.DAY,30,{variableMultiplier:!0}),Ep.QUARTER=new Ep("quarter",Ep.MONTH,3),Ep.TRIMESTER=new Ep("trimester",Ep.MONTH,4),Ep.SEMESTER=new Ep("semester",Ep.MONTH,6),Ep.YEAR=new Ep("year",Ep.DAY,365,{variableMultiplier:!0}),Ep.DAY.dateMethodSuffix="Date",Ep.MONTH.dateMethodSuffix="Month",Ep.YEAR.dateMethodSuffix="FullYear";var Sp=function(){function e(t){if(r(this,e),t instanceof self.Date)throw new Error("Can't automatically transform Date to Duration, use date.getTime() if you really want to");if(H(t))return void(this.milliseconds=t);if(t instanceof e)return void Object.assign(this,t);if(G(t)){this.milliseconds=0;for(var n=0,i=Object.keys(t);n<i.length;n++){var a=i[n],o=Ep.CANONICAL[a];if(!o)throw Error("Unknown time unit:",a);o.isVariable()?(this[a]=parseInt(t[a]),this.relativeDuration=!0):this.milliseconds+=parseFloat(t[a])*o.milliseconds}}else{if(arguments.length>0)throw Error.apply(void 0,["Invalid Duration arguments: "].concat(Array.prototype.slice.call(arguments)));this.milliseconds=0}}return o(e,[{key:"increment",value:function(e){e=this.constructor.toDuration(e);for(var t in e)t in Ep.CANONICAL&&(this.hasOwnProperty(t)?this[t]+=e[t]:this[t]=e[t]);return this}},{key:"add",value:function(e){return this.clone().increm(e)}},{key:"subtract",value:function(e){return e=this.constructor.toDuration(e).negate(),this.add(e)}},{key:"isAbsolute",value:function(){return!this.isVariable()}},{key:"isVariable",value:function(){return this.relativeDuration}},{key:"negate",value:function(){var t=new e(this);for(var n in t)n in Ep.CANONICAL&&(t[n]=-t[n]);return t}},{key:"abs",value:function(){return new e(Math.abs(+this))}},{key:"clone",value:function(){return new e(this)}},{key:"valueOf",value:function(){return this.milliseconds}},{key:"toNanoseconds",value:function(){return Math.floor(1e6*+this)}},{key:"toMilliseconds",value:function(){return Math.floor(+this)}},{key:"getMilliseconds",value:function(){return this.toMilliseconds()%1e3}},{key:"toSeconds",value:function(){return Math.floor(+this/1e3)}},{key:"getSeconds",value:function(){return this.toSeconds()%60}},{key:"toMinutes",value:function(){return Math.floor(+this/6e4)}},{key:"getMinutes",value:function(){return this.toMinutes()%60}},{key:"toHours",value:function(){return Math.floor(+this/36e5)}},{key:"getHours",value:function(){return this.toHours()%24}},{key:"toDays",value:function(){return Math.floor(+this/864e5)}},{key:"toMonths",value:function(){return Math.floor(+this/2592e6)}},{key:"toYears",value:function(){return Math.floor(+this/31536e6)}},{key:"toString",value:function(e){}}],[{key:"toDuration",value:function(t){return t instanceof e?t:new this(t)}}]),e}();nt();var Cp,xp=Math.pow(2,32),Tp=self.Date,Ap=te(Cp=function(e){function t(){var e;r(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return b(this,(e=d(t)).call.apply(e,[this].concat(i)))}return h(t,e),o(t,[{key:"toDate",value:function(){return this}},{key:"set",value:function(e){e=this.constructor.toDate(e),this.setTime(e.setTime())}},{key:"clone",value:function(){return new this.constructor(this.getTime())}},{key:"toUnix",value:function(){return this.getTime()/1e3}},{key:"unix",value:function(){return Math.floor(this.toUnix())}},{key:"isBefore",value:function(e){return this.getTime()<t.toDate(e).getTime()}},{key:"equals",value:function(e){return this.getTime()===t.toDate(e).getTime()}},{key:"get",value:function(e){return e=Ep.toTimeUnit(e),e.getDateValue(this)}},{key:"isSame",value:function(e,t){return t?(t=Ep.toTimeUnit(t),e=this.constructor.toDate(e),!(this.diff(e)>=2*t)&&this.get(t)==e.get(t)):this.equals(e)}},{key:"isAfter",value:function(e){return this.getTime()>t.toDate(e).getTime()}},{key:"isSameOrBefore",value:function(e){return this.isBefore(e)||this.equals(e)}},{key:"isSameOrAfter",value:function(e){return this.isAfter(e)||this.equals(e)}},{key:"isBetween",value:function(e,t){return this.isSameOrAfter(e)&&this.isSameOrBefore(t)}},{key:"getWeekDay",value:function(){return this.getDay()}},{key:"addUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e=Ep.toTimeUnit(e),t=parseInt(t),!e.isVariable())return this.setTime(this.getTime()+e.getMilliseconds()*t),this;for(;!e.dateMethodSuffix;)t*=e.multiplier,e=e.baseUnit;var n=e.dateMethodSuffix,i=this["get"+n]();return this["set"+n](i+t),this}},{key:"capUp",value:function(e){e=this.constructor.toDate(e),this.isAfter(e)&&this.set(e)}},{key:"capDown",value:function(e){e=this.constructor.toDate(e),this.isBefore(e)&&this.set(e)}},{key:"roundDown",value:function(e){for(e=Ep.toTimeUnit(e);e=e.baseUnit;)this["set"+e.dateMethodSuffix](0);return this}},{key:"roundUp",value:function(e){var t=this.clone().roundDown(e);return this.equals(t)?(this.set(t),this):(this.addUnit(e),this.roundDown(e))}},{key:"round",value:function(e){var t=this.clone().roundUp(e),n=this.clone().roundDown(e);return this.diff(t)<=this.diff(n)?this.setTime(t.getTime()):this.setTime(n.getTime()),this}},{key:"add",value:function(e){if(e=Sp.toDuration(e),e.isAbsolute())return this.setTime(this.getTime()+e.toMilliseconds()),this;for(var t in e){var n=Ep.CANONICAL[t];n&&this.addUnit(n,e[t])}return this}},{key:"subtract",value:function(e){return e=Sp.toDuration(e).negate(),this.add(e)}},{key:"diffDuration",value:function(e){return new Sp(this.diff(e))}},{key:"diff",value:function(e){return e=this.constructor.toDate(e),Math.abs(+this-e)}},{key:"locale",value:function(e){return this}},{key:"evalToken",value:function(e){var t=this.constructor.tokenFormattersMap.get(e);return t?t(this):e}},{key:"format",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ISO",n=this.constructor.splitToTokens(t);return n=n.map(function(t){return e.evalToken(t)}),n.join("")}},{key:"isValid",value:function(){return"Invalid Date"!==this.toString()}},{key:"utc",value:function(){return this.constructor.fromUnixMilliseconds(+this+60*this.getTimezoneOffset()*1e3)}},{key:"isLeapYear",value:function(){var e=this.getFullYear();return e%4==0&&(e%100!=0||e%400==0)}},{key:"daysInMonth",value:function(){return new Tp(this.getFullYear(),this.getMonth()+1,0).getDate()}},{key:"getDaysCountPerMonth",value:function(e){return[31,28+this.isLeapYear(),31,30,31,30,31,31,30,31,30,31][e]}},{key:"getDayInYear",value:function(){for(var e=this.getMonth(),t=0,n=0;n<e;n+=1)t+=this.getDaysCountPerMonth(n);return t+this.getDate()-1}},{key:"getWeekInYear",value:function(){return(this.getDayInYear()-this.getWeekDay())/7}}],[{key:"create",value:function(e){return 1===arguments.length&&H(e)&&e<xp?ee(Tp,t,1e3*e):ee.apply(void 0,[Tp,t].concat(Array.prototype.slice.call(arguments)))}},{key:"toDate",value:function(e){return e instanceof t?e:new this(e)}},{key:"now",value:function(){return new this(Tp.now())}},{key:"fromUnixMilliseconds",value:function(e){return this.create(new Tp(e))}},{key:"fromUnixSeconds",value:function(e){return this.fromUnixMilliseconds(1e3*e)}},{key:"fromHighResTimestamp",value:function(e){return this.fromUnixMilliseconds(e+self.performance.timing.navigationStart)}},{key:"unix",value:function(e){return this.fromUnixSeconds(e)}},{key:"min",value:function(){for(var e=this.constructor.toDate(arguments[0]),t=1;t<arguments.length;t++){var n=this.constructor.toDate(arguments[t]);n.isBefore(e)&&(e=n)}return e}},{key:"max",value:function(){for(var e=this.constructor.toDate(arguments[0]),t=1;t<arguments.length;t++){var n=this.constructor.toDate(arguments[t]);n.isAfter(e)&&(e=n)}return e}},{key:"splitToTokens",value:function(e){for(var t=[],n=null,i=!1,r=!1,a=0;a<e.length;a++){var o=e.charCodeAt(a);if(125===o&&i)i=!1,n=null;else if(93===o&&r)r=!1,n=null;else if(i||r)t[t.length-1]+=e[a];else if(123===o)i=!0,t.push("");else if(91===o)r=!0,t.push("");else{var s=65<=o&&o<=90||97<=o&&o<=122;s===n?t[t.length-1]+=e[a]:t.push(e[a]),n=s}}return(i||r)&&console.warn("Unfinished escaped sequence!"),t}}]),t}(Tp))||Cp;Sp.prototype.format=function(e){return Ap.fromUnixMilliseconds(this.toMilliseconds()).utc().format(e)};var Lp=["Su","Mo","Tu","We","Th","Fr","Sa"],Ip=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Np=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Op=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Rp=["January","February","March","April","May","June","July","August","September","October","November","December"];Ap.tokenFormattersMap=new Map([["ISO",function(e){return e.toISOString()}],["Y",function(e){return e.getFullYear()}],["YY",function(e){return Q(e.getFullYear()%100,2)}],["YYYY",function(e){return e.getFullYear()}],["M",function(e){return e.getMonth()+1}],["MM",function(e){return Q(e.getMonth()+1,2)}],["MMM",function(e){return Op[e.getMonth()]}],["MMMM",function(e){return Rp[e.getMonth()]}],["D",function(e){return e.getDate()}],["Do",function(e){return $(e.getDate())}],["DD",function(e){return Q(e.getDate(),2)}],["d",function(e){return e.getWeekDay()}],["do",function(e){return $(e.getWeekDay())}],["dd",function(e){return Lp[e.getWeekDay()]}],["ddd",function(e){return Ip[e.getWeekDay()]}],["dddd",function(e){return Np[e.getWeekDay()]}],["H",function(e){return e.getHours()}],["HH",function(e){return Q(e.getHours(),2)}],["h",function(e){return e.getHours()%12?e.getHours()%12:12}],["hh",function(e){return Q(e.getHours()%12?e.getHours()%12:12,2)}],["m",function(e){return e.getMinutes()}],["mm",function(e){return Q(e.getMinutes(),2)}],["s",function(e){return e.getSeconds()}],["ss",function(e){return Q(e.getSeconds(),2)}],["S",function(e){return Math.floor(e.getMilliseconds()/100)}],["SS",function(e){return Q(Math.floor(e.getMilliseconds()/10),2)}],["SSS",function(e){return Q(e.getMilliseconds(),3)}],["ms",function(e){return Q(e.getMilliseconds(),3)}],["aa",function(e){return e.getHours()>12?"pm":"am"}],["AA",function(e){return e.getHours()>12?"PM":"AM"}],["LL",function(e){return e.format("MMMM Do, YYYY")}]]);var Mp,Pp,Dp,Bp,_p,Fp,Up,zp,Wp,Hp,Vp,Gp,jp,Yp,Jp,qp,Xp,Kp,Qp,Zp,$p,ef,tf,nf,rf,af,of,sf,lf,uf,cf,hf,df,pf,ff,gf,mf,vf=Ap,yf={now:function(){return Ap().subtract(this.getOffset())},getOffset:function(){return this.offset},set:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&null!=this.offset||(this.offset=Date.now()-new Ap(e))},setPageLoadTime:function(e){this.serverPageLoad=e,this.offset=performance.timing.responseStart-1e3*e}},bf=function(e){return function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.singleClickCallbacks=new Map,n.doubleClickCallbacks=new Map,n}return h(t,e),o(t,[{key:"addClickListener",value:function(e){var n=this;if(!this.singleClickCallbacks.has(e)){var i=function(){var t=Date.now();!n.hasOwnProperty("_singleClickTime")||t-n._singleClickTime>=n.getSingleClickTimeout()?(setTimeout(function(){n._singleClickTime=t}),setTimeout(function(){n.hasOwnProperty("_singleClickTime")&&n._singleClickTime===t&&e()},n.getSingleClickTimeout())):setTimeout(function(){delete n._singleClickTime})};this.singleClickCallbacks.set(e,i),w(d(t.prototype),"addClickListener",this).call(this,i)}}},{key:"getSingleClickTimeout",value:function(){return 250}},{key:"removeClickListener",value:function(e){var n=this.singleClickCallbacks.get(e);n&&(this.singleClickCallbacks.delete(e),w(d(t.prototype),"removeClickListener",this).call(this,n))}},{key:"addDoubleClickListener",value:function(e){var n=this;if(!this.doubleClickCallbacks.has(e)){var i=function(){var t=(new Date).getTime();!n.hasOwnProperty("_singleClickTime")||t-n._singleClickTime>=n.getSingleClickTimeout()?setTimeout(function(){n._singleClickTime=t}):(setTimeout(function(){delete n._singleClickTime}),e())};this.doubleClickCallbacks.set(e,i),w(d(t.prototype),"addClickListener",this).call(this,i)}}},{key:"removeDoubleClickListener",value:function(e){var n=this.doubleClickCallbacks.get(e);n&&(this.doubleClickCallbacks.delete(e),w(d(t.prototype),"removeClickListener",this).call(this,n))}}]),t}(e)},kf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getIcon",value:function(){return this.options.icon}},{key:"extraNodeAttributes",value:function(e){e.addClass("fa"),e.addClass("fa-"+this.getIcon()),this.options.size&&e.addClass("fa-"+this.options.size)}},{key:"setIcon",value:function(e){this.options.icon=e,this.redraw()}}]),t}(Lc.Primitive("i")),wf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getIcon",value:function(){return this.options.collapsed?"angle-right":"angle-down"}},{key:"setCollapsed",value:function(e){this.options.collapsed=e,this.redraw()}},{key:"toggleCollapsed",value:function(){this.setCollapsed(!this.options.collapsed)}}]),t}(kf),Ef=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getIcon",value:function(){return this.options.direction===Mc.UP?"sort-asc":this.options.direction===Mc.DOWN?"sort-desc":"sort"}},{key:"setDirection",value:function(e){this.options.direction=e,this.redraw()}}]),t}(kf),Sf=(Mp=Dp=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"fullScreen",Pp,y(n)),n}return h(t,e),t}(Jc),Pp=R(Mp.prototype,"fullScreen",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:"100%",backgroundColor:"#FFFFFF"}}}),Mp),Cf=["requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","mozRequestFullScreen"],xf=["exitFullscreen","webkitExitFullscreen","msExitFullscreen","mozCancelFullScreen"],Tf=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"],Af=function(e){var t,n;return n=t=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{fullContainer:!0})}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),this.options.fullContainer?e.addClass(mh.Utils.fullContainer):e.setStyle("height","100%")}},{key:"enterFullScreen",value:function(){if(this.attachEnterFullscreenHandler(),!rt(this.node,Cf))return void console.error("No valid full screen function available");this._expectingFullScreen=!0}},{key:"setFullScreenStyle",value:function(){this.addClass(this.constructor.fullScreenStyleSheet.fullScreen),this.options.fullContainer&&(this.removeClass(mh.Utils.fullContainer),this.setStyle("height","100%"))}},{key:"isFullScreen",value:function(){return this._isFullScreen}},{key:"exitFullScreen",value:function(){if(!rt(document,xf))return void console.error("No valid available function to exit fullscreen")}},{key:"unsetFullScreenStyle",value:function(){this.removeClass(this.constructor.fullScreenStyleSheet.fullScreen),this.options.fullContainer&&(this.addClass(mh.Utils.fullContainer),this.setStyle("height",null))}},{key:"toggleFullScreen",value:function(){this.isFullScreen()?this.exitFullScreen():this.enterFullScreen()}},{key:"attachEnterFullscreenHandler",value:function(){var e=this;if(!this._attachedFullscreenHandler){this._attachedFullscreenHandler=!0;var t=function(){e._expectingFullScreen?(e._expectingFullScreen=!1,e._isFullScreen=!0,e.dispatch("enterFullScreen"),e.setFullScreenStyle()):e._isFullScreen&&(e._isFullScreen=!1,e.dispatch("exitFullScreen"),e.unsetFullScreenStyle()),e.dispatch("resize")},n=!0,i=!1,r=void 0;try{for(var a,o=Tf[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;document.addEventListener(s,t)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}}}]),t}(e),t.fullScreenStyleSheet=Sf.getInstance(),n},Lf=function(){function e(t){r(this,e),this.func=t.func,this.context=t.context,this.duration=t.duration||0,this.startTime=t.startTime||0,this.dependsOn=t.dependsOn||[],this.speedFactor=1}return o(e,[{key:"toString",value:function(){return"{\n   context: "+this.context+"\n   duration: "+this.duration+"\n   startTime: "+this.startTime+"\n   dependsOn: "+this.dependsOn+"\n   func: "+this.func.toString()+"\n}\n"}},{key:"hasDependencyOn",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.dependsOn[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){if(r.value===e)return!0}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return!1}},{key:"canAdvance",value:function(){for(var e=0;e<this.dependsOn.length;e+=1)if(!this.dependsOn[e].isStopped())return!1;return!0}},{key:"getFraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Math.min((e-this.startTime)/this.getLength(),1)}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.stopped&&delete this.stopped,this.setStartTime(t);var n=function t(){e.stopped||(e.pauseTime||e.nextStep(),requestAnimationFrame(t))};return requestAnimationFrame(n),this}},{key:"getLength",value:function(){return this.getEndTime()-this.startTime}},{key:"setStartTime",value:function(e){return this.startTime=e,this}},{key:"setSpeedFactor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=e/this.speedFactor;return this.startTime=(this.startTime-t)/n+t,this.pauseTime&&(this.pauseTime=(this.pauseTime-t)/n+t),this.speedFactor=e,this}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this.pauseTime||(this.pauseTime=e),this}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this.pauseTime&&(this.startTime+=e-this.pauseTime,this.pauseTime=0),this}},{key:"forceStart",value:function(){return this.restart(),this.func(0,this.context),this}},{key:"forceFinish",value:function(){return this.func(1,this.context),this.stop(),this}},{key:"stop",value:function(){this.stopped=!0}},{key:"restart",value:function(){return delete this.stopped,this}},{key:"isStopped",value:function(){return!0===this.stopped}},{key:"nextStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this.isStopped()?this:(this.lastT=this.getFraction(e),this.lastT<0?this:(this.func(this.lastT,this.context),1===this.lastT&&this.stop(),this))}},{key:"getEndTime",value:function(){return this.startTime+this.duration/this.speedFactor}}]),e}(),If=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.reverseFunc=e.reverseFunc,n.context=e.context,n}return h(t,e),o(t,[{key:"toString",value:function(){return"{\n   context: "+this.context+"\n   duration: "+this.duration+"\n   startTime: "+this.startTime+"\n   dependsOn: "+this.dependsOn+"\n   func: "+this.func.toString()+"\n   reverseFunc: "+this.reverseFunc.toString()+"\n}\n"}},{key:"forceStart",value:function(){return this.restart(),this.reverseFunc(this.context),this}},{key:"forceFinish",value:function(){return this.func(this.context),this.stop(),this}},{key:"nextStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this.isStopped()?this:(e>=this.startTime&&(this.func(this.context),this.stop()),this)}},{key:"getEndTime",value:function(){return this.startTime}}]),t}(Lf),Nf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r(this,e),this.startTime=t,this.speedFactor=1,this.transitions=[],this.dependsOn=[]}return o(e,[{key:"toString",value:function(){return"{\n   context: "+this.context+"\n   duration: "+this.duration+"\n   startTime: "+this.startTime+"\n   dependsOn: "+this.dependsOn+"\n   transitions: ["+(this.transitions.length?this.transitions[0].toString():"")+" ...]\n}\n"}},{key:"add",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0;n<e.dependsOn.length;n+=1)e.dependsOn[n].getEndTime()>e.startTime&&console.error(e.toString()+"\ndepends on\n"+e.dependsOn[n].toString()+"\nwhich ends after its start!");return t&&e.forceFinish(),this.transitions.push(e),this}},{key:"push",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.setStartTime(this.getLength());for(var n=0;n<e.dependsOn.length;n+=1)e.dependsOn[n].getEndTime()>e.startTime&&console.error(e.toString()+"\ndepends on\n"+e.dependsOn[n].toString()+"\nwhich ends after its start!");return t&&e.forceFinish(),this.transitions.push(e),this}},{key:"getFraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Math.min((e-this.startTime)/this.getLength(),1)}},{key:"setStartTime",value:function(e){var t=e-this.startTime;this.startTime=e;for(var n=0;n<this.transitions.length;n+=1){var i=this.transitions[n];i.setStartTime(i.startTime+t)}}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.stopped&&delete this.stopped,this.setStartTime(t);var n=function t(){e.stopped||(e.pauseTime||e.nextStep(),requestAnimationFrame(t))};return requestAnimationFrame(n),this}},{key:"stop",value:function(){this.stopped=!0;for(var e=0;e<this.transitions.length;e+=1){this.transitions[e].stop()}}},{key:"isStopped",value:function(){return!0===this.stopped}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();if(!this.pauseTime){this.pauseTime=e;for(var t=0;t<this.transitions.length;t+=1)this.transitions[t].pause(e)}return this}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();if(this.pauseTime){this.startTime+=e-this.pauseTime;for(var t=0;t<this.transitions.length;t+=1)this.transitions[t].resume(e);this.pauseTime=0}return this}},{key:"nextStep",value:function(){if(!this.isStopped()){this.onNewFrame&&this.onNewFrame(this.getFraction());for(var e=!0,t=[],n=0;n<this.transitions.length;n+=1){var i=this.transitions[n];if(!i.isStopped()){if(i.canAdvance())for(i.nextStep();0!==t.length&&this.transitions[t[t.length-1]].canAdvance();)this.transitions[t[t.length-1]].nextStep(),t.pop();else t.push(n);e=!1}}return e&&this.stop(),this}}},{key:"setSpeedFactor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=e/this.speedFactor;this.startTime=(this.startTime-t)/n+t,this.pauseTime&&(this.pauseTime=(this.pauseTime-t)/n+t),this.speedFactor=e;for(var i=0;i<this.transitions.length;i+=1)this.transitions[i].setSpeedFactor(e,t);return this}},{key:"restart",value:function(){delete this.stopped;for(var e=0;e<this.transitions.length;e+=1){this.transitions[e].restart()}return this.sortByEndTime(),this}},{key:"getLength",value:function(){return this.getEndTime()-this.startTime}},{key:"getEndTime",value:function(){for(var e=0,t=0;t<this.transitions.length;t+=1){var n=this.transitions[t].getEndTime();n>e&&(e=n)}return e}},{key:"hasDependencyOn",value:function(e){for(var t in this.dependsOn)if(t===e)return!0;return!1}},{key:"canAdvance",value:function(){for(var e=0;e<this.dependsOn.length;e+=1)if(!this.dependsOn[e].isStopped())return!1;return!0}},{key:"sortByStartTime",value:function(){this.transitions.sort(function(e,t){return Kl(e.startTime,t.startTime,.001)?Kl(e.getEndTime(),t.getEndTime(),.001)?e.hasDependencyOn(t)?1:t.hasDependencyOn(e)?-1:0:t.getEndTime()-e.getEndTime():t.startTime-e.startTime})}},{key:"sortByEndTime",value:function(){this.transitions.sort(function(e,t){return Kl(e.getEndTime(),t.getEndTime(),.001)?Kl(e.startTime,t.startTime,.001)?e.hasDependencyOn(t)?-1:t.hasDependencyOn(e)?1:0:e.startTime-t.startTime:e.getEndTime()-t.getEndTime()})}},{key:"forceStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.sortByStartTime();for(var t=0;t<this.transitions.length;t+=1){var n=this.transitions[t];n.startTime<=e&&n.forceStart(e)}return this}},{key:"forceFinish",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.sortByEndTime();for(var i=0;i<this.transitions.length;i+=1){var r=this.transitions[i];r.getEndTime()>=n&&(r instanceof e?r.forceFinish(t,n):(void 0===t||r.getEndTime()<t)&&r.forceFinish())}return this}},{key:"startAtPercent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();cancelAnimationFrame(this.animationFrameId),this.restart();var i=this.pauseTime;i&&this.resume(),this.forceStart(n),this.setStartTime(n-e*this.getLength()),this.forceFinish(n),this.nextStep(),this.nextStep(),i&&this.pause();var r=function e(){t.isStopped()||(t.pauseTime||t.nextStep(),t.animationFrameId=requestAnimationFrame(e))};this.animationFrameId=requestAnimationFrame(r)}}]),e}(),Of=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.childMap=new WeakMap,n.numRedraws=0,n}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{fullHeight:!1,preserveScroll:!0}}},{key:"extraNodeAttributes",value:function(e){this.options.fullHeight&&e.addClass(mh.Utils.fullHeight)}},{key:"copyState",value:function(e){var t=Object.assign({},e.options,{children:this.overwriteElements(this.options.children||[],e.options.children||[])});this.setOptions(t);var n=!0,i=!1,r=void 0;try{for(var a,o=this.options.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.options.active&&(this.activeChild=s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"render",value:function(){return this.activeChild||this.options.children[0]}},{key:"overwriteElements",value:function(e,t){for(var n=this.getElementKeyMap(e)||new Map,i=0;i<t.length;i+=1){var r=t[i],a=r.options&&r.options.key||"autokey"+i,o=n.get(a);o!==r&&(o&&r.canOverwrite(o)&&(t[i]=r=this.overwriteChild(o,r)))}return t}},{key:"redraw",value:function(){if(this.numRedraws+=1,this.applyNodeAttributes(),this.applyRef(),Lc.renderingStack.push(this),this.render(),Lc.renderingStack.pop(),0!=this.options.children.length){var e=!0,t=!1,n=void 0;try{for(var i,r=this.options.children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.options.lazyRender?(this.getChildProperties(a).isUpToDate=!1,a.applyRef()):this.updateChild(a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.updateActiveChild(this.activeChild||this.options.children[0])}}},{key:"getChildProperties",value:function(e){return this.childMap.has(e)||this.childMap.set(e,{isMounted:!!e.node,redrawIndex:-1}),this.childMap.get(e)}},{key:"updateChild",value:function(e){this.getChildProperties(e).redrawIndex<this.numRedraws&&(e.node?e.redraw():e.mount(this),this.getChildProperties(e).redrawIndex=this.numRedraws)}},{key:"appendChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.options.children.push(e),t&&e.mount(this),1==this.options.children.length&&this.setActive(e),e}},{key:"getActive",value:function(){return this.activeChild}},{key:"insertChildNodeBefore",value:function(e,t){var n=this.getChildProperties(e);n.isMounted=!0,n.redrawIndex=this.numRedraws}},{key:"updateActiveChild",value:function(e){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);if(null==e)return void(this.activeChild=null);this.updateChild(e),this.node.appendChild(e.node),this.children[0]=this.activeChild=e}},{key:"deactivateChild",value:function(e){e.dispatch("hide"),e.dispatch("setActive",!1),this.options.preserveScroll&&(this.getChildProperties(e).scrollTop=this.node.scrollTop)}},{key:"activateChild",value:function(e){e.dispatch("setActive",!0),e.dispatch("show"),this.options.preserveScroll&&(this.node.scrollTop=this.getChildProperties(e).scrollTop||0)}},{key:"setActive",value:function(e){this.activeChild!==e&&(this.activeChild&&this.deactivateChild(this.activeChild),this.updateActiveChild(e),this.activeChild&&this.activateChild(this.activeChild))}},{key:"hasChild",value:function(e){return this.childMap.has(e)}},{key:"onMount",value:function(){var e=this;this.addListener("shouldRedrawChild",function(t){t.child.isInDocument()?t.child.redraw():e.getChildProperties(t.child).isUpToDate=!1})}}]),t}(Lc.Element),Rf=new ec("navManager"),Mf=function(e){return function(e){function t(){return r(this,t),
b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getOrientation",value:function(){return this.options.orientation?this.options.orientation:this.parent&&"function"==typeof this.parent.getOrientation?this.parent.getOrientation():Rc.HORIZONTAL}},{key:"styleSheet",get:function(){return this.options.styleSheet||this.parent.styleSheet}}]),t}(e)},Pf=Mf(Lc.Element),Df=Mf(Xd),Bf=function(e){return function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.isToggled=e.getToggledState(),e}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),this.getOrientation()===Rc.HORIZONTAL?(e.addClass(this.styleSheet.navElementHorizontal),this.parent instanceof Uf?e.setStyle("float","left"):e.addClass(this.styleSheet.navCollapseElement)):e.addClass(this.styleSheet.navElementVertical)}},{key:"getSelf",value:function(){var e=this.getOrientation()===Rc.HORIZONTAL?this.styleSheet.navElementValueHorizontal:this.styleSheet.navElementValueVertical,t=this.getOrientation()===Rc.VERTICAL&&M(this.render()).length?"-20px":"0";return Lc.createElement(Pf,{className:e,style:{marginLeft:t}},this.getValue())}},{key:"getSubElements",value:function(){var e=M(this.render());if(e.length){var t;return this.isToggled||(t="hidden"),Lc.createElement(Pf,{ref:"contentArea",className:t},e)}return null}},{key:"getValue",value:function(){var e;return M(this.render()).length?this.getOrientation()===Rc.VERTICAL?e=[Lc.createElement(wf,{ref:"collapseIcon",collapsed:!this.isToggled,className:this.styleSheet.navElementVerticalArrow}),this.options.value]:this.getOrientation()===Rc.HORIZONTAL&&(e=[this.options.value,Lc.createElement(wf,{collapsed:!1,className:this.styleSheet.navElementHorizontalArrow})]):e=this.options.value,e}},{key:"getChildrenToRender",value:function(){return[this.getSelf(),this.getSubElements()]}},{key:"showChildren",value:function(){this.contentArea.removeClass("hidden")}},{key:"hideChildren",value:function(){this.contentArea.addClass("hidden")}},{key:"toggleChildren",value:function(){M(this.render()).length&&(this.isToggled?this.hideChildren():this.showChildren(),this.collapseIcon&&this.collapseIcon.setCollapsed(this.isToggled),this.isToggled=!this.isToggled,this.saveToggledState())}},{key:"getSessionKeyName",value:function(){var e=this.options.sessionKey||this.options.href;if(!e)throw Error("Persistent nav element needs a unique session key!");return e}},{key:"getLocalToggledState",value:function(){return this.hasOwnProperty("isToggled")?!!this.isToggled:!!this.options.defaultToggled}},{key:"getToggledState",value:function(){if(!this.options.persistent)return this.getLocalToggledState();var e=this.getSessionKeyName();return Rf.get(e,this.getLocalToggledState())}},{key:"saveToggledState",value:function(){if(this.options.persistent){var e=this.getSessionKeyName();Rf.set(e,this.getLocalToggledState())}}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addNodeListener("mouseenter",function(){e.getOrientation()===Rc.HORIZONTAL&&M(e.render()).length&&e.showChildren()}),this.addNodeListener("mouseleave",function(){e.getOrientation()===Rc.HORIZONTAL&&M(e.render()).length&&e.hideChildren()}),this.addClickListener(function(t){e.getOrientation()===Rc.VERTICAL&&(t.stopPropagation(),e.toggleChildren())})}}]),t}(e)},_f=Bf(Lc.Primitive(Pf,"li")),Ff=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.navLinkElement)}},{key:"render",value:function(){return this.options.children}}]),t}(Bf(Df)),Uf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){this.getOrientation()===Rc.HORIZONTAL?(e.addClass(this.styleSheet.navSectionHorizontal),e.setStyle("float",this.getAnchor())):e.addClass(this.styleSheet.navSectionVertical)}},{key:"getAnchor",value:function(){return this.options.anchor||Mc.LEFT}},{key:"getOrientation",value:function(){return this.parent.getOrientation()}},{key:"styleSheet",get:function(){return this.options.styleSheet||this.parent.styleSheet}}]),t}(Lc.Primitive("ul")),zf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({position:"relative"})}},{key:"getSwitcherStyle",value:function(){return{position:"absolute",maxWidth:"calc(100vw - 76px)",top:"50px",right:"0",height:"300px",width:"400px",boxShadow:"0px 0px 10px #666",zIndex:"-1"}}},{key:"render",value:function(){return[this.options.children,Lc.createElement(Of,{ref:"switcher",style:this.getSwitcherStyle(),className:"hidden"})]}},{key:"show",value:function(e,t){var n=this;this.activeChild=t,this.switcher.removeClass("hidden"),this.switcher.setActive(e,t),this.bodyListener=document.body.addEventListener("click",function(){return n.hide()})}},{key:"hide",value:function(){this.switcher.addClass("hidden"),this.activeChild=null,document.body.removeEventListener("click",this.bodyListener)}},{key:"onMount",value:function(){var e=this;this.addListener("changeSwitcher",function(t,n){e.activeChild==n?e.hide():e.show(t,n)}),this.switcher.addClickListener(function(e){e.stopPropagation()})}}]),t}(Uf),Wf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.icon)}},{key:"getValue",value:function(){return[this.getIcon(),this.getContent()]}},{key:"getContent",value:function(){return null}},{key:"getIcon",value:function(){return null}},{key:"onMount",value:function(){this.addClickListener(function(e){e.stopPropagation()})}}]),t}(_f),Hf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.sideIcon)}},{key:"getIcon",value:function(){return Lc.createElement(kf,{icon:"bars",size:Dc.LARGE})}}]),t}(Wf),Vf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.sideIcon)}},{key:"getIcon",value:function(){return Lc.createElement(kf,{icon:"ellipsis-v",size:Dc.LARGE})}}]),t}(Wf),Gf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.wrappedIcon)}},{key:"getIcon",value:function(){return Lc.createElement(kf,{icon:"ellipsis-h",size:Dc.LARGE})}}]),t}(Wf),jf=(Bp=rf=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.dimensions={collapseArrowWidth:"20px",navbarHeight:"50px",sidepanelElementHeight:"30px",sidepanelWidthLeft:"250px",sidepanelWidth:"330px",sidepanelHideWidth:"335px",sidepanelTransitionDuration:".15s",boxShadowWidth:"5px",backgroundTransitionDuration:".2s"},O(n,"icon",_p,y(n)),O(n,"sideIcon",Fp,y(n)),O(n,"wrappedIcon",Up,y(n)),n.navElement={transition:"background-color ".concat(n.dimensions.backgroundTransitionDuration)},O(n,"navLinkElement",zp,y(n)),O(n,"navManager",Wp,y(n)),O(n,"navElementHorizontal",Hp,y(n)),O(n,"navElementHorizontalArrow",Vp,y(n)),O(n,"navElementValueHorizontal",Gp,y(n)),O(n,"navSectionHorizontal",jp,y(n)),n.sidePanel={top:"0",bottom:"0",height:"100%",backgroundColor:function(){return n.getColors().sidepanelBackground},overflow:"hidden",position:"fixed",zIndex:"3000",boxShadow:function(){return n.getColors().boxShadowSidePanel},width:function(){return n.dimensions.sidepanelWidth},transitionDuration:function(){return n.dimensions.sidepanelTransitionDuration}},O(n,"leftSidePanel",Yp,y(n)),O(n,"rightSidePanel",Jp,y(n)),O(n,"navElementVertical",qp,y(n)),O(n,"navElementVerticalArrow",Xp,y(n)),O(n,"navElementValueVertical",Kp,y(n)),O(n,"navSectionVertical",Qp,y(n)),O(n,"navCollapseElement",Zp,y(n)),O(n,"sidePanelGroup",$p,y(n)),O(n,"hrStyle",ef,y(n)),O(n,"navVerticalLeftHide",tf,y(n)),O(n,"navVerticalRightHide",nf,y(n)),n}return h(t,e),o(t,[{key:"getColors",value:function(){var e=this.themeProperties,t=e.COLOR_PRIMARY,n=e.NAV_MANAGER_COLOR_NAV_BAR||t,i=e.NAV_MANAGER_COLOR_SIDE_PANEL||qe(t,.05);return this.colors={boxShadowNavManager:e.NAV_MANAGER_BOX_SHADOW_NAVBAR,boxShadowSidePanel:e.NAV_MANAGER_BOX_SHADOW_SIDE_PANEL,sidepanelBackground:e.NAV_MANAGER_SIDE_PANEL_BACKGROUND_COLOR||i,sidepanelHover:e.NAV_MANAGER_SIDE_PANEL_HOVER_COLOR||qe(i,.1),navbarBackground:e.NAV_MANAGER_NAV_BAR_BACKGROUND_COLOR||n,navbarHover:e.NAV_MANAGER_NAV_BAR_HOVER_COLOR||qe(n,.1),hr:e.NAV_MANAGER_HR_COLOR||qe(i,.15),text:e.NAV_MANAGER_TEXT_COLOR||qe(t,1)},this.colors}}]),t}(Jc),_p=R(Bp.prototype,"icon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.getColors().text,lineHeight:this.dimensions.navbarHeight,height:this.dimensions.navbarHeight,width:this.dimensions.navbarHeight,display:"inline-block",cursor:"pointer",textAlign:"center",":hover":{backgroundColor:this.getColors().navbarHover}}}}),Fp=R(Bp.prototype,"sideIcon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"120%"}}}),Up=R(Bp.prototype,"wrappedIcon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"100%",flex:"1"}}}),zp=R(Bp.prototype,"navLinkElement",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"block",color:this.getColors().text,textDecoration:"none",listStyleType:"none",":hover":{backgroundColor:this.getColors().sidepanelHover,color:this.getColors().text,textDecoration:"none"},":focus":{color:this.getColors().text,textDecoration:"none"},":active":{color:this.getColors().text,textDecoration:"none"},":visited":{color:this.getColors().text,textDecoration:"none"}}}}),Wp=R(Bp.prototype,"navManager",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",height:this.dimensions.navbarHeight,lineHeight:this.dimensions.navbarHeight,width:"100%",backgroundColor:this.getColors().navbarBackground,boxShadow:this.getColors().boxShadowNavManager,zIndex:"9999",position:"fixed"}}}),Hp=R(Bp.prototype,"navElementHorizontal",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.getColors().text,backgroundColor:this.getColors().navbarBackground,listStyleType:"none",cursor:"pointer",">:nth-child(2)":{position:"absolute"}}}}),Vp=R(Bp.prototype,"navElementHorizontalArrow",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:".1em",verticalAlign:"middle"}}}),Gp=R(Bp.prototype,"navElementValueHorizontal",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.navElement,{padding:"0 0.7em",color:this.getColors().text,width:"100%",":hover":{backgroundColor:this.getColors().navbarHover}}]}}),jp=R(Bp.prototype,"navSectionHorizontal",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",paddingLeft:"0",height:this.dimensions.navbarHeight,marginBottom:"0"}}}),Yp=R(Bp.prototype,"leftSidePanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.sidePanel,{overflowY:"scroll",width:this.dimensions.sidepanelWidthLeft,"-ms-overflow-style":"none",overflow:"-moz-scrollbars-none","::-webkit-scrollbar":{display:"none"}}]}}),Jp=R(Bp.prototype,"rightSidePanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sidePanel}}),qp=R(Bp.prototype,"navElementVertical",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.getColors().text,cursor:"pointer",listStyleType:"none",minHeight:this.dimensions.sidepanelElementHeight,overflow:"hidden",position:"relative",">*":{paddingLeft:this.dimensions.collapseArrowWidth}}}}),Xp=R(Bp.prototype,"navElementVerticalArrow",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:this.dimensions.collapseArrowWidth,textAlign:"center"}}}),Kp=R(Bp.prototype,"navElementValueVertical",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.navElement,{color:this.getColors().text,zIndex:"1",position:"relative",width:"100%",height:this.dimensions.sidepanelElementHeight,lineHeight:this.dimensions.sidepanelElementHeight,":hover":{backgroundColor:this.getColors().sidepanelHover}}]}}),Qp=R(Bp.prototype,"navSectionVertical",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:"0",marginBottom:"0",width:"100%"}}}),Zp=R(Bp.prototype,"navCollapseElement",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.getColors().text,textAlign:"initial",lineHeight:this.dimensions.sidepanelElementHeight}}}),$p=R(Bp.prototype,"sidePanelGroup",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingTop:this.dimensions.navbarHeight,height:"inherit",width:this.dimensions.sidepanelWidth,position:"absolute",zIndex:"3"}}}),ef=R(Bp.prototype,"hrStyle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{margin:"10px 5%",borderTop:function(){return"2px solid "+e.getColors().hr}}}}),tf=R(Bp.prototype,"navVerticalLeftHide",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"-"+this.dimensions.sidepanelHideWidth,overflow:"hidden"}}}),nf=R(Bp.prototype,"navVerticalRightHide",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginRight:"-"+this.dimensions.sidepanelHideWidth,overflow:"hidden"}}}),Bp),Yf=(af=cf=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navigatorHeight="35px",n.hoverColor="#364251",n.transitionTime="0.3",n.textColor="inherit",n.navigatorTransitionTime="0s",O(n,"carousel",of,y(n)),O(n,"container",sf,y(n)),O(n,"navigator",lf,y(n)),O(n,"navigatorIcon",uf,y(n)),n}return h(t,e),t}(Jc),of=R(af.prototype,"carousel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"hidden"}}}),sf=R(af.prototype,"container",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{whiteSpace:"nowrap",height:"100%",">*":{width:"100%",height:"100%",display:"inline-block",verticalAlign:"top"},">:first-child":{width:"0",transition:"margin-left ease ".concat(this.transitionTime,"s")}}}}),lf=R(af.prototype,"navigator",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:this.navigatorHeight,display:"flex"}}}),uf=R(af.prototype,"navigatorIcon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.textColor,fontSize:"180% !important",textAlign:"center",cursor:"pointer",flex:"1",fontWeight:"900 !important",lineHeight:this.navigatorHeight+" !important",transition:"background-color ".concat(this.navigatorTransitionTime),":hover":{backgroundColor:this.hoverColor}}}}),af),Jf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.navigator)}},{key:"render",value:function(){var e=this;return[Lc.createElement(kf,{icon:"angle-left",className:this.styleSheet.navigatorIcon,onClick:function(){e.parent.dispatch("previousPage")}}),Lc.createElement(kf,{icon:"angle-right",className:this.styleSheet.navigatorIcon,onClick:function(){e.parent.dispatch("nextPage")}})]}},{key:"styleSheet",get:function(){return this.options.styleSheet||this.parent.styleSheet}}]),t}(Lc.Element),qf=(hf=Ze(Yf))(df=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.carousel)}},{key:"appendChild",value:function(e,t){this.options.children.push(e),t&&this.setActive(e),e.mount(this,null),this.redraw()}},{key:"eraseChild",value:function(e){this.options.children.indexOf(e)===this.options.children.length-1&&this.setActiveIndex(Math.max(this.options.children.length-2,0)),this.options.children.splice(this.options.children.indexOf(e),1),this.redraw()}},{key:"render",value:function(){if(null==this.activeIndex){this.activeIndex=0;for(var e=0;e<this.options.children.length;e+=1)if(this.options.children[e].options.active){this.activeIndex=e;break}}return[Lc.createElement(Jf,{className:this.options.children.length>1?"":"hidden"}),Lc.createElement("div",{className:this.styleSheet.container},Lc.createElement("div",{ref:"pusher",style:{marginLeft:"".concat(100*-this.activeIndex,"%")}}),this.options.children)]}},{key:"setActive",value:function(e){this.setActiveIndex(this.options.children.indexOf(e))}},{key:"setActiveIndex",value:function(e){this.activeIndex=e,this.pusher.setStyle("margin-left","".concat(-e*this.getWidth(),"px"))}},{key:"getActive",value:function(){return this.options.children[this.activeIndex]}},{key:"onMount",value:function(){var e=this;this.addListener("nextPage",function(){return e.setActiveIndex((e.activeIndex+1)%e.options.children.length)}),this.addListener("previousPage",function(){return e.setActiveIndex((e.activeIndex+e.options.children.length-1)%e.options.children.length)})}},{key:"getOrientation",value:function(){return this.options.orientation||Rc.VERTICAL}}]),t}(Lc.Element))||df,Xf=25,Kf=60,Qf=.5,Zf=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.sidePanelGroup),this.options.anchor===Mc.RIGHT?e.setStyle("right",0):e.setStyle("width","250px")}},{key:"getOrientation",value:function(){return Rc.VERTICAL}},{key:"styleSheet",get:function(){return this.options.styleSheet||this.parent.styleSheet}}]),t}(Lc.Element),$f=(pf=Ze(jf))(ff=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.initNode(),e.applyVisibility(),e}return h(t,e),o(t,[{key:"initNode",value:function(){this.node||this.mount(document.body)}},{key:"applyVisibility",value:function(){this.options.name&&(this.storageSerializer=new ec("sidePanel"+this.options.name),this.visible=this.storageSerializer.get("visible")),this.visible?this.show():this.hide()}},{key:"extraNodeAttributes",value:function(e){this.options.anchor===Mc.RIGHT?(e.addClass(this.styleSheet.rightSidePanel),e.setStyle("right","0")):e.addClass(this.styleSheet.leftSidePanel)}},{key:"setVisible",value:function(e){this.visible=e,this.storageSerializer&&this.storageSerializer.set("visible",e)}},{key:"show",value:function(){this.options.anchor===Mc.RIGHT?this.removeClass(this.styleSheet.navVerticalRightHide):this.removeClass(this.styleSheet.navVerticalLeftHide),this.setVisible(!0)}},{key:"hide",value:function(){this.options.anchor===Mc.RIGHT?this.addClass(this.styleSheet.navVerticalRightHide):this.addClass(this.styleSheet.navVerticalLeftHide),this.setVisible(!1)}},{key:"toggle",value:function(){this.visible?this.hide():this.show()}},{key:"getChildrenToRender",value:function(){return Lc.createElement(Zf,{ref:"this.wrappedPanel",anchor:this.options.anchor},this.render())}},{key:"onMount",value:function(){this.addClickListener(function(e){e.stopPropagation()})}}]),t}(Lc.Element))||ff,eg=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.hoverColor=function(){return jf.getInstance().getColors().sidepanelHover},n.textColor=function(){return jf.getInstance().getColors().text},n.navigatorTransitionTime=function(){return jf.getInstance().dimensions.backgroundTransitionDuration},n}return h(t,e),t}(Yf),tg=(gf=Ze(jf))(mf=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.initLeftSidePanel(),n.initRightSidePanel(),n}return h(t,e),o(t,[{key:"getCarouselStyleSheet",value:function(){return this.options.carouselStyleSheet||eg.getInstance()}},{key:"getDefaultOptions",value:function(){return{persistentLeftSidePanel:!0,persistentRightSidePanel:!0}}},{key:"initLeftSidePanel",value:function(){this.leftSidePanel=Lc.createElement($f,{anchor:Mc.LEFT,name:"left",persistent:this.options.persistentLeftSidePanel},Lc.createElement(qf,{ref:this.refLink("carousel"),styleSheet:this.getCarouselStyleSheet()},Lc.createElement(Pf,{orientation:Rc.VERTICAL,ref:this.refLink("navigationPanel"),styleSheet:this.styleSheet},this.getLeftSidePanelChildren())))}},{key:"initRightSidePanel",value:function(){this.rightSidePanel=Lc.createElement($f,{anchor:Mc.RIGHT,name:"right",persistent:this.options.persistentRightSidePanel},this.getRightSidePanelChildren())}}]),o(t,[{key:"getLeftSidePanelChildren",value:function(){return[]}},{key:"getRightSidePanelChildren",value:function(){return[]}},{key:"getLeftConditionedChildren",value:function(){return[]}},{key:"getRightConditionedChildren",value:function(){return[]}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.navManager)}},{key:"getOrientation",value:function(){return Rc.HORIZONTAL}},{key:"leftSideIconAction",value:function(){this.wrapped?this.carousel.getActive()===this.navigationPanel?this.toggleLeftSidePanel():(this.carousel.setActive(this.navigationPanel),this.leftSidePanel.visible||this.toggleLeftSidePanel()):this.toggleLeftSidePanel()}},{key:"getLeftSideIcon",value:function(){var e=this;return this.leftSidePanel?(this.leftPanelToggler||(this.leftPanelToggler=Lc.createElement(Hf,{onClick:function(){return e.leftSideIconAction()}})),this.leftPanelToggler):null}},{key:"rightSideIconAction",value:function(){this.toggleRightSidePanel()}},{key:"getRightSideIcon",value:function(){var e=this;return this.rightSidePanel?(this.rightPanelToggler||(this.rightPanelToggler=Lc.createElement(Vf,{onClick:function(){return e.rightSideIconAction()}})),this.rightPanelToggler):null}},{key:"getFixedWidth",value:function(){var e=10,t=!0,n=!1,i=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){e+=r.value.getWidth()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e-=this.getLeftConditioned().getWidth(),e-=this.getRightConditioned().getWidth()}},{key:"wrappedIconAction",value:function(){this.wrapped?this.carousel.getActive()===this.wrappedPanel?this.toggleLeftSidePanel():(this.carousel.setActive(this.wrappedPanel),this.leftSidePanel.visible||this.toggleLeftSidePanel()):this.toggleLeftSidePanel()}},{key:"getWrappedIcon",value:function(){var e=this;return this.wrappedToggler||(this.wrappedToggler=Lc.createElement(Gf,{onClick:function(){return e.wrappedIconAction()},className:this.wrapped?"":"hidden"})),this.wrappedToggler}},{key:"getLeftFixed",value:function(){return[]}},{key:"getRightFixed",value:function(){return[]}},{key:"getLeftConditionedWrapper",value:function(){return this.leftConditionedWrapper||(this.leftConditionedWrapper=Lc.createElement(Uf,{anchor:Mc.LEFT},this.getLeftConditioned())),this.leftConditionedWrapper}},{key:"getRightConditionedWrapper",value:function(){return this.rightConditionedWrapper||(this.rightConditionedWrapper=Lc.createElement(Uf,{anchor:Mc.RIGHT},this.getRightConditioned())),this.rightConditionedWrapper}},{key:"getLeftConditioned",value:function(){return this.leftConditioned||(this.leftConditioned=Lc.createElement(Uf,null,this.getLeftConditionedChildren())),this.leftConditioned}},{key:"getRightConditioned",value:function(){return this.rightConditioned||(this.rightConditioned=Lc.createElement(Uf,null,this.getRightConditionedChildren())),this.rightConditioned}},{key:"toggleSidePanel",value:function(e,t){var n=e==this.leftSidePanel?this.rightSidePanel:this.leftSidePanel;e.toggle(),this.dispatch(t,e.visible),n&&e.visible&&n.visible&&(e.setStyle("z-index",3001),n.setStyle("z-index",3e3))}},{key:"toggleLeftSidePanel",value:function(){this.toggleSidePanel(this.leftSidePanel,"toggledLeftSide")}},{key:"toggleRightSidePanel",value:function(){this.toggleSidePanel(this.rightSidePanel,"toggledRightSide")}},{key:"render",value:function(){return[this.getLeftSideIcon(),this.getLeftFixed(),this.getLeftConditionedWrapper(),this.getWrappedIcon(),Lc.createElement(Uf,{style:{marginLeft:"auto"}},this.getRightConditionedWrapper()),this.getRightFixed(),this.getRightSideIcon()]}},{key:"bindToNode",value:function(){w(d(t.prototype),"bindToNode",this).apply(this,arguments),this.onMount()}},{key:"skipWrap",value:function(){this.wrapSkip=!0,this.wrapScheduled=!1}},{key:"unskipWrap",value:function(){this.wrapSkip=!1,this.wrapScheduled&&this.checkForWrap()}},{key:"checkForWrap",value:function(){var e=this;if(this.wrapSkip)return void(this.wrapScheduled=!0);var t=function(){e.wrapped=!1,e.getWrappedIcon().addClass("hidden"),Be(e.getLeftConditioned(),e.getLeftConditionedWrapper()),Be(e.getRightConditioned(),e.getRightConditionedWrapper()),e.carousel.eraseChild(e.wrappedPanel),e.getLeftConditioned().redraw(),e.getRightConditioned().redraw()};if(this.getLeftConditioned().children.length||this.getRightConditioned().children.length){if(!this.wrapped){this.unwrappedTotalWidth=10;var n=!0,i=!1,r=void 0;try{for(var a,o=this.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.unwrappedTotalWidth+=s.getWidth()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}window.innerWidth<this.unwrappedTotalWidth&&!this.wrapped?(!function(){e.wrapped=!0,e.wrappedPanel=Lc.createElement(Pf,{orientation:Rc.VERTICAL,styleSheet:e.styleSheet}),e.carousel.appendChild(e.wrappedPanel),Be(e.getRightConditioned(),e.wrappedPanel),Be(e.getLeftConditioned(),e.wrappedPanel),e.getRightConditioned().redraw(),e.getLeftConditioned().redraw(),e.getWrappedIcon().removeClass("hidden")}(),this.dispatch("wrapped",!0)):window.innerWidth>=this.unwrappedTotalWidth&&this.wrapped&&(t(),this.dispatch("wrapped",!1))}else this.wrapped&&t()}},{key:"onMount",value:function(){var e=this;t.Global=this,lt(this),setTimeout(function(){return e.checkForWrap()}),window.addEventListener("resize",function(){return e.checkForWrap()}),this.addListener("maybeWrap",function(){return e.checkForWrap()}),this.addClickListener(function(e){e.stopPropagation()})}}]),t}(Lc.Primitive("nav")))||mf,ng=function(){return tg.Global=tg.Global||new tg,tg.Global},ig=new Set(["width","height","rx","ry","cx","cy","x","y"]),rg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"fixMozAttributes",value:function(e){if(this.hasOwnProperty("style")){var t=!0,n=!1,i=void 0;try{for(var r,a=ig.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.style.hasOwnProperty(o)&&!this.hasOwnProperty(o)&&this.setAttribute(o,this.style[o],e)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}}},{key:"setStyle",value:function(e,n,i){w(d(t.prototype),"setStyle",this).call(this,e,n,i),ig.has(e)&&this.setAttribute(e,n,i)}},{key:"applyClassName",value:function(e){this.className?e.setAttribute("class",String(this.className)):e.removeAttribute("class")}},{key:"apply",value:function(e,n){this.transform=this.transform||this.translate,w(d(t.prototype),"apply",this).call(this,e,n),this.fixMozAttributes(e)}}]),t}(Ac),ag={};ag.Element=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"createNode",value:function(){return this.node=document.createElementNS("http://www.w3.org/2000/svg",this.getNodeType()),Me(this),this.node}},{key:"getScreenCoordinatedForPoint",value:function(e){var t=this.node,n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.x,i.y=e.y,i.matrixTransform(t.getScreenCTM().inverse())}var r=this.getBoundingClientRect();return{x:e.x-r.left-t.clientLeft,y:e.y-r.top-t.clientTop}}},{key:"getMouseCoordinatesForEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;return this.getScreenCoordinatedForPoint({x:rc.getEventX(e),y:rc.getEventY(e)})}},{key:"saveState",value:function(){var e={};return e.options=Object.assign({},this.options),e}},{key:"setState",value:function(e){this.setOptions(e.options)}},{key:"getOptionsAsNodeAttributes",value:function(){var e=this.options;return e.__proto__=rg.prototype,e}},{key:"getNodeAttributes",value:function(){return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.getOptionsAsNodeAttributes():new rg(this.options)}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.options.translate="translate("+e+","+t+")"}},{key:"getHashCode",value:function(){return K(this)}},{key:"getBoundingClientRect",value:function(){for(var e=this.node,t=0,n=0;e&&e!==document.body;)t-=e.scrollLeft,n-=e.scrollTop,e=e.offsetParent||e.parentNode;e&&(t-=e.scrollLeft,n-=e.scrollTop);var i=this.node.getBoundingClientRect();return{top:i.top-n,left:i.left-t,width:i.width,bottom:i.bottom-n,height:i.height,right:i.right-t}}},{key:"getBBox",value:function(){return this.node.getBBox()}},{key:"getHeight",value:function(){return this.getBoundingClientRect().height}},{key:"getWidth",value:function(){return this.getBoundingClientRect().width}},{key:"toFront",value:function(){var e=this.node&&this.node.parentElement;e&&(e.removeChild(this.node),e.appendChild(this.node))}},{key:"toBack",value:function(){}},{key:"setOpacity",value:function(e){this.options.opacity=e,this.node&&this.node.setAttribute("opacity",e)}},{key:"setColor",value:function(e){this.options.color=e,this.node&&(this.node.setAttribute("stroke",e),this.node.setAttribute("fill",e))}},{key:"remove",value:function(){}},{key:"getSvg",value:function(){return this.parent.getSvg()}}]),t}(Lc.Element),ag.Element.domAttributesMap=Re(Lc.Element.domAttributesMap,[["fill"],["height"],["opacity"],["stroke"],["strokeWidth",{domName:"stroke-width"}],["clipPath",{domName:"clip-path"}],["transform"],["width"],["cx"],["cy"],["rx"],["ry"],["x"],["y"],["x1"],["y1"],["x2"],["y2"],["offset"],["stopColor",{domName:"stop-color"}],["strokeDasharray",{domName:"stroke-dasharray"}],["strokeLinecap",{domName:"stroke-linecap"}],["viewBox",{domName:"viewBox"}]]),ag.Text=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"text"}},{key:"getDefaultOptions",value:function(){return{text:"",fontSize:"15px",color:"black",dy:"0.35em",textAnchor:"middle",selectable:!1}}},{key:"extraNodeAttributes",value:function(e){this.options.selectable||(e.setStyle("-webkit-user-select","none"),e.setStyle("-khtml-user-select","none"),e.setStyle("-moz-user-select","none"),e.setStyle("-ms-user-select","none"),e.setStyle("user-select","none"))}},{key:"render",value:function(){return[Lc.createElement(Lc.TextElement,{ref:"textElement",value:this.options.text+""})]}},{key:"getX",value:function(){return this.options.x}},{key:"setX",value:function(e){this.options.x=e,this.node.setAttribute("x",this.options.x)}},{key:"getY",value:function(){return this.options.y}},{key:"setY",value:function(e){this.options.y=e,this.node.setAttribute("y",this.options.y)}},{key:"setText",value:function(e){this.options.text=e,this.textElement.setValue(e+"")}},{key:"getText",value:function(){return this.options.text}},{key:"setPosition",value:function(e,t){this.setX(e),this.setY(t)}},{key:"getColor",value:function(){return this.options.color}},{key:"setColor",
value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.options.color=e,this.node&&(this.node.setAttribute("fill",e),t||this.node.setAttribute("stroke",e))}}]),t}(ag.Element),ag.Text.domAttributesMap=Re(ag.Element.domAttributesMap,[["dx"],["dy"],["fontFamily",{domName:"font-family"}],["fontSize",{domName:"font-size"}],["textAnchor",{domName:"text-anchor"}]]),ag.SVGRoot=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"svg"}},{key:"getSvg",value:function(){return this}}]),t}(ag.Element),ag.RawSVG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.node.innerHTML=this.options.innerHTML}}]),t}(ag.SVGRoot),ag.Group=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"g"}},{key:"setColor",value:function(e){for(var t=0;t<this.children.length;t+=1)this.children[t].setColor(e)}}]),t}(ag.Element),ag.Defs=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"defs"}}]),t}(ag.Element),ag.ClipPath=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"clipPath"}}]),t}(ag.Element),ag.Path=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"path"}},{key:"getDefaultOptions",value:function(){return{d:""}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("d",this.getPath()),e}},{key:"getPath",value:function(){return this.options.d}},{key:"setPath",value:function(e){this.options.d=e,this.node.setAttribute("d",this.options.d)}},{key:"getLength",value:function(){return this.node.getTotalLength()}},{key:"getPointAtLength",value:function(e){return this.node.getPointAtLength(e)}},{key:"getPointAtLengthWithAngle",value:function(e){var t,n=this.getLength();t=n<=1?n/1e3:Math.min(n/1e3,Math.log(n),1);var i=this.getPointAtLength(e),r=this.getPointAtLength(Math.min(e+t,n)),a=this.getPointAtLength(Math.max(e-t,0));return{x:i.x,y:i.y,alpha:180*Math.atan2(a.y-r.y,a.x-r.x)/Math.PI}}}]),t}(ag.Element),ag.Circle=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"circle"}},{key:"getDefaultOptions",value:function(){return{radius:0,center:{x:0,y:0}}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("r",this.options.radius),e.setAttribute("cx",this.options.center.x),e.setAttribute("cy",this.options.center.y),e}},{key:"getRadius",value:function(){return this.options.radius}},{key:"setRadius",value:function(e){this.options.radius=e,this.setAttribute("r",e)}},{key:"setCenter",value:function(e,t){this.options.center.x=e,this.options.center.y=t,this.setAttribute("cx",e),this.setAttribute("cy",t)}},{key:"getCenter",value:function(){return this.options.center}},{key:"toPath",value:function(){var e=this.options.radius,t=this.options.center.x,n=this.options.center.y,i="M"+(t-e)+" "+n+"a"+e+" "+e+" 0 0 1 "+e+" "+-e+"a"+e+" "+e+" 0 0 1 "+e+" "+e+"a"+e+" "+e+" 0 0 1 "+-e+" "+e+"a"+e+" "+e+" 0 0 1 "+-e+" "+-e;return new ag.Path({d:i})}}]),t}(ag.Element),ag.Stop=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"stop"}}]),t}(ag.Element),ag.RadialGradient=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"radialGradient"}}]),t}(ag.Element),ag.LinearGradient=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"linearGradient"}}]),t}(ag.Element),ag.Ellipse=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"ellipse"}}]),t}(ag.Element),ag.CircleArc=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getPath",value:function(){var e,t,n=this.options.startAngle,i=this.options.endAngle,r=this.options.radius,a=this.options.center,o=i-n+(i<n?2*Math.PI:0),s=pu(n,r,a),l=pu(i,r,a);return o<=Math.PI?(t=0,e=uu(s,l,a)<=0?0:1):(t=1,e=uu(s,l,a)<=0?1:0),"M "+s.x+" "+s.y+" A "+r+" "+r+" 0 "+t+" "+e+" "+l.x+" "+l.y}}]),t}(ag.Path),ag.Rect=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"rect"}},{key:"getX",value:function(){return this.options.x}},{key:"setX",value:function(e){this.options.x=e,this.node.setAttribute("x",this.options.x)}},{key:"getY",value:function(){return this.options.y}},{key:"setY",value:function(e){this.options.y=e,this.node.setAttribute("y",this.options.y)}},{key:"getWidth",value:function(){return this.options.width}},{key:"setWidth",value:function(e){this.options.width=e,this.node.setAttribute("width",this.options.width)}},{key:"getHeight",value:function(){return this.options.height}},{key:"setHeight",value:function(e){this.options.height=e,this.node.setAttribute("height",this.options.height)}}]),t}(ag.Element),ag.Line=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"line"}},{key:"getDefaultOptions",value:function(){return{fill:"black",stroke:"black"}}},{key:"setLine",value:function(e,t,n,i){this.options.x1=e,this.options.y1=t,this.options.x2=n,this.options.y2=i,this.setAttribute("x1",e),this.setAttribute("y1",t),this.setAttribute("x2",n),this.setAttribute("y2",i)}}]),t}(ag.Element),ag.Polygon=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{points:[]}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("d",this.getPolygonPath()),e}},{key:"getPolygonPath",value:function(){for(var e="",t=0;t<this.options.points.length;++t)e+=0==t?"M ":"L ",e+=this.options.points[t].x+" "+this.options.points[t].y+" ";return e+="Z"}},{key:"setPoints",value:function(e){this.options.points=e,this.setPath(this.getPolygonPath())}}]),t}(ag.Path),ag.AnimatedSVG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;if(this.options.transition){this.options.transition.setStartTime(Date.now());var t=function t(){if(e.options.transition.isStopped())return void(e.options.repeat&&(e.options.transition.setStartTime(Date.now()),e.options.transition.restart(),requestAnimationFrame(t)));e.options.transition.pauseTime||e.options.transition.nextStep(),requestAnimationFrame(t)};requestAnimationFrame(t)}}}]),t}(ag.SVGRoot),ag.Element.prototype.blinkTransition=function(e){var t=this,n={duration:2e3,times:2,firstColor:"grey",secondColor:"black",executeLastStep:!0,startTime:0,dependsOn:[]};return Object.assign(n,e),new Lf({func:function(e,n){e>1-n.interval&&!n.executeLastStep?t.setColor(n.firstColor):t.setColor(Math.floor((1-e)/n.interval)%2==1?n.firstColor:n.secondColor)},context:{firstColor:n.firstColor,secondColor:n.secondColor,interval:1/(2*n.times),executeLastStep:n.executeLastStep},duration:n.duration,startTime:n.startTime,dependsOn:n.dependsOn})},ag.Element.prototype.changeOpacityTransition=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.options.hasOwnProperty("opacity")||(this.options.opacity=1),new Lf({func:function(t,i){n.setOpacity((1-t)*i.opacity+t*e)},context:{opacity:this.options.opacity},duration:t,startTime:r,dependsOn:i})},ag.Element.prototype.changeColorTransition=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Lf({func:function(t,i){n.setColor(Qc.interpolate(i.color,e,t))},context:{color:this.getColor()},duration:t,startTime:r,dependsOn:i})},ag.Text.prototype.moveTransition=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Lf({func:function(t,i){n.setPosition((1-t)*i.x+t*e.x,(1-t)*i.y+t*e.y)},context:{x:this.options.x,y:this.options.y},duration:t,startTime:r,dependsOn:i})},ag.Text.prototype.changeFillTransition=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Lf({func:function(t,i){n.setColor(Qc.interpolate(i.color,e,t),!0)},context:{color:this.getColor()},duration:t,startTime:r,dependsOn:i})};var og,sg,lg,ug,cg,hg,dg,pg=(og=cg=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"inputElement",sg,y(n)),O(n,"checkboxInput",lg,y(n)),O(n,"select",ug,y(n)),n}return h(t,e),t}(Jc),sg=R(og.prototype,"inputElement",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:"border-color ease-in-out .15s, box-shadow ease-in-out .15s",padding:"0.4em 0.54em",border:"1px solid #ccc",borderRadius:"4px",fontSize:"90%",":focus":{outline:"0",borderColor:"#66afe9",boxShadow:"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6)"}}}}),lg=R(og.prototype,"checkboxInput",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"0.2em",display:"inline-block",width:"initial !important",marginRight:"0.5em",marginBottom:"-.1em",height:"1em"}}}),ug=R(og.prototype,"select",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"2.12em"}}}),og),fg=(hg=Ze(pg))(dg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.inputElement)}}]),t}(Lc.Element))||dg,gg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){var t=this.getInputType();t&&e.setAttribute("type",t)}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.options.hasOwnProperty("value")&&this.setValue(this.options.value)}},{key:"getValue",value:function(){return this.node.value}},{key:"setValue",value:function(e){this.node.value=e}},{key:"getInputType",value:function(){return null}},{key:"onInput",value:function(e){this.addNodeListener("input change",e)}},{key:"onKeyUp",value:function(e){this.addNodeListener("keyup",e)}}]),t}(Lc.Primitive(fg,"input"));gg.domAttributesMap=Re(Lc.Element.domAttributesMap,[["autocomplete"],["autofocus",{noValue:!0}],["formaction"],["maxLength",{domName:"maxlength"}],["minLength",{domName:"minlength"}],["name"],["placeholder"],["readonly"],["required"],["value"],["pattern"],["type"]]);var mg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInputType",value:function(){return"submit"}}]),t}(gg);mg.domAttributesMap=Re(Lc.Element.domAttributesMap,[["formenctype"],["formmethod"],["formnovalidate"],["formtarget"]]);var vg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInputType",value:function(){return"text"}}]),t}(gg),yg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInputType",value:function(){return"number"}},{key:"getValue",value:function(){var e=w(d(t.prototype),"getValue",this).call(this);return parseFloat(e)}}]),t}(gg);yg.domAttributesMap=Re(Lc.Element.domAttributesMap,[["min"],["max"],["step"]]);var bg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInputType",value:function(){return"email"}}]),t}(gg),kg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInputType",value:function(){return"password"}}]),t}(gg),wg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInputType",value:function(){return"file"}},{key:"getFiles",value:function(){return this.node.files}},{key:"getFile",value:function(){return this.getFiles()[0]}},{key:"getAsFormData",value:function(){var e=new FormData,t=!0,n=!1,i=void 0;try{for(var r,a=this.getFiles()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.append(o.name,o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}}]),t}(gg);wg.domAttributesMap=Re(Lc.Element.domAttributesMap,[["multipleFiles",{domName:"multiple",noValue:!0}],["fileTypes",{domName:"accept"}]]);var Eg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.checkboxInput)}},{key:"getInputType",value:function(){return"checkbox"}},{key:"getValue",value:function(){return this.node.checked}},{key:"setValue",value:function(e){this.node.checked=e}}]),t}(gg);Eg.domAttributesMap=Re(Lc.Element.domAttributesMap,[["checked",{noValue:!0}]]);var Sg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInputType",value:function(){return"radio"}},{key:"getValue",value:function(){return this.node.checked}},{key:"setValue",value:function(e){this.node.checked=e}}]),t}(Eg);Sg.domAttributesMap=Re(Eg.domAttributesMap,[["name"]]);var Cg,xg,Tg,Ag,Lg,Ig,Ng,Og,Rg,Mg,Pg,Dg,Bg,_g,Fg,Ug,zg,Wg,Hg,Vg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyNodeAttributes",value:function(){w(d(t.prototype),"applyNodeAttributes",this).call(this),this.node.readOnly=this.options.readOnly||!1}},{key:"setReadOnly",value:function(e){this.options.readOnly=e,this.node.readOnly=e}},{key:"getValue",value:function(){return this.node.value}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.options.hasOwnProperty("value")&&(this.node.value=this.options.value+"")}},{key:"setValue",value:function(e){this.options.value=e,this.node.value=e}},{key:"onInput",value:function(e){this.addNodeListener("input change",e)}},{key:"onKeyUp",value:function(e){this.addNodeListener("keyup",e)}}]),t}(Lc.Primitive(fg,"textarea")),Gg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){this.givenOptions=this.options.options||[];for(var e=[],t=0;t<this.givenOptions.length;t+=1){var n={key:t};this.givenOptions[t]==this.options.selected&&(n.selected=!0),e.push(Lc.createElement("option",n,this.givenOptions[t].toString()))}return e}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.select)}},{key:"get",value:function(){var e=this.getIndex();return this.givenOptions[e]}},{key:"set",value:function(e){for(var t=0;t<this.givenOptions.length;t++)if(this.givenOptions[t]===e)return void this.setIndex(t);console.error("Can't set the select option ",e,"\nAvailable options: ",this.givenOptions)}},{key:"getIndex",value:function(){return this.node.selectedIndex}},{key:"setIndex",value:function(e){this.node.selectedIndex=e,this.options.selected=this.givenOptions[e]}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.options.selected&&this.set(this.options.selected)}}]),t}(Lc.Primitive(fg,"select")),jg=(Cg=Ze(Od))(xg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{orientation:Rc.HORIZONTAL}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.Orientation(this.options.orientation))}}]),t}(yd))||xg,Yg=(Tg=Ze(Rd))(Ag=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.index=this.options.index||0}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.DEFAULT)}},{key:"render",value:function(){var e=this;this.buttons=[];for(var t=0;t<this.options.givenOptions.length;t+=1)!function(t){e.buttons.push(Lc.createElement(Md,{key:t,onClick:function(){e.setIndex(t)},size:e.getSize(),label:e.options.givenOptions[t].toString(),level:e.getLevel(),className:e.index===t?"active":""}))}(t);return this.buttons}},{key:"getIndex",value:function(){return this.index}},{key:"getValue",value:function(){return this.options.givenOptions[this.index]}},{key:"setIndex",value:function(e){this.dispatch("setIndex",{index:e,oldIndex:this.index,value:this.options.givenOptions[e],oldValue:this.options.givenOptions[this.index]}),this.buttons[this.index].removeClass("active"),this.index=e,this.buttons[this.index].addClass("active")}}]),t}(yd))||Ag,Jg=(Lg=Og=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"hiddenAnimated",Ig,y(n)),O(n,"visibleAnimated",Ng,y(n)),n}return h(t,e),t}(Jc),Ig=R(Lg.prototype,"hiddenAnimated",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"hidden",opacity:"0",transition:"opacity 0.1s linear"}}}),Ng=R(Lg.prototype,"visibleAnimated",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"visible",opacity:"1",transition:"opacity 0.1s linear"}}}),Lg),qg=(Rg=Fg=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"container",Mg,y(n)),O(n,"background",Pg,y(n)),O(n,"header",Dg,y(n)),O(n,"body",Bg,y(n)),O(n,"footer",_g,y(n)),n}return h(t,e),t}(Jg),Mg=R(Rg.prototype,"container",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"fixed",top:"0px",left:"0px",right:"0px",bottom:"0px",width:"100%",height:"100%",zIndex:"9999"}}}),Pg=R(Rg.prototype,"background",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"fixed",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)"}}}),Dg=R(Rg.prototype,"header",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"15px",borderBottom:"1px solid #e5e5e5"}}}),Bg=R(Rg.prototype,"body",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",padding:"15px"}}}),_g=R(Rg.prototype,"footer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"15px",textAlign:"right",borderTop:"1px solid #e5e5e5"}}}),Rg),Xg=(Ug=Ze(Jg))(zg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{transitionTime:0,style:{zIndex:2016}}}},{key:"fadeOut",value:function(){this.removeClass(this.styleSheet.visibleAnimated),this.addClass(this.styleSheet.hiddenAnimated)}},{key:"fadeIn",value:function(){this.removeClass(this.styleSheet.hiddenAnimated),this.addClass(this.styleSheet.visibleAnimated)}},{key:"show",value:function(){var e=this;this.isInDocument()||(this.parentNode.appendChild(this.node),this.redraw(),setTimeout(function(){e.fadeIn()},0))}},{key:"setParentNode",value:function(e){this.options.parentNode=e}},{key:"hide",value:function(){var e=this;this.isInDocument()&&(this.fadeOut(),setTimeout(function(){e.isInDocument()&&e.parentNode.removeChild(e.node)},this.options.transitionTime))}},{key:"parentNode",get:function(){return this.options.parentNode||(this.parent?this.parent instanceof HTMLElement?this.options.parentNode=this.parent:this.options.parentNode=this.parent.node:this.options.parentNode=document.body),this.options.parentNode}}]),t}(Lc.Element))||zg,Kg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"bindWindowListeners",value:function(){var e=this;this.hideListener=this.hideListener||function(){e.hide()},window.addEventListener("click",this.hideListener)}},{key:"toggle",value:function(){this.isInDocument()?this.hide():this.show()}},{key:"show",value:function(){this.isInDocument()||(this.bindWindowListeners(),w(d(t.prototype),"show",this).call(this))}},{key:"hide",value:function(){this.isInDocument()&&w(d(t.prototype),"hide",this).call(this)}},{key:"onUnmount",value:function(){w(d(t.prototype),"onUnmount",this).call(this),window.removeEventListener("click",this.hideListener)}},{key:"onMount",value:function(){var e=this;this.options.notVisible?setTimeout(function(){e.hide()}):this.bindWindowListeners(),this.addClickListener(function(e){e.stopPropagation()})}}]),t}(Xg),Qg=(Wg=Ze(qg))(Hg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{closeButton:!0,destroyOnHide:!0,visible:!1}}},{key:"getChildrenToRender",value:function(){var e=this;return[Lc.createElement(jd,{ref:"modalContainer",className:(this.options.visible?"":"hidden")+this.styleSheet.container},Lc.createElement(jd,{ref:"behindPanel",className:this.styleSheet.hiddenAnimated+this.styleSheet.background,onClick:function(){return e.hide()}}),this.getModalWindow())]}},{key:"getModalWindow",value:function(){var e=this,t=null;return this.options.closeButton&&(t=Lc.createElement("div",{style:{right:"10px",zIndex:"10",position:"absolute"}},Lc.createElement(Md,{className:"close",size:Dc.EXTRA_LARGE,style:{border:"none"},label:"Ã—",onClick:function(){return e.hide()}}))),Lc.createElement(Xg,{ref:"modalWindow",style:this.getModalWindowStyle()},t,this.render())}},{key:"getModalWindowStyle",value:function(){return this.options.fillScreen&&(this.options.width="85%"),{position:"relative",padding:"1%",boxShadow:"0 5px 15px rgba(0,0,0,0.5)",borderRadius:"10px",margin:"60px auto",display:this.options.display||"block",maxHeight:this.options.maxHeight||"85%",left:"0",right:"0",width:this.options.width||"50%",height:this.options.height||"auto",background:"white",overflow:this.options.overflow||"auto"}}},{key:"isVisible",value:function(){return this.options.visible}},{key:"hide",value:function(){var e=this;this.isVisible()&&(this.options.visible=!1,this.modalWindow.fadeOut(),setTimeout(function(){e.behindPanel.removeClass(e.styleSheet.visibleAnimated),e.behindPanel.addClass(e.styleSheet.hiddenAnimated),setTimeout(function(){e.modalContainer.addClass("hidden"),e.options.destroyOnHide&&e.destroyNode()},e.modalWindow.options.transitionTime||0),e.detachListener(e.closeListenerHandler)},this.modalWindow.options.transitionTime||0),document.body.classList.remove("unscrollable"))}},{key:"show",value:function(){var e=this;this.options.visible=!0,this.node||this.mount(document.body),this.modalContainer.removeClass("hidden"),setTimeout(function(){e.behindPanel.addClass(e.styleSheet.visibleAnimated),e.behindPanel.removeClass(e.styleSheet.hiddenAnimated),setTimeout(function(){e.modalWindow.fadeIn()},e.modalWindow.options.transitionTime)},0),this.closeListenerHandler=this.attachListener(Hu.Global,"closeAllModals",function(){e.hide()}),document.body.classList.add("unscrollable")}}],[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new this(e);return t.show(),t}}]),t}(Lc.Element))||Hg,Zg=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{closeButton:!1})}},{key:"getActionName",value:function(){return this.options.actionName}},{key:"getActionLevel",value:function(){return this.options.level||Pc.DEFAULT}},{key:"getCloseName",value:function(){return this.options.closeName||"Close"}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.header},this.getHeader()),this.getBody()?Lc.createElement("div",{className:this.styleSheet.body},this.getBody()):null,this.getFooter()?Lc.createElement("div",{className:this.styleSheet.footer},this.getFooter()):null]}},{key:"getHeader",value:function(){return Lc.createElement("h4",null,this.getTitle())}},{key:"getTitle",value:function(){return this.options.title||this.getActionName()}},{key:"getBody",value:function(){return null}},{key:"getActionButton",value:function(){var e=this;return Lc.createElement(Md,{level:this.getActionLevel(),label:this.getActionName(),onClick:function(){return e.action()},ref:"actionButton"})}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:this.getCloseName(),onClick:function(){return e.hide()}}),this.getActionButton())]}},{key:"action",value:function(){}}]),t}(Qg),$g=function(e){return function(t){function n(){return r(this,n),b(this,d(n).apply(this,arguments))}return h(n,t),o(n,[{key:"getModalOptions",value:function(){var e={actionName:this.options.label,level:this.options.level};return Object.assign(e,this.options.modalOptions),e}},{key:"onMount",value:function(){var t=this;this.addClickListener(function(){e.show(t.getModalOptions())})}}]),n}(Md)},em=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"An Error occurred"}},{key:"getBody",value:function(){return this.options.error.message||this.options.error}},{key:"getFooter",value:function(){var e=this;return Lc.createElement(Md,{level:Pc.DANGER,label:"Dismiss",onClick:function(){return e.hide()}})}}]),t}(Zg),tm=function(){function e(){r(this,e)}return o(e,null,[{key:"getPrefix",value:function(){return this.prefix?"("+this.prefix+") ":""}},{key:"setPrefix",value:function(e){this.prefix=e,this.updatePageTitle()}},{key:"setDefaultTitle",value:function(e){this.defaultTitle=e}},{key:"getTitle",value:function(){return this.title||this.defaultTitle}},{key:"setTitle",value:function(e){this.title=e,this.updatePageTitle()}},{key:"getFullPageTitle",value:function(){return this.getPrefix()+this.getTitle()}},{key:"updatePageTitle",value:function(){document.title=this.getFullPageTitle()}},{key:"setIcon",value:function(){throw Error("Not implemented yet!")}}]),e}();tm.title=null,tm.defaultTitle="Website",tm.prefix=null;var nm=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"clearCache",value:function(){this.getRoutes().clearCache()}},{key:"getRoutes",value:function(){return this.options.routes}},{key:"getPageNotFound",value:function(){var e=Lc.createElement("h1",{children:["Can't find url, make sure you typed it correctly"]});return e.pageTitle="Page not found",e}},{key:"getPageToRender",value:function(e){var t=this.getRoutes().getPage(e);if(!1===t)return this.getPageNotFound();if(Array.isArray(t)){var n;return(n=this.constructor).changeURL.apply(n,C(t)),null}return t}},{key:"setURL",value:function(e){e=M(e);var t=this.getPageToRender(e);if(t){var n=this.getActive();n!==t?(n&&n.dispatch("urlExit"),this.setActive(t),t.dispatch("urlEnter")):t.dispatch("urlReload"),t&&t.pageTitle&&tm.setTitle(t.pageTitle),this.dispatch("change",e,t,n)}}},{key:"addChangeListener",value:function(e){return this.addListener("change",e)}},{key:"onMount",value:function(){t.Global||this.constructor.setGlobalRouter(this)}}],[{key:"getCurrentPath",value:function(){return this.useLocalHistory&&this.localHistory.length?this.localHistory[this.localHistory.length-1].split("?")[0].split("#")[0]:location.pathname}},{key:"parseURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.pathname;return Array.isArray(e)||(e=e.split("/")),e.filter(function(e){return""!=e})}},{key:"joinQueryParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))}).join("&")}},{key:"formatURL",value:function(e){return Array.isArray(e)&&(e=e.length?"/"+e.join("/"):"/"),V(e)&&"/"!==e[0]&&(e="/"+e),e}},{key:"changeURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{queryParams:{},state:{},replaceHistory:!1};if(e=this.formatURL(e),t.queryParams&&Object.keys(t.queryParams).length>0){var n=this.joinQueryParams(t.queryParams);e="".concat(e,"?").concat(n)}if(e!==window.location.pathname){t.state=t.state||{};var i=[t.state,tm.getTitle(),e];if(this.useLocalHistory)t.replaceHistory&&this.localHistory.pop(),this.localHistory.push(e);else if(t.replaceHistory){var r;(r=window.history).replaceState.apply(r,i)}else{var a;(a=window.history).pushState.apply(a,i)}this.updateURL()}}},{key:"onPopState",value:function(){this.changeURL(this.parseURL(this.getCurrentPath()),{replaceHistory:!0}),Hu.Global.dispatch("externalURLChange")}},{key:"back",value:function(){this.useLocalHistory?(this.localHistory.pop(),this.onPopState()):window.history.back()}},{key:"updateURL",value:function(){this.Global.setURL(this.parseURL(this.getCurrentPath()))}},{key:"setGlobalRouter",value:function(e){var t=this;this.Global=e,window.onpopstate=function(){t.onPopState()},this.updateURL()}}]),t}(Of);nm.localHistory=[],nm.useLocalHistory=!1;var im=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(this,e),this.cachedPages=new Map,this.expr=t instanceof Array?t:[t],this.pageGenerator=n,this.subroutes=M(i),"string"==typeof a&&(a={title:a}),this.options=a,this.cachedPages=new Map}return o(e,[{key:"clearCache",value:function(){this.cachedPages.clear();var e=!0,t=!1,n=void 0;try{for(var i,r=this.subroutes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;a.clearCache&&a.clearCache()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"matches",value:function(e){if(e.length<this.expr.length)return null;for(var t=[],n=0;n<this.expr.length;n+=1){var i=this.expr[n]===this.constructor.ARG_KEY;if(e[n]!=this.expr[n]&&!i)return null;i&&t.push(e[n])}return{args:t,urlParts:e.slice(this.expr.length)}}},{key:"getPageTitle",value:function(){return this.options.title}},{key:"getPageGuard",value:function(){return this.options.beforeEnter}},{key:"generatePage",value:function(e){if(!e)return null;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n.toString();if(!this.cachedPages.has(r)){var a=M(n),o={args:a,argsArray:n},s=e.prototype instanceof Lc.Element?new e(o):e(o);if(s&&!s.pageTitle){this.getPageTitle()&&(s.pageTitle=this.getPageTitle())}this.cachedPages.set(r,s)}return this.cachedPages.get(r)}},{key:"matchesOwnNode",value:function(e){return 0===e.length}},{key:"executeGuard",value:function(){var e=this.getPageGuard();return e?e(this.getSnapshot()):null}},{key:"getPage",value:function(e,t){for(var n,i=this.matchesOwnNode(e)?this:null,r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];if(!i){var s=!0,l=!1,u=void 0;try{for(var c,h=this.subroutes[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;if(n=d.matches(e)){n.args.length&&a.push(n.args),i=d;break}}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}}if(!i)return!1;var p=this.executeGuard();if(!p){var f
;return i===this?this.generatePage.apply(this,[this.pageGenerator].concat(a)):(f=i).getPage.apply(f,[n.urlParts,t].concat(a))}return Array.isArray(p)?p:this.generatePage.apply(this,[p].concat(a))}},{key:"getSnapshot",value:function(){return{expr:this.expr,url:window.location.href,path:"".concat(window.location.pathname).concat(window.location.search),params:new URLSearchParams(window.location.search)}}}]),e}();im.ARG_KEY="%s";var rm,am,om,sm,lm,um,cm,hm,dm,pm,fm,gm,mm,vm,ym,bm,km,wm,Em,Sm,Cm,xm,Tm,Am,Lm,Im,Nm,Om,Rm,Mm,Pm,Dm,Bm,_m,Fm,Um,zm,Wm,Hm,Vm,Gm,jm,Ym,Jm,qm,Xm,Km,Qm,Zm,$m,ev,tv,nv,iv,rv,av,ov,sv,lv,uv,cv,hv,dv,pv,fv,gv,mv,vv,yv,bv,kv,wv,Ev,Sv,Cv,xv,Tv,Av,Lv,Iv,Nv,Ov,Rv,Mv,Pv,Dv,Bv,_v,Fv,Uv,zv,Wv,Hv,Vv,Gv,jv,Yv,Jv,qv,Xv,Kv,Qv,Zv,$v,ey,ty,ny,iy,ry,ay,oy,sy,ly,uy,cy,hy,dy,py,fy,gy,my,vy,yy,by,ky,wy,Ey,Sy,Cy,xy,Ty,Ay,Ly,Iy,Ny,Oy,Ry,My,Py,Dy,By,_y,Fy,Uy,zy,Wy,Hy,Vy,Gy,jy,Yy,Jy,qy=function(e){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r(this,t),b(this,d(t).call(this,e,n,[],i))}return h(t,e),o(t,[{key:"matchesOwnNode",value:function(e){return!0}},{key:"getPage",value:function(e,n){var i=w(d(t.prototype),"getPage",this).apply(this,arguments);return setTimeout(function(){i&&i.setURL&&i.setURL(e)}),i}}]),t}(im),Xy=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"dragMousedown",value:function(e){}},{key:"dragMousemove",value:function(e){}},{key:"dragMouseup",value:function(e){}},{key:"dividerMousedownFunction",value:function(e){var t=this;this.dragMousedown(e),this.parent.dispatch("dividerMousedown",{divider:this,domEvent:e});var n=function(e){t.dragMousemove(e),e.preventDefault(),t.parent.dispatch("dividerMousemove",e)};this.parent.addNodeListener("touchmove",n),this.parent.addNodeListener("mousemove",n);var i=function e(i){t.dragMouseup(i),t.parent.dispatch("dividerMouseup",i),t.parent.removeNodeListener("touchmove",n),window.removeEventListener("touchend",e),t.parent.removeNodeListener("mousemove",n),window.removeEventListener("mouseup",e)};window.addEventListener("touchend",i),window.addEventListener("mouseup",i)}},{key:"onMount",value:function(){var e=this;this.addNodeListener("touchstart",function(t){e.touchDeviceTriggered=!0,e.dividerMousedownFunction(t)}),this.addNodeListener("mousedown",function(t){e.touchDeviceTriggered||e.dividerMousedownFunction(t)})}}]),t}(Lc.Element),Ky=(rm=om=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"noTextSelection",am,y(n)),n}return h(t,e),t}(Jc),am=R(rm.prototype,"noTextSelection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none",userSelect:"none"}}}),rm),Qy=(sm=dm=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"accordion",lm,y(n)),O(n,"grab",um,y(n)),O(n,"grabbing",cm,y(n)),O(n,"collapseIcon",hm,y(n)),n}return h(t,e),t}(Ky),lm=R(sm.prototype,"accordion",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",">:nth-of-type(even)":{flexGrow:"1",flexShrink:"1",flexBasis:"auto",overflow:"auto",position:"relative"},">:nth-of-type(odd)":{fontSize:"1em",textTransform:"uppercase",padding:"8px 8px"}}}}),um=R(sm.prototype,"grab",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"grab"}}}),cm=R(sm.prototype,"grabbing",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"grabbing"}}}),hm=R(sm.prototype,"collapseIcon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"0.7em",fontSize:"120% !important",fontWeight:"900 !important",textAlign:"center",marginRight:"0.2em"}}}),sm),Zy=(pm=ym=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.barThickness=2,n.barPadding=3,n.dividerColor=function(){return"#DDD"},O(n,"horizontalDivider",fm,y(n)),O(n,"verticalDivider",gm,y(n)),O(n,"horizontalSection",mm,y(n)),O(n,"verticalSection",vm,y(n)),n}return h(t,e),t}(Ky),fm=R(pm.prototype,"horizontalDivider",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{zIndex:"10",position:"absolute",height:"100%",cursor:"col-resize",width:this.barThickness+2*this.barPadding+"px",background:function(){return e.dividerColor()},backgroundClip:"padding-box",borderLeft:"".concat(this.barPadding,"px solid transparent"),borderRight:"".concat(this.barPadding,"px solid transparent"),marginLeft:"".concat(-this.barThickness/2-this.barPadding,"px"),marginRight:"".concat(-this.barThickness/2,"px"),display:"inline-block"}}}),gm=R(pm.prototype,"verticalDivider",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{zIndex:"10",position:"absolute",cursor:"row-resize",width:"100%",height:this.barThickness+2*this.barPadding+"px",background:function(){return e.dividerColor()},backgroundClip:"padding-box",borderBottom:"".concat(this.barPadding,"px solid transparent"),borderTop:"".concat(this.barPadding,"px solid transparent"),marginBottom:"".concat(-this.barThickness/2-this.barPadding,"px"),marginTop:"".concat(-this.barThickness/2-this.barPadding,"px")}}}),mm=R(pm.prototype,"horizontalSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",whiteSpace:"nowrap",">*":{whiteSpace:"initial",verticalAlign:"top",paddingLeft:"".concat(this.barThickness/2+this.barPadding,"px"),paddingRight:"".concat(this.barThickness/2+this.barPadding,"px")},">:first-child":{paddingLeft:"0"},">:last-child":{paddingRight:"0"},">:nth-of-type(even)":{padding:"0"},">:nth-of-type(odd)":{display:"inline-block"}}}}),vm=R(pm.prototype,"verticalSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",">*":{paddingTop:"".concat(this.barThickness/2+this.barPadding,"px"),paddingBottom:"".concat(this.barThickness/2+this.barPadding,"px")},">:first-child":{paddingTop:"0"},">:last-child":{paddingBottom:"0"},">:nth-of-type(even)":{padding:"0"}}}}),pm),$y=(bm=Om=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.barThickness=16,n.barPadding=1,n.transitionTime=.3,n.dividerStyle={backgroundColor:"white",borderColor:"#DDD !important"},O(n,"horizontalDivider",km,y(n)),O(n,"horizontalDots",wm,y(n)),O(n,"verticalDivider",Em,y(n)),O(n,"verticalDots",Sm,y(n)),O(n,"arrowButton",Cm,y(n)),O(n,"buttonsDisabled",xm,y(n)),O(n,"barCollapsePanel",Tm,y(n)),O(n,"hiddenContent",Am,y(n)),O(n,"collapsedBarTitle",Lm,y(n)),O(n,"animatedSectionDivider",Im,y(n)),O(n,"paddingRemoved",Nm,y(n)),n}return h(t,e),t}(Zy),km=R(bm.prototype,"horizontalDivider",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign(this.dividerStyle,{display:"inline-flex",alignItems:"center",flexDirection:"column",">*":{flex:"1",display:"flex",color:"rgba(0,0,0, .4)"},">:first-child":{alignItems:"flex-end"},">:last-child":{alignItems:"flex-start"},">:nth-child(2)":{flex:".2",alignItems:"center"}})}}),wm=R(bm.prototype,"horizontalDots",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transform:"rotate(90deg) scaleX(5)"}}}),Em=R(bm.prototype,"verticalDivider",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign(this.dividerStyle,{display:"flex",alignItems:"center"})}}),Sm=R(bm.prototype,"verticalDots",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",fontSize:"70% !important",height:0,textAlign:"center",transform:"scaleX(10) translateY(-.4em)"}}}),Cm=R(bm.prototype,"arrowButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"230% !important",padding:"1em .2em",color:"rgba(0,0,0, .4)",cursor:"pointer",":hover":{color:"black"}}}}),xm=R(bm.prototype,"buttonsDisabled",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:first-child":{pointerEvents:"none"},">:last-child":{pointerEvents:"none"}}}}),Tm=R(bm.prototype,"barCollapsePanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",">:first-child":{width:"100%",height:"100%"},">:nth-child(2)":{display:"none",opacity:"0",transition:"opacity "+this.transitionTime+"s ease"}}}}),Am=R(bm.prototype,"hiddenContent",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:first-child":{display:"none"},">:nth-child(2)":{opacity:"1"}}}}),Lm=R(bm.prototype,"collapsedBarTitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",width:"100%",height:"100%",display:"flex",alignItems:"center",backgroundColor:"#fff",flexDirection:"column",zIndex:5,position:"absolute",top:0,left:0,":hover":{backgroundColor:"#f3f3f3"},">:nth-child(2)":{flex:"1",transform:"rotate(90deg)"},">:nth-child(2)>:first-child":{textTransform:"uppercase",fontWeight:"bold",fontSize:"130%",whiteSpace:"nowrap",marginTop:"-.4em",transform:"translateY(10%)"},">*":{display:"flex",alignItems:"center"},">:first-child":{flex:".5",fontSize:"180%"},">:last-child":{flex:".5",fontSize:"180%"}}}}),Im=R(bm.prototype,"animatedSectionDivider",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{transition:this.transitionTime+"s height ease, "+this.transitionTime+"s width ease"}}}}),Nm=R(bm.prototype,"paddingRemoved",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{padding:"0 !important",overflow:"hidden"},">:nth-of-type(even)":{display:"none !important"}}}}),bm),eb=(Rm=Ze(Zy))(Mm=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{orientation:Rc.HORIZONTAL})}},{key:"dragMousedown",value:function(e){document.body.classList.add(this.styleSheet.noTextSelection)}},{key:"dragMouseup",value:function(e){document.body.classList.remove(this.styleSheet.noTextSelection)}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),this.options.orientation===Rc.VERTICAL?e.addClass(this.styleSheet.verticalDivider):e.addClass(this.styleSheet.horizontalDivider)}}]),t}(Xy))||Mm,tb=(Pm=Ze(Zy))(Dm=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.uncollapsedSizes=new WeakMap,n}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({autoCollapse:!1},w(d(t.prototype),"getDefaultOptions",this).call(this))}}]),o(t,[{key:"getDividerBarClass",value:function(){return eb}},{key:"extraNodeAttributes",value:function(e){this.getOrientation()===Rc.VERTICAL?e.addClass(this.styleSheet.verticalSection):e.addClass(this.styleSheet.horizontalSection)}},{key:"getOrientation",value:function(){return this.options.orientation||Rc.VERTICAL}},{key:"getDimension",value:function(e){return this.getOrientation()===Rc.HORIZONTAL?e.getWidth():e.getHeight()}},{key:"setDimension",value:function(e,t){this.getOrientation()===Rc.HORIZONTAL?e.setWidth(t):e.setHeight(t)}},{key:"getMinDimension",value:function(e){return this.getOrientation()===Rc.HORIZONTAL&&e.options.hasOwnProperty("minWidth")?e.options.minWidth:this.getOrientation()===Rc.VERTICAL&&e.options.hasOwnProperty("minHeight")?e.options.minHeight:this.getDimension(this)/this.panels.length/4}},{key:"getHiddenDivider",value:function(e){for(var t,n=e;n<this.panels.length-1;n+=1){if(this.dividers[n].hasClass("hidden"))t=this.dividers[n];else if(!this.dividers[n].hasClass("hidden"))break;if(t&&!this.panels[n+1].hasClass("hidden"))return t}t=null;for(var i=e-1;i>=0;i-=1){if(this.dividers[i].hasClass("hidden"))t=this.dividers[i];else if(!this.dividers[i].hasClass("hidden"))break;if(t&&!this.panels[i].hasClass("hidden"))return t}return null}},{key:"getVisibleDivider",value:function(e){for(var t=e;t<this.panels.length-1;t+=1)if(!this.dividers[t].hasClass("hidden"))return this.dividers[t];for(var n=e-1;n>=0;n-=1)if(!this.dividers[n].hasClass("hidden"))return this.dividers[n];return null}},{key:"collapseChild",value:function(e){var t=this.getDimension(this),n=this.panels[e],i=this.getDimension(n);this.uncollapsedSizes.set(n,i);var r=-1,a=!0,o=!1,s=void 0;try{for(var l,u=this.panels[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;this.getDimension(c)&&!c.options.fixed&&(r+=1)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var h=this.getVisibleDivider(e);h&&h.hide(),this.setDimension(n,"0"),n.hide();var d=!0,p=!1,f=void 0;try{for(var g,m=this.panels[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;0===this.getDimension(v)||v.options.fixed||this.setDimension(v,100*(this.getDimension(v)+i/r)/t-.5/this.children.length+"%")}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}this.recalculateDimensions()}},{key:"expandChild",value:function(e){var t=this.getDimension(this),n=this.panels[e],i=1,r=!0,a=!1,o=void 0;try{for(var s,l=this.panels[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this.getDimension(u)&&!u.options.fixed&&(i+=1)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}var c=this.getHiddenDivider(e);c&&c.show(),n.show();var h=this.uncollapsedSizes.get(n),d=!0,p=!1,f=void 0;try{for(var g,m=this.panels[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;this.getDimension(v)&&!v.options.fixed&&this.setDimension(v,100*(this.getDimension(v)-h/(i-1))/t-this.panels.length/2+"%")}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}this.setDimension(n,100*h/t+"%"),this.recalculateDimensions()}},{key:"isCollapsed",value:function(e){return!this.getDimension(e)}},{key:"toggleChild",value:function(e){this.isCollapsed(this.panels[e])?this.expandChild(e):this.collapseChild(e)}},{key:"recalculateDimensions",value:function(){if(this.isInDocument()){var e=this.getDimension(this),t=0,n=0,i=!0,r=!1,a=void 0;try{for(var o,s=this.panels[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.options.fixed?t+=this.getDimension(l):n+=this.getDimension(l)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}var u=(e-t)/e,c=!0,h=!1,d=void 0;try{for(var p,f=this.panels[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var g=p.value;g.options.fixed||g.hasClass("hidden")||this.setDimension(g,100*this.getDimension(g)*u/n+"%")}}catch(e){h=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(h)throw d}}}}},{key:"getPreviousUnfixedChild",value:function(e){for(var t=e;t>=0;t-=1){var n=this.panels[t];if(!n.hasClass("hidden")&&!n.options.fixed)return n}return null}},{key:"getNextUnfixedChild",value:function(e){for(var t=e+1;t<this.panels.length;t+=1){var n=this.panels[t];if(!n.hasClass("hidden")&&!n.options.fixed)return n}return null}},{key:"dividerMouseDownFunction",value:function(e){var t=this,n=e.domEvent,i=this.dividers.indexOf(e.divider),r=this.getPreviousUnfixedChild(i),a=this.getNextUnfixedChild(i);if(r&&a){var o=this.getDimension(this),s=o,l=!0,u=!1,c=void 0;try{for(var h,d=this.panels[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;p.options.fixed&&(s-=this.getDimension(p))}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var f=this.getOrientation()===Rc.HORIZONTAL?function(e){return rc.getEventX(e)}:function(e){return rc.getEventY(e)},g=this.addListener("dividerMousemove",function(e){var s=f(e)-f(n),l=t.getDimension(a)-s,u=t.getDimension(r)+s;if(t.options.autoCollapse){if(s>0&&a.collapsed||s<0&&r.collapsed)return;if(s<0&&a.collapsed&&t.options.autoCollapse)return void t.expandChild(i+1);if(s>0&&r.collapsed)return void t.expandChild(i);if(l<t.getMinDimension(a))return void t.collapseChild(i+1);if(u<t.getMinDimension(r))return void t.collapseChild(i)}else if(l<t.getMinDimension(a)||u<t.getMinDimension(r))return;t.setDimension(a,100*l/o+"%"),t.setDimension(r,100*u/o+"%"),n=e}),m=this.addListener("dividerMouseup",function(){t.clearListeners&&t.clearListeners()});this.clearListeners=function(){g.remove(),m.remove(),t.clearListeners=null}}}},{key:"onMount",value:function(){var e=this;this.addListener("dividerMousedown",function(t){return e.dividerMouseDownFunction(t)}),setTimeout(function(){e.recalculateDimensions()})}},{key:"getChildrenToRender",value:function(){var e=[];this.dividers=[],this.panels=[];var t=!1,n=this.getDividerBarClass(),i=!0,r=!1,a=void 0;try{for(var o,s=M(this.render())[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;if(this.panels.length){var u="hidden";t&&!l.hasClass("hidden")&&(u="");var c=Lc.createElement(n,{className:u,orientation:this.getOrientation()});e.push(c),this.dividers.push(c)}t|=!l.hasClass("hidden"),e.push(l),this.panels.push(l)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return e}}]),t}(Lc.Element))||Dm,nb=(Bm=Ze(Qy))(_m=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"dragMousedown",value:function(e){document.body.classList.add(this.styleSheet.noTextSelection),this.addClass(this.styleSheet.grabbing)}},{key:"dragMouseup",value:function(e){document.body.classList.remove(this.styleSheet.noTextSelection),this.removeClass(this.styleSheet.grabbing)}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.grab)}},{key:"render",value:function(){return[Lc.createElement(wf,{ref:"collapseIcon",collapsed:!1,className:this.styleSheet.collapseIcon}),this.options.children]}},{key:"setCollapsed",value:function(e){this.collapseIcon.setCollapsed(e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("togglePanel",function(){e.collapseIcon.toggleCollapsed()})}}]),t}(Xy))||_m,ib=(Fm=Ze(Qy))(Um=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.accordion)}},{key:"getChildrenToRender",value:function(){var e=[];this.dividers=[],this.panels=[];var t=!0,n=!1,i=void 0;try{for(var r,a=M(this.render())[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=o.getTitle?o.getTitle():o.options.title?o.options.title:"",l=Lc.createElement(nb,null,s);this.dividers.push(l),this.panels.push(o),e.push(l),e.push(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getNextVisibleChild",value:function(e){for(var t=e;t<this.panels.length;t+=1)if(!this.panels[t].hasClass("hidden"))return this.panels[t];return null}},{key:"getPreviousVisibleChild",value:function(e){for(var t=e-1;t>=0;t-=1)if(!this.panels[t].hasClass("hidden"))return this.panels[t];return null}},{key:"dividerMousedownFunction",value:function(e){var t,n,i,r=this,a=e.domEvent,o=this.dividers.indexOf(e.divider),s=this.getPreviousVisibleChild(o),l=this.getNextVisibleChild(o);n=this.getHeight();var u=!0,c=!1,h=void 0;try{for(var d,p=this.dividers[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;n-=f.getHeight()}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}i=0;var g=!0,m=!1,v=void 0;try{for(var y,b=this.panels[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var k=y.value;k.hasClass("hidden")||(i+=parseFloat(De(k.node,"flex")))}}catch(e){m=!0,v=e}finally{try{g||null==b.return||b.return()}finally{if(m)throw v}}var w=this.addListener("dividerMousemove",function(e){if(t=!0,-1!=o&&l&&s){var u=(rc.getEventY(e)-rc.getEventY(a))*i/n,c=parseFloat(De(l.node,"flex")),h=parseFloat(De(s.node,"flex"));u=Math.sign(u)*Math.min(Math.abs(u),u>0?c:h),l.setStyle("flex",c-u),s.setStyle("flex",h+u),a=e,r.dispatch("dragging")}}),E=this.addListener("dividerMouseup",function(){t||(e.divider.dispatch("togglePanel"),r.toggleChild(r.panels[o])),w.remove(),E.remove(),r.dispatch("childrenStatusChange")})}},{key:"toggleChild",value:function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var a,o=this.panels[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.hasClass("hidden")||(t+=parseFloat(De(s.node,"flex")))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}if(t+=(e.hasClass("hidden")?1:-1)*parseFloat(De(e,"flex")),e.toggleClass("hidden"),t<1){var l=!0,u=!1,c=void 0;try{for(var h,d=this.panels[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;!p.hasClass("hidden")&&parseFloat(De(p.node,"flex"))<1&&p.setStyle("flex",1)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}}},{key:"getChildrenStatus",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.panels[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push({flex:De(o.node,"flex"),collapsed:o.hasClass("hidden")})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getDefaultChildrenStatus",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.panels[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value;e.push({flex:1,collapsed:!1})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"setChildrenStatus",value:function(e){for(var t=0;t<e.length;t+=1){this.panels[t].setStyle("flex",e[t].flex);var n=e[t].collapsed;n?this.panels[t].addClass("hidden"):this.panels[t].removeClass("hidden"),this.dividers[t].setCollapsed(n)}}},{key:"onMount",value:function(){var e=this;this.addListener("dividerMousedown",function(t){return e.dividerMousedownFunction(t)})}}]),t}(Lc.Element))||Um,rb=(zm=Ze($y))(Wm=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return this.options.orientation===Rc.VERTICAL?[Lc.createElement(kf,{icon:"ellipsis-h",className:this.styleSheet.verticalDots})]:[Lc.createElement("div",null,Lc.createElement(kf,{ref:"rightButton",icon:"caret-right",className:this.styleSheet.arrowButton})),Lc.createElement("div",null,Lc.createElement(kf,{icon:"bars",className:this.styleSheet.horizontalDots})),Lc.createElement("div",null,Lc.createElement(kf,{ref:"leftButton",icon:"caret-left",className:this.styleSheet.arrowButton}))]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.leftButton.addNodeListener("mousedown",function(e){e.stopPropagation()}),this.leftButton.addClickListener(function(){e.dispatch("collapsePrevious")}),this.rightButton.addNodeListener("mousedown",function(e){e.stopPropagation()}),this.rightButton.addClickListener(function(){e.dispatch("collapseNext")})}}]),t}(eb))||Wm,ab=(Hm=Ze($y))(Vm=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){var t=this.getGivenChildren()[0];e.addClass(this.styleSheet.barCollapsePanel);var n=t.options.size;this.collapsed&&(e.addClass(this.styleSheet.hiddenContent),n=this.options.collapsedSize),n&&(this.options.orientation===Rc.VERTICAL?e.setStyle("height",n):e.setStyle("width",n)),this.options.orientation===Rc.VERTICAL?e.setStyle("width","100%"):e.setStyle("height","100%")}},{key:"getChildrenToRender",value:function(){this.collapsed=this.getGivenChildren()[0].options.collapsed;var e=0===this.parent.panels.indexOf(this),t=this.parent.panels.indexOf(this)===this.parent.panels.length-1,n=t?"left":"right",i=e?"right":"left";return[this.render(),Lc.createElement("div",{ref:"collapsedBarTitle",style:{display:this.collapsed?"flex":" none"},className:this.styleSheet.collapsedBarTitle},Lc.createElement("div",null,Lc.createElement(kf,{icon:"caret-"+n})),Lc.createElement("div",{className:this.styleSheet.title},Lc.createElement("div",null,this.options.title)),Lc.createElement("div",null,Lc.createElement(kf,{icon:"caret-"+i})))]}},{key:"toggle",value:function(){var e=this;this.collapsed?(this.collapsed=!1,this.removeClass(this.styleSheet.hiddenContent),this.collapsedBarTitle.setStyle("display","none")):(this.collapsed=!0,this.collapsedBarTitle.setStyle("display","flex"),setTimeout(function(){e.addClass(e.styleSheet.hiddenContent)},100))}},{key:"onMount",value:function(){var e=this;this.collapsedBarTitle.addClickListener(function(){e.dispatch("expand")}),this.addListener("resize",function(){var t=!0,n=!1,i=void 0;try{for(var r,a=M(e.render())[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.dispatch("resize")}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}})}}]),t}(Lc.Element))||Vm,ob=(Gm=Ze($y))(jm=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{collapsedSize:40,autoCollapse:!0})}},{key:"getDividerBarClass",value:function(){return rb}},{key:"setDimension",value:function(e,t){this.getOrientation()===Rc.HORIZONTAL?e.setWidth(t):e.setHeight(t)}},{key:"collapseChild",value:function(e){var t=this;this.clearListeners&&this.clearListeners(),this.addClass(this.styleSheet.paddingRemoved),this.addClass(this.styleSheet.animatedSectionDivider);var n=this.getDimension(this),i=this.panels[e],r=this.getDimension(i);this.uncollapsedSizes.set(i,r);var a=-1,o=!0,s=!1,l=void 0;try{for(var u,c=this.panels[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value;h.collapsed||h.options.fixed||(a+=1)}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}this.setDimension(i,this.options.collapsedSize),i.toggle();var d=!0,p=!1,f=void 0;try{for(var g,m=this.panels[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;v.collapsed||v.options.fixed||this.setDimension(v,100*(this.getDimension(v)+(r-this.options.collapsedSize)/a)/n+"%")}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}setTimeout(function(){t.removeClass(t.styleSheet.animatedSectionDivider),t.recalculateDimensions()},1e3*this.styleSheet.transitionTime)}},{key:"expandChild",value:function(e){var t=this;this.removeClass(this.styleSheet.paddingRemoved),this.addClass(this.styleSheet.animatedSectionDivider);var n=this.getDimension(this),i=this.panels[e],r=1,a=!0,o=!1,s=void 0;try{for(var l,u=this.panels[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.collapsed||c.options.fixed||(r+=1)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var h=this.uncollapsedSizes.get(i);i.toggle();var d=!0,p=!1,f=void 0;try{for(var g,m=this.panels[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;this.getDimension(v)&&!v.options.fixed&&this.setDimension(v,100*(this.getDimension(v)-(h-this.options.collapsedSize)/(r-1))/n+"%")}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}this.setDimension(i,100*h/n+"%"),setTimeout(function(){t.removeClass(t.styleSheet.animatedSectionDivider),t.recalculateDimensions()},1e3*this.styleSheet.transitionTime)}},{key:"getChildrenToRender",value:function(){var e=[];this.dividers=[],this.panels=[];var t=this.getDividerBarClass(),n=!0,i=!1,r=void 0;try{for(var a,o=M(this.render())[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.options.collapsed&&this.addClass(this.styleSheet.paddingRemoved),this.panels.length){var l=Lc.createElement(t,{orientation:this.getOrientation()});e.push(l),this.dividers.push(l)}var u=Lc.createElement(ab,{orientation:this.options.orientation,collapsedSize:this.options.collapsedSize,title:s.options.title||"..."},s);e.push(u),this.panels.push(u)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);for(var n=0;n<this.panels.length;n+=1)!function(t){var n=e.panels[t];e.attachListener(n,"expand",function(){e.uncollapsedSizes.set(n,e.getDimension(e)/e.panels.length),e.expandChild(t)})}(n);for(var i=0;i<this.dividers.length;i+=1)!function(t){e.attachListener(e.dividers[t],"collapseNext",function(){return e.collapseChild(t+1)}),e.attachListener(e.dividers[t],"collapsePrevious",function(){return e.collapseChild(t)})}(i)}}]),t}(tb))||jm,sb=(Ym=Zm=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"DEFAULT",Jm,y(n)),O(n,"LARGE",qm,y(n)),O(n,"body",Xm,y(n)),O(n,"panel",Km,y(n)),O(n,"centered",Qm,y(n)),n}return h(t,e),t}(yh(ut)),Jm=R(Ym.prototype,"DEFAULT",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{display:"flex",alignItems:"center",width:"100%",flexDirection:"row",padding:"5px",minHeight:this.themeProperties.CARD_PANEL_HEADER_HEIGHT,textTransform:this.themeProperties.CARD_PANEL_TEXT_TRANSFORM,paddingLeft:this.themeProperties.CARD_PANEL_HEADING_PADDING,paddingRight:this.themeProperties.CARD_PANEL_HEADING_PADDING},ct(this.themeProperties.COLOR_BACKGROUND)]}}),qm=R(Ym.prototype,"LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minHeight:this.themeProperties.CARD_PANEL_HEADER_HEIGHT_LARGE,paddingLeft:this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,paddingRight:this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE}}}),Xm=R(Ym.prototype,"body",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Km=R(Ym.prototype,"panel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{borderWidth:this.themeProperties.BASE_BORDER_WIDTH,borderRadius:this.themeProperties.BASE_BORDER_RADIUS,boxShadow:this.themeProperties.BASE_BOX_SHADOW,borderStyle:this.themeProperties.BASE_BORDER_STYLE,backgroundColor:this.themeProperties.COLOR_BACKGROUND},ut(this.themeProperties.COLOR_BACKGROUND)]}}),Qm=R(Ym.prototype,"centered",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",justifyContent:"center"}}}),Ym),lb=yh(ct),ub=($m=Ze(sb))(ev=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.panel)}},{key:"getLevel",value:function(){return w(d(t.prototype),"getLevel",this).call(this)||Pc.PRIMARY}},{key:"getTitle",value:function(){return this.options.title}},{key:"getHeaderStyleSheet",value:function(){return lb.getInstance()}},{key:"getDefaultOptions",value:function(){return{headingCentered:!0,bodyCentered:!1}}},{key:"getHeadingClasses",value:function(){var e="",t=this.getHeaderStyleSheet().Level(this.getLevel()),n=this.options.headingCentered;return t&&(e+=t),e+=this.styleSheet.DEFAULT,this.getSize()&&(e+=this.styleSheet.Size(this.getSize())),n&&(e+=this.styleSheet.centered),e}},{key:"getBodyClasses",value:function(){var e=this.options.bodyCentered,t=this.styleSheet.body;return e&&(t+=this.styleSheet.centered),t}},{key:"getChildrenToRender",value:function(){var e=this.getHeadingClasses(),t=this.getBodyClasses();return[Lc.createElement("div",{ref:"panelTitle",className:e},this.getTitle()),Lc.createElement("div",{ref:"panelBody",className:t,style:this.options.bodyStyle},this.render())]}}]),t}(yd))||ev,cb=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this)),n.loaded=!1,n.jobs=[];var i=document.createElement("script");return i.async=!0,i.src=e,i.onload=function(){return n.onLoad()},
document.getElementsByTagName("head")[0].appendChild(i),n}return h(t,e),o(t,[{key:"onLoad",value:function(){this.loaded=!0;for(var e=0;e<this.jobs.length;e+=1)this.jobs[e](this);this.jobs=[]}},{key:"resolve",value:function(e){if(this.loaded)return void e(this);this.jobs.push(e)}}]),t}(Gu),hb=new Map,db=function(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyNodeAttributesNotLoaded",value:function(){w(d(t.prototype),"applyNodeAttributes",this).call(this)}},{key:"applyNodeAttributesLoaded",value:function(){w(d(t.prototype),"applyNodeAttributes",this).call(this)}},{key:"applyNodeAttributes",value:function(){return this._loaded?this.applyNodeAttributesLoaded():this.applyNodeAttributesNotLoaded()}},{key:"renderNotLoaded",value:function(){return"Loading component..."}},{key:"renderLoaded",value:function(){return w(d(t.prototype),"render",this).call(this)}},{key:"render",value:function(){return this._loaded?this.renderLoaded():this.renderNotLoaded()}},{key:"setLoaded",value:function(){this._loaded||(this._loaded=!0,this.node&&(w(d(t.prototype),"redraw",this).call(this),this._executedMount||(this._executedMount=!0,this.onDelayedMount())))}},{key:"beforeRedrawNotLoaded",value:function(){}},{key:"redrawNotLoaded",value:function(){this.beforeRedrawNotLoaded(),this._loaded||w(d(t.prototype),"redraw",this).call(this)}},{key:"redrawLoaded",value:function(){w(d(t.prototype),"redraw",this).call(this)}},{key:"redraw",value:function(){return this._loaded?this.redrawLoaded():this.redrawNotLoaded()}},{key:"onMount",value:function(){}},{key:"onDelayedMount",value:function(){w(d(t.prototype),"onMount",this).call(this)}}]),t}(e)},pb=function(e,t){return function(e){function n(){return r(this,n),b(this,d(n).apply(this,arguments))}return h(n,e),o(n,[{key:"beforeRedrawNotLoaded",value:function(){var e=this;dt(t,function(){e.setLoaded()})}}]),n}(db(e))},fb=(tv=rv=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.cellStyle={padding:"8px",lineHeight:"1.42857143",verticalAlign:"top",borderTop:"1px solid #ddd"},n.theadCellStyle={borderBottom:"2px solid #ddd",borderTop:"0"},O(n,"table",nv,y(n)),O(n,"tableStripped",iv,y(n)),n}return h(t,e),t}(Jc),nv=R(tv.prototype,"table",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",maxWidth:"100%",marginBottom:"20px",borderSpacing:"0",borderCollapse:"collapse",">*>*>td":this.cellStyle,">*>*>th":this.cellStyle,">*>thead>*>*":this.theadCellStyle}}}),iv=R(tv.prototype,"tableStripped",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">tbody>tr:nth-of-type(odd)":{backgroundColor:"#f5f5f5"}}}}),tv),gb=(av=lv=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"sortIcon",ov,y(n)),O(n,"table",sv,y(n)),n}return h(t,e),t}(fb),ov=R(av.prototype,"sortIcon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",right:"0px",bottom:"0px",visibility:"hidden",float:"right"}}}),sv=R(av.prototype,"table",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return e={},s(e," th:hover ."+this.sortIcon.getClassName(),{visibility:"inherit"}),s(e," th:hover",{cursor:"pointer"}),e}}),av),mb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.options.columns[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(this.renderEntryCell(o))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"renderEntryCell",value:function(e){return Lc.createElement("td",{style:e.cellStyle,key:e.id},e.value(this.options.entry,this.options.index))}}]),t}(Lc.Primitive("tr")),vb=(uv=Ze(fb))(cv=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.setColumns(e.columns||[]),this.entries=e.entries||[]}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.table)}},{key:"getRowClass",value:function(){return mb}},{key:"getRowOptions",value:function(e){return{entry:e,columns:this.columns}}},{key:"render",value:function(){return[Lc.createElement("thead",null,this.renderTableHead()),Lc.createElement("tbody",null,this.renderTableBody())]}},{key:"renderTableHead",value:function(){return Lc.createElement("tr",null,this.columns.map(this.renderHeaderCell,this))}},{key:"getEntryKey",value:function(e,t){return e&&null!=e.id?e.id:t}},{key:"renderTableBody",value:function(){this.rows=[];for(var e=this.getEntries(),t=0;t<e.length;t+=1){var n=e[t],i=this.getRowClass(n);this.rows.push(Lc.createElement(i,l({key:this.getEntryKey(n,t),index:t},this.getRowOptions(n),{parent:this})))}return this.rows}},{key:"renderHeaderCell",value:function(e){return Lc.createElement("th",{style:e.headerStyle,ref:"columnHeader"+e.id},this.renderColumnHeader(e))}},{key:"renderColumnHeader",value:function(e){return"function"==typeof e.headerName?e.headerName():e.headerName}},{key:"getEntries",value:function(){return this.entries||[]}},{key:"columnDefaults",value:function(e,t){e.id=t}},{key:"setColumns",value:function(e){this.columns=e;for(var t=0;t<this.columns.length;t+=1)this.columnDefaults(this.columns[t],t)}}]),t}(Lc.Primitive("table")))||cv,yb=(hv=fv=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.transitionDuration=.4,O(n,"collapsing",dv,y(n)),O(n,"collapsed",pv,y(n)),n}return h(t,e),t}(Jc),dv=R(hv.prototype,"collapsing",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"0",transitionTimingFunction:"ease",transitionDuration:"".concat(this.transitionDuration,"s"),transitionProperty:"margin-top",transitionDelay:"-0.15s"}}}),pv=R(hv.prototype,"collapsed",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"-100% !important",transitionDelay:"0s !important"}}}),hv),bb=(gv=kv=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"panel",mv,y(n)),O(n,"heading",vv,y(n)),O(n,"button",yv,y(n)),O(n,"collapsedButton",bv,y(n)),n}return h(t,e),t}(sb),mv=R(gv.prototype,"panel",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{boxShadow:null,borderWidth:"1px",borderColor:"#ccc !important",borderRadius:"3px"}}}),vv=R(gv.prototype,"heading",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"10px 15px",borderBottom:"1px solid transparent",borderTopLeftRadius:"3px",borderTopRightRadius:"3px",backgroundColor:"#fefefe",":hover":{backgroundColor:"#f3f3f3"}}}}),yv=R(gv.prototype,"button",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"0",marginBottom:"0",fontSize:"16px",color:"inherit",cursor:"pointer",":hover":{color:"inherit"},":before":{transition:"transform .2s linear",fontFamily:"'FontAwesome'",content:'"\\f107"',color:"grey",display:"inline-block",lineHeight:"0.7em",width:"0.7em",fontSize:"150%",verticalAlign:"bottom",height:"0.7em",textAlign:"center",transform:"rotate(0deg)",marginRight:".2em"}}}}),bv=R(gv.prototype,"collapsedButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{":before":{transform:"rotate(-90deg) !important"}}}}),gv),kb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"tbody"}},{key:"render",value:function(){return Lc.createElement("tr",null,w(d(t.prototype),"render",this).call(this))}}]),t}(mb),wb=(wv=xv=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"button",Ev,y(n)),O(n,"collapsedButton",Sv,y(n)),O(n,"heading",Cv,y(n)),n}return h(t,e),t}(Jc),Ev=R(wv.prototype,"button",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"0",marginBottom:"0",fontSize:"16px",color:"inherit",cursor:"pointer",":hover":{color:"inherit"},":after":{fontFamily:"'FontAwesome'",content:'"\\f107"',color:"grey",float:"left",fontWeight:"bold",width:"0.7em",fontSize:"130%",verticalAlign:"top",height:"0.7em",marginTop:"-0.2em",textAlign:"center"}}}}),Sv=R(wv.prototype,"collapsedButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{":after":{content:'"\\f105" !important'}}}}),Cv=R(wv.prototype,"heading",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"10px 15px",backgroundColor:"initial !important"}}}),wv),Eb=new wb,Sb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"tbody"}},{key:"getDefaultOptions",value:function(){return{collapsed:!0}}},{key:"onMount",value:function(){var e=this;this.toggleButton.addClickListener(function(){return e.toggle()})}},{key:"toggle",value:function(){this.options.collapsed?this.expand():this.collapse()}},{key:"expand",value:function(){w(d(t.prototype),"expand",this).call(this,this.contentArea),this.toggleButton.removeClass(Eb.collapsedButton)}},{key:"collapse",value:function(){var e=this;w(d(t.prototype),"collapse",this).call(this,this.contentArea),setTimeout(function(){e.toggleButton.addClass(Eb.collapsedButton)},500*this.getCollapsibleStyleSheet().transitionDuration)}},{key:"redraw",value:function(){return!!w(d(t.prototype),"redraw",this).call(this)&&(this.options.collapsed?(this.toggleButton.addClass(Eb.collapsedButton),this.contentArea.addClass(this.getCollapsibleStyleSheet().collapsed),this.contentArea.addClass("hidden")):(this.toggleButton.removeClass(Eb.collapsedButton),this.contentArea.removeClass(this.getCollapsibleStyleSheet().collapsed),this.contentArea.removeClass("hidden")),!0)}},{key:"getInitialCollapsedContent",value:function(){return this.renderCollapsible(this.options.entry)}},{key:"render",value:function(){return[Lc.createElement("tr",{className:Eb.heading},w(d(t.prototype),"render",this).call(this)),Lc.createElement("tr",null,Lc.createElement("td",{style:{overflow:"hidden",padding:"0px"},colspan:this.options.columns.length},Lc.createElement("div",{ref:"contentArea",className:"".concat(this.getCollapsibleStyleSheet().collapsed," hidden")},this.getInitialCollapsedContent())))]}}]),t}(pt(mb)),Cb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toggle",value:function(){this._haveExpanded||(this._haveExpanded=!0,this.redrawCollapsible()),w(d(t.prototype),"toggle",this).call(this)}},{key:"redrawCollapsible",value:function(){Lc.renderingStack.push(this),this.contentArea.options.children=this.renderCollapsible(this.options.entry),Lc.renderingStack.pop(),this.contentArea.redraw()}},{key:"getInitialCollapsedContent",value:function(){return[]}}]),t}(Sb),xb=ft(vb),Tb=gt(vb),Ab=(Tv=Mv=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"form",Av,y(n)),O(n,"formGroup",Lv,y(n)),O(n,"formField",Iv,y(n)),O(n,"sameLine",Nv,y(n)),n.separatedLineInputStyle={marginRight:"0.5em",width:"100%",height:"2.4em"},O(n,"separatedLine",Ov,y(n)),O(n,"hasError",Rv,y(n)),n}return h(t,e),t}(Jc),Av=R(Tv.prototype,"form",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0 auto"}}}),Lv=R(Tv.prototype,"formGroup",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"10px"}}}),Iv=R(Tv.prototype,"formField",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">label":{width:"100%"},display:"block",padding:"6px 0px",lineHeight:"1.42857143",color:"#555",maxWidth:"600px",margin:"0 auto","[disabled]":{opacity:"1",cursor:"not-allowed"},"[readonly]":{opacity:"1"}}}}),Nv=R(Tv.prototype,"sameLine",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">label>*:nth-child(1)":{display:"inline-block",textAlign:"right",paddingRight:"1em",width:"30%",verticalAlign:"middle"},">label>*:nth-child(2)":{display:"inline-block",width:"70%",verticalAlign:"middle"}}}}),Ov=R(Tv.prototype,"separatedLine",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"6px 10px",">label>*:nth-child(1)":{verticalAlign:"sub"},">label>input":this.separatedLineInputStyle,">label>select":this.separatedLineInputStyle,">label>textarea":this.separatedLineInputStyle,">label>input[type='checkbox']":{marginLeft:"10px",verticalAlign:"middle"}}}}),Rv=R(Tv.prototype,"hasError",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#a94442"}}}),Tv),Lb=(Pv=Ze(Ab))(Dv=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.form)}},{key:"onMount",value:function(){this.addNodeListener("submit",function(e){return e.preventDefault()})}}]),t}(Lc.Primitive("form")))||Dv,Ib=(Bv=Ze(Ab))(_v=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.formGroup)}},{key:"setError",value:function(e){this.errorField.node.textContent=e,this.addClass(this.styleSheet.hasError)}},{key:"removeError",value:function(){this.errorField.node.textContent="",this.removeClass(this.styleSheet.hasError)}},{key:"getErrorField",value:function(){return Lc.createElement("span",{ref:"errorField",style:{float:"right"}})}},{key:"getChildrenToRender",value:function(){return[this.render(),this.getErrorField()]}}]),t}(Lc.Element))||_v,Nb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"inline",value:function(){return!(!1===this.options.inline||this.parent&&this.parent.options&&!1===this.parent.options.inline)}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.formField),this.inline()?e.addClass(this.styleSheet.sameLine):e.addClass(this.styleSheet.separatedLine)}},{key:"getLabel",value:function(){return this.options.label?Lc.createElement("strong",null,this.options.label):null}},{key:"render",value:function(){return this.options.contentFirst?[Lc.createElement("label",null,[w(d(t.prototype),"render",this).call(this),this.getLabel()])]:[Lc.createElement("label",null,[this.getLabel(),w(d(t.prototype),"render",this).call(this)])]}}]),t}(Ib),Ob=(Fv=Ze(bb))(Uv=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toggle",value:function(){this.options.collapsed?this.expand():this.collapse()}},{key:"expand",value:function(){w(d(t.prototype),"expand",this).call(this,this.contentArea),this.toggleButton.removeClass(this.styleSheet.collapsedButton)}},{key:"collapse",value:function(){w(d(t.prototype),"collapse",this).call(this,this.contentArea),this.toggleButton.addClass(this.styleSheet.collapsedButton)}},{key:"setTitle",value:function(e){this.options.title=e,this.toggleButton.setChildren(e)}},{key:"getChildrenToRender",value:function(){var e=this,t="",n="",i="",r={};return this.options.collapsed&&(n=this.styleSheet.collapsedButton,t=this.styleSheet.collapsed,i="hidden"),this.options.noPadding||(r={padding:"8px 8px"}),[Lc.createElement("div",{className:this.styleSheet.heading},Lc.createElement("div",{ref:"toggleButton",className:"".concat(this.styleSheet.button," ").concat(n),onClick:function(){return e.toggle()}},this.getTitle())),Lc.createElement("div",{style:{overflow:"hidden"}},Lc.createElement("div",{ref:"contentArea",className:"".concat(t," ").concat(i),style:r},this.render()))]}}]),t}(pt(ub)))||Uv,Rb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toggle",value:function(){this._haveExpanded||(this._haveExpanded=!0,Lc.renderingStack.push(this),this.contentArea.options.children=this.render(),Lc.renderingStack.pop(),this.contentArea.redraw(),this.delayedMount()),w(d(t.prototype),"toggle",this).call(this)}},{key:"render",value:function(){return this._haveExpanded?this.getDelayedChildren():[]}}]),t}(Ob),Mb=(zv=qv=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.rowHeight=52,O(n,"default",Wv,y(n)),O(n,"tableContainer",Hv,y(n)),O(n,"scrollablePanel",Vv,y(n)),O(n,"fakePanel",Gv,y(n)),O(n,"footer",jv,y(n)),O(n,"jumpToButton",Yv,y(n)),O(n,"table",Jv,y(n)),n}return h(t,e),t}(Jc),Wv=R(zv.prototype,"default",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",width:"100%",display:"flex",flexDirection:"column",position:"relative",overflow:"auto",overflowY:"hidden"}}}),Hv=R(zv.prototype,"tableContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",height:"100%",width:"100%",position:"relative"}}}),Vv=R(zv.prototype,"scrollablePanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"auto",height:"calc(100% - 30px)",width:"100%"}}}),Gv=R(zv.prototype,"fakePanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),jv=R(zv.prototype,"footer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:"bold",textAlign:"center",position:"absolute",bottom:"0px",width:"100%",whiteSpace:"nowrap",paddingBottom:"15px",paddingTop:"3px"}}}),Yv=R(zv.prototype,"jumpToButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"5px",padding:"2.3px 10px",verticalAlign:"bottom"}}}),Jv=R(zv.prototype,"table",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"calc(100% - 15px)",marginBottom:"0px",top:"0px",position:"absolute",pointerEvents:"none",">tbody>tr>td":{height:"".concat(this.rowHeight,"px !important"),whiteSpace:"nowrap !important"}}}}),zv),Pb=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),n=b(this,d(t).call(this)),n.rawEntries=e,n.options=i,n.cacheEntries(),n}return h(t,e),o(t,[{key:"getRawEntries",value:function(){return this.rawEntries}},{key:"cacheEntries",value:function(){this.cachedEntries=this.sortEntries(this.filterEntries(this.getRawEntries())),this.dispatch("update")}},{key:"getEntries",value:function(){return this.cachedEntries}},{key:"getEntriesCount",value:function(){return this.cachedEntries.length}},{key:"getEntriesRange",value:function(e,t){return this.cachedEntries.slice(e,t)}},{key:"updateEntries",value:function(e){this.rawEntries=e,this.cacheEntries()}},{key:"sortEntries",value:function(e){return this.getComparator()?e.sort(this.getComparator()):e}},{key:"filterEntries",value:function(e){var t=this.getFilter();return t?e.filter(t):e}},{key:"getComparator",value:function(){return this.options.comparator}},{key:"setComparator",value:function(e){this.options.comparator=e,this.cacheEntries()}},{key:"getFilter",value:function(){return this.options.filter}},{key:"setFilter",value:function(e){this.options.filter=e,this.cacheEntries()}}]),t}(Gu),Db=(Xv=iy=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.baseColor=function(){return n.themeProperties.COLOR_PRIMARY},n.arrowColor=function(){return qe(n.baseColor(),.8)},n.arrowBackground=function(){return n.baseColor()},n.arrowHoverColor=function(){return qe(n.baseColor(),1)},n.arrowHoverBackground=function(){return qe(n.baseColor(),-.3)},n.transitionTime=.15,n.arrow={zIndex:"1",alignItems:"center",padding:".3em",fontSize:"150% !important",height:"100%",position:"absolute",cursor:"pointer",top:0,color:function(){return n.arrowColor()},backgroundColor:function(){return n.arrowBackground()},":hover":{color:function(){return n.arrowHoverColor()},backgroundColor:function(){return n.arrowHoverBackground()}}},O(n,"leftArrow",Kv,y(n)),O(n,"rightArrow",Qv,y(n)),O(n,"horizontalOverflow",Zv,y(n)),O(n,"childrenContainer",$v,y(n)),O(n,"swipeAnimation",ey,y(n)),O(n,"hiddenArrow",ty,y(n)),O(n,"pusherContainer",ny,y(n)),n}return h(t,e),t}(Jc),Kv=R(Xv.prototype,"leftArrow",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object.assign({},this.arrow,{left:0,borderRight:function(){return"2px solid "+e.arrowHoverBackground()}})}}),Qv=R(Xv.prototype,"rightArrow",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object.assign({},this.arrow,{right:0,borderLeft:function(){return"2px solid "+e.arrowHoverBackground()}})}}),Zv=R(Xv.prototype,"horizontalOverflow",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",width:"100%",">:first-child":{display:"flex"},">:last-child":{display:"flex"}}}}),$v=R(Xv.prototype,"childrenContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",overflow:rc.isMobileDevice()?"auto":"hidden",display:"flex"}}}),ey=R(Xv.prototype,"swipeAnimation",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:"margin-left "+this.transitionTime+"s ease"}}}),ty=R(Xv.prototype,"hiddenArrow",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"none !important"}}}),ny=R(Xv.prototype,"pusherContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:rc.isMobileDevice()?"auto":"hidden",position:"relative",display:"flex",width:"100%"}}}),Xv),Bb=(ry=Ze(Db))(ay=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{swipePercent:.5}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.horizontalOverflow)}},{key:"getChildrenToRender",value:function(){return[Lc.createElement(kf,{ref:"leftArrow",icon:"chevron-left",className:"".concat(this.styleSheet.leftArrow," ").concat(this.styleSheet.hiddenArrow)}),Lc.createElement("div",{ref:"childrenContainer",className:this.styleSheet.childrenContainer},Lc.createElement("div",{ref:"swipeHelperChild"}),Lc.createElement("div",{ref:"pusherContainer",className:this.styleSheet.pusherContainer},this.render())),Lc.createElement(kf,{ref:"rightArrow",icon:"chevron-right",className:"".concat(this.styleSheet.rightArrow," ").concat(this.styleSheet.hiddenArrow)})]}},{key:"appendChild",value:function(){var e;(e=this.pusherContainer).appendChild.apply(e,arguments)}},{key:"eraseChild",value:function(){var e;(e=this.pusherContainer).eraseChild.apply(e,arguments)}},{key:"checkForOverflow",value:function(){var e=this.pusherContainer.children;if(e.length){var t=!1,n=!1,i=this.node.getBoundingClientRect(),r=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=u.node.getBoundingClientRect();t|=i.left+i.width<c.left+c.width-1,n|=i.left>c.left}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}var h=!this.leftArrow.getWidth();n&&h?this.leftArrow.removeClass(this.styleSheet.hiddenArrow):n||h||this.leftArrow.addClass(this.styleSheet.hiddenArrow);var d=!this.rightArrow.getWidth();t&&d?this.rightArrow.removeClass(this.styleSheet.hiddenArrow):t||d||this.rightArrow.addClass(this.styleSheet.hiddenArrow)}}},{key:"scrollContent",value:function(e){var t,n=this,i=this.pusherContainer.node;t=e<0?Math.max(0,i.scrollLeft+e*this.getWidth()):Math.min(i.scrollWidth-this.getWidth(),i.scrollLeft+e*this.getWidth()),e<0&&(this.swipeHelperChild.setStyle("marginLeft",t-i.scrollLeft),i.scrollLeft=t),this.pusherContainer.setWidth("fit-content"),this.swipeHelperChild.addClass(this.styleSheet.swipeAnimation),e<0?this.swipeHelperChild.setStyle("marginLeft",0):this.swipeHelperChild.setStyle("marginLeft",i.scrollLeft-t),setTimeout(function(){n.pusherContainer.setWidth("100%"),n.swipeHelperChild.removeClass(n.styleSheet.swipeAnimation),i.scrollLeft=t,n.swipeHelperChild.setStyle("marginLeft",0),n.checkForOverflow()},1e3*this.styleSheet.transitionTime)}},{key:"scrollContentLeft",value:function(){this.scrollContent(-this.options.swipePercent)}},{key:"scrollContentRight",value:function(){this.scrollContent(this.options.swipePercent)}},{key:"handleEventAndHandlePositionChange",value:function(e){e()}},{key:"onMount",value:function(){var e=this;this.pusherContainer.addNodeListener("scroll",function(){return e.handleEventAndHandlePositionChange(function(){return e.checkForOverflow()})}),this.addListener("resize",function(){return e.handleEventAndHandlePositionChange(function(){return e.checkForOverflow()})}),this.rightArrow.addClickListener(function(){return e.handleEventAndHandlePositionChange(function(){return e.scrollContentRight()})}),this.leftArrow.addClickListener(function(){return e.handleEventAndHandlePositionChange(function(){return e.scrollContentLeft()})}),window.addEventListener("resize",function(){return e.handleEventAndHandlePositionChange(function(){return e.checkForOverflow()})}),setTimeout(function(){return e.checkForOverflow()})}}]),t}(Lc.Element))||ay,_b=(oy=dy=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"tab",sy,y(n)),O(n,"activeTab",ly,y(n)),O(n,"nav",uy,y(n)),O(n,"switcher",cy,y(n)),O(n,"tabArea",hy,y(n)),n}return h(t,e),t}(Jc),sy=R(oy.prototype,"tab",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"none",display:"inline-block",position:"relative"}}}),ly=R(oy.prototype,"activeTab",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),uy=R(oy.prototype,"nav",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{listStyle:"none"}}}),cy=R(oy.prototype,"switcher",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",overflow:"auto"}}}),hy=R(oy.prototype,"tabArea",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column"}}}),oy),Fb=(py=vy=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"tab",fy,y(n)),O(n,"activeTab",gy,y(n)),O(n,"nav",my,y(n)),n}return h(t,e),t}(_b),fy=R(py.prototype,"tab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"-1px",textDecoration:"none !important",marginRight:"2px",lineHeight:"1.42857143",border:"1px solid transparent",borderRadius:"4px 4px 0 0",padding:"8px",paddingLeft:"10px",paddingRight:"10px",":hover":{cursor:"pointer",backgroundColor:"#eee",color:"#555",border:"1px solid #ddd",borderBottomColor:"transparent"}}}}),gy=R(py.prototype,"activeTab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#555 !important",cursor:"default !important",backgroundColor:"#fff !important",border:"1px solid #ddd !important",borderBottomColor:"transparent !important"}}}),my=R(py.prototype,"nav",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"1px solid #ddd",paddingLeft:"0",marginBottom:"0"}}}),py),Ub=(yy=Ey=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"tab",by,y(n)),O(n,"activeTab",ky,y(n)),O(n,"nav",wy,y(n)),n}return h(t,e),t}(_b),by=R(yy.prototype,"tab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textDecoration:"none !important",lineHeight:"1.42857143",paddingTop:"6px",paddingLeft:"8px",paddingRight:"8px",paddingBottom:"4px",color:"#666",borderBottom:"2px solid transparent",":hover":{cursor:"pointer",color:"rgba(51,122,183,1)"}}}}),ky=R(yy.prototype,"activeTab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:"bold",color:"rgba(51,122,183,1)",cursor:"default !important",borderBottom:"2px solid rgba(51,122,183,1) !important"}}}),wy=R(yy.prototype,"nav",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",borderBottom:"1px solid #aaa"}}}),yy),zb=(Sy=Ny=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.transitionTime=.3,O(n,"tab",Cy,y(n)),O(n,"activeTab",xy,y(n)),O(n,"nav",Ty,y(n)),O(n,"activeBar",Ay,y(n)),O(n,"activeBarAnimated",Ly,y(n)),O(n,"activeOnRender",Iy,y(n)),n}return h(t,e),t}(_b),Cy=R(Sy.prototype,"tab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{textDecoration:"none !important",padding:function(){return e.themeProperties.FLAT_TAB_AREA_PADDING_SIDES},letterSpacing:"0.5px",color:function(){return qe(e.themeProperties.COLOR_FOREGROUND_BODY,.4)+"!important"},fontWeight:"bold",":hover":{cursor:"pointer",color:function(){return qe(e.themeProperties.COLOR_FOREGROUND_BODY,.6)+"!important"}}}}}),xy=R(Sy.prototype,"activeTab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{color:function(){return qe(e.themeProperties.COLOR_FOREGROUND_BODY,.8)+"!important"},cursor:"default !important"}}}),Ty=R(Sy.prototype,"nav",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{whiteSpace:"nowrap",position:"relative",paddingTop:"4px",backgroundColor:function(){return e.themeProperties.COLOR_FOREGROUND_BODY}}}}),Ay=R(Sy.prototype,"activeBar",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{height:3,backgroundColor:function(){return e.themeProperties.COLOR_PRIMARY},position:"absolute",left:0,bottom:0}}}),Ly=R(Sy.prototype,"activeBarAnimated",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:"".concat(this.transitionTime,"s width, ").concat(this.transitionTime,"s left")}}}),Iy=R(Sy.prototype,"activeOnRender",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{paddingBottom:function(){return e.themeProperties.FLAT_TAB_AREA_PADDING_SIDES-3},borderBottom:function(){return"3px solid "+e.themeProperties.COLOR_PRIMARY}}}}),Sy),Wb=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.baseColor=function(){return n.themeProperties.COLOR_FOREGROUND_BODY},n.arrowColor=function(){return qe(n.baseColor(),.4)},n.arrowBackground=function(){return n.baseColor()},n.arrowHoverColor=function(){return qe(n.baseColor(),.8)},n.arrowHoverBackground=function(){return qe(n.baseColor(),.1)},n}return h(t,e),t}(Db),Hb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.tab),this.options.active&&e.addClass(this.styleSheet.activeTab)}},{key:"getDefaultOptions",value:function(){return{newTab:!1}}},{key:"canOverwrite",value:function(e){return w(d(t.prototype),"canOverwrite",this).call(this,e)&&this.options.panel===e.options.panel}},{key:"setActive",
value:function(e){var t=this;this.options.active=e,this.redraw(),e&&this.options.activeTabDispatcher.setActive(this.getPanel(),function(){t.setActive(!1)})}},{key:"getPanel",value:function(){return this.options.panel}},{key:"getTitle",value:function(){if(this.options.title)return this.options.title;var e=this.getPanel();return"function"==typeof e.getTitle?e.getTitle():e.options.title}},{key:"render",value:function(){return[this.getTitle()]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.options.active&&this.setActive(!0),this.addClickListener(function(){e.setActive(!0)}),this.options.panel&&this.options.panel.addListener&&this.attachListener(this.options.panel,"show",function(){e.setActive(!0)})}}]),t}(Xd),Vb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(Lc.Element),Gb=(Oy=Ze(Fb))(Ry=My=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.activeTabDispatcher=new Ju,n}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{autoActive:!0,panelClass:null,titleAreaClass:null}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.tabArea)}},{key:"createTabPanel",value:function(e){return[Lc.createElement(Hb,{panel:e,activeTabDispatcher:this.activeTabDispatcher,active:e.options.active,href:e.options.tabHref,styleSheet:this.styleSheet}),e]}},{key:"appendChild",value:function(e,t){var n=this.createTabPanel(e),i=S(n,2),r=i[0],a=i[1];this.options.children.push(e),this.titleArea.appendChild(r),this.switcherArea.appendChild(a,t||!this.options.lazyRender)}},{key:"getTitleArea",value:function(e){var t=this.styleSheet.nav;return this.options.titleAreaClass&&(t+=" "+this.options.titleAreaClass),Lc.createElement(Vb,{ref:"titleArea",className:t},e)}},{key:"getSwitcher",value:function(e){var t=this.styleSheet.switcher;return this.options.panelClass&&(t+=" "+this.options.panelClass),Lc.createElement(Of,{className:t,ref:"switcherArea",lazyRender:this.options.lazyRender},e)}},{key:"getChildrenToRender",value:function(){var e,t=[],n=[],i=!0,r=!1,a=void 0;try{for(var o,s=M(this.render())[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,u=this.createTabPanel(l),c=S(u,2),h=c[0],d=c[1];this.activePanel===d&&(e=h),t.push(h),n.push(d)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}if(e)for(var p=0;p<n.length;p+=1){var f=t[p],g=n[p];f.options.active&&(f.options.active=!1),n.options.active&&(n.options.active=!1),e===f&&(g.options.active=!0,f.options.active=!0)}else{var m=!0,v=!1,y=void 0;try{for(var b,k=t[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){var w=b.value;w.options.active&&(e=w)}}catch(e){v=!0,y=e}finally{try{m||null==k.return||k.return()}finally{if(v)throw y}}}return this.options.autoActive&&!e&&t.length>0&&(t[0].options.active=!0),[this.getTitleArea(t),this.getSwitcher(n)]}},{key:"setActive",value:function(e){this.activeTabDispatcher.setActive(e)}},{key:"getActive",value:function(){return this.activeTabDispatcher.getActive()}},{key:"onSetActive",value:function(e){this.switcherArea.setActive(e),this.activePanel=e}},{key:"onMount",value:function(){var e=this;this.attachListener(this.activeTabDispatcher,function(t){e.onSetActive(t)}),this.addListener("resize",function(){e.switcherArea.dispatch("resize")})}}]),t}(Lc.Element))||Ry,jb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setActive",value:function(e){var n=this;w(d(t.prototype),"setActive",this).call(this,e),e&&this.options.activeTabTitleDispatcher.setActive(this,function(){n.setActive(!1)})}}]),t}(Hb),Yb=(Py=Ze(zb))(Dy=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.barLeft=0,n.barWidth=0,n}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.nav)}},{key:"getChildrenToRender",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.render()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;a.options.active&&a.addClass(this.styleSheet.activeOnRender)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return[Lc.createElement(Bb,{ref:"horizontalOverflow",styleSheet:Wb},this.render(),Lc.createElement("div",{ref:"bar",className:this.styleSheet.activeBar,style:{left:this.barLeft,width:this.barWidth}}))]}},{key:"setActiveBar",value:function(e){var t=0,n=0,i=!0,r=!1,a=void 0;try{for(var o,s=M(this.render())[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,u=l.getWidth();if(l===e){n=u;break}t+=u}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}this.bar.setStyle({left:t,width:n}),this.barLeft=t,this.barWidth=n}},{key:"setActive",value:function(e){var t=this;this.activeTab&&(this.setActiveBar(this.activeTab),this.activeTab.removeClass(this.styleSheet.activeOnRender)),setTimeout(function(){t.bar.addClass(t.styleSheet.activeBarAnimated),t.setActiveBar(e)}),setTimeout(function(){t.activeTab&&t.activeTab.removeClass(t.styleSheet.activeOnRender),e.addClass(t.styleSheet.activeOnRender),t.bar.removeClass(t.styleSheet.activeBarAnimated),t.bar.setWidth(0),t.activeTab=e},1e3*this.styleSheet.transitionTime)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);var n=!0,i=!1,r=void 0;try{for(var a,o=this.options.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.options.active&&this.setActive(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.attachListener(this.options.activeTabTitleDispatcher,function(t){return e.setActive(t)}),this.addListener("resize",function(){return e.horizontalOverflow.dispatch("resize")})}}]),t}(Vb))||Dy,Jb=(By=Ze(zb))(_y=Fy=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.activeTabTitleDispatcher=new Ju,n}return h(t,e),o(t,[{key:"getTitleArea",value:function(e){return Lc.createElement(Yb,{ref:"titleArea",activeTabTitleDispatcher:this.activeTabTitleDispatcher,className:this.options.titleAreaClass||""},e)}},{key:"createTabPanel",value:function(e){return[Lc.createElement(jb,{panel:e,activeTabDispatcher:this.activeTabDispatcher,activeTabTitleDispatcher:this.activeTabTitleDispatcher,active:e.options.active,href:e.options.tabHref,styleSheet:this.styleSheet}),e]}}]),t}(Gb))||_y,qb=(Uy=jy=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"rowList",zy,y(n)),O(n,"DEFAULT",Wy,y(n)),O(n,"LARGE",Hy,y(n)),O(n,"alternativeColorsOddRow",Vy,y(n)),O(n,"noAlternativeColors",Gy,y(n)),n}return h(t,e),t}(vh),zy=R(Uy.prototype,"rowList",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),Wy=R(Uy.prototype,"DEFAULT",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",width:"100%",minHeight:this.themeProperties.ROW_LIST_ROW_HEIGHT,paddingLeft:this.themeProperties.ROW_LIST_ROW_PADDING,paddingRight:this.themeProperties.ROW_LIST_ROW_PADDING,backgroundColor:this.themeProperties.COLOR_BACKGROUND}}}),Hy=R(Uy.prototype,"LARGE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minHeight:this.themeProperties.ROW_LIST_ROW_HEIGHT_LARGE,paddingLeft:this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,paddingRight:this.themeProperties.ROW_LIST_ROW_PADDING_LARGE}}}),Vy=R(Uy.prototype,"alternativeColorsOddRow",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE}}}),Gy=R(Uy.prototype,"noAlternativeColors",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderTopWidth:this.themeProperties.ROW_LIST_ROW_BORDER_WIDTH,borderTopStyle:this.themeProperties.BASE_BORDER_STYLE,borderTopColor:this.themeProperties.BASE_BORDER_COLOR}}}),Uy),Xb=(Yy=Ze(qb))(Jy=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.rowList)}},{key:"getDefaultOptions",value:function(e){return{alternateColors:!0}}},{key:"getRowClasses",value:function(e){var t=this.styleSheet.DEFAULT;this.getSize()&&(t+=this.styleSheet.Size(this.getSize()));var n=this.options.alternateColors;return n&&e%2==1?t+=this.styleSheet.alternativeColorsOddRow:!n&&e>0&&(t+=this.styleSheet.noAlternativeColors),t}},{key:"render",value:function(){var e=this,t=this.options,n=t.rows,i=t.rowParser;return n.map(function(t,n){return Lc.createElement("div",{className:e.getRowClasses(n)},i(t))})}}]),t}(yd))||Jy,Kb=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.name}},{key:"getIsoCode",value:function(){return this.isoCode}},{key:"getEmojiName",value:function(){return"flag_"+this.getIsoCode().toLowerCase()}}]),t}(fp),Qb=function(e){return{id:0,name:"",toString:function(){return e||"All Countries"}}},Zb=function(e){return{id:-1,name:"",toString:function(){return e||"None"}}},$b=function(e,t){return e.name>t.name?1:-1},ek=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"allWithNone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"None";return[Zb(e)].concat(C(this.all().sort($b)))}},{key:"getCountriesFromIds",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;n.push(tk.get(l))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}var u=n.sort($b);return t&&u.unshift(Qb()),u}}]),t}(mp),tk=new ek("country",Kb),nk=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.taskSummaries=new Map,n}return h(t,e),o(t,[{key:"getName",value:function(){}},{key:"getCustomSetting",value:function(e,t){var n=e.split(":"),i=this.customSettings,r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(!(u in i))return t;i=i[u]}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i}},{key:"getParsedCustomSetting",value:function(e,t){return JSON.parse(this.getCustomSetting(e,t))}},{key:"setCustomSetting",value:function(e,t){var n=e.split(":"),i=n.pop();this.customSettings||(this.customSettings={});var r=this.customSettings,a=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c in r||(r[c]={}),r=r[c]}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}r[i]=t;var h={key:e,rawValue:t,origin:"set"};try{h.value=JSON.parse(t)}catch(e){h.value=t}this.dispatch("updateCustomSetting",h)}},{key:"saveCustomSetting",value:function(e,t){if(this.id!=USER.id)return void console.error("Invalid user");this.dispatch("updateCustomSetting",{key:e,value:t,origin:"save"});var n={customSettingsKey:e,customSettingsValue:t};this.timeouts||(this.timeouts=new Map),this.timeouts.has(e)&&clearTimeout(this.timeouts.get(e)),this.timeouts.set(e,setTimeout(function(){zu.postJSON("/accounts/profile_changed/",n).then(function(){},function(){})}))}},{key:"applyEvent",value:function(e){"setCustomSetting"===e.type?(console.log("Updated custom settings: ",e),this.setCustomSetting(e.data.key,e.data.value)):w(d(t.prototype),"applyEvent",this).call(this,e)}},{key:"getCodeFontSize",value:function(){return this.getParsedCustomSetting("workspace:codeFontSize",14)}},{key:"getFileFontSize",value:function(){return this.getParsedCustomSetting("workspace:fileFontSize",14)}},{key:"getTabSize",value:function(){return this.getParsedCustomSetting("workspace:tabSize",4)}},{key:"getShowLineNumber",value:function(){return this.getParsedCustomSetting("workspace:showLineNumber",!0)}},{key:"getShowPrintMargin",value:function(){return this.getParsedCustomSetting("workspace:showPrintMargin",!1)}},{key:"getPrintMarginSize",value:function(){return this.getParsedCustomSetting("workspace:printMarginSize",80)}},{key:"getBasicAutocompletionStatus",value:function(){return this.getParsedCustomSetting("workspace:enableBasicAutocompletion",!0)}},{key:"getLiveAutocompletionStatus",value:function(){return this.getParsedCustomSetting("workspace:enableLiveAutocompletion",!0)}},{key:"getSnippetsStatus",value:function(){return this.getParsedCustomSetting("workspace:enableSnippets",!1)}},{key:"getShowTagsInArchive",value:function(e){return this.getParsedCustomSetting("archive:showTags-"+e,!1)}}]),t}(fp),ik=function(e){function t(){return r(this,t),b(this,d(t).call(this,"user",nk))}return h(t,e),o(t,[{key:"getCurrentUser",value:function(){return USER}}]),t}(mp),rk=new ik,ak=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDisplayHandle",value:function(){return(this.displayName?this.name||this.username:this.username||this.name)||"user-"+this.id}},{key:"getProfileUrl",value:function(){return this.username?"/user/"+this.username:"/userid/"+this.id}},{key:"getRating",value:function(){return this.rating}},{key:"getCountry",value:function(){return tk.get(this.countryId)}}]),t}(fp),ok=function(e){function t(){return r(this,t),b(this,d(t).call(this,"publicuser",ak,{fetchTimeoutDuration:20,maxFetchObjectCount:512,fetchURL:"/accounts/public_user_profiles/"}))}return h(t,e),o(t,[{key:"getCountries",value:function(){var e=new Set,t=this.all(),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s&&s.countryId&&!e.has(s.countryId)&&e.add(s.countryId)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return tk.getCountriesFromIds(e)}}]),t}(bp(mp)),sk=new ok;window.USER=Object.assign({id:0,customSettings:{}},window.USER||{}),window.USER=rk.fakeCreate(window.USER);var lk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getUser",value:function(){return rk.get(this.userId)}},{key:"isRead",value:function(){return this.id<=this.getUser().lastReadNotificationId}}]),t}(fp),uk=new mp("UserNotification",lk,{dependencies:["user"]}),ck=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){var e=this.name,t=this.getParent();return t&&(e=t+" - "+e),e}},{key:"getParent",value:function(){return hk.get(this.parentId)}},{key:"getDepth",value:function(){for(var e=-1,t=this;t;)t=t.getParent(),e+=1;return e}}]),t}(fp),hk=new mp("tag",ck);hk.getTagByName=function(e){if(this._caseSensitiveCache||(this._caseSensitiveCache=new Map),this._caseSensitiveCache.has(e))return this._caseSensitiveCache.get(e);var t=!0,n=!1,i=void 0;try{for(var r,a=this.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.name===e)return this._caseSensitiveCache.set(e,o),o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null},hk.getTagByNameInsensitive=function(e){var t=e.toLocaleLowerCase();if(this._caseInsensitiveCache||(this._caseInsensitiveCache=new Map),this._caseInsensitiveCache.has(t))return this._caseInsensitiveCache.get(t);var n=!0,i=!1,r=void 0;try{for(var a,o=this.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.name.toLocaleLowerCase()===t)return this._caseInsensitiveCache.set(e,s),s}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return null};var dk=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.translationMap=new Map,n}return h(t,e),o(t,[{key:"toString",value:function(){var e=this.name;return this.localName&&this.localName!=this.name&&(e+=" ("+this.localName+")"),e}},{key:"buildTranslation",value:function(e){fk.dispatch("buildTranslationMap",this),e(this.translationMap)}}]),t}(fp),pk=function(e){function t(){return r(this,t),b(this,d(t).call(this,"Language",dk))}return h(t,e),o(t,[{key:"getLanguageForCode",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.isoCode===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setLocale",value:function(e){this.Locale!=e&&(this.Locale=e,this.dispatch("localeChange",e))}},{key:"getLocale",value:function(){return this.Locale}}]),t}(mp),fk=new pk,gk=null;Lc.TranslationElements=new Set,Lc.TranslationTextElement=function(e){function t(e){var n;if(r(this,t),1===arguments.length)n=b(this,d(t).call(this,e));else{var i;n=b(this,d(t).call(this,"")),(i=n).setValue.apply(i,arguments)}return b(n)}return h(t,e),o(t,[{key:"setValue",value:function(e){arguments.length>1?this.value=Array.from(arguments):this.value=e,this.node&&this.redraw()}},{key:"evaluateSprintf",value:function(){var e=gk&&gk.get(arguments.length<=0?void 0:arguments[0]);if(!e)return"";for(var t=1;t<arguments.length;t+=1)e=e.replace("%"+t,t<0||arguments.length<=t?void 0:arguments[t]);return e}},{key:"evaluate",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(Array.isArray(e)){arguments.length!==e.length&&console.error("Invalid arguments to evaluate ",Array.from(arguments));for(var r=e[0],a=1;a<arguments.length;a++)r+=arguments[a],r+=e[a];return r}return this.evaluateSprintf.apply(this,arguments)}},{key:"getValue",value:function(){var e=this.value;return e=Array.isArray(this.value)?this.evaluate.apply(this,C(e)):gk&&gk.get(e)||e}},{key:"toString",value:function(){return this.getValue()}},{key:"onMount",value:function(){Lc.TranslationElements.add(this)}},{key:"onUnmount",value:function(){Lc.TranslationElements.delete(this)}}]),t}(Lc.TextElement),Lc.T=function(e){return new Lc.TranslationTextElement(e)};var mk=null,vk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),yk=new mp("TranslationKey",vk),bk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLanguage",value:function(){return fk.get(this.languageId)}},{key:"getTranslationKey",value:function(){return yk.get(this.translationKeyId)}}]),t}(fp),kk=new mp("TranslationEntry",bk);fk.addListener("buildTranslationMap",function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=kk.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.languageId===e.id&&e.translationMap.set(o.getTranslationKey().value,o.value)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}});var wk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.classMap=this.constructor.classMap,w(d(t.prototype),"setOptions",this).call(this,e)}}]),t}(sp);wk.classMap=new op(op.GLOBAL);var Ek={cpuTime:function(e){return null==e?"-":Math.round(1e3*e)+" ms"},memory:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e)return"-";if(e<2048)return e+(t?"":" ")+"B";var n=e/1024,i="KB";return n>=1048576?(n/=1048576,i="GB"):n>=10240&&(n/=1024,i="MB"),n=Math.round(10*n)/10,n.toString()+(t?"":" ")+i},duration:function(e,t){e=new Sp(e);var n=[];if(t.days&&e.toDays()){var i=e.toDays()+" day";e.toDays()>=2&&(i+="s"),n.push(i)}if(t.hours&&e.getHours()){var r=e.getHours()+" hour";e.getHours()>=2&&(r+="s"),n.push(r)}if(t.minutes&&e.getMinutes()){var a=e.getMinutes()+" minute";e.getMinutes()>=2&&(a+="s"),n.push(a)}if(t.seconds&&e.getSeconds()){var o=e.getSeconds()+" second";e.getSeconds()>=2&&(o+="s"),n.push(o)}if(0===n.length)return"";if(1===n.length)return n[0];if(t.lastSeparator){return n.slice(0,-1).join(t.separator||" ")+t.lastSeparator+n[n.length-1]}return n.join(t.separator||" ")},truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,t);return"string"==typeof e&&(e=parseFloat(e)),Math.round(e*n)/n}},Sk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{color:"black",innerColor:"white",circleAttr:{radius:19,strokeWidth:2},textAttr:{text:"N/A",dy:".35em",textAnchor:"middle",strokeWidth:1,fontSize:14},fixed:!1,dragging:!1,secondLabelSign:1,secondLabelPadding:10}}},{key:"render",value:function(){var e=[Lc.createElement(ag.Circle,l({ref:"circle"},this.options.circleAttr,{fill:this.options.innerColor,stroke:this.options.color,center:this.options.data.center})),Lc.createElement(ag.Text,l({ref:"label"},this.options.textAttr,{fill:this.options.color,stroke:this.options.color,text:this.options.data.label+"",x:this.options.data.center.x,y:this.options.data.center.y}))];return this.options.data.hasOwnProperty("secondLabel")&&e.push(Lc.createElement(ag.Text,l({ref:"secondLabel"},this.options.textAttr,{fill:this.options.color,stroke:this.options.color,text:this.options.data.secondLabel+"",x:this.options.data.center.x,y:this.options.data.center.y+this.options.secondLabelSign*(this.options.circleAttr.radius+this.options.secondLabelPadding)}))),e}},{key:"onMount",value:function(){var e=this;this.getRadius()<7&&(this.label.setOpacity(0),this.circle.setAttribute("fill",this.options.color)),this.setStyle("cursor","pointer"),this._fixNodeCallback=function(){e.isFixed()?e.setFixed(!1):e.setFixed(!0)},this.addClickListener(this._fixNodeCallback),this.addDragListener({onStart:function(){e.dragging=!0},onDrag:function(t,n){var i=e.getCenter().x+t,r=e.getCenter().y+n;e.setCenter({x:i,y:r})},onEnd:function(){e.dragging=!1}})}},{key:"getGraph",value:function(){return this.options.graph}},{key:"getMarkup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={},i=this.getDefaultOptions();return this.options.color!==i.color&&(n.options=n.options||{},n.options.color=this.options.color),this.options.innerColor!==i.innerColor&&(n.options=n.options||{},n.options.innerColor=this.options.innerColor),this.getRadius()!==i.circleAttr.radius&&(n.options=n.options||{},n.options.circleAttr=n.options.circleAttr||{},n.options.circleAttr.radius=this.getRadius()),this.options.circleAttr.strokeWidth!==i.circleAttr.strokeWidth&&(n.options=n.options||{},n.options.circleAttr=n.options.circleAttr||{},n.options.circleAttr.strokeWidth=this.circle.getAttribute("stroke-width")),this.options.fixed&&(n.options=n.options||{},n.options.fixed=!0),n.label=this.getLabel(),n.center={},n.center.x=Ek.truncate(this.getCenter().x*e,1),n.center.y=Ek.truncate(this.getCenter().y*t,1),JSON.stringify(n).replace(/\"[^\"]*\":/g,function(e){return e.substring(1,e.length-2)+":"})}},{key:"getOutgoingEdges",value:function(){for(var e=this.getGraph(),t=[],n=0;n<e.edges.length;n+=1){var i=e.edges[n];(i.getSource()===this||!i.isDirected&&i.getTarget()===this)&&t.push(i)}return t}},{key:"getIngoingEdges",value:function(){for(var e=this.getGraph(),t=[],n=0;n<e.edges.length;n+=1){var i=e.edges[n];(i.getTarget()===this||!i.isDirected()&&i.getSource()===this)&&t.push(i)}return t}},{key:"getIncidentEdges",value:function(){for(var e=this.getGraph(),t=[],n=0;n<e.edges.length;n+=1){var i=e.edges[n];i.getSource()!==this&&i.getTarget()!==this||t.push(i)}return t}},{key:"setInnerColor",value:function(e){this.options.innerColor=e,this.circle.setAttribute("fill",this.options.innerColor)}},{key:"getInnerColor",value:function(){return this.options.innerColor}},{key:"setColor",value:function(e){this.options.color=e,this.circle.setAttribute("stroke",this.options.color),this.label.setAttribute("stroke",this.options.color),this.label.setAttribute("fill",this.options.color),this.secondLabel&&(this.secondLabel.setAttribute("stroke",this.options.color),this.secondLabel.setAttribute("fill",this.options.color))}},{key:"getColor",value:function(){return this.options.color}},{key:"setLabel",value:function(e){this.options.data.label=e,this.getGraph().options.nodes[this.getGraph().nodes.indexOf(this)].label=e,this.label.setText(e)}},{key:"getLabel",value:function(){return this.options.data.label}},{key:"boundCoords",value:function(e){var t=this.getGraph().getBox(),n=this.getRadius(),i=e.x;i<t.x+n&&(i=t.x+n),i>t.x+t.width-n&&(i=t.x+t.width-n);var r=e.y;return r<t.y+n&&(r=t.y+n),r>t.y+t.height-n&&(r=t.y+t.height-n),{x:i,y:r}}},{key:"setCenter",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e=this.boundCoords(e),this.options.data.center=e,this.circle.setCenter(e.x,e.y),this.label.setPosition(e.x,e.y),this.secondLabel&&this.secondLabel.setPosition(e.x,e.y+this.options.secondLabelSign*(this.getRadius()+this.options.secondLabelPadding)),t)for(var n=this.getIncidentEdges(),i=0;i<n.length;i+=1){var r=n[i];r.update()}this.getGraph().nodeCenterChanged(this,e)}},{key:"getCenter",value:function(){return this.options.data.center}},{key:"setFixed",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.options.fixed=e,!0===t&&(!0===e?this.circle.setAttribute("stroke-width",5):this.circle.setAttribute("stroke-width",2))}},{key:"isFixed",value:function(){return this.options.fixed}},{key:"setRadius",value:function(e){this.circle.setRadius(e),e<7?(this.label.setOpacity(0),this.circle.setAttribute("fill",this.options.color)):(this.label.setOpacity(1),this.circle.setAttribute("fill",this.options.innerColor))}},{key:"getRadius",value:function(){return this.circle.getRadius()}},{key:"getPopupPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&n.points.has(this)){var i=n.points.get(this);return{x:i.x+e,y:i.y+t}}}},{key:"changeColorTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Lf({func:function(t,i){n.setColor(Qc.interpolate(i.color,e,t))},context:{color:this.options.color},duration:t,startTime:r,dependsOn:i})}},{key:"moveTransition",value:function(e){var t=this;return new Lf({func:function(n,i){t.setCenter({x:(1-n)*i.coords.x+n*e.newCoords.x,y:(1-n)*i.coords.y+n*e.newCoords.y})},context:{coords:this.getCenter()},duration:e.duration,startTime:e.startTime,dependsOn:e.dependsOn})}},{key:"x",get:function(){return this.options.data.center.x}},{key:"y",get:function(){return this.options.data.center.y}}]),t}(bf(Gd(ag.Group))),Ck=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{color:"black",pathAttr:{fill:"none",strokeWidth:2},invisiblePathAttr:{opacity:0,fill:"none",strokeWidth:30},curveArcRadius:0,supportsBending:!0}}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.color=this.options.color||this.getDefaultOptions().color}},{key:"render",value:function(){var e=this.getGraph().options.nodes[this.options.data.source].center;this.getSource()&&(e=this.getSource().getCenter());var t=this.getGraph().options.nodes[this.options.data.target].center;return this.getTarget()&&(t=this.getTarget().getCenter()),this.options.children=[Lc.createElement(ag.Path,l({ref:"path",d:"M "+e.x+" "+e.y+" L "+t.x+" "+t.y},this.options.pathAttr,{stroke:this.options.color})),Lc.createElement(ag.Path,l({ref:"invisiblePath",d:"M "+e.x+" "+e.y+" L "+t.x+" "+t.y},this.options.invisiblePathAttr,{stroke:this.options.color}))],this.arrow=Lc.createElement(ag.Polygon,{ref:"arrow",points:[{x:-15,y:7.5},{x:0,y:0},{x:-15,y:-7.5}],stroke:this.options.color,fill:this.options.color}),this.options.label&&this.options.children.push(Lc.createElement(ag.Text,{ref:"costLabel",text:this.options.label})),this.options.directed&&this.options.children.push(this.arrow),this.options.children}},{key:"getLabel",value:function(){return this.options.label}},{key:"setLabel",value:function(e){this.costLabel||(this.costLabel=Lc.createElement(ag.Text,{text:e}),this.costLabel.mount(this),this.drawCost(!0)),this.costLabel.setText(e),this.options.label=e,this.update()}},{key:"drawCost",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getLabel()||e){var t,n=this.path.node.getTotalLength(),i=this.path.node.getPointAtLength(n/2);i.x<=0||i.y<=0||(t=this.computeBisectorVector(n,i),this.costLabel.setPosition(i.x+t.x*(this.costLabel.getWidth()/2+5),i.y+t.y*(this.costLabel.getHeight()/2+5)))}}},{key:"computeBisectorVector",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.path.node.getTotalLength(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.path.node.getPointAtLength(t/2),i=this.path.node.getPointAtLength(t/2+1),r=yu({x:i.x-n.x,y:i.y-n.y});return r=cu(r,0,Math.PI/2),r.y>=0&&(r=cu(r,0,Math.PI)),e=Math.max(Math.abs(r.x),Math.abs(r.y)),0===t?{x:0,y:1}:(r.x/=e,r.y/=e,Math.abs(r.x)<.15?r.x=Math.sign(r.x)*(1-(.15-Math.abs(r.x))/.15):r.x=Math.sign(r.x),r)}},{key:"getArrowStartPercent",value:function(){for(var e=this.path.getLength(),t=this.getSource().getRadius();t<e;t+=.1){var n=this.path.getPointAtLength(t);if($l(this.getSource().getCenter(),n)>this.getSource().getRadius())return t/e}return 1}},{key:"getMarkup",value:function(){var e={},t=this.getDefaultOptions();return this.options.color!==t.color&&(e.color=this.options.color),this.options.pathAttr.strokeWidth!==t.pathAttr.strokeWidth&&(e.pathAttr=e.pathAttr||{},e.pathAttr.strokeWidth=this.options.pathAttr.strokeWidth),this.getLabel()&&(e.label=this.getLabel()),e.source=this.getSourceIndex(),e.target=this.getTargetIndex(),JSON.stringify(e).replace(/\"[^\"]*\":/g,function(e){return e.substring(1,e.length-2)+":"})}},{key:"getArrowEndPercent",value:function(){for(var e=this.path.getLength(),t=e-this.getTarget().getRadius();t>=0;t-=.1){var n=this.path.node.getPointAtLength(t);if($l(this.getTarget().getCenter(),n)>this.getTarget().getRadius())return t/e}return 0}},{key:"setDirected",value:function(e){this.options.directed!==e&&(this.options.directed=e,this.options.directed?(this.appendChild(this.arrow),this.setArrowOnPath(1)):this.eraseChild(this.arrow,!1))}},{key:"getPathString",value:function(){if(0===this.options.curveArcRadius)return"M "+this.getSource().x+" "+this.getSource().y+" L "+this.getTarget().x+" "+this.getTarget().y;var e={x:(this.getSource().x+this.getTarget().x)/2,y:(this.getSource().y+this.getTarget().y)/2},t=ku(bu(yu(wu(cu(this.getSource().getCenter(),e,Math.PI/2),e)),2*this.options.curveArcRadius),e);return"M"+this.getSource().x+","+this.getSource().y+"Q"+t.x+","+t.y+","+this.getTarget().x+","+this.getTarget().y}},{key:"setArrowOnPath",value:function(e){var t=this.getArrowEndPercent(),n=this.getArrowStartPercent(),i=(n+e*(t-n))*this.path.getLength(),r=this.path.getPointAtLengthWithAngle(i);this.arrow.node.setAttribute("transform","translate ("+r.x+" "+r.y+") rotate("+(r.alpha+180)+")")}},{key:"setCurveArcRadius",value:function(e){this.options.curveArcRadius=e}},{key:"getCurveArcRadius",value:function(){return this.options.curveArcRadius}},{key:"setBendingSupport",value:function(e){this.options.supportsBending=e}},{key:"update",value:function(){var e=this.getPathString();this.path.setPath(e),this.invisiblePath.setPath(e),this.drawCost(),this.options.directed&&this.setArrowOnPath(1)}},{key:"getGraph",value:function(){return this.options.graph}},{key:"delete",value:function(){this.getGraph().options.edges.erase(this.data),
this.getGraph().edgeGroup.eraseChild(this)}},{key:"reverse",value:function(){var e=this.options.data.source;this.options.data.source=this.options.data.target,this.options.data.target=e}},{key:"getSourceIndex",value:function(){return this.options.data.source}},{key:"getTargetIndex",value:function(){return this.options.data.target}},{key:"getSource",value:function(){return this.getGraph().nodes[this.options.data.source]}},{key:"getTarget",value:function(){return this.getGraph().nodes[this.options.data.target]}},{key:"getColor",value:function(){return this.options.color}},{key:"isDirected",value:function(){return this.options.directed}},{key:"setColor",value:function(e){this.options.color=e,this.node&&(this.path.setAttribute("stroke",e),this.invisiblePath.setAttribute("stroke",e),this.arrow.node&&(this.arrow.setAttribute("stroke",e),this.arrow.setAttribute("fill",e)))}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.drawCost()}},{key:"changeColorTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Lf({func:function(t,i){n.setColor(Qc.interpolate(i.color,e,t))},context:{color:this.options.color},duration:t,startTime:r,dependsOn:i})}},{key:"bendingTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Lf({func:function(t,i){n.setCurveArcRadius(i.curveArcRadius+t*(e-i.curveArcRadius)),n.update()},context:{curveArcRadius:this.options.curveArcRadius},duration:t,startTime:r,dependsOn:i})}},{key:"arrowTravelTransition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Nf;a.dependsOn=n;var o=[];if(this.isDirected()){var s=new If({func:function(){t.setDirected(!1)},reverseFunc:function(){t.setDirected(!0)}});a.push(s,!1),o=[s]}var l=new If({func:function(){t.appendChild(t.arrow)},reverseFunc:function(){t.eraseChild(t.arrow,!1)},dependsOn:o});a.push(l,!1);var u=new Lf({func:function(e){t.setArrowOnPath(e)},duration:e,dependsOn:[l]});a.push(u,!1);var c=new If({func:function(){t.eraseChild(t.arrow,!1)},reverseFunc:function(){t.appendChild(t.arrow)},dependsOn:[u]});return a.push(c,!1),a.push(new Lf({func:function(){},duration:1}),!1),r&&a.push(new If({func:function(){t.setDirected(!0)},reverseFunc:function(){t.setDirected(!1)},dependsOn:[c]}),!1),a.setStartTime(i),a}},{key:"getPopupPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&n.lines.has(this)){var i=n.lines.get(this);this.setCurveArcRadius(i.curveArcRadius),this.getSource().setCenter(n.points.get(this.getSource())),this.getTarget().setCenter(n.points.get(this.getTarget())),this.update()}var r=this.path.node.getPointAtLength(this.path.node.getTotalLength()/2);return{x:r.x+e,y:r.y+t}}},{key:"turnToDashesTransition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3,3",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=new Nf;o.dependsOn=r;var s=new If({func:function(){var e,r;i?(e=i.points.get(t.getSource()),r=i.points.get(t.getTarget())):(e=t.getSource().getCenter(),r=t.getTarget().getCenter());var a=Lc.createElement(ag.Line,l({x1:e.x,x2:e.x,y1:e.y,y2:e.y,ref:t.refLink("dummyPath"),strokeDasharray:n},t.options.pathAttr)),o=Lc.createElement(ag.Line,l({x1:e.x,x2:r.x,y1:e.y,y2:r.y,ref:t.refLink("fakePath")},t.options.pathAttr));t.appendChild(a),t.appendChild(o),t.path.setAttribute("opacity",0)},reverseFunc:function(){t.eraseChild(t.dummyPath,!0),t.eraseChild(t.fakePath,!0),t.path.setAttribute("opacity",1)}});o.push(s,!1);var u=new Lf({func:function(e){var n=t.getSource().getCenter(),i=t.getTarget().getCenter(),r=(1-e)*n.x+e*i.x,a=(1-e)*n.y+e*i.y;t.dummyPath.setAttribute("x2",r),t.dummyPath.setAttribute("y2",a),t.fakePath.setAttribute("x1",r),t.fakePath.setAttribute("y1",a)},dependsOn:[s],duration:e});o.push(u,!1);var c=new If({func:function(){t.path.setAttribute("stroke-dasharray",n),t.path.setAttribute("opacity",1),t.eraseChild(t.dummyPath,!1),t.eraseChild(t.fakePath,!1)},reverseFunc:function(){t.path.setAttribute("stroke-dasharray",null),t.path.setAttribute("opacity",0),t.appendChild(t.dummyPath),t.appendChild(t.fakePath)},dependsOn:[u]});return o.push(c,!1),o.setStartTime(a),o}}]),t}(ag.Group),xk=function(){function e(t){r(this,e),this.setOptions(t)}return o(e,[{key:"getDefaultOptions",value:function(){return{chargeStrength:10,edgeStrength:15,gravityStrength:.007,idealEdgeDistance:140,repulsionDistance:140}}}]),o(e,[{key:"setOptions",value:function(e){this.options=Object.assign(this.getDefaultOptions(),e),this.points=this.options.points,this.edges=this.options.edges,this.gravityCenter=this.options.gravityCenter,this.adjMatrix=this.buildAdjacencyMatrix()}},{key:"buildAdjacencyMatrix",value:function(){for(var e=this,t=Array(this.points.length).fill().map(function(){return Array(e.points.length).fill(!1)}),n=0;n<this.edges.length;n+=1)t[this.edges[n].first][this.edges[n].second]=!0,t[this.edges[n].second][this.edges[n].first]=!0;return t}},{key:"idealEdgeDistance",value:function(){return this.options.idealEdgeDistance}},{key:"repulsionDistance",value:function(){return this.options.repulsionDistance}},{key:"updateVectors",value:function(e,t,n){var i=t.x-e.x,r=t.y-e.y,a=Math.sqrt(i*i+r*r);if(a<1e-9){var o=2*Math.random()*Math.PI;i=Math.sin(o),r=Math.cos(o),a=1}e.dx+=n*i/a,e.dy+=n*r/a,t.dx+=-n*i/a,t.dy+=-n*r/a}},{key:"calculateAttractions",value:function(e){for(var t=0;t<e.length;t+=1)for(var n=t+1;n<e.length;n+=1){var i=$l(e[t],e[n]);if(this.adjMatrix[t][n]){var r=i<1e-9?1e3:this.options.edgeStrength*(i-this.idealEdgeDistance())/i;this.updateVectors(e[t],e[n],r)}else if(i<this.repulsionDistance()){var a=i<1e-9?1e3:this.options.chargeStrength*(i-this.repulsionDistance())/i;this.updateVectors(e[t],e[n],a)}}}},{key:"gravitateTowards",value:function(e,t){for(var n=0;n<e.length;n+=1){var i=$l(e[n],t);this.updateVectors(e[n],t,i*this.options.gravityStrength)}}},{key:"calculateVectors",value:function(e){for(var t=[],n=0;n<this.points.length;n+=1)t.push({x:this.points[n].x,y:this.points[n].y,dx:0,dy:0});e=e||1;for(var i=0;i<e;i+=1){for(var r=0;r<t.length;r+=1)t[r].x+=t[r].dx,t[r].y+=t[r].dy,t[r].dx=0,t[r].dy=0;this.calculateAttractions(t),this.options.gravityCenter&&this.gravitateTowards(t,this.options.gravityCenter)}return t}}]),e}(),Tk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{nodes:[],edges:[],gravityCenterXPercentage:.5,gravityCenterYPercentage:.5,box:{x:0,y:0,width:400,height:400},indexType:"0",directed:!1,forcePaused:!1,bendEdgesIfForcePaused:!1,idlePaused:!1,idlePauseThreshold:.05,idealEdgeDistance:xk.prototype.getDefaultOptions().idealEdgeDistance,nodeOptions:Sk.prototype.getDefaultOptions(),supportsBending:!0}}},{key:"populateNodeData",value:function(){for(var e=0;e<this.options.nodes.length;e+=1){var t=this.options.nodes[e];"0"===this.options.indexType?t.label=e:"1"===this.options.indexType?t.label=e+1:"custom"===this.options.indexType?t.hasOwnProperty("label")&&""!==t.label||(t.label=e+1):t.label="",t.center=t.center||{x:Math.random()*this.options.box.width+this.options.box.x,y:Math.random()*this.options.box.height+this.options.box.y}}}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.populateNodeData(),this.options.gravityCenter={x:this.options.gravityCenterXPercentage*this.options.box.width+this.options.box.x,y:this.options.gravityCenterYPercentage*this.options.box.height+this.options.box.y}}},{key:"getMarkup",value:function(){var e='<Graph indexType="custom" height="400" width="400" ';e+="nodes={[";var t=!0,n=!1,i=void 0;try{for(var r,a=this.nodes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o!==this.nodes[0]&&(e+=","),e+=o.getMarkup(400/this.options.box.width,400/this.options.box.height)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}e+="]} edges={[";var s=!0,l=!1,u=void 0;try{for(var c,h=this.edges[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;d!==this.edges[0]&&(e+=","),e+=d.getMarkup()}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}return e+="]} />"}},{key:"render",value:function(){for(var e=[],t=0;t<this.options.nodes.length;t+=1){var n=this.options.nodes[t],i=Object.assign({},this.options.nodeOptions,n.options);e.push(Lc.createElement(Sk,l({graph:this,data:n},i)))}for(var r=[],a=0;a<this.options.edges.length;a+=1){var o=this.options.edges[a],s={source:o.source,target:o.target},u=o.hasOwnProperty("directed")?o.directed:this.options.directed,c=o.color;r.push(Lc.createElement(Ck,l({graph:this,label:o.label,data:s,directed:u,color:c},o.options)))}return[Lc.createElement(ag.Group,{ref:"edgeGroup"},r),Lc.createElement(ag.Group,{ref:"nodeGroup"},e)]}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.options.forcePaused&&this.options.bendEdgesIfForcePaused&&this.getEdgeBendingTransitions().start();for(var e=0;e<this.edges.length;e+=1)this.edges[e].update();this.options.forcePaused||this.options.idlePaused||this.startPerpetualForce()}},{key:"pauseForce",value:function(){this.options.forcePaused=!0}},{key:"unpauseForce",value:function(){var e=this.options.forcePaused;this.options.forcePaused=!1,e&&this.startPerpetualForce()}},{key:"pauseIdle",value:function(){this.options.idlePaused=!0}},{key:"unpauseIdle",value:function(){var e=this.options.idlePaused;this.options.idlePaused=!1,e&&this.startPerpetualForce()}},{key:"startPerpetualForce",value:function(){var e=this,t=function t(){e.runForces(),e.options.forcePaused||e.options.idlePaused?e.options.forcePaused&&requestAnimationFrame(function(){for(var t=0;t<e.edges.length;++t)e.edges[t].setCurveArcRadius(0),e.edges[t].update()}):requestAnimationFrame(t)};requestAnimationFrame(t)}},{key:"setData",value:function(e,t){this.options.nodes=e,this.options.edges=t,this.setOptions(this.options),this.redraw()}},{key:"removeNode",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e.getIncidentEdges()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.removeEdge(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.options.nodes.erase(e.options.data);var s=new Map,l=0,u=!0,c=!1,h=void 0;try{for(var d,p=this.nodes[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;s.set(l++,f)}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}this.nodeGroup.eraseChild(e);var g=!0,m=!1,v=void 0;try{for(var y,b=this.edges[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var k=y.value,w=s.get(k.getSourceIndex()),E=s.get(k.getTargetIndex());for(l=0;l<this.nodes.length;l+=1)this.nodes[l]===w?k.options.data.source=l:this.nodes[l]===E&&(k.options.data.target=l)}}catch(e){m=!0,v=e}finally{try{g||null==b.return||b.return()}finally{if(m)throw v}}}},{key:"addNode",value:function(e){return e.options.data=e.options.data||{},e.options.data.center=e.options.data.center||{x:Math.random()*this.options.box.width+this.options.box.x,y:Math.random()*this.options.box.height+this.options.box.y},e.options.circleAttr=e.options.circleAttr||{},this.options.nodeRadius&&(e.options.circleAttr.radius=this.options.nodeRadius),this.options.nodeFill&&(e.options.innerColor=this.options.nodeFill),this.options.nodeStroke&&(e.options.color=this.options.nodeStroke),e.options.graph=this,this.nodeGroup.appendChild(e),this.options.nodes.push(e.options.data),e}},{key:"removeEdge",value:function(e){this.options.edges.erase(e.options.data),this.edgeGroup.eraseChild(e)}},{key:"addEdge",value:function(e){return e.options.graph=this,this.options.edgeColor&&(e.options.color=this.options.edgeColor),this.edgeGroup.appendChild(e),this.options.edges.push(e.options.data),this.isDirected()&&e.setArrowOnPath(1),e}},{key:"nodeCenterChanged",value:function(e,t){this.unpauseIdle()}},{key:"getBox",value:function(){return this.options.box}},{key:"setBox",value:function(e){this.options.box=e}},{key:"setAllCenters",value:function(e){for(var t=0;t<this.nodes.length;t+=1){var n=this.nodes[t];n.isFixed()||n.dragging||n.setCenter({x:n.getCenter().x+e[t].dx,y:n.getCenter().y+e[t].dy},!1)}for(var i=0;i<this.edges.length;i+=1)this.edges[i].update()}},{key:"runForces",value:function(){var e=performance.now();if(this.nodes&&this.edges){var t={idealEdgeDistance:this.options.idealEdgeDistance,points:this.nodes.map(function(e){return e.getCenter()}),edges:this.edges.map(function(e){return{first:e.options.data.source,second:e.options.data.target}}),gravityCenter:this.getGravityCenter()},n=!0,i=!1,r=void 0;try{for(var a,o=this.nodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(a.value.dragging){t.gravityStrength=0;break}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var s=new xk(t),l=s.calculateVectors(1);this.setAllCenters(l);for(var u=0,c=0;c<this.nodes.length;c+=1)this.nodes[c].isFixed()||this.nodes[c].dragging||(u=Math.max(u,vu({x:l[c].dx,y:l[c].dy})));u<this.options.idlePauseThreshold&&this.pauseIdle(),this.options.supportsBending&&this.getEdgeBendingTransitions().start(),this._lastForcesFrameTime=performance.now()-e}}},{key:"getEdge",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=this.edges[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.getSource().getLabel()===""+e&&s.getTarget().getLabel()===""+t)return s;if(s.getSource().getLabel()===""+t&&s.getTarget().getLabel()===""+e)return s}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"getEdgeBendingTransitions",value:function(){for(var e=new Nf,t=0;t<this.edges.length;t+=1){var n=this.edges[t];if(!n.options.supportsBending)return;for(var i=n.getSource().getCenter(),r=n.getTarget().getCenter(),a=ru(i,r),o=null,s=0;s<this.nodes.length;s+=1)if(this.nodes[s]!==n.getSource()&&this.nodes[s]!==n.getTarget()){var l=this.nodes[s].getCenter(),u=iu(l,a);tu(l,a)<=this.nodes[s].getRadius()+10&&nu(u,i,r)&&(null===o||this.nodes[s].getRadius()>o.getRadius())&&(o=this.nodes[s])}if(null!==o&&0===n.options.curveArcRadius){var c=2.5*o.getRadius()*(eu(o.getCenter(),a)>0?-1:1);e.add(n.bendingTransition(c,200),!1)}else null===o&&0!==n.options.curveArcRadius&&e.add(n.bendingTransition(0,200),!1)}return e}},{key:"getIndexType",value:function(){return this.options.indexType}},{key:"isDirected",value:function(){return this.options.directed}},{key:"setDirected",value:function(e){this.options.directed=e;for(var t=0;t<this.edges.length;t+=1)this.edges[t].setDirected(e)}},{key:"setFixed",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.fixed=e;for(var n=0;n<this.nodes.length;n+=1){this.nodes[n].setFixed(e,t)}}},{key:"setGravityCenter",value:function(e){this.options.gravityCenter=e}},{key:"getGravityCenter",value:function(){return{x:this.options.gravityCenter.x,y:this.options.gravityCenter.y}}},{key:"nodeCount",value:function(){return this.options.nodes.length}},{key:"getNodeIndex",value:function(e){return this.nodes.indexOf(e)}},{key:"getNode",value:function(e){for(var t=0;t<this.nodes.length;t+=1)if(this.nodes[t].getLabel()===e)return this.nodes[t]}},{key:"computeVector",value:function(e,t,n){var i,r=$l(e.getCenter(),t.getCenter()),a={x:.5*(e.x+t.x),y:.5*(e.y+t.y)},o={x:.55*e.x+.45*t.x,y:.55*e.y+.45*t.y},s=yu({x:o.x-a.x,y:o.y-a.y});return s=cu(s,0,Math.PI/2),i=Math.max(Math.abs(s.x),Math.abs(s.y)),0===r?{x:0,y:1}:(s.x/=i,s.y/=i,Math.abs(s.x)<.15?s.x=Math.sign(s.x)*(1-(.15-Math.abs(s.x))/.15):s.x=Math.sign(s.x),s)}},{key:"getBentPosition",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r={x:e.x*n+t.x*(1-n),y:e.y*n+t.y*(1-n)},a=this.computeVector(e,t,i);return n>.5&&(n=1-n),{x:r.x+a.x*n*40,y:r.y+a.y*n*40}}},{key:"changeColorTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new Nf;r.dependsOn=n;for(var a=0;a<this.nodes.length;a+=1){var o=this.nodes[a];r.add(o.changeColorTransition(e,t),!1)}for(var s=0;s<this.edges.length;s+=1){var l=this.edges[s];r.add(l.changeColorTransition(e,t),!1)}return r.setStartTime(i),r}},{key:"mergeNodesAnimated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new Nf;r.dependsOn=n;var a=0,o=0,s=!0,l=!1,u=void 0;try{for(var c,h=e[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;this.nodes[d].setFixed(!0),a+=this.nodes[d].x,o+=this.nodes[d].y}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}a/=e.length,o/=e.length;var p=r.getLength(),f=!0,g=!1,m=void 0;try{for(var v,y=e[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value;r.add(this.nodes[b].moveTransition({newCoords:{x:a,y:o},duration:t,startTime:p,dependsOn:n}))}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}return r.setStartTime(i),r}},{key:"swapNodeLabelsTransition",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e.label,s=t.label,l=function(){var n=e.options.data.label,i=t.options.data.label;e.setLabel(i),t.setLabel(n);var r=e.label.options.x,a=e.label.options.y,o=e.label.options.x,s=e.label.options.y;e.label.setPosition(o,s),t.label.setPosition(r,a)},u=new Lf({func:function(n){n=1-.5*n,o.setPosition(i.getBentPosition(e,t,n).x,i.getBentPosition(e,t,n).y),s.setPosition(i.getBentPosition(t,e,n).x,i.getBentPosition(t,e,n).y)},duration:n/2,startTime:0}),c=new If({func:function(){l()},reverseFunc:function(){l()},startTime:n/2,dependsOn:[u]}),h=new Lf({func:function(n){n=.5-.5*n,s.setPosition(i.getBentPosition(e,t,n).x,i.getBentPosition(e,t,n).y),o.setPosition(i.getBentPosition(t,e,n).x,i.getBentPosition(t,e,n).y)},duration:n/2,startTime:n/2,dependsOn:[c]}),d=new Nf;return d.dependsOn=r,d.push(u,!1),d.push(c,!1),d.push(h,!1),d.setStartTime(a),d}},{key:"addEdgeTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=new Nf;o.dependsOn=i;var s=Lc.createElement(Ck,l({graph:this,data:e},e.options,{opacity:0})),u=new If({func:function(){n.options.edges.push(s.options.data),n.edgeGroup.appendChild(s)},reverseFunc:function(){n.options.edges.erase(s.options.data),n.edgeGroup.eraseChild(s,!a)},startTime:o.getLength()});return o.add(u,!1),o.add(s.changeOpacityTransition(1,t,[u],o.getLength()),!1),o.setStartTime(r),o}},{key:"addNodeTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=new Nf;o.dependsOn=i,e=e||{},e.center=e.center||{x:Math.random()*this.options.box.width+this.options.box.x,y:Math.random()*this.options.box.height+this.options.box.y};var s=Object.assign({},this.options.nodeOptions,e.options),u=Lc.createElement(Sk,l({graph:this,data:e},s,{opacity:0})),c=new If({func:function(){n.options.nodes.push(u.options.data),n.nodeGroup.appendChild(u)},reverseFunc:function(){n.options.nodes.erase(u.options.data),n.nodeGroup.eraseChild(u,!a)},startTime:o.getLength()});return o.add(c,!1),o.add(u.changeOpacityTransition(1,t,[c],o.getLength()),!1),o.setStartTime(r),o}},{key:"removeEdgeTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=new Nf;o.dependsOn=i;var s=e.changeOpacityTransition(0,t,[],o.getLength());return o.add(s,!1),o.add(new If({func:function(){n.options.edges.erase(e.options.data),n.edgeGroup.eraseChild(e,!a)},reverseFunc:function(){n.options.edges.insert(e.options.data),n.edgeGroup.appendChild(e)},dependsOn:[s],startTime:o.getLength()}),!1),o.setStartTime(r),o}},{key:"removeNodeTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=new Nf;o.dependsOn=i;var s=e.getIncidentEdges(),l=o.getLength(),u=!0,c=!1,h=void 0;try{for(var d,p=s[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;o.add(this.removeEdgeTransition(f,t,[],l,a),!1)}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}var g=e.changeOpacityTransition(0,t,[],o.getLength());return o.add(g,!1),o.add(new If({func:function(t){t.nodeIndex=n.nodes.indexOf(e),n.options.nodes.erase(e.options.data),n.nodeGroup.eraseChild(e,!a);var i=!0,r=!1,o=void 0;try{for(var s,l=n.edges[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;u.options.data.source>t.nodeIndex&&(u.options.data.source-=1),u.options.data.target>t.nodeIndex&&(u.options.data.target-=1)}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}},reverseFunc:function(t){n.options.nodes.splice(t.nodeIndex,0,e.options.data),n.nodeGroup.options.children.splice(t.nodeIndex,0,e),e.mount(n.nodeGroup,null);var i=!0,r=!1,a=void 0;try{for(var o,s=n.edges[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.options.data.source>=t.nodeIndex&&(l.options.data.source+=1),l.options.data.target>=t.nodeIndex&&(l.options.data.target+=1)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}},context:{},dependsOn:[g],startTime:o.getLength()}),!1),o.setStartTime(r),o}},{key:"showLabelsTransition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new Nf;i.dependsOn=t;var r=i.getLength(),a=!0,o=!1,s=void 0;try{for(var l,u=this.nodes[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;i.add(c.label.changeOpacityTransition(1,e,[],r),!1)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i.setStartTime(n),i}},{key:"nodes",get:function(){return!!this.nodeGroup&&this.nodeGroup.children}},{key:"edges",get:function(){return!!this.edgeGroup&&this.edgeGroup.children}}]),t}(ag.Group),Ak=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{width:300,height:200}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("height",this.options.height+"px"),e.setStyle("width",this.options.width+"px"),e}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"render",value:function(){return[Lc.createElement(Tk,l({ref:"graph"},this.options,{box:{x:0,y:0,width:this.options.width,height:this.options.height}}))]}}]),t}(ag.SVGRoot),Lk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){if(e.nodes)for(;e.nodes.length>16;)e.nodes.pop();if(e.edges)for(var n=0;n<e.edges.length;++n)(e.edges[n].source>=16||e.edges[n].target>=16)&&(e.edges.splice(n,1),--n);e.idlePauseThreshold=1,w(d(t.prototype),"setOptions",this).call(this,e)}}]),t}(Tk),Ik=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{width:300,height:300}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("height",this.options.height+"px"),e.setStyle("width",this.options.width+"px"),e}},{key:"setOptions",value:function(e){delete e.style,w(d(t.prototype),"setOptions",this).call(this,e),this.options.height=Math.min(this.options.height,400),this.options.width=Math.min(this.options.width,400)}},{key:"render",value:function(){return[Lc.createElement(ag.Rect,{ref:"borderRect",x:0,y:0,width:this.options.width,height:this.options.height,stroke:"gray",fill:"white"}),Lc.createElement(Lk,l({ref:"graph"},this.options,{box:{x:0,y:0,width:this.options.width,height:this.options.height}}))]}},{key:"onMount",value:function(){}}]),t}(ag.SVGRoot);wk.classMap.addClass("Graph",Ik);var Nk=function(e){function t(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r(this,t),i=b(this,d(t).call(this)),i.websocketSubscriber=e,i.streamName=n,i.options=a,i.bytesReceived=0,i.isIndexed=!1,i.lastMessageIndex=-1,i.messageBuffer=new Map,i.missedPackets=0,i.status=i.constructor.NONE,i.tryCount=0,i}return h(t,e),o(t,[{key:"sendSubscribe",value:function(){var e=this,t=this.websocketSubscriber;this.clearResubscribeTimeout(),this.status=this.constructor.SUBSCRIBING,this.haveIndex()?t.sendResubscribe(this.streamName,this.getLastIndex()):t.sendSubscribe(this.streamName),this.subscribeTryCount++;var n=t.constructor.STREAM_SUBSCRIBE_TIMEOUT||3e3,i=t.constructor.STREAM_SUBSCRIBE_MAX_TIMEOUT||3e4,r=Math.min(n*this.subscribeTryCount,i);this.resendSubscribeTimeout=setTimeout(function(){console.log("WebsocketSubscriber: stream subscribe timeout for #"+e.streamName+" reached! Trying to resubscribe again!"),e.sendSubscribe()},r)}},{key:"clearResubscribeTimeout",value:function(){this.resendSubscribeTimeout&&(clearTimeout(this.resendSubscribeTimeout),this.resendSubscribeTimeout=void 0)}},{key:"setStatusSubscribed",value:function(){this.clearResubscribeTimeout(),this.status=this.constructor.SUBSCRIBED}},{key:"getStatus",value:function(){return this.status}},{key:"resetStatus",value:function(){this.clearResubscribeTimeout(),this.status=this.constructor.NONE,this.subscribeTryCount=0}},{key:"processPacket",value:function(e){this.bytesReceived+=e.length;var t,n;if("{"===e[0])t="v",n=e;else{var i=e.indexOf(" ");if(!(i>0))return void console.error("WebsocketStreamHandler: Could not process stream packet: "+e);t=e.substr(0,i).trim(),n=e.substr(i+1).trim()}"i"===t?this.processIndexedPacket(n):"v"===t?this.processVanillaPacket(n):"n"===t?this.processMissedPacket(n):console.error("WebsocketStreamHandler: invalid packet type "+t)}},{key:"processIndexedMessage",value:function(e,t){if(this.isIndexed=!0,-1==this.lastMessageIndex)this.lastMessageIndex=e,this.processVanillaPacket(t);else if(this.lastMessageIndex+1==e)for(this.lastMessageIndex=e,this.processVanillaPacket(t),++e;this.messageBuffer.has(e);)t=this.messageBuffer.get(e),this.messageBuffer.delete(e),this.lastMessageIndex=e,this.processVanillaPacket(t),++e;else this.messageBuffer.set(e,t)}},{key:"processMissedPacket",value:function(e){this.processIndexedMessage(parseInt(e),t.MISSING_MESSAGE)}},{key:"processVanillaPacket",value:function(e){if(e==t.MISSING_MESSAGE&&this.missedPackets++,!this.options.rawMessage)try{e=JSON.parse(e)}catch(t){if(!this.options.parseMayFail)return void console.error("WebsocketStreamHandler: Failed to parse ",e," on stream ",this.streamName," Exception:",t.message)}this.dispatch(e)}},{key:"processIndexedPacket",value:function(e){var t,n,i=e.indexOf(" ");if(!(i>0))return void console.error("WebsocketStreamHandler: Could not process indexed stream packet: "+e);n=parseInt(e.substr(0,i).trim()),t=e.substr(i+1).trim(),this.processIndexedMessage(n,t)}},{key:"haveIndex",value:function(){return this.isIndexed}},{key:"getLastIndex",value:function(){return this.lastMessageIndex}}]),t}(Hu);Nk.NONE=Symbol(),Nk.SUBSCRIBING=Symbol(),Nk.SUBSCRIBED=Symbol(),Nk.UNSUBSCRIBED=Symbol(),Nk.MISSING_MESSAGE="INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW";var Ok=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.WEBSOCKET_URL;return r(this,t),e=b(this,d(t).call(this)),Array.isArray(n)||(n=[n]),e.urls=n,e.streamHandlers=new Map,e.attemptedConnect=!1,e.connectionStatus=t.ConnectionStatus.NONE,e.websocket=null,e.failedReconnectAttempts=0,e.numConnectionAttempts=0,e}return h(t,e),o(t,[{key:"setConnectionStatus",value:function(e){this.connectionStatus=e,this.dispatch("connectionStatus",e)}},{key:"getNextUrl",value:function(){var e=this.numConnectionAttempts++%this.urls.length;return this.urls[e]}},{key:"newConnection",value:function(e){return new WebSocket(e)}},{key:"connect",value:function(){var e=this,n=this.getNextUrl();this.setConnectionStatus(t.ConnectionStatus.CONNECTING);try{console.log("WebsocketSubscriber: Connecting to "+n+" ..."),this.websocket=this.newConnection(n),this.websocket.onopen=function(){e.onWebsocketOpen()},this.websocket.onmessage=function(t){e.onWebsocketMessage(t)},this.websocket.onerror=function(t){e.onWebsocketError(t)},this.websocket.onclose=function(t){e.onWebsocketClose(t)}}catch(e){this.tryReconnect(),console.error("WebsocketSubscriber: Failed to connect to ",n,"\nError: ",e.message)}}},{key:"tryReconnect",value:function(){var e=this,n=Math.min(t.CONNECT_RETRY_TIMEOUT*this.failedReconnectAttempts,t.CONNECT_RETRY_MAX_TIMEOUT);this.failedReconnectAttempts++,this.reconnectTimeout||(this.reconnectTimeout=setTimeout(function(){e.reconnectTimeout=null,console.log("WebsocketSubscriber: Trying to reconnect websocket connection"),e.connect()},n))}},{key:"getStreamStatus",value:function(e){var t=this.getStreamHandler(e);return t&&t.status}},{key:"subscribe",value:function(e){if(console.log("WebsocketSubscriber: Subscribing to stream ",e),this.attemptedConnect||(this.connect(),this.attemptedConnect=!0),this.streamHandlers.has(e))return void console.warning("WebsocketSubscriber: Already subscribed to stream ",e);var t=new Nk(this,e);return this.streamHandlers.set(e,t),this.isOpen()&&this.sendSubscribe(e),t}},{key:"isOpen",value:function(){return this.websocket&&1===this.websocket.readyState}},{key:"sendSubscribe",value:function(e){this.isOpen()&&this.send("s "+e)}},{key:"sendResubscribe",value:function(e,t){this.isOpen(e)&&this.send("r "+t+" "+e)}},{key:"resubscribe",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.streamHandlers.values()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.sendSubscribe()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"onStreamSubscribe",value:function(e){var t=this.getStreamHandler(e);if(!t)return void console.error("WebsocketSubscriber: received subscribe success response for unrequested stream #"+e);t.setStatusSubscribed()}},{key:"onWebsocketOpen",value:function(){this.previousFailedReconnectAttempts=this.failedReconnectAttempts,this.failedReconnectAttempts=0,console.log("WebsocketSubscriber: Websocket connection established!"),this.reset(),this.setConnectionStatus(t.ConnectionStatus.CONNECTED),this.resubscribe()}},{key:"processStreamPacket",value:function(e){var t,n,i=e.indexOf(" ");if(!(i>0))return void console.error("WebsocketSubscriber: Could not process stream packet: "+e);t=e.substr(0,i).trim(),n=e.substr(i+1).trim();var r=this.streamHandlers.get(t);if(!r)return void console.error("WebsocketSubscriber: No handler for websocket stream ",t);r.processPacket(n)}},{key:"fatalErrorClose",value:function(e){this.failedReconnectAttempts=this.previousFailedReconnectAttempts,console.error("WebsocketSubscriber: server fatal error close: ",e),this.onWebsocketError(e)}},{key:"onWebsocketMessage",value:function(e){if(e.data===t.HEARTBEAT_MESSAGE);else{var n,i,r=e.data.indexOf(" ")
;if(r>0?(n=e.data.substr(0,r).trim(),i=e.data.substr(r+1).trim()):(n=e.data,i=""),"e"===n||"error"===n){console.error("WebsocketSubscriber: Websocket error: ",i),i=i.split(" ");if("invalidSubscription"===i[0]){var a=i[1],o=this.getStreamHandler(a);o&&o.clearResubscribeTimeout()}}else"s"===n?(console.log("WebsocketSubscriber: Successfully subscribed to stream ",i),this.onStreamSubscribe(i)):"m"===n?this.processStreamPacket(i):"c"===n?this.dispatch("serverCommand",i):"efc"==n?this.fatalErrorClose(i):console.error("WebsocketSubscriber: Can't process "+e.data)}}},{key:"reset",value:function(){this.setConnectionStatus(t.ConnectionStatus.DISCONNECTED);var e=!0,n=!1,i=void 0;try{for(var r,a=this.streamHandlers.values()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.resetStatus()}}catch(e){n=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"onWebsocketError",value:function(e){console.error("WebsocketSubscriber: Websocket connection is broken!"),this.reset(),this.tryReconnect()}},{key:"onWebsocketClose",value:function(e){console.log("WebsocketSubscriber: Connection closed!"),this.reset(),this.tryReconnect()}},{key:"send",value:function(e){this.websocket.send(e)}},{key:"getStreamHandler",value:function(e){var t=this.streamHandlers.get(e);return t||(t=this.subscribe(e)),t}},{key:"addStreamListener",value:function(e,t){var n=this.getStreamHandler(e);n.callbackExists(t)||n.addListener(t)}},{key:"removeStreamListener",value:function(e,t){var n=this.streamHandlers.get(e);n&&n.removeListener(t)}}],[{key:"addListener",value:function(e,t){return this.Global.addStreamListener(e,t)}}]),t}(Gu);Ok.ConnectionStatus={NONE:0,CONNECTING:1,CONNECTED:2,DISCONNECTED:3},Ok.STREAM_SUBSCRIBE_TIMEOUT=3e3,Ok.STREAM_SUBSCRIBE_MAX_TIMEOUT=3e4,Ok.CONNECT_RETRY_TIMEOUT=3e3,Ok.CONNECT_RETRY_MAX_TIMEOUT=3e4,Ok.HEARTBEAT_MESSAGE="-hrtbt-",Ok.Global=new Ok;var Rk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),Mk=new mp("termdefinition",Rk);Mk.getDefinition=function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.term===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null};var Pk={1:{enforcedTemplateComment:"/* \n * ATTENTION!\n * This task does not have an enforced\n * template in this language!\n *\n * However, you can still submit any custom code.\n */\n\n",compiler:"g++ 8.3.0",comment:"Compiled with `g++ -static -O2 -lm -Wall -Wno-unused-result -std=c++17 -DCS_ACADEMY -DONLINE_JUDGE`",alternativeExtensions:["h","hpp"]},2:{enforcedTemplateComment:"/* \n * ATTENTION!\n * This task does not have an enforced\n * template in this language!\n *\n * However, you can still submit any custom code.\n */\n\n",compiler:"OpenJDK Java 11",comment:"Runned with `java  -Xmx4g -Xss256m -DONLINE_JUDGE -DCS_ACADEMY Main`"},3:{enforcedTemplateComment:'"""\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n"""\n\n',compiler:"Python 2.7.16+"},4:{enforcedTemplateComment:'"""\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n"""\n\n',comment:"Comes with `numpy` and `scipy` modules",compiler:"Python 3.7.3+"},5:{enforcedTemplateComment:"/* \n * ATTENTION!\n * This task does not have an enforced\n * template in this language!\n *\n * However, you can still submit any custom code.\n */\n\n",compiler:"Mono 5.18.0.240",comment:"Compiled with `mcs -define:ONLINE_JUDGE -define:CS_ACADEMY`"},6:{enforcedTemplateComment:"{-\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n-}\n\n",compiler:"GHC 8.4.4+"},7:{enforcedTemplateComment:"# ATTENTION!\n# This task does not have an enforced\n# template in this language!\n#\n# However, you can still submit any custom code.\n\n",compiler:"Bash 5.0.3"},8:{enforcedTemplateComment:"! ATTENTION!\n! This task does not have an enforced\n! template in this language!\n! \n! However, you can still submit any custom code.\n\n",compiler:"GNU Fortran 8.3.0",comment:"Compiled with `gfortran -ffree-form`"},9:{enforcedTemplateComment:"--[=====[\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n--]=====]\n\n",compiler:"Lua 5.2.4+"},10:{enforcedTemplateComment:"# ATTENTION!\n# This task does not have an enforced\n# template in this language!\n# \n# However, you can still submit any custom code.\n\n",compiler:"Ruby 2.5.5p157"},11:{enforcedTemplateComment:"# ATTENTION!\n# This task does not have an enforced\n# template in this language!\n# \n# However, you can still submit any custom code.\n\n",compiler:"Perl 5.28.1"},12:{enforcedTemplateComment:"/*\n * ATTENTION!\n * This task does not have an enforced\n * template in this language!\n *\n * However, you can still submit any custom code.\n */\n\n",compiler:"PHP 7.2.19"},13:{enforcedTemplateComment:"/* \n * ATTENTION!\n * This task does not have an enforced\n * template in this language!\n *\n * However, you can still submit any custom code.\n */\n\n",compiler:"gcc 8.3.0",comment:"Compiled with `gcc -O2 -lm -Wall -Wno-unused-result -DCS_ACADEMY -DONLINE_JUDGE`"},14:{enforcedTemplateComment:"/*\n * ATTENTION!\n * This task does not have an enforced\n * template in this language!\n *\n * However, you can still submit any custom code.\n */\n\n",compiler:"gcc 8.3.0",comment:"Compiled with `gcc -DCS_ACADEMY -DONLINE_JUDGE -I 'gnustep-config --variable=GNUSTEP_SYSTEM_HEADERS' -L 'gnustep-config --variable=GNUSTEP_SYSTEM_LIBRARIES' -lgnustep-base -fconstant-string-class=NSConstantString -D_NATIVE_OBJC_EXCEPTIONS -Wl,--no-as-needed -lgnustep-base -lobjc`"},15:{enforcedTemplateComment:'"\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n"\n\n',compiler:"GNU Smalltalk 3.2.5"},16:{enforcedTemplateComment:"(*\n * ATTENTION!\n * This task does not have an enforced\n * template in this language!\n *\n * However, you can still submit any custom code.\n *)\n\n",compiler:"OCaml 4.05.0"},17:{enforcedTemplateComment:"/* \n * ATTENTION!\n * This task does not have an enforced\n * template in this language!\n *\n * However, you can still submit any custom code.\n */\n\n",compiler:"Node v12.9.0"},18:{enforcedTemplateComment:"*> ATTENTION!\n*> This task does not have an enforced\n*> template in this language!\n*> \n*> However, you can still submit any custom code.\n\n",compiler:"GnuCOBOL 2.2.0",comment:"Compiled with `cobc -free -x`"},19:{enforcedTemplateComment:"-- ATTENTION!\n-- This task does not have an enforced\n-- template in this language!\n--\n-- However, you can still submit any custom code.\n\n",compiler:"GNATMAKE 8.3.0"},20:{enforcedTemplateComment:"{\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n}\n\n",compiler:"Free Pascal 3.0.4",comment:"Compiled with `fpc -O2 -Sgic -viwn -Tlinux -dONLINE_JUDGE -dCS_ACADEMY -XS`"},21:{enforcedTemplateComment:";; ATTENTION!\n;; This task does not have an enforced\n;; template in this language!\n;; \n;; However, you can still submit any custom code.\n\n",compiler:"SBCL 1.4.16"},22:{enforcedTemplateComment:"% ATTENTION!\n% This task does not have an enforced\n% template in this language!\n% \n% However, you can still submit any custom code.\n\n",compiler:"Erlang/OTP 21 [erts-10.2.4]"},23:{enforcedTemplateComment:"# ATTENTION!\n# This task does not have an enforced\n# template in this language!\n# \n# However, you can still submit any custom code.\n\n",compiler:"TCL Shell 8.6.6"},24:{enforcedTemplateComment:"#{\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n#}\n\n",compiler:"GNU Octave 4.4.1"},25:{enforcedTemplateComment:"#{\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n#}\n\n",compiler:"Go 1.10.4 linux/amd64"},26:{enforcedTemplateComment:"#{\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n#}\n\n",compiler:"Swift 3.1.1"},27:{enforcedTemplateComment:"#{\n ATTENTION!\n This task does not have an enforced\n template in this language!\n \n However, you can still submit any custom code.\n#}\n\n",compiler:"Scala 2.11.12-4",comment:"Ran with `scala -J-Xmx4g -J-Xss256m -DONLINE_JUDGE -DCS_ACADEMY Main`"}},Dk=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),Object.assign(y(n),Pk[n.id]||{}),n}return h(t,e),o(t,[{key:"getDefaultSource",value:function(){var e=rk.getCurrentUser();return e?e.getCustomSetting("workspace:programmingLanguage:"+this.id+":defaultSource",this.defaultSource):this.defaultSource}},{key:"getDefaultTemplateComment",value:function(){return this.enforcedTemplateComment}},{key:"getExtension",value:function(){return this.extension}},{key:"toString",value:function(){return this.name}}]),t}(fp),Bk=new mp("programminglanguage",Dk);Bk.getLanguageForFileName=function(e){var t=e.split(".");if(t.length>=2){var n=t[0],i=parseInt(n.substring(4)),r=Bk.get(i);if(r)return r}var a=t.length>=2?t.pop():t[0],o=!0,s=!1,l=void 0;try{for(var u,c=Bk.objects.values()[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value;if(h.extension===a||h.hasOwnProperty("alternativeExtensions")&&-1!==h.alternativeExtensions.indexOf(a))return h}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}return console.error("Can't get a programming language for fileName: ",e),{aceMode:"text"}},Bk.getDefaultLanguage=function(){var e=1,t=rk.getCurrentUser();return t&&(e=t.getParsedCustomSetting("workspace:preferredProgrammingLanguage",e)),Bk.get(e)};var _k=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.name}}]),t}(fp),Fk=new mp("AceTheme",_k);Fk.getDefaultTheme=function(){var e=1,t=rk.getCurrentUser();return t&&(e=t.getParsedCustomSetting("workspace:aceTheme",e)),Fk.get(e)};var Uk=new mp("AceEditorKeyboardHandler",_k);Uk.getDefaultKeyboardHandler=function(){var e=1,t=rk.getCurrentUser();return t&&(e=t.getParsedCustomSetting("workspace:aceKeyboardHandler",e)),Uk.get(e)};var zk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.name}}]),t}(fp),Wk=new mp("difficulty",zk);Wk.getDefaultDifficulty=function(){return Wk.get(2)},Wk.importState([{id:-1,name:"TUTORIAL",color:"#00dd00"},{id:1,name:"EASY",color:"green"},{id:2,name:"MEDIUM",color:"orange"},{id:3,name:"HARD",color:"red"},{id:4,name:"HARDEST",color:"#aa0000"}]),Object.assign(Wk,{EASY:Wk.get(1),MEDIUM:Wk.get(2),HARD:Wk.get(3),HARDEST:Wk.get(4),TUTORIAL:Wk.get(-1)});var Hk=[{articleId:141,title:"Environment",url:"environment"},{articleId:137,title:"Markup",url:"markup"},{articleId:147,title:"Contests",url:"contests"},{articleId:149,title:"Workspace Tutorial",url:"workspace-tutorial"},{articleId:148,title:"Rating",url:"rating"},{articleId:1124,title:"Problem Setting",url:"problem-setting"},{articleId:354,title:"T&C",url:"terms-and-conditions"}];window.FACEBOOK_MANAGER_OPTIONS={appId:"375510855971020"},window.GOOGLE_MANAGER_OPTIONS={clientId:"469601560740-qk0ngdqb8fl07thec3jq9cpjt4k7ver2.apps.googleusercontent.com"};var Vk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.name}}],[{key:"PARTIAL_SCORING",get:function(){return Gk.get(1)}},{key:"ACM",get:function(){return Gk.get(2)}},{key:"CSA",get:function(){return Gk.get(3)}}]),t}(fp),Gk=new mp("ContestScoring",Vk),jk=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getClientId",value:function(){return this.clientId}}]),t}(fp),Yk=function(e){function t(){return r(this,t),b(this,d(t).call(this,"SocialApp",jk))}return h(t,e),o(t,[{key:"getSocialApps",value:function(){return this.all()}},{key:"getSocialAppByName",value:function(e){return this.all().find(function(t){return t.name===e})}}]),t}(mp),Jk=new Yk;document.STEM_DEBUG=!0;var qk=performance.now();cp.registerStream=function(e){Ok.addListener(e,cp.applyEventWrapper)},cp.importState(t.PublicState),cp.registerStream("global-events"),USER.id&&cp.registerStream("user-"+USER.id+"-events");var Xk=function(e){function t(){return r(this,t),b(this,d(t).call(this,"CSASettings"))}return h(t,e),t}(vp);new Xk;Object.assign(fk,{ENGLISH:fk.getLanguageForCode("eng"),ROMANIAN:fk.getLanguageForCode("rom"),RUSSIAN:fk.getLanguageForCode("rus"),MANDARIN:fk.getLanguageForCode("cmn"),JAPANESE:fk.getLanguageForCode("jpn"),ARABIC:fk.getLanguageForCode("ara"),SPANISH:fk.getLanguageForCode("spa"),FRENCH:fk.getLanguageForCode("fra"),GERMAN:fk.getLanguageForCode("deu"),ITALIAN:fk.getLanguageForCode("ita"),POLISH:fk.getLanguageForCode("pol"),DUTCH:fk.getLanguageForCode("nld")}),fk.setLocale(fk.get(USER.localeLanguageId)||fk.ENGLISH),function(e){mk=e;var t=mk.getLocale();t&&t.buildTranslation(yt),mk.addListener("localeChange",function(e){e.buildTranslation(yt)})}(fk),console.log("CSAState took",(performance.now()-qk).toFixed(2),"ms at",performance.now().toFixed(2),"ms.");var Kk,Qk,Zk,$k,ew,tw=(Kk=Zk=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,{updateOnResize:rc.isMobileDevice()})),O(e,"default",Qk,y(e)),e}return h(t,e),t}(Jc),Qk=R(Kk.prototype,"default",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:function(){return rc.isMobileDevice()?"".concat(window.innerHeight,"px"):"100vh"},paddingTop:this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT,background:this.themeProperties.COLOR_BACKGROUND_BODY,width:"100%",">*":{height:"100%",width:"100%",paddingTop:rc.isMobileDevice()?this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE:this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP,paddingBottom:rc.isMobileDevice()?this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE:this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP,overflow:rc.isMobileDevice()?"":"auto"}}}}),Kk),nw=($k=Ze(tw))(ew=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.default)}},{key:"onMount",value:function(){rc.isTouchDevice()&&rc.isMobileDevice()||Object.assign(document.body.style,{overflow:"hidden"}),t.Global=t.Global||this}}]),t}(Lc.Element))||ew,iw=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.format=e.format||"DD/MM/YYYY HH:mm:ss",w(d(t.prototype),"setOptions",this).call(this,e),this.options.date&&this.setDate(this.options.date)}},{key:"parseDateFromString",value:function(e,t){if("DD/MM/YYYY HH:mm:ss"!==t)throw Error("Format not supported!");for(;-1!==e.indexOf("/");)e=e.replace("/"," ");for(;-1!==e.indexOf(":");)e=e.replace(":"," ");var n=e.split(" "),i=[],r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=parseFloat(u);isNaN(c)||i.push(c)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}var h=i.length>=3?i[2]:0,d=i.length>=2?i[1]-1:0,p=i.length>=1?i[0]:0,f=i.length>=4?i[3]:0,g=i.length>=5?i[4]:0,m=i.length>=6?i[5]:0,v=new Ap(h,d,p,f,g,m);return v.getTime()?v:null}},{key:"getDate",value:function(){var e=this.textInput.getValue();if(!e)return null;var t=this.options.format;return this.parseDateFromString(e,t)}},{key:"setDate",value:function(e){this.options.date=e,this.options.dateString=e.format(this.options.format),this.textInput&&this.textInput.setValue(this.options.dateString)}},{key:"render",value:function(){return[Lc.createElement(vg,{ref:"textInput",placeholder:this.options.format,value:this.options.dateString||""})]}}]),t}(Lc.Element),rw=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){var e=w(d(t.prototype),"getDefaultOptions",this).call(this);return e.x=0,e.y=0,e.contentPadding="7px",e.contentStyle={},e.arrowDirection=Mc.UP,e.arrowColor="white",e.backgroundColor="white",e}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.style=Object.assign({boxShadow:"0px 0px 4px rgba(0,0,0,0.5)",borderRadius:"5px",display:"table",maxWidth:"350px",backgroundColor:this.options.backgroundColor,position:"absolute",left:this.options.x+"px",top:this.options.y+"px",zIndex:"3",right:"0px"},this.options.style),this.createArrowStyle()}},{key:"setContent",value:function(e){this.options.children=e,this.redraw()}},{key:"getContent",value:function(){return Lc.createElement("div",{style:Object.assign({padding:this.options.contentPadding},this.options.contentStyle),ref:"contentArea"},this.options.children)}},{key:"createArrowStyle",value:function(){var e={left:"50%","z-index":"-3",position:"absolute",width:"0",height:"0","border-left":"10px solid transparent","border-right":"10px solid transparent",marginLeft:"-11px"};this["arrow"+Mc.UP+"Outline"]=Object.assign({"border-bottom":"10px solid #C8C8C8","margin-top":"-10.8px",marginLeft:"-11px"},e),this["arrow"+Mc.DOWN+"Outline"]=Object.assign({"border-top":"10px solid #C8C8C8","margin-top":"2px"},e);var t={left:"50%",position:"absolute",width:"0",height:"0","border-left":"10px solid transparent","border-right":"10px solid transparent"};this["arrow"+Mc.UP]=Object.assign({"margin-top":"-10px","border-bottom":"10px solid "+this.options.arrowColor},t),this["arrow"+Mc.DOWN]=Object.assign({"border-top":"10px solid "+this.options.arrowColor},t)}},{key:"getArrow",value:function(){var e=this.options.arrowDirection;return[Lc.createElement(jd,{ref:"popupArrow",style:this["arrow"+e]}),Lc.createElement(jd,{ref:"popupArrowOutline",style:this["arrow"+e+"Outline"]})]}},{key:"render",value:function(){return this.options.arrowDirection===Mc.UP?[this.getArrow(),this.getContent()]:[this.getContent(),this.getArrow()]}},{key:"bindInsideParent",value:function(){this.target&&(this.options.x=this.target.offsetWidth/2,this.options.y=this.options.arrowDirection===Mc.UP?this.target.offsetHeight:0);var e=parseFloat(this.options.x),t=parseFloat(this.options.y)+(this.options.arrowDirection===Mc.UP?11:-this.getHeight()-11),n=-11;if(e-=this.getWidth()/2,this.options.bodyPlaced&&this.target){var i=this.target.getBoundingClientRect();e+=i.left,t+=i.top}if(this.target&&!this.options.bodyPlaced){if(this.node.offsetParent&&!this.options.bodyPlaced){var r=e+this.node.offsetParent.offsetLeft;if(r<0)e-=r-2,n+=r+2;else if(r+this.getWidth()>this.node.offsetParent.offsetParent.offsetWidth){var a=this.node.offsetParent.offsetParent.offsetWidth-(r+this.getWidth());n-=a-2,e+=a-2}}}else if(e<0)n+=e+2,e=2;else if(e+this.getWidth()>this.parentNode.offsetWidth){var o=e+this.getWidth()-this.parentNode.offsetWidth;n+=o,e-=o}this.popupArrow.setStyle("margin-left",n+"px"),this.popupArrowOutline.setStyle("margin-left",n+"px"),this.setStyle("left",e+"px"),this.setStyle("top",t+"px")}},{key:"setParent",value:function(e){var t;(t=e instanceof HTMLElement?e:e.node)!==this.parentNode&&(this.isInDocument()?(this.parentNode.removeChild(this.node),t.appendChild(this.node),this.setParentNode(t)):this.setParentNode(t))}},{key:"setCenter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.options.x=e.x,this.options.y=e.y,n?setTimeout(function(){t.bindInsideParent()},0):this.bindInsideParent()}},{key:"onUnmount",value:function(){w(d(t.prototype),"onUnmount",this).call(this),this.options.bodyPlaced&&this.target&&this.constructor.bodyPopups.delete(this)}},{key:"onMount",value:function(){this.options.target&&(this.options.target instanceof HTMLElement?this.target=this.options.target:this.target=this.options.target.node,this.options.x=this.target.offsetWidth/2,this.options.y=this.target.offsetHeight),w(d(t.prototype),"onMount",this).call(this),this.bindInsideParent(),this.options.bodyPlaced&&this.target&&this.constructor.bodyPopups.add(this)}}],[{key:"clearBodyPopups",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.bodyPopups[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.hide()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.bodyPopups.clear()}}]),t}(Xg);rw.bodyPopups=new Set;var aw,ow,sw,lw,uw,cw,hw,dw,pw,fw,gw,mw,vw,yw,bw,kw,ww,Ew,Sw,Cw,xw,Tw,Aw,Lw,Iw,Nw,Ow,Rw,Mw,Pw,Dw,Bw,_w,Fw,Uw,zw,Ww,Hw,Vw,Gw=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){var e=w(d(t.prototype),"getDefaultOptions",this).call(this);return e.titleFontSize="12pt",e.contentFontSize="10pt",e.arrowColor="#F3F3F3",e}},{key:"getContent",value:function(){var e=w(d(t.prototype),"getContent",this).call(this);return e.options.style=Object.assign({fontSize:this.options.contentFontSize},e.options.style||{}),[Lc.createElement(jd,{ref:"titleArea",style:{backgroundColor:"#F3F3F3",paddingLeft:"20px",fontSize:this.options.titleFontSize,fontWeight:"bold",paddingTop:"6px",paddingBottom:"6px",textAlign:"center",borderBottom:"1px solid #BEBEBE"}},this.getTitleAreaContent()),e]}},{key:"setTitle",value:function(e){this.options.title=e,this.redraw()}},{key:"getTitleAreaContent",value:function(){return[Lc.createElement(Md,{className:"pull-right",ref:"closeButton",style:{backgroundColor:"transparent",border:"none",color:"#888888",fontSize:"18pt",padding:"2px",marginRight:"3px",marginTop:"-12px"},label:"Ã—"}),Lc.createElement("div",{style:{marginRight:"25px"}},this.options.title)]}},{key:"bindWindowListeners",value:function(){var e=this;this.addClickListener(function(e){e.stopPropagation()});var t=function t(){e.hide(),rc.supportsEvent("click")?document.removeEventListener("click",t):document.removeEventListener("touchstart",t)};rc.supportsEvent("click")?document.addEventListener("click",t):document.addEventListener("touchstart",t)}},{key:"show",value:function(){w(d(t.prototype),"show",this).call(this),this.bindWindowListeners()}},{key:"redraw",value:function(){this.isInDocument()&&this.bindInsideParent(),w(d(t.prototype),"redraw",this).call(this)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!1),document.body.dispatchEvent(n),this.bindWindowListeners(),this.closeButton.addClickListener(function(){e.hide(),e.closeButton.node.blur()});var i=this.closeButton.options.style.color;this.closeButton.addNodeListener("mouseover",function(){e.closeButton.setStyle("color","#0082AD")}),this.closeButton.addNodeListener("mouseout",function(){e.closeButton.setStyle("color",i)})}}]),t}(rw),jw=function(e){function t(e,n){var i;return r(this,t),i=b(this,d(t).call(this)),i.socialApp=e,i.options=n,i}return h(t,e),o(t,[{key:"getSocialApp",value:function(){return this.socialApp}},{key:"getClientId",value:function(){return this.getSocialApp().getClientId()}},{key:"setLoaded",value:function(){this.loaded=!0,this.dispatch("loaded")}}],[{key:"getInstance",value:function(){return this._Global||(this._Global=new this),this._Global}},{key:"login",value:function(e,t){var n;(n=this.getInstance()).login.apply(n,arguments)}},{key:"connect",value:function(e,t){var n;(n=this.getInstance()).connect.apply(n,arguments)}}]),t}(Gu),Yw=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,Jk.getSocialAppByName("Google"),{loginByTokenUrl:"/accounts/google/login/token/"})),e.ensureScriptNodeExists(),e}return h(t,e),o(t,[{key:"sendData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au;zu.postJSON(e,t).then(n)}},{key:"ensureScriptNodeExists",value:function(){var e=this,t="google-jsapi";if(!document.getElementById(t)){var n=document.createElement("script");n.id=t,n.async=!0,n.onload=function(){gapi.load("auth2",function(){gapi.auth2.init({client_id:e.getClientId()}).then(function(){e.updateSigninStatus(e.getGoogleAuth().isSignedIn.get()),e.getGoogleAuth().isSignedIn.listen(e.updateSigninStatus),e.setLoaded()})})},n.src="https://apis.google.com/js/platform.js",document.getElementsByTagName("head")[0].appendChild(n)}}},{key:"getGoogleAuth",value:function(){return gapi.auth2.getAuthInstance()}},{key:"getGoogleUser",value:function(){return this.getGoogleAuth().currentUser.get()}},{key:"getAuthResponse",value:function(){return this.getGoogleUser().getAuthResponse()}},{key:"updateSigninStatus",value:function(e){e&&console.log("Google user is signed in")}},{key:"handleProcess",value:function(e){var t=this;if(!this.loaded)return void this.addListenerOnce("loaded",function(){return t.handleProcess(e)});this.getGoogleAuth().grantOfflineAccess({redirect_uri:"postmessage",immediate:!1}).then(function(n){Object.assign(n,{process:e}),t.sendData(t.options.loginByTokenUrl,n,function(){return self.location.reload()})})}},{key:"login",value:function(){this.handleProcess("login")}},{key:"connect",value:function(){this.handleProcess("connect")}}]),t}(jw),Jw=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,Jk.getSocialAppByName("Facebook"),{version:"v2.7",loginByTokenUrl:"/accounts/facebook/login/token/",loginOptions:{auth_type:"rerequest",scope:"email"},logoutUrl:"/accounts/logout/",locale:"en_US"})),e.ensureScriptNodeExists(),e}return h(t,e),o(t,[{key:"sendData",value:function(e,t){var n=this;zu.postJSON(e,t).then(function(e){e.next?self.location.href=e.next:location.reload()},function(e){n.dispatch("loginError",e)})}},{key:"ensureScriptNodeExists",value:function(){var e=this;self.fbAsyncInit=function(){FB.init({appId:e.getClientId(),version:e.options.version,status:!0,cookie:!0,xfbml:!0}),e.setLoaded()};var t="facebook-jssdk";if(!document.getElementById(t)){var n=document.createElement("script");n.id=t,n.async=!0,n.src="//connect.facebook.net/"+this.options.locale+"/sdk.js",document.getElementsByTagName("head")[0].appendChild(n)}}},{key:"onLoginCanceled",value:function(e){}},{key:"onLoginError",value:function(e){}},{key:"onLoginSuccess",value:function(e,t,n){var i={next:t||"",process:n,accessToken:e.authResponse.accessToken,expiresIn:e.authResponse.expiresIn};this.sendData(this.options.loginByTokenUrl,i)}},{key:"logout",value:function(){var e=this;self.FB&&FB.logout(function(t){e.onLogoutSuccess(t,nextUrl)})}},{key:"onLogoutSuccess",value:function(e){this.options.logoutUrl&&this.sendData(this.options.logoutUrl,data)}},{key:"handleProcess",value:function(e,t,n){var i=this;if(!this.loaded)return void this.addListenerOnce("loaded",function(){return i.handleProcess(n)});"reauthenticate"===t&&(this.options.loginOptions.auth_type=t),FB.login(function(t){t.authResponse?i.onLoginSuccess(t,e,n):t&&t.status&&["not_authorized","unknown"].indexOf(t.status)>-1?i.onLoginCanceled(t):i.onLoginError(t)},this.options.loginOptions)}},{key:"login",value:function(e,t,n){this.handleProcess(self.location.pathname,"authenticate","login")}},{key:"connect",value:function(e,t,n){this.handleProcess(self.location.pathname,"authenticate","connect")}}]),t}(jw),qw=function(e){function t(){return r(this,t),b(this,d(t).call(this,Jk.getSocialAppByName("Github"),{loginWindowOptions:"height=600,width=800,scrollbars=yes"}))}return h(t,e),o(t,[{key:"login",value:function(e){var t={client_id:this.getClientId()},n=ue("https://github.com/login/oauth/authorize",t);window.open(n,"githubWindow",this.options.loginWindowOptions).onbeforeunload=e}}]),t}(jw),Xw=40,Kw=(aw=Iw=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"loginRegisterSystem",ow,y(n)),O(n,"loginRegisterButtons",sw,y(n)),O(n,"loginSystemButton",lw,y(n)),O(n,"registerSystemButton",uw,y(n)),n.selectedLeft={borderBottom:"0",borderRight:"0",backgroundColor:"#fff",fontWeight:"bold"},O(n,"selectedLeftClass",cw,y(n)),n.selectedRight={borderBottom:"0",borderLeft:"0",backgroundColor:"#fff",fontWeight:"bold"},O(n,"selectedRightClass",hw,y(n)),O(n,"loginWidget",dw,y(n)),O(n,"registerWidget",pw,y(n)),n.fontAwesomeIcon={height:Xw+"px",lineHeight:Xw+"px",width:"15%",maxWidth:"15%",textAlign:"center",fontSize:"150%",display:"inline-block",float:"left",borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px",borderRight:"0px solid white",marginTop:"20px"},O(n,"input",fw,y(n)),O(n,"countrySelect",gw,y(n)),O(n,"badLogin",mw,y(n)),O(n,"rememberMe",vw,y(n)),O(n,"rememberMeCheckbox",yw,y(n)),O(n,"forgotPassword",bw,y(n)),O(n,"signInButtonContainer",kw,y(n)),O(n,"signInButton",ww,y(n)),O(n,"horizontalLine",Ew,y(n)),n.connectWith={width:"100%",textAlign:"center",marginTop:"20px"},n.connectIcons={width:"60%",marginLeft:"20%",marginRight:"20%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20px"},O(n,"faLogo",Sw,y(n)),O(n,"recaptchaContainer",Cw,y(n)),O(n,"connectWithButtonsSpan",xw,y(n)),O(n,"thirdPartyLoginContainer",Tw,y(n)),n.socialConnectDimensions="35px",O(n,"socialConnectButtonContainer",Aw,y(n)),O(n,"socialConnectButtonIcon",Lw,y(n)),n}return h(t,e),t}(Jc),ow=R(aw.prototype,"loginRegisterSystem",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){return rc.isTouchDevice()?(console.log("Touch device mode on"),{position:"absolute",height:"500px",width:"500px",backgroundColor:"#fff",maxHeight:"100%",maxWidth:"100%"}):{maxWidth:"100%",height:"500px",width:"500px",margin:"0 auto",backgroundColor:"#fff"}}}}),sw=R(aw.prototype,"loginRegisterButtons",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",width:"100%",height:"12%"}}}),lw=R(aw.prototype,"loginSystemButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",width:"50%",backgroundColor:"#f6f6f6",color:"#252525",border:"1px solid #d3d5d9",cursor:"pointer",float:"left",borderLeft:"0",borderTop:"0",textTransform:"uppercase",fontSize:"1.1em"}}}),uw=R(aw.prototype,"registerSystemButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",width:"50%",backgroundColor:"#f6f6f6",color:"#252525",border:"1px solid #d3d5d9",cursor:"pointer",float:"left",borderRight:"0",borderTop:"0",textTransform:"uppercase",fontSize:"1.1em"}}}),cw=R(aw.prototype,"selectedLeftClass",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"0",borderRight:"0",backgroundColor:"#fff"}}}),hw=R(aw.prototype,"selectedRightClass",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"0",borderLeft:"0",backgroundColor:"#fff"}}}),dw=R(aw.prototype,"loginWidget",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"440px",width:"500px",maxWidth:"100%",padding:"5% 10%",color:"#252525",borderTop:"0px solid #d3d5d9"}}}),pw=R(aw.prototype,"registerWidget",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"440px",width:"500px",maxWidth:"100%",padding:"5% 10%",color:"#252525",borderTop:"0px solid #d3d5d9"}}}),fw=R(aw.prototype,"input",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"85%",maxWidth:"85%",height:Xw+"px",lineHeight:Xw+"px",display:"inline-block",float:"left",borderRadius:"0",borderTopRightRadius:"5px",borderBottomRightRadius:"5px",marginTop:"20px",fontWeight:"bold",color:"#252525",
border:"0px solid #d3d5d9",borderLeft:"0px solid white",boxShadow:"none",fontSize:"85%",":focus":{boxShadow:"none",outline:"none",border:"0px solid #d3d5d9",borderLeft:"0px solid white"}}}}),gw=R(aw.prototype,"countrySelect",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"85%",maxWidth:"85%",lineHeight:"30px",marginTop:"30px",marginBottom:"10px"}}}),mw=R(aw.prototype,"badLogin",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"30px",width:"100%",fontSize:"14px",color:this.themeProperties.COLOR_DANGER,textAlign:"center"}}}),vw=R(aw.prototype,"rememberMe",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",paddingLeft:"5px"}}}),yw=R(aw.prototype,"rememberMeCheckbox",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{float:"left"}}}),bw=R(aw.prototype,"forgotPassword",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right",paddingRight:"5px"}}}),kw=R(aw.prototype,"signInButtonContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",margin:"20px auto"}}}),ww=R(aw.prototype,"signInButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"auto",marginRight:"auto",backgroundColor:"#f6f6f6",marginTop:"20px",minWidth:"120px",height:"50px",textAlign:"center",lineHeight:"50px",border:"0px solid #d3d5d9",fontSize:"18px",color:"#252525",":hover":{border:"0px solid #0b79a7",borderBottom:"2px solid #0b79a7",color:"#0b79a7"}}}}),Ew=R(aw.prototype,"horizontalLine",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"1px solid #d3d5d9",width:"100%",marginTop:"20px"}}}),Sw=R(aw.prototype,"faLogo",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"40px",paddingLeft:"15px",paddingRight:"15px",borderRadius:"3px",textAlign:"center",fontSize:"18px",marginLeft:"5px",marginRight:"5px",transition:".2s",color:"#fff",":hover":{transition:".2s",opacity:".9"},cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold"}}}),Cw=R(aw.prototype,"recaptchaContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-around",alignItems:"center",flexDirection:"column",width:"100%"}}}),xw=R(aw.prototype,"connectWithButtonsSpan",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:"15px",fontSize:"15px"}}}),Tw=R(aw.prototype,"thirdPartyLoginContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",margin:"15px 0"}}}),Aw=R(aw.prototype,"socialConnectButtonContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",height:this.socialConnectDimensions,color:"#fff",paddingRight:"10px",borderRadius:"5px",margin:"5px",outline:"none",paddingTop:"0",cursor:"pointer",fontSize:"13px",border:"0",":hover":{opacity:".85"}}}}),Lw=R(aw.prototype,"socialConnectButtonIcon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.socialConnectDimensions,width:this.socialConnectDimensions,display:"flex !important",justifyContent:"center",alignItems:"center"}}}),aw),Qw={Google:{name:"Google",color:"#de4b39",icon:"google-plus",loginManager:Yw},Facebook:{name:"Facebook",color:"#3b5998",icon:"facebook",loginManager:Jw},Github:{name:"Github",color:"#000",icon:"github",loginManager:qw}},Zw=(Nw=Ze(Kw))(Ow=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){var t=this.options.specificInfo;e.addClass(this.styleSheet.socialConnectButtonContainer),e.setStyle({backgroundColor:t.color})}},{key:"getLoginManager",value:function(){return this.options.specificInfo.loginManager.getInstance()}},{key:"render",value:function(){var e=this.options.specificInfo;return[Lc.createElement(kf,{icon:e.icon,className:this.styleSheet.socialConnectButtonIcon}),Lc.createElement("span",null," ",e.name)]}},{key:"onMount",value:function(){var e=this;this.getLoginManager(),this.addClickListener(function(){var t=e.options.loginElement;t&&t.clearErrorMessage(),e.getLoginManager().login()})}}]),t}(Lc.Primitive("button")))||Ow,$w=(Rw=Ze(Kw))(Mw=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getSocialApps",value:function(){return Jk.all()}},{key:"getConnectWith",value:function(){return Lc.createElement("div",{style:this.styleSheet.connectWith},Lc.T("or connect with"))}},{key:"getConnectWithButtons",value:function(){var e=this;return Lc.createElement("div",{className:this.styleSheet.thirdPartyLoginContainer},this.getSocialApps().map(function(t){return Lc.createElement(Zw,{specificInfo:Qw[t.name],loginElement:e.options.loginElement})}))}},{key:"render",value:function(){return[this.getConnectWith(),this.getConnectWithButtons()]}}]),t}(Lc.Element))||Mw,eE=(Pw=Ze(Kw))(Dw=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.loginWidget)}},{key:"getEmailInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user";return[Lc.createElement("div",{style:{width:"100%"}},Lc.createElement(kf,{icon:e,style:this.styleSheet.fontAwesomeIcon}),Lc.createElement(bg,{autofocus:"autofocus",placeholder:"Email address",name:"email",ref:"emailInput",className:this.styleSheet.input}))]}},{key:"getPasswordInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({name:"password",className:this.styleSheet.input,ref:"passwordInput",placeholder:"Password",style:{marginBottom:"20px"}},e),[Lc.createElement("div",{style:{width:"80% !important"}},Lc.createElement(kf,{icon:"lock",style:this.styleSheet.fontAwesomeIcon}),Lc.createElement(kg,e))]}},{key:"getRememberMeCheckbox",value:function(){return[Lc.createElement(Eg,{checked:!0,ref:"rememberInput",className:this.styleSheet.rememberMeCheckbox}),Lc.createElement("div",{className:this.styleSheet.rememberMe},Lc.T("Remember me"))]}},{key:"getForgotPassword",value:function(){return Lc.createElement(Xd,{className:this.styleSheet.forgotPassword,href:"/accounts/password_reset",value:Lc.T("Forgot Password?")})}},{key:"getClearBothArea",value:function(){return Lc.createElement("div",{style:{clear:"both",height:"20px"}})}},{key:"getErrorArea",value:function(){return Lc.createElement($d,{className:this.styleSheet.badLogin,ref:"loginErrorMessage"})}},{key:"getSignInValue",value:function(){return"Sign In"}},{key:"getSignInButton",value:function(){return Lc.createElement("div",{className:this.styleSheet.signInButtonContainer},Lc.createElement(mg,{className:this.styleSheet.signInButton,value:this.getSignInValue()}))}},{key:"getHorizontalLine",value:function(){return Lc.createElement("div",{className:this.styleSheet.horizontalLine})}},{key:"getThirdPartyLogin",value:function(){return Jk.all().length?[this.getHorizontalLine(),Lc.createElement($w,{loginElement:this})]:null}},{key:"render",value:function(){return[Lc.createElement("form",{ref:"form"},this.getEmailInput(),this.getPasswordInput(),this.getRememberMeCheckbox(),this.getForgotPassword(),this.getSignInButton(),this.getClearBothArea(),this.getErrorArea()),this.getThirdPartyLogin()]}},{key:"setErrorMessage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.loginErrorMessage.showMessage(e.message,t?$c.Global.getProperty("COLOR_DANGER"):"#000",6e3)}},{key:"clearErrorMessage",value:function(){this.loginErrorMessage.clear()}},{key:"sendLogin",value:function(){var e=this;this.clearErrorMessage();var t={email:this.emailInput.getValue(),password:this.passwordInput.getValue(),remember:this.rememberInput.getValue()};zu.postJSON("/accounts/login/",t).then(function(){return location.reload()},function(t){return e.setErrorMessage(t)})}},{key:"onMount",value:function(){var e=this;this.form&&this.form.addNodeListener("submit",function(t){e.sendLogin(),t.preventDefault()})}}]),t}(Lc.Element))||Dw,tE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return Lc.createElement("div",{key:Math.random()})}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),window.grecaptcha&&window.GOOGLE_RECAPTCHA_PUBLIC_KEY&&(this.captchaId=grecaptcha.render(this.children[0].node,{sitekey:window.GOOGLE_RECAPTCHA_PUBLIC_KEY}))}},{key:"getResponse",value:function(){return grecaptcha.getResponse(this.captchaId)}},{key:"onMount",value:function(){var e=this;window.onRecaptchaCallback=function(){return e.redraw()},dt("https://www.google.com/recaptcha/api.js?render=explicit&onload=onRecaptchaCallback",function(){})}}]),t}(Lc.Element),nE=(Bw=Ze(Kw))(_w=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.registerWidget)}},{key:"getSignUpButton",value:function(){return Lc.createElement("div",{className:this.styleSheet.signInButtonContainer},Lc.createElement(mg,{className:this.styleSheet.signInButton,value:"Sign Up",ref:"submitButton"}))}},{key:"getUsernameInput",value:function(){return[Lc.createElement("div",{style:{width:"100%"}},Lc.createElement(kf,{icon:"user",style:this.styleSheet.fontAwesomeIcon}),Lc.createElement(vg,{placeholder:"Username",ref:"usernameInput",className:this.styleSheet.input}))]}},{key:"getCountryInput",value:function(){return[Lc.createElement("div",{style:{width:"100%",marginBottom:"20px"}},Lc.createElement(kf,{icon:"flag",style:this.styleSheet.fontAwesomeIcon}),Lc.createElement(Gg,{ref:"countrySelect",options:tk.allWithNone("Don't set country"),className:this.styleSheet.countrySelect}),Lc.createElement("div",{style:{clear:"both"}}))]}},{key:"render",value:function(){var e=[this.getEmailInput(),this.getPasswordInput()];return e.splice(1,0,this.getUsernameInput()),e[0]=this.getEmailInput("envelope"),e[e.length-1]=this.getPasswordInput({style:{}}),e.push(this.getCountryInput()),"localhost"!==window.location.hostname&&(this.recaptchaWidget=Lc.createElement(tE,null)),[Lc.createElement("form",{ref:"form"},e,Lc.createElement("div",{className:this.styleSheet.recaptchaContainer},this.recaptchaWidget,this.getSignUpButton(),Lc.createElement($d,{ref:"errorArea"})))]}},{key:"sendRegistration",value:function(){var e=this;this.submitButton.updateOptions({value:"Signing up..."});var t={email:this.emailInput.getValue(),recaptchaKey:this.recaptchaWidget&&this.recaptchaWidget.getResponse(),password:this.passwordInput.getValue()};this.usernameInput&&(t.username=this.usernameInput.getValue()),this.countrySelect&&(t.countryId=this.countrySelect.get().id),zu.postJSON("/accounts/signup_request/",t).then(function(){e.recaptchaWidget&&e.recaptchaWidget.hide(),e.submitButton.hide(),e.errorArea.showMessage("Done! Please check your email to continue","black",936e5)},function(t){e.errorArea.showMessage("Error in registration: "+t.message,"red",4e3),e.submitButton.updateOptions({value:"Sign Up"}),e.recaptchaWidget&&e.recaptchaWidget.redraw()})}},{key:"onMount",value:function(){var e=this;this.form.addNodeListener("submit",function(t){t.preventDefault(),e.sendRegistration()})}}]),t}(Lc.Element))||_w;nE.prototype.getEmailInput=eE.prototype.getEmailInput,nE.prototype.getPasswordInput=eE.prototype.getPasswordInput,nE.prototype.getHorizontalLine=eE.prototype.getHorizontalLine;var iE=(Fw=Ze(Kw))(Uw=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this)),e.state=0,e}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.loginRegisterSystem)}},{key:"getLoginButton",value:function(){var e={};return 0===this.state&&(e=this.styleSheet.selectedLeft),Lc.createElement("div",{className:this.styleSheet.loginSystemButton,style:e,ref:"loginButton"},Lc.T("Log In"))}},{key:"getRegisterButton",value:function(){var e={};return 1===this.state&&(e=this.styleSheet.selectedRight),Lc.createElement("div",{className:this.styleSheet.registerSystemButton,style:e,ref:"registerButton"},Lc.T("Sign Up"))}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.loginRegisterButtons},this.getLoginButton(),this.getRegisterButton()),Lc.createElement(Of,{ref:"switcher"},Lc.createElement(eE,{ref:"loginWidget",active:0===this.state}),Lc.createElement(nE,{ref:"registerWidget",active:1===this.state}))]}},{key:"onMount",value:function(){var e=this;this.loginButton.addClickListener(function(){e.state=0,e.switcher.setActive(e.loginWidget),e.redraw()}),this.registerButton.addClickListener(function(){e.state=1,e.switcher.setActive(e.registerWidget),e.redraw()})}}]),t}(Lc.Element))||Uw,rE=((zw=Ze(Kw))(Ww=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{children:[Lc.T("Log In")]}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.loginSystemButton),this.options.active&&e.addClass(this.styleSheet.selectedLeftClass)}}]),t}(Lc.Primitive(Hb,"div"))),(Hw=Ze(Kw))(Vw=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{children:[Lc.T("Register")]}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.registerSystemButton),this.options.active&&e.addClass(this.styleSheet.selectedRightClass)}}]),t}(Lc.Primitive(Hb,"div"))),function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(iE,null)]}}]),t}(Lc.Element)),aE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getModalWindowStyle",value:function(){return rc.isTouchDevice()?{position:"relative",padding:"0",boxShadow:"0 5px 15px rgba(0,0,0,0.5)",display:this.options.display||"block",left:"0",right:"0",width:"100vw",height:"600px",background:"white",overflow:this.options.overflow||"auto",maxHeight:"100%",maxWidth:"500px",verticalAlign:"center",margin:"0 auto"}:{position:"relative",padding:"0",boxShadow:"0 5px 15px rgba(0,0,0,0.5)",margin:"60px auto",display:this.options.display||"block",maxHeight:this.options.maxHeight||"85%",left:"0",right:"0",width:"500px",height:this.options.height||"600px",background:"white",overflow:this.options.overflow||"auto"}}},{key:"render",value:function(){return Lc.createElement(rE,null)}}],[{key:"requireLogin",value:function(e){if(USER.isAuthenticated)return e();this.show()}}]),t}(Qg),oE={logout:function(){zu.postJSON("/accounts/logout/",{}).then(function(){return location.reload()})}},sE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.userId=e.userId||e.id,w(d(t.prototype),"setOptions",this).call(this,e),this.setUser(sk.get(this.options.userId))}},{key:"setUser",value:function(e){this.user=e}},{key:"getNodeType",value:function(){return"span"}},{key:"getRatingColor",value:function(){if(!this.user)return"#BBB";if(this.user.isAdmin)return"black";if(!this.user.rating)return"#BBB";var e=window.RATING_BANDS,t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.minRating<=this.user.rating&&this.user.rating<o.maxRating)return o.color}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setColor",value:function(e){this.options.color=e,this.handle.setStyle("color",e)}},{key:"render",value:function(){var e,t,n=this;if(this.user){var i=null;this.options.hasOwnProperty("disableClick")||(i=function(){n.togglePopup(),Lc.event.stopPropagation(),Lc.event.preventDefault()}),this.options.showCountry&&this.user.countryId&&(t=Lc.createElement(Lc.Emoji,{style:{paddingRight:"2px"},width:"1.6em",height:"1.6em",value:this.user.getCountry().getEmojiName(),title:this.user.getCountry().name})),e=Lc.createElement("span",{ref:"handle",style:{cursor:"pointer",color:this.options.color?this.options.color:this.getRatingColor()},onClick:i},Lc.createElement("b",null,this.user.getDisplayHandle()))}else sk.fetch(this.options.userId,function(e){n.setUser(e),n.redraw()}),e=Lc.createElement("span",{ref:"handle",style:{color:"#BBB"},onClick:function(){return null}},"user-"+this.options.userId);return[Lc.createElement("span",{ref:"container",style:{position:"relative"}},t,e,this.options.children)]}},{key:"getPopupTitle",value:function(){var e=Lc.createElement(Xd,{href:this.user.getProfileUrl(),value:this.user.name||this.user.username||"user-"+this.user.id});return USER.isSuperUser?Lc.createElement("span",{style:{position:"relative"}},e,Lc.createElement("br",null),Lc.createElement("span",null,"id: "+this.user.id)):e}},{key:"getPopupContent",value:function(){var e=[];if(this.user.rating?(e.push(Lc.createElement("p",{style:{height:"25px","line-height":"25px"}},"Rating: "+this.user.rating)),e.push(Lc.createElement("p",{style:{height:"25px","line-height":"25px"}},Lc.createElement(Xd,{href:"/ratings",value:"Rank: "+this.user.globalRatingRank})))):e.push(Lc.createElement("p",{style:{height:"25px","line-height":"25px"}},"Rating: N/A")),this.user.countryId){var t=tk.get(this.user.countryId),n=t.getEmojiName();e.push(Lc.createElement("p",{style:{height:"25px","line-height":"25px"}},"Country: ",t.name,Lc.createElement(Lc.Emoji,{style:{paddingLeft:"3px"},title:t.name,value:n,height:"1.6em",width:"1.6em"})))}return e}},{key:"togglePopup",value:function(){return this.options.noPopup?void window.open(this.user.getProfileUrl(),"_blank"):this.popup&&this.popup.isInDocument()?void this.popup.hide():void(this.popup=Gw.create(this.container,Object.assign({target:this.handle,title:this.getPopupTitle(),children:this.getPopupContent(),transitionTime:300,titleFontSize:"10pt",style:{minWidth:"150px",maxWidth:"270px"}})))}}]),t}(Lc.Element),lE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getUserReactionStore",value:function(){return this.getStore().getState().getStore("UserReaction")}},{key:"getReactions",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.getUserReactionStore().all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.collectionId==this.id&&e.push(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getCurrentUserReaction",value:function(){var e=window.USER,t=!0,n=!1,i=void 0;try{for(var r,a=this.getReactions()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.userId==e.id)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"getCurrentUserReactionType",value:function(){var e=this.getCurrentUserReaction();return e&&e.type}}]),t}(fp),uE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),cE=new mp("UserReactionCollection",lE),hE=(new mp("UserReaction",uE),function(e){function t(e,n){var i;return r(this,t),i=b(this,d(t).call(this,e,n)),sk.fakeCreate(n.user),i}return h(t,e),o(t,[{key:"getNormalizedId",value:function(){var e=this.id+"";return e.startsWith("temp-")&&(e=e.substr(5)),parseInt(e)}},{key:"getDate",value:function(){return this.timeAdded}},{key:"getUser",value:function(){var e=sk.get(this.userId);return e?e.username:"user-"+this.userId}},{key:"getContent",value:function(){return this.content}},{key:"getMessageThread",value:function(){return gE.get(this.messageThreadId)}},{key:"getReactionCollection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=cE.get(this.reactionCollectionId);return e&&!t?{upvotesCount:0,downvotesCount:0,getCurrentUserReactionType:function(){}}:t}},{key:"getNumLikes",value:function(){return this.getReactionCollection(!0).upvotesCount}},{key:"getNumDislikes",value:function(){return this.getReactionCollection(!0).downvotesCount}},{key:"getVotesBalance",value:function(){return this.getNumLikes()-this.getNumDislikes()}},{key:"getUserVote",value:function(){return this.getReactionCollection(!0).getCurrentUserReactionType()}},{key:"getPreviousMessage",value:function(){var e=null,t=this.getNormalizedId();this.hasTemporaryId()&&(t+=1);var n=!0,i=!1,r=void 0;try{for(var a,o=this.getMessageThread().getMessages()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.id<t&&(!e||e.id<s.id)&&(e=s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e}},{key:"getNextMessage",value:function(){throw"Implement me!"}},{key:"hasMarkupEnabled",value:function(){return this.getMessageThread().hasMarkupEnabled()}},{key:"getTimeOfDay",value:function(){return Ap.unix(this.timeAdded).format("HH:mm")}},{key:"edit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Au,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au;zu.postJSON("/chat/edit_message/",{messageId:this.id,message:e}).then(t,n)}},{key:"react",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Au,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au;zu.postJSON("/chat/edit_message/",{messageId:this.id,reaction:e}).then(t,n)}},{key:"like",value:function(e,t){this.react("like",e,t)}},{key:"dislike",value:function(e,t){this.react("dislike",e,t)}},{key:"resetReaction",value:function(e,t){this.react("resetReaction",e,t)}},{key:"deleteMessage",value:function(e,t){zu.postJSON("/chat/edit_message/",{messageId:this.id,hidden:!0}).then(e,t)}},{key:"applyEvent",value:function(e){"messageEdit"===e.type?(Object.assign(this,e.data),this.dispatch("edit",e)):"reaction"===e.type?(Object.assign(this,e.data),this.dispatch("reaction",e)):"messageDelete"===e.type?(this.dispatch("delete",e),this.getMessageThread().deleteMessageInstance(this)):w(d(t.prototype),"applyEvent",this).call(this,e)}},{key:"updateId",value:function(e){if(this.id!=e){var n=this.id;w(d(t.prototype),"updateId",this).call(this,e);var i=this.getMessageThread();i.messages.delete(n),i.messages.set(this.id,this)}}},{key:"setPostError",value:function(e){this.postError=e,this.dispatch("postError",e),console.log("Post error: ",e)}}]),t}(kp(fp))),dE=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.messages=new Map,n.streamName.startsWith("messagethread-privatechat-")||n.streamName.startsWith("temp-")||cp.registerStream(n.streamName),n.online=new Set(n.online||[]),n.online.delete(0),n}return h(t,e),o(t,[{key:"hasMarkupEnabled",value:function(){return this.markupEnabled||!1}},{key:"addMessageInstance",value:function(e,t){this.messages.set(e.id,e),this.dispatch("newMessage",t)}},{key:"deleteMessageInstance",value:function(e){this.messages.delete(e.id)}},{key:"applyEvent",value:function(e){e.data.online&&(this.online=e.data.online=new Set(e.data.online),this.online.delete(0)),"online"===e.type?this.dispatch("usersChanged",e):"onlineDeltaJoined"===e.type?(0!=e.data.userId&&this.online.add(e.data.userId),this.dispatch("usersChanged",e)):"onlineDeltaLeft"===e.type?(0!=e.data.userId&&this.online.delete(e.data.userId),this.dispatch("usersChanged",e)):w(d(t.prototype),"applyEvent",this).call(this,e)}},{key:"getMessages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Array.from(this.messages.values());return e?t.sort(function(e,t){return t.id-e.id}):t.sort(function(e,t){return e.id-t.id})}},{key:"getNumMessages",value:function(){return this.messages.size}},{key:"getMaxMessageId",value:function(){var e=0,t=!0,n=!1,i=void 0;try{for(var r,a=this.messages.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;!o.hasTemporaryId()&&o.id>e&&(e=o.id)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getLastMessage",value:function(){var e=null,t=!0,n=!1,i=void 0;try{for(var r,a=this.messages.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;(!e||e.getNormalizedId()<o.getNormalizedId()||e.getNormalizedId()===o.getNormalizedId()&&o.hasTemporaryId())&&(e=o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}}]),t}(fp),pE=function(e){function t(){return r(this,t),b(this,d(t).call(this,"MessageInstance",hE,{dependencies:["messagethread","publicuser"]}))}return h(t,e),o(t,[{key:"createVirtualMessageInstance",value:function(e,t,n){var i={content:e,temporaryId:n,id:"temp-"+n,timeAdded:yf.now().toUnix(),userId:parseInt(USER.id),messageThreadId:t.id,meta:{}};return this.fakeCreate(i,"virtualMessage")}}]),t}(wp(mp)),fE=new pE;fE.addCreateListener(function(e,t){e.getMessageThread().addMessageInstance(e,t)});var gE=new mp("messagethread",dE),mE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getMessageThread",value:function(){return gE.get(this.messageThreadId)}},{key:"getOnlineUserIds",value:function(){return this.getMessageThread().online}}]),t}(fp),vE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(mE),yE=bp(mp),bE=new yE("groupChat",vE,{fetchURL:"/chat/group_chat_state/",maxFetchObjectCount:1});bE.getFetchRequestData=function(e,t){return{chatId:e[0]}};var kE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getOtherUserId",value:function(){return USER.id===this.user1Id?this.user2Id:this.user1Id}}]),t}(mE),wE=new mp("PrivateChat",kE,{});wE.getChatWithUser=function(e){if(USER.id===e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.user1Id===e&&o.user2Id===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}var s=!0,l=!1,u=void 0;try{for(var c,h=this.all()[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;if(d.user1Id===e||d.user2Id===e)return d}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}},wE.fetchForUser=function(e,t,n){zu.postJSON("/chat/private_chat_state/",{userId:e}).then(function(e){return t(wE.get(e.privateChatId))},n)},wE.addListener("update",function(e,t){"privateMessage"===t.type&&cp.importState(t.state)});var EE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{showButtons:!0}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle("textAlign","center")}},{key:"getMarkupRenderer",value:function(){var e={};return this.options.classMap&&(e.classMap=this.options.classMap),Lc.createElement(sp,l({ref:this.refLink("markupRenderer"),value:this.options.value,style:{height:"100%",overflow:"auto"}},e))}},{key:"getEditor",value:function(){return Lc.createElement(Vg,{ref:"codeEditor",style:{width:"100%",height:"calc(100% - 3px)",resize:"none",backgroundColor:"#F9F9F9"},value:this.options.value||""})}},{key:"render",value:function(){var e;return this.options.showButtons&&(e=Lc.createElement(jg,null,Lc.createElement(Md,{ref:"toggleLeftButton",label:Lc.T("Editor"),level:Pc.SUCCESS}),Lc.createElement(Md,{ref:"toggleRightButton",label:Lc.T("Article"),level:Pc.SUCCESS}))),[e,Lc.createElement(tb,{ref:"sectionDivider",orientation:Rc.HORIZONTAL,style:{textAlign:"initial",height:"100%",width:"100%",display:"inline-block",overflow:"hidden"}},Lc.createElement(jd,{ref:"editorPanel",style:{width:"50%",height:"100%",overflow:"hidden"}},this.getEditor()),Lc.createElement(jd,{ref:"rendererPanel",style:{width:"50%",height:"100%",overflow:"auto",padding:"10px"}},this.getMarkupRenderer()))]}},{key:"updateValue",value:function(e){this.markupRenderer.setValue(e),this.markupRenderer.redraw()}},{key:"appendValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n",n=this.getValue();n&&null!=t&&(n+=t),n+=e,this.setValue(n),this.updateValue(n)}},{key:"setEditorOptions",value:function(){var e=this;this.editorPanel.addListener("resize",function(){e.codeEditor.setWidth(e.editorPanel.getWidth()-15)}),this.codeEditor.addNodeListener("input",function(){var t=e.codeEditor.getValue();try{e.updateValue(t)}catch(e){console.error("Exception in parsing markup: ",e)}})}},{key:"onMount",value:function(){var e=this;this.options.showButtons&&(this.toggleLeftButton.addClickListener(function(){0===e.editorPanel.getWidth()?(e.sectionDivider.expandChild(0),e.toggleLeftButton.setLevel(Pc.SUCCESS)):(e.sectionDivider.collapseChild(0),e.toggleLeftButton.setLevel(Pc.DANGER))}),this.toggleRightButton.addClickListener(function(){0===e.rendererPanel.getWidth()?(e.sectionDivider.expandChild(1),e.toggleRightButton.setLevel(Pc.SUCCESS)):(e.sectionDivider.collapseChild(1),e.toggleRightButton.setLevel(Pc.DANGER))})),this.setEditorOptions()}},{key:"getValue",value:function(){return this.codeEditor.getValue()}},{key:"setValue",value:function(e){return this.updateValue(e),this.codeEditor.setValue(e)}}]),t}(jd);Lc.Emoji=Lc.Emoji||Lc.Element;var SE,CE,xE,TE,AE,LE,IE,NE,OE,RE,ME,PE,DE,BE,_E,FE,UE,zE,WE,HE,VE,GE,jE,YE,JE,qE,XE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{height:"85%",width:"80%",destroyOnHide:!1})}},{key:"getMarkupEditorStyle",value:function(){return{height:"85%",border:"solid 5px #DDD",borderRadius:"10px"}}},{key:"getButtonStyle",value:function(){return{margin:"5px"}}},{key:"render",value:function(){var e=this;return[Lc.createElement(EE,{ref:this.refLink("markupEditor"),classMap:this.options.classMap,showButtons:!1,style:this.getMarkupEditorStyle()}),Lc.createElement("div",{ref:this.refLink("buttonPanel"),style:{"text-align":"center"}},Lc.createElement(Md,{ref:"graphExample",label:"Graph",onClick:function(){e.appendGraphExample()},style:this.getButtonStyle(),className:"pull-left"}),Lc.createElement(Md,{ref:"submissionExample",label:"Submission",onClick:function(){e.appendSubmissionExample()},style:this.getButtonStyle(),className:"pull-left"}),Lc.createElement(Md,{ref:"codeSnippetExample",level:Pc.DEFAULT,size:Dc.DEFAULT,label:"Code",onClick:function(){e.appendCodeExample()},style:this.getButtonStyle(),className:"pull-left"}),Lc.createElement(Md,{ref:"linkExample",level:Pc.DEFAULT,size:Dc.DEFAULT,label:"Link",onClick:function(){e.appendLinkExample()},style:this.getButtonStyle(),className:"pull-left"}),Lc.createElement(Md,{ref:"latexExample",level:Pc.DEFAULT,size:Dc.DEFAULT,label:"LaTeX",onClick:function(){e.appendLatexExample()},style:this.getButtonStyle(),className:"pull-left"}),Lc.createElement(Md,{ref:this.refLink("doneButton"),level:Pc.PRIMARY,label:"Done",className:"pull-right",style:this.getButtonStyle()})),Lc.createElement("div",{className:"",style:{position:"absolute",width:"90%","margin-top":"45px"}},Lc.createElement(Xd,{href:"/about/#markup",value:"More details here"}))]}},{key:"appendLatexExample",value:function(){this.markupEditor.appendValue("$$lim_{x\\to\\infty} f(x)$$")}},{key:"appendGraphExample",value:function(){this.markupEditor.appendValue("<Graph nodes={[{}, {}, {}]} edges={[{source:1, target:2}]} directed />")}},{key:"appendSubmissionExample",value:function(){this.markupEditor.appendValue("<Submission id={25717} />")}},{key:"appendCodeExample",value:function(){
this.markupEditor.appendValue('```java\nclass Main {\n    public static void main (String[] args) throws java.lang.Exception {\n        System.out.println("42");\n    }\n}\n```')}},{key:"appendUserExample",value:function(){this.markupEditor.appendValue("<User id={1} />")}},{key:"appendLinkExample",value:function(){this.markupEditor.appendValue('<Link href="https://csacademy.com" value="Cool website" newTab/>')}},{key:"hide",value:function(){w(d(t.prototype),"hide",this).call(this),this.options.hideCallback&&this.options.hideCallback(this)}},{key:"show",value:function(){w(d(t.prototype),"show",this).call(this),this.options.showCallback&&this.options.showCallback(this)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.doneButton.addClickListener(function(){e.hide()})}}]),t}(Qg),KE=(SE=IE=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.height=40,n.size=1,n.likeColor=n.options.likeColor||"#1E8921",n.dislikeColor=n.options.dislikeColor||"#C5302C",n.notVoteColor=n.options.notVoteColor||"#313534",n.balanceColor=n.options.balanceColor||"#313534",n.orientation=Rc.VERTICAL,O(n,"container",CE,y(n)),n.mainClass={height:"40px",lineHeight:"40px",fontSize:"14px",color:"#767676",display:"inline-block",float:"right",textAlign:"right"},n.thumbsStyle={fontSize:n.height/2+"px",lineHeight:n.height+"px"},O(n,"displayStyle",xE,y(n)),n.counterStyle={fontSize:18*n.size+"px",fontWeight:"900",color:n.balanceColor},O(n,"thumbsUpHoverStyle",TE,y(n)),O(n,"thumbsDownHoverStyle",AE,y(n)),O(n,"padding",LE,y(n)),n}return h(t,e),t}(Jc),CE=R(SE.prototype,"container",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"40px",width:"100%",fontSize:"14px",color:"#767676",display:"flex",justifyContent:"flex-end",alignItems:"center"}}}),xE=R(SE.prototype,"displayStyle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",paddingLeft:"3px"}}}),TE=R(SE.prototype,"thumbsUpHoverStyle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:".25s",":hover":{color:this.likeColor,opacity:".8",transition:".25s"}}}}),AE=R(SE.prototype,"thumbsDownHoverStyle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:".25s",":hover":{color:this.dislikeColor,opacity:".8",transition:".25s"}}}}),LE=R(SE.prototype,"padding",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"3px",float:"left",display:"inline-block",height:this.height+"px"}}}),SE),QE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e=Object.assign({votesBalance:0,userVote:Bc.NONE,size:1,likeColor:this.options.likeColor||"#1E8921",dislikeColor:this.options.dislikeColor||"#C5302C",notVoteColor:this.options.notVoteColor||"#313534",balanceColor:this.options.balanceColor||"#313534",orientation:Rc.VERTICAL},e),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"extraNodeAttributes",value:function(e){e.setStyle({textAlign:"center",marginRight:"10px"})}},{key:"render",value:function(){var e={paddingLeft:"4px",paddingRight:"4px",paddingTop:"0px",paddingBottom:"0px",lineHeight:"0px",backgroundColor:"transparent",borderColor:"transparent",fontSize:40*this.options.size+"px",marginTop:8*this.options.size+"px",marginBottom:8*this.options.size+"px",display:this.options.orientation===Rc.VERTICAL?"block":"inline-block",marginLeft:"auto",marginRight:"auto",opacity:.7,cursor:"pointer",color:this.options.notVoteColor},t=Object.assign({},e);this.getUserVote()===Bc.LIKE&&(t.color=this.options.likeColor);var n=Object.assign({},e);this.getUserVote()===Bc.DISLIKE&&(n.color=this.options.dislikeColor);var i={fontSize:18*this.options.size+"px",fontWeight:"900",color:this.options.balanceColor};return[Lc.createElement("span",{className:"fa fa-caret-up voteButton",ref:"likeButton",faIcon:"caret-up",style:t,HTMLtitle:"Click to like"}),Lc.createElement("span",{ref:"counterContainer",style:i},Lc.createElement(Lc.TextElement,{ref:"counter",value:this.getVotesBalance()+""})),Lc.createElement("span",{className:"fa fa-caret-down voteButton",ref:"dislikeButton",faIcon:"caret-down",style:n,HTMLtitle:"Click to dislike"})]}},{key:"getVotesBalance",value:function(){return this.options.votesBalance}},{key:"getUserVote",value:function(){return this.options.userVote}}]),t}(Lc.Element),ZE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getVotesBalance",value:function(){return this.options.message.getVotesBalance()}},{key:"getUserVote",value:function(){return this.options.message.getUserVote()}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.updateTarget(this.options.message)}},{key:"updateTarget",value:function(e){var t=this;if(!e||e instanceof lE)return void(this.options.target=e);var n=e.getReactionCollection();if(n)return void(this.options.target=n);var i=this.attachEventListener(e,"createReactionCollection",function(){t.updateOptions({target:e.getReactionCollection()}),t.setupListener(),i.remove()})}},{key:"setupListener",value:function(){var e=this,t=this.options.target;t&&this.attachUpdateListener(t,function(){e.redraw()})}},{key:"onMount",value:function(){var e=this;this.setupListener(),this.likeButton.addClickListener(function(){if(!USER.isAuthenticated)return void aE.show();e.getUserVote()===Bc.LIKE?e.options.message.resetReaction():e.options.message.like()}),this.dislikeButton.addClickListener(function(){if(!USER.isAuthenticated)return void aE.show();e.getUserVote()===Bc.DISLIKE?e.options.message.resetReaction():e.options.message.dislike()}),this.options.message.addListener("reaction",function(){e.redraw()})}}]),t}(QE),$E=(NE=Ze(KE))(OE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.container)}},{key:"getNumLikes",value:function(){return this.options.message.getNumLikes()}},{key:"getNumDislikes",value:function(){return this.options.message.getNumDislikes()}},{key:"render",value:function(){var e={},t={},n=Object.assign({},this.styleSheet.thumbsStyle);this.getUserVote()===Bc.LIKE&&(n.color=e.color=this.options.likeColor,e.fontWeight="bold");var i=Object.assign({},this.styleSheet.thumbsStyle);return this.getUserVote()===Bc.DISLIKE&&(i.color=t.color=this.options.dislikeColor,t.fontWeight="bold"),[Lc.createElement("span",{className:this.styleSheet.displayStyle,style:e},this.getNumLikes()),Lc.createElement("span",{className:"fa fa-thumbs-up voteButton "+this.styleSheet.displayStyle+" "+this.styleSheet.thumbsUpHoverStyle,ref:"likeButton",faIcon:"thumbs-up",style:n,HTMLtitle:"Click to like"}),Lc.createElement("div",{className:this.styleSheet.padding}),Lc.createElement("span",{className:this.styleSheet.displayStyle,style:t},this.getNumDislikes()),Lc.createElement("span",{className:"fa fa-thumbs-down voteButton "+this.styleSheet.displayStyle+" "+this.styleSheet.thumbsDownHoverStyle,ref:"dislikeButton",faIcon:"thumbs-down",style:i,HTMLtitle:"Click to dislike"})]}}]),t}(ZE))||OE,eS=(RE=GE=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navbarHeight="50px",n.renderMessageHeight="100px",n.userFontSize="1.1em",n.commentFontSize="1.1em",n.backgroundColor="#fff",n.hrBackgroundColor="#ddd",n.hoverBackgroundColor="#f8f8f8",O(n,"renderMessageView",ME,y(n)),O(n,"renderMessage",PE,y(n)),O(n,"chatInput",DE,y(n)),O(n,"messageBoxButton",BE,y(n)),n.previewButton={height:"30px",width:"30px",borderRadius:"100%",fontSize:"100%",marginLeft:"5px"},n.loadMoreButton={border:"0px",color:"#333",borderRadius:"0",borderBottom:"0",backgroundColor:"#eee",padding:"5px 10px",textTransform:"uppercase",marginTop:"15px"},O(n,"messageTimeStampHr",_E,y(n)),O(n,"messageTimeStamp",FE,y(n)),O(n,"groupChatMessage",UE,y(n)),O(n,"comment",zE,y(n)),O(n,"userHandle",WE,y(n)),O(n,"commentContent",HE,y(n)),O(n,"timestamp",VE,y(n)),n}return h(t,e),t}(Jc),ME=R(RE.prototype,"renderMessageView",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",width:"100%",overflowY:"auto",overflowX:"hidden",backgroundColor:this.backgroundColor,position:"relative",wordBreak:"break-word"}}}),PE=R(RE.prototype,"renderMessage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.renderMessageHeight,maxHeight:this.renderMessageHeight,width:"100%",borderTop:"1px solid "+this.hrBackgroundColor,backgroundColor:this.backgroundColor,position:"relative"}}}),DE=R(RE.prototype,"chatInput",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",width:"calc(100% - 50px)",paddingBottom:"0",fontSize:"14px",borderRadius:"0",paddingLeft:"8px",border:"0px",paddingTop:"5px",resize:"none",transition:".2s",display:"inline-block",float:"left",outline:"none",position:"absolute",":focus":{outline:"none",boxShadow:"none"},":active":{outline:"none",boxShadow:"none"}}}}),BE=R(RE.prototype,"messageBoxButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",flex:"1",backgroundColor:"#fff",border:"0",fontSize:"18px",transition:".2s",color:"#333",padding:"0",":hover":{backgroundColor:"transparent",color:"#2089b5",transition:".2s"},":active":{backgroundColor:"transparent",color:"#2089b5",transition:".2s"},":focus":{backgroundColor:"transparent",color:"#2089b5",transition:".2s",outline:"none"},":focus:active":{backgroundColor:"transparent",color:"#2089b5"},":hover:active":{backgroundColor:"transparent",color:"#2089b5"}}}}),_E=R(RE.prototype,"messageTimeStampHr",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"1px",marginTop:"1.5em",marginBottom:"1.5em",width:"100%",maxWidth:"100%",backgroundColor:this.hrBackgroundColor,display:"flex",justifyContent:"center",alignItems:"center",textTransform:"uppercase"}}}),FE=R(RE.prototype,"messageTimeStamp",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"1.5em",width:"auto",paddingLeft:"10px",paddingRight:"10px",backgroundColor:this.backgroundColor,textAlign:"center",color:"#222",fontWeight:"bold"}}}),UE=R(RE.prototype,"groupChatMessage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",backgroundColor:"#fff"}}}),zE=R(RE.prototype,"comment",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:"12px",paddingRight:"12px",paddingTop:"12px",paddingBottom:"12px",":hover":{backgroundColor:this.hoverBackgroundColor}}}}),WE=R(RE.prototype,"userHandle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.userFontSize}}}),HE=R(RE.prototype,"commentContent",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{" p":{marginTop:"0",marginBottom:"0",fontSize:this.commentFontSize,color:"#454545",wordWrap:"break-word"}}}}),VE=R(RE.prototype,"timestamp",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#262626",fontWeight:"bold",margin:"0 10px"}}}),RE);Nd.getInstance().ensureFirstUpdate(),pg.getInstance().ensureFirstUpdate();var tS,nS,iS,rS,aS,oS,sS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.faIcon||(e.label=e.label||Lc.T("Preview")),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(){XE.show({classMap:wk.classMap,showCallback:function(t){t.markupEditor.setValue(e.options.getValue()),t.markupEditor.codeEditor.getAce().focus()},hideCallback:function(t){e.options.setValue(t.markupEditor.getValue())}})})}}]),t}(Md),lS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{deletable:!0})}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.message=e.message}},{key:"render",value:function(){var e=this;return[Lc.createElement(Md,{ref:"editButton",onClick:function(){return e.toggleEditMode()}},Lc.T("Edit")),Lc.createElement(Of,{ref:"contentSwitcher"},Lc.createElement("span",{ref:"contentContainer",style:{"white-space":"pre-line"}},this.message.hasMarkupEnabled()?Lc.createElement(wk,{ref:this.refLink("content"),value:this.message.getContent(),style:{height:"auto"}}):Lc.createElement(Lc.TextElement,{ref:"content",value:this.message.getContent()})))]}},{key:"showEditMode",value:function(){var e=this;if(this.editContent)this.messageInput.setValue(this.message.getContent());else{var t={"margin-top":"5px"},n={overflow:"auto",height:"60px",width:"100%"};this.editContent=Lc.createElement("div",{style:t},Lc.createElement(Vg,{ref:this.refLink("messageInput"),style:n,className:"form-control",value:this.message.getContent()}),Lc.createElement(jg,null,Lc.createElement(Md,{label:Lc.T("Cancel"),level:Pc.DEFAULT,size:Dc.SMALL,onClick:function(){e.hideEditMode()}}),Lc.createElement(sS,{size:Dc.SMALL,getValue:function(){return e.messageInput.getValue()},setValue:function(t){e.messageInput.setValue(t),e.messageInput.node.focus()}}),Lc.createElement(Md,{label:Lc.T("Save changes"),level:Pc.PRIMARY,onClick:function(){return e.saveMessageChanges()},size:Dc.SMALL}),this.options.deletable?Lc.createElement(Md,{level:Pc.DANGER,label:Lc.T("Delete"),size:Dc.SMALL,onClick:function(){return e.deleteMessage()}}):""))}this.contentSwitcher.hasChild(this.editContent)||this.contentSwitcher.appendChild(this.editContent),this.contentSwitcher.setActive(this.editContent)}},{key:"hideEditMode",value:function(){this.contentSwitcher.setActive(this.contentContainer)}},{key:"toggleEditMode",value:function(){this.contentSwitcher.getActive()===this.contentContainer?this.showEditMode():this.hideEditMode()}},{key:"saveMessageChanges",value:function(){var e=this,t=this.messageInput.getValue();t&&this.message.edit(t,function(){e.hideEditMode()})}},{key:"deleteMessage",value:function(){this.options.deletable&&this.message.deleteMessage()}},{key:"onMount",value:function(){var e=this;this.message.addListener("edit",function(){e.content.setValue(e.message.getContent()),e.redraw()}),this.message.addListener("delete",function(){e.hide()})}}]),t}(Lc.Element),uS=(jE=Ze(eS))(YE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){var n=this;w(d(t.prototype),"setOptions",this).call(this,e),this.message.hasTemporaryId()&&(this.message.addListener("postError",function(){n.redraw()}),this.message.addListener("updateId",function(){n.options.key=n.message.id}))}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.groupChatMessage)}},{key:"shouldShowDayTimestamp",value:function(){var e=this.options.message.getPreviousMessage();return!e||it(e.timeAdded,this.options.message.timeAdded)}},{key:"render",value:function(){var e,t=this;(this.message.userId===USER.id||USER.isSuperUser)&&(e=Lc.createElement("a",{style:Object.assign({cursor:"pointer"},this.styleSheet.timestamp),onClick:function(){return t.toggleEditMode()}},Lc.T("Edit"))),this.contentSwitcher||(this.contentSwitcher=Lc.createElement(Of,null,Lc.createElement("span",{ref:"contentContainer",style:{"white-space":"pre-line"}},this.message.hasMarkupEnabled()?Lc.createElement(wk,{ref:this.refLink("content"),value:this.message.getContent(),style:{height:"auto"}}):Lc.createElement(Lc.TextElement,{ref:"content",value:this.message.getContent()}))));var n=null;this.shouldShowDayTimestamp()&&(n=Lc.createElement("div",{ref:"dayTimestamp",className:this.styleSheet.messageTimeStampHr},Lc.createElement("div",{className:this.styleSheet.messageTimeStamp},Ap.unix(this.message.timeAdded).format("dddd, MMMM Do"))));var i=null;return this.message.postError&&(i=Lc.createElement("span",{ref:"errorArea",style:{marginLeft:"1rem"},className:"fa fa-warning",HTMLTitle:"Error: "+this.message.postError})),[n,Lc.createElement("div",{className:this.styleSheet.comment},Lc.createElement(sE,{userId:this.message.userId,className:this.styleSheet.userHandle}),Lc.createElement("span",{className:this.styleSheet.timestamp},this.message.getTimeOfDay()),e,i,Lc.createElement("div",{className:this.styleSheet.commentContent},this.contentSwitcher))]}}]),t}(lS))||YE,cS=(JE=Ze(eS))(qE=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.message=e.message}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.addClass(this.styleSheet.groupChatMessage),e}},{key:"shouldShowDayTimestamp",value:function(){var e=this.options.message.getPreviousMessage();return!e||it(e.timeAdded,this.options.message.timeAdded)}},{key:"isOwnMessage",value:function(){return this.message.userId===USER.id}},{key:"render",value:function(){this.contentSwitcher||(this.contentSwitcher=Lc.createElement(Of,null,Lc.createElement("span",{ref:"contentContainer",style:{"white-space":"pre-line"}},this.message.hasMarkupEnabled()?Lc.createElement(wk,{ref:this.refLink("content"),value:this.message.getContent(),style:{height:"auto"}}):Lc.createElement(Lc.TextElement,{ref:"content",value:this.message.getContent()}))));var e=null;this.shouldShowDayTimestamp()&&(e=Lc.createElement("div",{className:this.styleSheet.messageTimeStampHr},Lc.createElement("div",{ref:"dayTimestamp",className:this.styleSheet.messageTimeStamp},Ap.unix(this.message.timeAdded).format("dddd, MMMM Do"))));var t=null;this.message.postError&&(t=Lc.createElement("span",{ref:"errorArea",style:{marginLeft:"1rem"},className:"fa fa-warning",HTMLTitle:"Error: "+this.message.postError}));var n=[Lc.createElement("div",{className:this.styleSheet.comment,style:{margin:"8px 16px",backgroundColor:"#eee"}},Lc.createElement(sE,{userId:this.message.userId,className:this.styleSheet.userHandle}),Lc.createElement("span",{className:this.styleSheet.timestamp},this.message.getTimeOfDay()),t,Lc.createElement("div",{className:this.styleSheet.commentContent},this.contentSwitcher))],i=Lc.createElement("div",{style:{flexGrow:"1000000"}});return this.isOwnMessage()?[e,Lc.createElement("div",{style:{display:"flex"}},i,n)]:[e,Lc.createElement("div",{style:{display:"flex"}},n,i)]}}]),t}(jd))||qE,hS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e=Object.assign({entryComparator:function(e,t){return e.getNormalizedId()-t.getNormalizedId()}},e),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getTopMessage",value:function(){return this.children[1]}}]),t}(tp),dS=function e(t){var n;return Ze(eS)(n=function(n){function i(){return r(this,i),b(this,d(i).apply(this,arguments))}return h(i,n),o(i,[{key:"getDefaultOptions",value:function(e){return{dateTimestamps:!0,renderMessage:function(e){return Lc.createElement(t,{key:e.getNormalizedId(),message:e})}}}},{key:"setOptions",value:function(e){w(d(i.prototype),"setOptions",this).call(this,e),this.initializeShowLoadMoreButton()}},{key:"extraNodeAttributes",value:function(e){w(d(i.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({display:"flex",flexDirection:"column"})}},{key:"canOverwrite",value:function(){return!1}},{key:"initializeShowLoadMoreButton",value:function(){this.messageThread.getNumMessages()>=20&&(this.showLoadMoreButton=!0)}},{key:"createVirtualMessage",value:function(e,t){var n=this.messageThread.getMaxMessageId()+"-"+fE.generateVirtualId()+"-"+Math.random(),i=fE.createVirtualMessageInstance(t,this.messageThread,n);return e.virtualId=n,i}},{key:"sendMessage",value:function(e){if(!USER.isAuthenticated)return void aE.show();var t=Object.assign({},this.options.baseRequest||{});if(e=e||this.chatInput.getValue(),e=e.trim()){t.message=e;var n=this.createVirtualMessage(t,e),i=function(e){if(e.error)return void n.setPostError(e.error);n&&n.hasTemporaryId()&&(fE.applyUpdateObjectId(n,e.messageId),cp.importState(e.state))},r=function(e){n&&n.setPostError(42),console.log("Error in sending chat message:\n"+e.message),console.log(e.stack)};this.messageWindow.scrollToBottom(),this.chatInput.setValue(""),this.chatInput.dispatch("messageSent"),zu.postJSON(this.getPostURL(),t,{disableStateImport:!0}).then(i,r)}}},{key:"saveScrollPosition",value:function(){this.scrollPosition=this.messageWindow.node.scrollTop,this.scrollPercent=this.scrollPosition/(this.messageWindow.node.scrollHeight-this.messageWindow.node.clientHeight)}},{key:"applyScrollPosition",value:function(){this.messageWindow.node.scrollTop=this.scrollPosition||this.messageWindow.node.scrollHeight,this.chatInput.node.focus()}},{key:"addResizeListeners",value:function(){var e=this;this.messageWindow.addNodeListener("scroll",function(){e.messageWindow.node.scrollTop<20&&e.loadMoreMessages()}),this.addListener("hide",function(){e.saveScrollPosition()}),this.addListener("show",function(){e.applyScrollPosition()}),window.addEventListener("resize",function(){e.saveScrollPosition(),e.setAdaptiveHeight()}),this.addListener("resize",function(){e.setAdaptiveHeight(),e.messageWindow.node.scrollTop=e.scrollPercent*(e.messageWindow.node.scrollHeight-e.messageWindow.node.clientHeight)})}},{key:"getDesiredHeight",value:function(){if(this.options.style&&this.options.style.height)return this.options.style.height;var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=document.getElementById("navbar").offsetHeight,n=e-t-(this.options.extraHeightOffset||25);return Math.max(n||0,100)+"px"}},{key:"setAdaptiveHeight",value:function(){this.setStyle("height",this.getDesiredHeight())}},{key:"setHeight",value:function(e){this.setStyle("height",e)}},{key:"renderMessageView",value:function(){var e,t=this;return this.showLoadMoreButton&&(e=Lc.createElement("div",{className:"text-center"},Lc.createElement(Dd,{ref:this.refLink("loadMoreButton"),level:Pc.DEFAULT,onClick:function(){t.loadMoreMessages()},style:this.styleSheet.loadMoreButton,statusOptions:["Load more messages",{faIcon:"spinner fa-spin",label:" loading messages..."},"Load more messages","Failed"]}))),[Lc.createElement(hS,{className:this.styleSheet.renderMessageView,ref:"messageWindow",entryRenderer:this.options.renderMessage,entries:this.messageThread.getMessages(),staticTop:e})]}},{key:"getGetType",value:function(){return"GET"}},{key:"loadMoreMessages",value:function(){var e=this;if(!this.outstandingRequest){this.outstandingRequest=!0;var t=this.messageWindow.getTopMessage(),n=this.messageThread.getMessages(),i=999999999;n.length&&(i=n[0].id);var r=Object.assign({lastMessageId:i},this.options.baseRequest||{}),a=this.messageWindow.node.scrollHeight;this.loadMoreButton&&this.loadMoreButton.ajaxCall({url:this.getGetURL(),type:this.getGetType(),dataType:"json",data:r,complete:function(){e.outstandingRequest=!1}}).then(function(n){var i=!n.state||!n.state.MessageInstance;if(!(i||n.state.MessageInstance.length<20)||(e.loadMoreButton&&e.loadMoreButton.hide(),e.showLoadMoreButton=!1,!i)){var r=0;t.shouldShowDayTimestamp()||(r+=t.dayTimestamp.getHeight(),t.dayTimestamp.addClass("hidden")),e.messageWindow.scrollToHeight(e.messageWindow.node.scrollHeight-a-r),e.outstandingRequest=!1}})}}},{key:"renderMessageBox",value:function(){var e=this;return Lc.createElement("div",{ref:"writingSection",className:this.styleSheet.renderMessage},Lc.createElement(Vg,{readOnly:this.messageThread.muted,ref:"chatInput",placeholder:"Type a message...",className:this.styleSheet.chatInput}),Lc.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",position:"absolute",right:"0px",width:"50px"}},Lc.createElement(Md,{ref:"sendMessageButton",faIcon:"paper-plane",disabled:this.messageThread.muted,onClick:function(){return e.sendMessage()},className:this.styleSheet.messageBoxButton}),Lc.createElement(sS,{ref:"previewMessageButton",getValue:function(){return e.chatInput.getValue()},setValue:function(t){e.chatInput.setValue(t),e.chatInput.node.focus()},className:this.styleSheet.messageBoxButton,faIcon:"eye"})))}},{key:"renderStatus",value:function(){if(this.messageThread.muted)return[Lc.createElement("h4",{style:{color:"red",textAlign:"center"}},"This chat is currently turned off.")];if(USER.isSuperUser){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.messageThread.online[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push([Lc.createElement(sE,{id:parseInt(o)})])}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}}},{key:"render",value:function(){return[this.renderMessageView(),this.renderMessageBox()]}},{key:"getDefaultPlugins",value:function(){return e.defaultPlugins||[]}},{key:"onMount",value:function(){var e=this;w(d(i.prototype),"onMount",this).call(this);var t=!0,n=!1,r=void 0;try{for(var a,o=(this.options.plugins||this.getDefaultPlugins())[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;this.registerPlugin(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this.attachUpdateListener(this.messageThread,function(t){"muted"===t.type&&e.redraw()}),this.attachListener(this.messageThread,"newMessage",function(t){var n=fE.get(t.data.id),i=e.messageWindow.node.scrollTop,r=e.messageWindow.node.scrollHeight-e.messageWindow.node.offsetHeight;e.messageWindow.insertEntry(n),i+20>r&&setTimeout(function(){e.messageWindow.scrollToBottom()},0)}),this.addResizeListeners()}},{key:"messageThread",get:function(){return this.options.messageThread}}]),i}(Zu(jd)))||n},pS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.baseRequest={chatId:this.options.chatId}}},{key:"getPostURL",value:function(){return"/chat/group_chat_post/"}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({display:"flex",flexDirection:"column",overflowY:"hidden"})}},{key:"getGetURL",value:function(){return"/chat/group_chat_state/"}},{key:"renderMessageView",value:function(){var e,t=this;return this.showLoadMoreButton&&(e=Lc.createElement("div",{className:"text-center"},Lc.createElement(Dd,{ref:this.refLink("loadMoreButton"),level:Pc.DEFAULT,onClick:function(){t.loadMoreMessages()},style:this.styleSheet.loadMoreButton,statusOptions:["Load more messages",{faIcon:"spinner fa-spin",label:" loading messages..."},"Load more messages","Failed"]}))),[Lc.createElement(hS,{className:this.styleSheet.renderMessageView,ref:"messageWindow",entryRenderer:this.options.renderMessage,entries:this.messageThread.getMessages(),staticTop:e})]}}]),t}(dS(uS)),fS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e=Object.assign({messageThread:e.privateChat.getMessageThread(),baseRequest:{userId:e.privateChat.getOtherUserId(),privateChatId:e.privateChat.id}},e),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"setPrivateChat",value:function(e){this.options.privateChat=e,this.setOptions(this.options)}},{key:"getPostURL",value:function(){return"/chat/private_chat_post/"}},{key:"getGetType",value:function(){return"POST"}},{key:"getGetURL",value:function(){return"/chat/private_chat_state/"}}]),t}(dS(cS)),gS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=w(d(t.prototype),"render",this).call(this);return e[1].options.children.push(Lc.createElement($E,{style:{display:"inline-block"},message:this.options.message})),e}}]),t}(uS),mS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.messageThread=e.messageThread||gE.get(bE.get(e.chatId).messageThreadId),w(d(t.prototype),"setOptions",this).call(this,e),this.options.baseRequest={chatId:this.options.chatId}}},{key:"getPostURL",value:function(){return"/chat/group_chat_post/"}},{key:"getGetURL",value:function(){return"/chat/group_chat_state/"}}]),t}(dS(gS)),vS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContent",value:function(){for(var e="",t=0;t<this.points;t+=1)e+=".";return e}},{key:"onMount",value:function(){var e=this;this.points=1,this.node.textContent=this.getContent(),this.intervalId=setInterval(function(){e.points=e.points%4+1,e.node.textContent=e.getContent()},350)}},{key:"onUnmount",value:function(){clearInterval(this.intervalId)}}]),t}(Lc.Primitive("span")),yS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("div",{ref:"messageContainer",style:{flex:"5",overflowY:"auto"}},this.renderMessageView()),this.renderMessageBox()]}},{key:"renderMessageBox",value:function(){var e=w(d(t.prototype),"renderMessageBox",this).call(this);return e.setStyle({flex:"1",minHeight:"50px",maxHeight:"100px",height:""}),e}},{key:"observeMutations",value:function(){var e=this,t=this.messageContainer.node;new MutationObserver(function(n){var i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){if(o.value.addedNodes.length&&t.scrollHeight-t.scrollTop-e.messageContainer.getHeight()<100)return void setTimeout(function(){t.scrollTop=t.scrollHeight},10)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}).observe(t,{subtree:!0,childList:!0})}},{key:"handleResize",value:function(){var e=!1;this.messageContainer.node.scrollHeight-this.messageContainer.node.scrollTop-this.messageContainer.getHeight()<100&&(e=!0),e&&(this.messageContainer.node.scrollTop=this.messageContainer.node.scrollHeight)}},{key:"addResizeListeners",value:function(){var e=this;this.handleResize(),tg.Global.addListener("changedAccordion",function(){e.handleResize()}),window.addEventListener("resize",function(){e.handleResize()}),this.observeMutations()}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.chatInput.setStyle("height","100%"),this.applyScrollPosition()}}]),t}(pS),bS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle("position","relative")}},{key:"beforeRedrawNotLoaded",value:function(){var e=this;Hu.Global.addListener("initNavManagerDone",function(){tg.Global.rightSidePanel.visible&&e.setLoaded(),tg.Global.addListener("toggledRightSide",function(t){t&&e.setLoaded()})})}},{key:"renderNotLoaded",value:function(){return[Lc.createElement("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",textTransform:"uppercase"}},Lc.createElement(vS,{style:{opacity:0}})," Loading ",Lc.createElement(vS,null))]}},{key:"renderLoaded",value:function(){var e=bE.get(2).getMessageThread(),t={marginLeft:"0px",marginRight:"0px",width:"100%",height:"100%",overflow:"hidden",position:"absolute"};return[Lc.createElement(yS,{style:t,extraHeightOffset:75,ref:"chat",chatId:2,messageThread:e})]}},{key:"setLoaded",value:function(){var e=this;this._loaded||bE.fetch(2,function(){w(d(t.prototype),"setLoaded",e).call(e)})}},{key:"onDelayedMount",value:function(){var e=this
;this.chat.messageContainer.node.scrollTop=this.chat.messageContainer.node.scrollHeight,this.onlineUsers=this.chat.messageThread.online||new Set,this.dispatch("updateOnlineUsers"),this.attachUpdateListener(this.chat.messageThread,function(){e.onlineUsers=e.chat.messageThread.online,e.dispatch("updateOnlineUsers")})}}]),t}(db(Lc.Element)),kS=(tS=rS=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"rotateClockwise",nS,y(n)),O(n,"rotateCounterclockwise",iS,y(n)),n}return h(t,e),t}(Jc),nS=R(tS.prototype,"rotateClockwise",[jc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}),iS=R(tS.prototype,"rotateCounterclockwise",[jc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(-360deg)"}}}}),tS),wS=(aS=Ze(kS))(oS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return Lc.createElement("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"200px"}},Ct(125,5,"#3a4859",this.styleSheet.rotateClockwise,"2.25s"),Ct(100,4,"#666666",this.styleSheet.rotateCounterclockwise,"1.5s"),Ct(75,3,"#aaaaaa",this.styleSheet.rotateClockwise,"1s"),Ct(50,2,"#20232d",this.styleSheet.rotateCounterclockwise,"3s"))}}]),t}(Lc.Element))||oS,ES=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.edits=new Map,n}return h(t,e),o(t,[{key:"canBeEditedByUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:USER;return e.isSuperUser||this.userCreatedId==e.id}},{key:"addEdit",value:function(e){this.edits.set(e.id,e)}},{key:"getEdits",value:function(){return Array.from(this.edits.values())}},{key:"getTranslation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fk.Locale,t=!0,n=!1,i=void 0;try{for(var r,a=xS.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.baseArticleId===this.id&&o.languageId===e.id)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return this}},{key:"getBaseArticle",value:function(){return xS.get(this.baseArticleId)||this}}]),t}(fp),SS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getArticle",value:function(){return xS.get(this.articleId)}}]),t}(fp),CS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTranslation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fk.Locale,n=this.get(e);return n&&(n=n.getTranslation(t)),n}}]),t}(bp(mp)),xS=new CS("article",ES,{fetchURL:"/fetch_article/",maxFetchObjectCount:32}),TS=new mp("articleedit",SS,{dependencies:["article"]});TS.addCreateListener(function(e){e.getArticle().addEdit(e)});var AS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getArticle",value:function(){return xS.get(this.articleId)}}]),t}(fp),LS=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BlogEntry",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AS;return r(this,t),b(this,d(t).call(this,e,n,{dependencies:["Article"]}))}return h(t,e),o(t,[{key:"getEntryForURL",value:function(e){return this.all().find(function(t){return t.urlName===e})}}]),t}(mp),IS=new LS,NS=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.members=new Map,n.membersByUserId=new Map,n}return h(t,e),o(t,[{key:"addMember",value:function(e){this.members.set(e.id,e),this.membersByUserId.set(e.userId,e)}},{key:"getMember",value:function(e){return this.members.get(e)}},{key:"getMemberById",value:function(e){return this.getMember(e)}},{key:"getMemberByUserId",value:function(e){return this.membersByUserId.get(e)}},{key:"removeMemberByUserId",value:function(e){var t=this.getMemberByUserId(e);t&&(this.members.delete(t.id),this.membersByUserId.delete(t.userId),PS.applyDeleteEvent({objectId:t.id}))}},{key:"getMembers",value:function(){return C(this.members.values())}}]),t}(fp),OS=function(e){function t(){return r(this,t),b(this,d(t).call(this,"UserGroup",NS))}return h(t,e),o(t,[{key:"getByName",value:function(e){return this.all().find(function(t){return t.name===e})}}]),t}(mp),RS=new OS,MS=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.getGroup().addMember(y(n)),n}return h(t,e),o(t,[{key:"delete",value:function(){this.getGroup().removeMemberByUserId(this.userId)}},{key:"getGroup",value:function(){return RS.get(this.groupId)}},{key:"getPublicUser",value:function(){return sk.get(this.userId)}}]),t}(fp),PS=new mp("UserGroupMember",MS,{dependencies:["UserGroup"]}),DS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEvalTask",value:function(){return EC.get(this.evalTaskId)}}]),t}(fp),BS=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,"EvalTaskStatistics",DS,{dependencies:["evaltask"]})),e.evalTaskMap=new Map,e.addCreateListener(function(t){e.evalTaskMap.set(t.evalTaskId,t)}),e}return h(t,e),o(t,[{key:"getByEvalTaskId",value:function(e){return this.evalTaskMap.get(e)}}]),t}(mp),_S=new BS,FS=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.getContest()?n.getContest().addContestTask(y(n)):console.warn("Contest task with id =",n.id,"does not have a contest."),n}return h(t,e),o(t,[{key:"getFullURL",value:function(){return this.getContest().getFullURL()+"task/"+this.name+"/"}},{key:"getEvalTask",value:function(){return EC.get(this.evalTaskId)}},{key:"hasStateLoaded",value:function(){return this.getContest()&&this.getEvalTask()&&this.getStatementArticle()}},{key:"getDifficulty",value:function(){if(this.hasOwnProperty("difficulty"))return this.difficulty;var e=_S.getByEvalTaskId(this.evalTaskId);return e?e.difficulty:0}},{key:"getOriginalContest",value:function(){return XS.get(this.originalContestId)}},{key:"getStatementArticle",value:function(){return this.statementArticleId?xS.get(this.statementArticleId):this.getEvalTask().getStatementArticle()}},{key:"getContest",value:function(){return XS.get(this.contestId)}},{key:"getTimeAvailable",value:function(){var e=Ap(this.getContest().getStartTime());return this.broadcastDelay&&e.addUnit(Ep.SECOND,this.broadcastDelay),e}},{key:"getBroadcastDelay",value:function(){return new Sp(this.broadcastDelay?1e3*this.broadcastDelay:0)}},{key:"getBaseTask",value:function(){return this.getContest().getBaseContest().getMatchingContestTask(this)}},{key:"getVirtualTask",value:function(){var e=this.getContest();if(e.isVirtual())return this;var t=!0,n=!1,i=void 0;try{for(var r,a=e.getVirtualContest().getContestTasks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.evalTaskId===this.evalTaskId)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"applyEvent",value:function(e){w(d(t.prototype),"applyEvent",this).call(this,e);var n=this.getContest();n&&n.applyEvent({type:"contestTaskUpdate",contestTaskId:this.id,contestTaskEvent:e,data:{}})}},{key:"hasPartialScore",value:function(){return this.getContest()&&this.getContest().getScoring().hasPartialScoring}},{key:"hasPenalty",value:function(){return this.getContest()&&this.getContest().hasPenalty()}},{key:"hasScore",value:function(){return this.hasOwnProperty("pointsWorth")&&1!=this.pointsWorth}},{key:"toString",value:function(){return this.longName}},{key:"canShowStatistics",value:function(){return this.getContest()&&this.getContest().canShowPublicSources()}}]),t}(fp);FS.ScoreType={ACM:0,PARTIAL:1,OPTIMIZATION:2,SPECIAL_JUDGE:3};var US=function(e){function t(){return r(this,t),b(this,d(t).call(this,"contesttask",FS,{dependencies:["contest"]}))}return h(t,e),o(t,[{key:"getByEvalTaskId",value:function(e){return this.all().find(function(t){return t.evalTaskId===e})}},{key:"getByContestIdAndUrlName",value:function(e,t){return this.all().find(function(n){return n.name===t&&n.contestId===e})}}]),t}(mp),zS=new US,WS=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.getContest()&&(n.getContest().addContestUser(y(n)),n.getContest().dispatch("contestUserUpdate",{contestUser:y(n)})),n}return h(t,e),o(t,[{key:"applyEvent",value:function(e){w(d(t.prototype),"applyEvent",this).call(this,e),this.getContest()&&this.getContest().dispatch("contestUserUpdate",{contestUser:this,event:e})}},{key:"getPublicUser",value:function(){return sk.get(this.userId)}},{key:"getContest",value:function(){return XS.get(this.contestId)}},{key:"getOriginalRating",value:function(){if(this.hasOwnProperty("oldRating"))return this.oldRating;var e=this.getPublicUser();return e?e.getRating():1500}},{key:"isOfficial",value:function(){if(this.getContest().isVirtual())return!1;var e=this.getOriginalRating();if(!e)return!0;var t=this.getContest().minRating||-1/0,n=this.getContest().maxRating||1/0;return t<=e&&e<n}},{key:"getBaseContest",value:function(){return this.getContest().getBaseContest()}},{key:"getContestStartTime",value:function(){return this.getContest().getStartTime(this)}},{key:"getContestEndTime",value:function(){return this.getContest().getEndTime(this)}},{key:"recalculateTotalScore",value:function(){this.totalScore=0;var e=this.getContestStartTime();for(var t in this.scores){var n=zS.get(parseInt(t)),i=this.scores[t];i.score>0&&(i.scoreTime>e&&(e=i.scoreTime),n&&(this.totalScore+=n.getBaseTask().pointsWorth*i.score))}}},{key:"solvedTask",value:function(e){return this.scores[e.id]&&1==this.scores[e.id].score}},{key:"triedTask",value:function(e){return this.scores[e.id]&&1!=this.scores[e.id].score}},{key:"resetScore",value:function(){this.scoresBackup=this.scores,this.scores={},this.numSubmissions=0,this.penalty=0}},{key:"haveSubmitted",value:function(){return this.numSubmissions>0}}],[{key:"compare",value:function(e,t){return e.totalScore===t.totalScore?(e.penalty||1/0)-(t.penalty||1/0):(t.totalScore||-1/0)-(e.totalScore||-1/0)}},{key:"compareScoreboard",value:function(e,n){return e.haveSubmitted()!==n.haveSubmitted()?n.numSubmissions-e.numSubmissions:t.compare(e,n)}}]),t}(fp),HS=function(e){function t(){return r(this,t),b(this,d(t).call(this,"ContestUser",WS,{dependencies:["contest","publicuser"]}))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){var n=this.get(e.objectId);if(n)w(d(t.prototype),"applyEvent",this).call(this,e);else{n=e.data,n.id=e.objectId;this.fakeCreate(n).applyEvent(e),e.user&&sk.fakeCreate(e.user)}}}]),t}(mp),VS=new HS,GS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return XS.get(this.contestId)}},{key:"getDate",value:function(){return Ap(this.date)}},{key:"getContestTask",value:function(){var e=zS.get(this.taskId);if(!e){var t=this.getContest();return t&&t.getContestTaskById(this.taskId)}return e}},{key:"getTarget",value:function(){return this.taskId?"Task "+this.getContestTask().longName:"General"}},{key:"isTaskBroadcast",value:function(){return!!this.taskBroadcast}},{key:"getMessage",value:function(){return this.isTaskBroadcast()?'Task "'+this.getContestTask().longName+'" is now available!':this.message}}]),t}(fp),jS=new mp("ContestAnnouncement",GS,{dependencies:["contest"]}),YS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){w(d(t.prototype),"applyEvent",this).call(this,e),"typingStateChange"!==e.type&&"createReactionCollection"!==e.type&&this.getContest().dispatch("updateQuestion",this)}},{key:"isAskedByCurrentUser",value:function(){return USER.id===this.userAskedId}},{key:"getContestTask",value:function(){return zS.get(this.contestTaskId)}},{key:"isAnswered",value:function(){return this.replyTime}},{key:"shouldAppear",value:function(){return USER.id===this.userAskedId||this.isPublic}},{key:"getContest",value:function(){return XS.get(this.contestId)}},{key:"getReactionCollection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=cE.get(this.reactionCollectionId);return e&&!t?{upvotesCount:0,downvotesCount:0,getCurrentUserReactionType:function(){}}:t}},{key:"getNumLikes",value:function(){return this.getReactionCollection(!0).upvotesCount}},{key:"getNumDislikes",value:function(){return this.getReactionCollection(!0).downvotesCount}},{key:"getVotesBalance",value:function(){return this.getNumLikes()-this.getNumDislikes()}},{key:"getUserVote",value:function(){return this.getReactionCollection(!0).getCurrentUserReactionType()}},{key:"react",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Au,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au;zu.postJSON("/contest/question_reaction/",{contestQuestionId:this.id,reaction:e}).then(t,n)}},{key:"like",value:function(e,t){this.react("like",e,t)}},{key:"dislike",value:function(e,t){this.react("dislike",e,t)}},{key:"resetReaction",value:function(e,t){this.react("resetReaction",e,t)}}]),t}(fp),JS=new mp("ContestQuestion",YS,{dependencies:["contest"]}),qS=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.contestTasks=new Map,n.contestUsers=new Map,n.addListener("contestUserUpdate",function(){return n.enqueueRecalculateUserRanks()}),n}return h(t,e),o(t,[{key:"getScoring",value:function(){return Gk.get(this.scoringId)}},{key:"addPermission",value:function(e,t,n){return zu.postJSON("/contest/change_permission/",{contestId:this.id,userId:e,permissionName:t,action:"give"}).then(n)}},{key:"removePermission",value:function(e,t,n){var i=this;return zu.postJSON("/contest/change_permission/",{contestId:this.id,userId:e,permissionName:t,action:"remove"}).then(function(){i.getPermissionGroup(t).removeMemberByUserId(e),n()})}},{key:"getPermissionGroup",value:function(e){return RS.getByName("contest-"+this.id+"-perm-"+e)}},{key:"getUserPermission",value:function(e,t){return!!this.getPermissionGroup(t).getMemberByUserId(e)}},{key:"canReceiveQuestions",value:function(){return!this.systemGenerated&&this.hasStarted()&&!this.isInfinite()}},{key:"getAnnouncements",value:function(){var e=this;return jS.all().filter(function(t){return t.contestId===e.id}).sort(function(e,t){return t.id-e.id})}},{key:"getQuestions",value:function(){var e=this;return JS.all().filter(function(t){return t.contestId===e.id}).sort(function(e,t){return t.id-e.id})}},{key:"getFullURL",value:function(){return(this.name.startsWith("ieeextreme")?"/":"/contest/")+this.name+"/"}},{key:"addContestUser",value:function(e){this.contestUsers.set(e.id,e)}},{key:"addContestTask",value:function(e){return!this.contestTasks.has(e.id)&&(this.contestTasks.set(e.id,e),this.dispatch("addTask",e),!0)}},{key:"getContestTaskById",value:function(e){return this.contestTasks.get(e)}},{key:"hasAnyTask",value:function(){return this.getContestTasks().length>0}},{key:"enqueueRecalculateUserRanks",value:function(){this.recalculateUsers()}},{key:"applyEvent",value:function(e){if(e.data.hasOwnProperty("questions")){for(var n in e.data.questions)this.questions[n]=e.data.questions[n];e.data.questions,delete e.data.questions}w(d(t.prototype),"applyEvent",this).call(this,e),"contestTaskUpdate"===e.type&&this.recalculateUsers(),e.numUsersOnline&&(this.numUsersOnline=e.numUsersOnline)}},{key:"isVirtual",value:function(){return!!this.baseContestId}},{key:"getBaseContest",value:function(){return this.baseContestId?XS.get(this.baseContestId):this}},{key:"getVirtualContest",value:function(){return this.virtualContestId?XS.get(this.virtualContestId):this}},{key:"getUser",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.contestUsers.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.userId===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"getUsers",value:function(){return Array.from(this.contestUsers.values())}},{key:"getNumUsers",value:function(){var e=this.getBaseContest().numRegistered;return(this.isVirtual()||this.virtualContestId)&&this.getVirtualContest()&&(e+=this.getVirtualContest().numRegistered),e}},{key:"getStartTime",value:function(e){return e=e||this.getUser(USER.id),this.isVirtual()&&e?parseInt(e.timeRegistered)||this.startTime:this.startTime}},{key:"getEndTime",value:function(e){return e=e||this.getUser(USER.id),this.isVirtual()&&e?parseInt(e.timeRegistered+this.endTime-this.startTime)||this.endTime:this.endTime}},{key:"getName",value:function(){return this.isVirtual()?"Virtual "+this.getBaseContest().longName:this.longName}},{key:"recalculateUsers",value:function(){var e=this;this.recalculatingUserInProgress||(this.recalculatingUserInProgress=!0,setTimeout(function(){var t=e.getBaseContest().getUsers();(e.isVirtual()||e.virtualContestId)&&e.getVirtualContest()&&(t=[].concat(C(t),C(e.getVirtualContest().getUsers()))),e.constructor.calculateRanks(t),e.dispatch("rankingsChange"),e.recalculatingUserInProgress=!1},500))}},{key:"getChat",value:function(){return bE.get(this.chatId)}},{key:"getContestTasks",value:function(){var e=Array.from(this.contestTasks.values());return e.sort(function(e,t){return e.contestIndex===t.contestIndex?e.id-t.id:(0===e.contestIndex&&(e.contestIndex=1/0),0===t.contestIndex&&(t.contestIndex=1/0),e.contestIndex-t.contestIndex)}),e}},{key:"getAnalysisArticle",value:function(){return xS.getTranslation(this.analysisArticleId)}},{key:"getDescriptionArticle",value:function(){return this.descriptionArticleId?xS.get(this.descriptionArticleId):null}},{key:"getMatchingContestTask",value:function(e){if(e.contestId===this.id)return e;var t=!0,n=!1,i=void 0;try{for(var r,a=this.getContestTasks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.evalTaskId===e.evalTaskId)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"hasPenalty",value:function(){return this.getScoring().hasPenalty}},{key:"hasDynamicPoints",value:function(){return this.getScoring().hasDynamicPoints}},{key:"hasStarted",value:function(){return!this.getStartTime()||yf.now().unix()>this.getStartTime()}},{key:"hasFinished",value:function(){return this.getEndTime()&&yf.now().unix()>this.getEndTime()}},{key:"isRunning",value:function(){return this.hasStarted()&&!this.hasFinished()}},{key:"isInfinite",value:function(){return!this.getEndTime()}},{key:"canShowScoreboard",value:function(){return this.liveResults||this.hasFinished()}},{key:"canShowPublicSources",value:function(){return this.publicSources&&(this.hasFinished()||this.isInfinite())}},{key:"getFormattedTime",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dddd, MMMM Do, H:mm",i=e.format(n);return t=e.getDate()===e.utc().getDate()?e.utc().format("H:mm"):e.utc().format(n),i+" local time ("+t+" UTC)"}},{key:"getFormattedStartTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dddd, MMMM Do, H:mm:ss",t=Ap.unix(this.getStartTime());return this.getFormattedTime(t,e)}},{key:"getFormattedEndTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dddd, MMMM Do, H:mm:ss",t=Ap.unix(this.getEndTime());return this.getFormattedTime(t,e)}},{key:"getFormattedDuration",value:function(){var e=Ap(this.getStartTime()),t=Ap(this.getEndTime()).diff(e);return Ek.duration(t,{days:!0,hours:!0,minutes:!0,separator:", ",lastSeparator:" and "})}},{key:"toString",value:function(){return this.longName}},{key:"getCountries",value:function(){var e=new Set,t=!0,n=!1,i=void 0;try{for(var r,a=this.getUsers()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=o.getPublicUser();s&&s.countryId&&!e.has(s.countryId)&&e.add(s.countryId)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return tk.getCountriesFromIds(e)}},{key:"getStatistics",value:function(){for(var e=["numUsersOnline","numSubmissions","numExampleRuns","numCompiles","numCustomRuns"],t={},n=0,i=e;n<i.length;n++){var r=i[n];this.hasOwnProperty(r)&&(t[r]=this[r].toString())}return t}},{key:"getNextTaskTimestamp",value:function(){return this.nextBroadcastTask?Ap(this.nextBroadcastTask).unix():null}}],[{key:"calculateRanks",value:function(e){for(var t=0;t<e.length;t+=1)e[t].recalculateTotalScore();e.sort(WS.compareScoreboard);for(var n=0;n<e.length;n+=1)n>0&&e[n].totalScore===e[n-1].totalScore&&(e[n].penalty||0)===(e[n-1].penalty||0)?e[n].rank=e[n-1].rank:e[n].rank=n+1}}]),t}(fp);qS.scoreboardType={TASK_NAME:0,TASK_LETTER:1,TOTAL_SCORE_ONLY:2},qS.ModeratedAction={VIEW:"view",EDIT_TASKS:"edit-tasks",EDIT_SETTINGS:"edit-settings",ANSWER_QUESTIONS:"answer-question",BROADCAST_ANNOUNCEMENTS:"broadcast-announcement"},qS.VerboseModeratedAction={VIEW:"View",EDIT_TASKS:"Edit tasks",EDIT_SETTINGS:"Edit settings",ANSWER_QUESTIONS:"Answer questions",BROADCAST_ANNOUNCEMENTS:"Broadcast announcements"};var XS=new mp("contest",qS),KS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),QS=new mp("contestevent",KS,{dependencies:["contest","contestuser"]}),ZS=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getWorkspace",value:function(){return tC.get(this.workspaceId)}},{key:"getName",value:function(){return this.name}},{key:"toString",value:function(){return this.getName()}},{key:"isSaved",value:function(){return!this.isUnsaved}},{key:"getBrowserStorageMaps",value:function(){return this.getWorkspace().getBrowserStorageMaps()}},{key:"saveBrowserVersion",value:function(){var e=!1,t=!0,n=!1,i=void 0;try{for(var r,a=this.getBrowserStorageMaps()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e=e||o.set(this.getName(),{serverTime:yf.now().toUnix(),localTime:Ap.now().toUnix(),value:this.content})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getBrowserVersion",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.getBrowserStorageMaps()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value,o=a.get(this.getName());if(o)return o}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return null}},{key:"deleteBrowserVersion",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.getBrowserStorageMaps()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.delete(this.getName())}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"isSavedInBrowser",value:function(){var e=this.getBrowserVersion();return e&&e.value==this.getValue()}},{key:"setValue",value:function(e){this.isUnsaved=!0,this.content=e,this.saveBrowserVersion(),this.dispatch("unsaved",{})}},{key:"getValue",value:function(){return this.content}},{key:"applyEvent",value:function(e){e.sessionId==this.getWorkspace().sessionId?this.updateFromCurrentSession(e):this.updateFromDifferentSession(e)}},{key:"updateFromCurrentSession",value:function(e){}},{key:"updateFromDifferentSession",value:function(e){console.log("Update from another session: ",e),w(d(t.prototype),"applyEvent",this).call(this,e),this.dispatch("updateExternal",e)}},{key:"updateId",value:function(e){if(this.id!=e){var n=this.id;w(d(t.prototype),"updateId",this).call(this,e);var i=this.getWorkspace();i.files.delete(n),i.files.set(this.id,this)}}},{key:"save",value:function(){var e=this;if(this.isUnsaved&&USER.isAuthenticated){var t=this.getWorkspace().getBaseRequest();t.fileName=this.getName(),t.fileContent=this.getValue(),this.hasTemporaryId()?t.virtualId=this.id:t.fileId=this.id,this.isSaving=!0,this.dispatch("saving",{});var n=Ap.now();zu.postJSON("/workspace/save_workspace_file/",t).then(function(t){e.isUnsaved=!1,e.dispatch("saved",Object.assign({timeSaveSent:n},t)),n>=e.getBrowserVersion().localTime&&e.deleteBrowserVersion(),e.id!=t.id&&e.updateId(t.id),e.serverLastSaved=t.serverLastSaved,e.isSaving=!1},function(t){e.isSaving=!1})}}}]),t}(kp(fp)),$S=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.files=new Map,setInterval(function(){n.saveAllFiles()},2e4+12e3*Math.random()),n}return h(t,e),o(t,[{key:"getStorageName",value:function(){return"WorkspaceStoredFiles-"+this.id}},{key:"getSessionStorageMap",value:function(){return new ec(this.getStorageName())}},{key:"getLocalStorageMap",value:function(){return new tc(this.getStorageName())}},{key:"getBrowserStorageMaps",value:function(){return[this.getSessionStorageMap(),this.getLocalStorageMap()]}},{key:"getBaseRequest",value:function(){return{workspaceId:this.getNormalizedId(),sessionId:this.sessionId}}},{key:"getNormalizedId",value:function(){var e=this.id+"";return e.startsWith("temp-")&&(e=e.substr(5)),parseInt(e)}},{key:"getLastUpdate",value:function(){var e=parseFloat(this.lastModified),t=!0,n=!1,i=void 0;try{for(var r,a=this.files.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e=Math.max(e,parseFloat(o.serverLastSaved))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"addFile",value:function(e,t){this.files.set(e.id,e),this.dispatch("newFile",e)}},{key:"removeFile",value:function(e,t){this.files.has(e.id)&&(this.files.delete(e.id),this.dispatch("deletedFile",e))}},{key:"getOrCreateFile",value:function(e,t){var n=this.getFileByName(e);return n||this.createFile(e,t||"")}},{key:"getFiles",value:function(){return Array.from(this.files.values())}},{key:"getOrCreateFileForLanguage",value:function(e,t){var n="Main"+e.id+"."+e.extension;return this.getOrCreateFile(n,t||e.getDefaultSource())}},{key:"saveAllFiles",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.files.values()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.save()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"streamName",value:function(){return"workspace-"+this.userId+"-"+this.getNormalizedId()}},{key:"getFileByName",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.files.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.name===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"renameFile",value:function(e,t){throw Exception("Implement me!")}},{key:"createFile",value:function(e,t){return this.getFileByName(e)?void console.error("Trying to create a file that exists already!"):iC.createVirtualFile(e,t,this)}}]),t}(fp),eC=function(e){function t(){return r(this,t),b(this,d(t).call(this,"workspace",$S))}return h(t,e),o(t,[{key:"getUserWorkspaces",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:USER.id,t=[],n=!0,i=!1,r=void 0;try{for(var a,o=this.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.userId===e&&!1===s.systemCreated&&t.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"createVirtualWorkspace",value:function(){var e=Math.random().toString().substr(2),t={id:"temp-"+e,userId:0,files:[]};return this.fakeCreate(t,"virtualWorkspace")}}]),t}(mp),tC=new eC,nC=function(e){function t(){return r(this,t),b(this,d(t).call(this,"workspacefile",ZS,{dependencies:["workspace"]}))}return h(t,e),o(t,[{key:"createVirtualFile",value:function(e,t,n){var i=Math.random().toString().substr(2),r={id:"temp-"+i,name:e,content:t,workspaceId:n.id,systemCreated:!1,lastModified:Ap.now()/1e3};return this.fakeCreate(r,"virtualWorkspaceFile")}},{key:"getVirtualObject",value:function(e){return this.objects.get("temp-"+e.virtualId)||tC.get(e.data.workspaceId).getFileByName(e.data.name)}}]),t}(wp(mp)),iC=new nC;iC.addCreateListener(function(e,t){e.getWorkspace().addFile(e,t)}),iC.addDeleteListener(function(e,t){e.getWorkspace().removeFile(e,t)});var rC,aC,oC,sC,lC,uC,cC,hC,dC,pC,fC,gC,mC,vC=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,e));var i=n.getUser();return i&&i.taskSummaries.set(n.evalTaskId,y(n)),n}return h(t,e),o(t,[{key:"getEvalTask",value:function(){return EC.get(this.evalTaskId)}},{key:"getUser",value:function(){return rk.get(this.userId)}},{key:"getWorkspace",value:function(){return tC.get(this.workspaceId)}},{key:"getUserAndEvalTaskKey",value:function(){return String(this.evalTaskId)+"-"+String(this.userId)}}]),t}(fp),yC=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,"evaltaskusersummary",vC,{dependencies:["user","evaltask","contesttask"]})),e.fetchedEvalTasks=new Set,e.userAndEvalTaskMap=new Map,e.addCreateListener(function(t){e.userAndEvalTaskMap.set(t.getUserAndEvalTaskKey(),t)}),e}return h(t,e),o(t,[{key:"fetchEvalTask",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Au,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au;if(this.fetchedEvalTasks.has(e))return void n(this.getByEvalTaskId(e));zu.getJSON("/eval/fetch_task_summaries/",{evalTaskId:e}).then(function(i){t.fetchedEvalTasks.add(e),n(i)},i)}},{key:"getByEvalTaskId",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=this.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.evalTaskId===e&&t.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"getMapKey",value:function(e,t){return String(e)+"-"+String(t)}},{key:"getByEvalTaskAndUserId",value:function(e,t){return this.userAndEvalTaskMap.get(this.getMapKey(e,t))||null}}]),t}(mp),bC=new yC,kC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.longName}},{key:"canBeEditedByUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:USER;return e.isSuperUser||this.ownerId===e.id}},{key:"getStatementArticle",value:function(){return xS.get(this.statementArticleId)}},{key:"getTimeLimit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Bk.get(e),n=t.extraTime||0,i=t.timeRatio||1,r=this.programmingLanguageLimits[e];return r&&(n=r.extraTime||n,i=r.timeRatio||i),this.timeLimit*i+n}},{key:"getMemoryLimit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Bk.get(e),n=t.extraMemory||0,i=this.programmingLanguageLimits[e];return i&&(n=i.extraMemory||n),this.memoryLimit+n}},{key:"getSolutionArticle",value:function(){return xS.get(this.solutionArticleId)}},{key:"getHiddenSolutionArticle",value:function(){return xS.get(this.hiddenSolutionArticleId)}},{key:"getWorkspace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:USER.id,t=!0,n=!1,i=void 0;try{for(var r,a=bC.getByEvalTaskId(this.id)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.userId===e)return o.getWorkspace()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"getType",value:function(){return this.type}},{key:"isInteractive",value:function(){return 1===this.getType()}},{key:"getDefaultContest",value:function(){return XS.get(this.defaultContestId)}},{key:"getTemplate",value:function(e){if(this.enforcedTemplates&&this.enforcedTemplates[e.id]){var t="",n=!0,i=!1,r=void 0;try{for(var a,o=this.enforcedTemplates[e.id][Symbol.iterator]();!(n=(a=o.next()).done);n=!0){t+=a.value.lines.join("\n")+"\n"}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}return null}},{key:"getAvailableLanguages",value:function(){if(!this.hasEnforcedTemplates())return Bk.all();var e=[],t=!0,n=!1,i=void 0;try{
for(var r,a=Bk.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.enforcedTemplates[o.id]&&this.enforcedTemplates[o.id].length>0&&e.push(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"hasEnforcedTemplates",value:function(){return!!this.enforcedTemplates}}]),t}(fp),wC=function(e){function t(){return r(this,t),b(this,d(t).call(this,"evaltask",kC,{dependencies:["article"],maxFetchObjectCount:32,fetchURL:"/eval/fetch_eval_task/"}))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){this.get(e.objectId)&&w(d(t.prototype),"applyEvent",this).call(this,e)}}]),t}(bp(mp)),EC=new wC,SC=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.forumThreads=new Map,e.registerToStream(),TC.addDeleteListener(function(t){t.parentId===e.id&&e.forumThreads.has(t.id)&&e.deleteForumThread(t)}),e}return h(t,e),o(t,[{key:"getStreamName",value:function(){return"forum-"+this.id}},{key:"getForumThreads",value:function(){var e=Array.from(this.forumThreads.values());return e=e.filter(function(e){return e.isVisible()}),e.sort(function(e,t){return t.id-e.id}),e}},{key:"addForumThread",value:function(e,t){this.forumThreads.set(e.id,e),this.dispatch("newForumThread",t)}},{key:"deleteForumThread",value:function(e){this.forumThreads.delete(e.id),this.dispatch("deleteForumThread",e)}}]),t}(fp),CC=new mp("forum",SC),xC=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,e));var i=n.getParent();return i&&i.addForumThread(y(n)),n}return h(t,e),o(t,[{key:"getAuthor",value:function(){return sk.get(this.authorId)}},{key:"isPinned",value:function(){return null!=this.pinnedIndex}},{key:"getPinIndex",value:function(){return this.pinnedIndex}},{key:"getTitle",value:function(){return this.title}},{key:"getContentMessage",value:function(){return fE.get(this.contentMessageId)}},{key:"getVotesBalance",value:function(){var e=this.getContentMessage();return e?e.getVotesBalance():this.votesBalance}},{key:"getParent",value:function(){return CC.get(this.parentId)}},{key:"getMessageThread",value:function(){return gE.get(this.messageThreadId)}},{key:"getTimeAdded",value:function(){return this.timeAdded}},{key:"getLastActive",value:function(){return this.lastActive}},{key:"getNumReplies",value:function(){return this.getNumMessages()-1}},{key:"deleteThread",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Au;zu.postJSON("/forum/edit_forum_thread/",{forumThreadId:this.id,hidden:!0}).then(e,t)}},{key:"getNumMessages",value:function(){return this.numMessages}},{key:"isVisible",value:function(){return!this.hidden}},{key:"isLoaded",value:function(){return null!=this.getMessageThread()&&this.getNumReplies()===this.getMessageThread().getNumMessages()-1}}]),t}(fp),TC=new mp("forumthread",xC,{dependencies:["forum","messageinstance"]}),AC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getArticle",value:function(){return xS.get(this.articleId).getTranslation()}}]),t}(fp),LC=new mp("lesson",AC,{dependencies:["article","lessonSection"]}),IC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLessons",value:function(){var e=this;return LC.all().filter(function(t){return t.sectionId===e.id})}}]),t}(fp),NC=new mp("lessonSection",IC),OC=(rC=dC=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.sectionHeight="20px",n.fontFamily="lato, open sans",n.defaultFontSize=".9em",n.pinnedIconFontSize="1em",n.titleFontSize="1.2em",n.activityFontSize=".9em",n.hoverBackgroundColor="#f8f8f8",O(n,"panel",aC,y(n)),O(n,"pinnedIcon",oC,y(n)),O(n,"title",sC,y(n)),O(n,"type",lC,y(n)),O(n,"bottomSection",uC,y(n)),O(n,"timeStamp",cC,y(n)),O(n,"bottomRightSection",hC,y(n)),n}return h(t,e),t}(Jc),aC=R(rC.prototype,"panel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",border:"1px solid #ddd",borderTop:"0px",borderLeft:"0",borderRight:"0",backgroundColor:"#fff",fontFamily:this.fontFamily,fontSize:this.defaultFontSize,display:"block",":hover":{backgroundColor:this.hoverBackgroundColor}}}}),oC=R(rC.prototype,"pinnedIcon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",display:"inline-block",float:"left",height:"60px",paddingTop:"28px",paddingRight:"8px",fontSize:this.pinnedIconFontSize}}}),sC=R(rC.prototype,"title",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"12px",paddingBottom:"0",display:"flex",justifyContent:"flex-start",alignItems:"center",fontSize:this.titleFontSize}}}),lC=R(rC.prototype,"type",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"block"}}}),uC=R(rC.prototype,"bottomSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{display:"inline-block !important"},">:first-child":{marginRight:"4px"},position:"relative",marginTop:"8px",marginBottom:"8px",padding:"0px 14px"}}}),cC=R(rC.prototype,"timeStamp",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.activityFontSize,height:this.sectionHeight,color:"#aaa !important",textStyle:"italic",marginRight:"6px"}}}),hC=R(rC.prototype,"bottomRightSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{float:"right"}}}),rC),RC=(pC=Ze(OC))(fC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.panel)}},{key:"getTitle",value:function(){return this.options.title}},{key:"getPreview",value:function(){return this.options.preview}},{key:"getAuthorId",value:function(){return this.options.authorId}},{key:"getTimeStamp",value:function(){return this.options.timeStamp}},{key:"getType",value:function(){return this.options.type}},{key:"render",value:function(){var e=this.getAuthorId()?Lc.createElement(sE,{userId:this.getAuthorId()}):null;return[Lc.createElement("div",{className:this.styleSheet.title,ref:"title"},this.getTitle()),this.getPreview(),Lc.createElement("div",{className:this.styleSheet.bottomSection},Lc.createElement("span",{className:this.styleSheet.type},this.getType()),e,Lc.createElement("span",{className:this.styleSheet.bottomRightSection},Lc.createElement(np,{timeStamp:this.getTimeStamp(),className:this.styleSheet.timeStamp})))]}},{key:"onMount",value:function(){var e=tg.Global;this.title.addClickListener(function(){e.rightSidePanel&&e.rightSidePanel.visible&&e.toggleRightSidePanel()})}}]),t}(Lc.Element))||fC,MC=(gC=Ze(OC))(mC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getThread",value:function(){return this.options.thread}},{key:"getTitle",value:function(){var e;return this.getThread().isPinned()&&(e=Lc.createElement("span",{className:"fa fa-thumb-tack "+this.styleSheet.pinnedIcon,"aria-hidden":"true",style:{paddingTop:"0",lineHeight:"20px",height:"20px"}})),[e,Lc.createElement(Xd,{href:"/forum/"+this.getThread().id+"/"+U(this.getThread().title),value:this.getThread().title})]}},{key:"getAuthorId",value:function(){return this.getThread().authorId}},{key:"getTimeStamp",value:function(){return this.getThread().getLastActive()}},{key:"getType",value:function(){return Lc.createElement(Ed,{level:Pc.SUCCESS,label:"Forum"})}}]),t}(RC))||mC,PC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntry",value:function(){return this.options.entry}},{key:"getTitle",value:function(){return Lc.createElement(Xd,{href:"/blog/"+this.getEntry().urlName+"/",value:this.getEntry().getArticle().name})}},{key:"getAuthorId",value:function(){return this.getEntry().getArticle().userCreatedId}},{key:"getTimeStamp",value:function(){return this.getEntry().lastActive}},{key:"getType",value:function(){return Lc.createElement(Ed,{level:Pc.PRIMARY,label:"Blog"})}}]),t}(RC),DC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTask",value:function(){return this.options.task}},{key:"getTitle",value:function(){return Lc.createElement(Xd,{href:"/contest/"+this.getTask().archiveName+"/task/"+this.getTask().urlName+"/discussion/",value:this.getTask().toString()})}},{key:"getTimeStamp",value:function(){return this.getTask().lastActive}},{key:"getType",value:function(){return Lc.createElement(Ed,{level:Pc.WARNING,label:"Task"})}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.title.addClickListener(function(){window.taskView=!0})}}]),t}(RC),BC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLesson",value:function(){return this.options.lesson}},{key:"getTitle",value:function(){return Lc.createElement(Xd,{href:"/lesson/"+this.getLesson().urlName+"/",value:this.getLesson().name})}},{key:"getTimeStamp",value:function(){return this.getLesson().lastActive}},{key:"getType",value:function(){return Lc.createElement(Ed,{level:Pc.PRIMARY,label:"Lesson"})}}]),t}(RC),_C=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActivityPosts",value:function(){var e=TC.all().filter(function(e){return e.getLastActive()>0}).sort(function(e,t){return-e.getLastActive()+t.getLastActive()}).slice(0,5).map(function(e){return{uiElement:Lc.createElement(MC,{thread:e}),time:e.getLastActive()}}),t=IS.all().filter(function(e){return e.lastActive>0}).sort(function(e,t){return-e.lastActive+t.lastActive}).slice(0,5).map(function(e){return{uiElement:Lc.createElement(PC,{entry:e}),time:e.lastActive}}),n=EC.all().filter(function(e){return e.lastActive>0}).sort(function(e,t){return-e.lastActive+t.lastActive}).slice(0,5).map(function(e){return{uiElement:Lc.createElement(DC,{task:e}),time:e.lastActive}}),i=LC.all().filter(function(e){return e.lastActive>0}).sort(function(e,t){return-e.lastActive+t.lastActive}).slice(0,5).map(function(e){return{uiElement:Lc.createElement(BC,{lesson:e}),time:e.lastActive}});return e.concat(t).concat(n).concat(i).sort(function(e,t){return-e.time+t.time}).map(function(e){return e.uiElement})}},{key:"beforeRedrawNotLoaded",value:function(){var e=this;Hu.Global.addListener("initNavManagerDone",function(){tg.Global.rightSidePanel.visible&&e.setLoaded(),tg.Global.addListener("toggledRightSide",function(t){t&&e.setLoaded()})})}},{key:"renderLoaded",value:function(){return this.getActivityPosts()}},{key:"renderNotLoaded",value:function(){return Lc.createElement(wS,null)}},{key:"setLoaded",value:function(){var e=this;this._loaded||zu.getJSON("/recent_activity/",{}).then(function(){return w(d(t.prototype),"setLoaded",e).call(e)},function(){return w(d(t.prototype),"setLoaded",e).call(e)})}}]),t}(db(Lc.Element)),FC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.classMap=e.classMap||this.constructor.markupClassMap,w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getEditButton",value:function(){if(this.options.showEditButton&&this.options.article.canBeEditedByUser()){var e=this.options.editButtonUrl||"/article/"+this.options.article.id+"/edit/";return Lc.createElement("div",{className:"text-left"},Lc.createElement("a",{href:e,target:"_blank"},Lc.createElement(Md,{label:Lc.T("Edit"),style:{margin:"10px"}})))}}},{key:"render",value:function(){return[this.getEditButton(),w(d(t.prototype),"render",this).call(this)]}},{key:"setArticle",value:function(e){this.updateOptions({article:e})}},{key:"getValue",value:function(){return w(d(t.prototype),"setValue",this).call(this,this.getArticleToRender().markup),w(d(t.prototype),"getValue",this).call(this)}},{key:"getArticleToRender",value:function(){return this.options.article.getTranslation()}},{key:"getArticleDependencies",value:function(){var e=this.options.article.dependency;return e&&e.split(",")}},{key:"redraw",value:function(){var e=this,n=this.getArticleDependencies();if(!n)return void w(d(t.prototype),"redraw",this).call(this);window.require(n,function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.registerDependencies(i),w(d(t.prototype),"redraw",e).call(e)})}},{key:"onMount",value:function(){var e=this;this.options.liveLanguage&&this.attachListener(fk,"localeChange",function(){return e.redraw()})}}]),t}(sp),UC=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.articleId=this.options.articleId||this.options.id}},{key:"redraw",value:function(){var e=this;if(this.options.article)return w(d(t.prototype),"redraw",this).call(this);xS.fetch(this.options.articleId,function(t){return e.updateOptions({article:t})})}}]),t}(FC),zC=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.articleChildMap=new WeakMap,e}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{fullHeight:!0})}}]),o(t,[{key:"setOptions",value:function(e){e=Object.assign({lazyRender:!0},e),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getPageForArticle",value:function(e){return this.articleChildMap.has(e)||this.articleChildMap.set(e,Lc.createElement(FC,{article:e,showEditButton:this.options.showEditButton})),this.articleChildMap.get(e)}},{key:"setActive",value:function(e){if(!(e instanceof ES))return void w(d(t.prototype),"setActive",this).call(this,e);w(d(t.prototype),"setActive",this).call(this,this.getPageForArticle(e))}},{key:"setActiveArticleId",value:function(e){var t=this;xS.fetch(e,function(e){t.setActive(e)})}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.options.initialArticle&&this.setActive(this.options.initialArticle),this.options.initialArticleId&&this.setActiveArticleId(this.options.initialArticleId)}}]),t}(Of);FC.markupClassMap=new op(op.GLOBAL,[["Article",UC],["RawSVG",ag.RawSVG]]);var WC,HC,VC,GC,jC,YC,JC,qC,XC,KC,QC,ZC,$C,ex,tx,nx,ix=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{autoActive:!1,path:"/"}}},{key:"getArticleUrl",value:function(e){var t=this.options.path;return t.endsWith("/")||(t+="/"),t+e.url+"/"}},{key:"onSetActive",value:function(e){this.switcherArea.setActiveArticleId(e.articleId),nm.changeURL(this.getArticleUrl(e))}},{key:"getInitialPanel",value:function(){return Lc.createElement("h3",null,'Welcome to the "About" page. Click on any of the above tabs to find more information on the desired topic.')}},{key:"getSwitcher",value:function(e){return Lc.createElement(zC,{ref:"switcherArea",lazyRender:this.options.lazyRender,style:{margin:"1em"}},this.getInitialPanel())}},{key:"createTabPanel",value:function(e){return[Lc.createElement(Hb,{panel:e,title:e.title,activeTabDispatcher:this.activeTabDispatcher,href:this.getArticleUrl(e),styleSheet:this.styleSheet}),e]}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.children=this.options.children.map(function(e){return Object.assign(new Gu,e)})}},{key:"setURL",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.options.children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.url===e[0])return void o.dispatch("show")}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}}]),t}(Gb),rx={BLUE:"#20232d",HOVER_BLUE:"#364251",BLACK:"#181a22",HOVER_BLACK:"#323539",WHITE:"#eee"},ax={color:rx},ox=(WC=qC=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.titleFontSize="2em",O(n,"commentsTitle",HC,y(n)),O(n,"bottomSection",VC,y(n)),O(n,"blogEntryView",GC,y(n)),n.title={"font-size":n.titleFontSize,"padding-top":"20px","padding-bottom":"10px","text-decoration":"italic",width:"100%","text-align":"center","word-wrap":"normal","line-height":"60px"},n.writtenBy={width:"100%","text-align":"left","padding-top":"20px","font-size":"1em",color:"#666"},n.article={"text-align":"justify","font-size":"17px"},n.link={textDecoration:"none",textAlign:"center",marginTop:"-15pt",fontSize:"1.1em"},n.blogArticleRenderer={overflow:"hidden",position:"relative",maxHeight:"180px","text-align":"justify","font-size":"17px",marginBottom:"25px"},O(n,"whiteOverlay",jC,y(n)),O(n,"loadMoreButton",YC,y(n)),O(n,"sendMessageButtonStyle",JC,y(n)),n}return h(t,e),t}(Jc),HC=R(WC.prototype,"commentsTitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"20px",color:"#333",marginTop:"10px",fontSize:"1em",textTransform:"uppercase"}}}),VC=R(WC.prototype,"bottomSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"5px",height:"50px",width:"100%"}}}),GC=R(WC.prototype,"blogEntryView",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0 auto",width:"900px","max-width":"100%"}}}),jC=R(WC.prototype,"whiteOverlay",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100px",background:"linear-gradient(rgba(255,255,255,0), #fff)",position:"absolute",marginTop:"-120px",pointerEvents:"none",width:"92%"}}}),YC=R(WC.prototype,"loadMoreButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"16px",color:"#fff",height:"40px",marginTop:"10px",marginBottom:"20px",width:"auto",borderRadius:"0px",backgroundColor:ax.color.BLUE,border:"0",padding:"5px 10px",borderColor:ax.color.BLUE,fontSize:"1em",transition:".2s",textTransform:"uppercase",opacity:"1",":hover":{backgroundColor:ax.color.HOVER_BLUE,borderColor:ax.color.HOVER_BLUE,transition:".2s"},":active":{backgroundColor:ax.color.HOVER_BLUE,borderColor:ax.color.HOVER_BLUE,transition:".2s"},":focus":{backgroundColor:ax.color.HOVER_BLUE,borderColor:ax.color.HOVER_BLUE,transition:".2s"},":active:focus":{backgroundColor:ax.color.HOVER_BLUE,borderColor:ax.color.HOVER_BLUE,transition:".2s"}}}}),JC=R(WC.prototype,"sendMessageButtonStyle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"30px",marginTop:"10px",marginBottom:"20px",width:"auto",borderRadius:"0px",backgroundColor:ax.color.BLUE,borderColor:"#333",fontSize:"13px",transition:".2s",":hover":{backgroundColor:ax.color.HOVER_BLUE,borderColor:ax.color.HOVER_BLUE,transition:".2s"},":active":{backgroundColor:ax.color.HOVER_BLUE,borderColor:ax.color.HOVER_BLUE,transition:".2s"},":focus":{backgroundColor:ax.color.HOVER_BLUE,borderColor:ax.color.HOVER_BLUE,transition:".2s"},":focus:active":{backgroundColor:ax.color.HOVER_BLUE,borderColor:ax.color.HOVER_BLUE,transition:".2s"}}}}),WC),sx=(XC=ZC=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.hStyle={"text-align":"center","margin-top":"30px","margin-bottom":"30px",width:"100%"},O(n,"blogArticleRenderer",KC,y(n)),O(n,"quote",QC,y(n)),n}return h(t,e),t}(Jc),KC=R(XC.prototype,"blogArticleRenderer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{" h1":this.hStyle," h2":this.hStyle," h3":this.hStyle," h4":this.hStyle," h5":this.hStyle," h6":this.hStyle}}}),QC=R(XC.prototype,"quote",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"font-style":"italic","margin-top":"20px","margin-bottom":"20px",color:"#707070",float:"right",display:"flex",width:"100%"}}}),XC),lx=($C=Ze(sx))(ex=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.blogArticleRenderer)}}]),t}(FC))||ex,ux=(tx=Ze(sx))(nx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.quote)}},{key:"render",value:function(){return[Lc.createElement("div",{style:{"flex-grow":"1000000","min-width":"10%",display:"inline-block"}}),Lc.createElement("div",{style:{"flex-grow":"1",display:"inline-block"}},this.options.value)]}}]),t}(Lc.Primitive("div")))||nx;lx.markupClassMap=new op(FC.markupClassMap),lx.markupClassMap.addClass("Quote",ux);var cx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"updateCenter",value:function(e){var t=e+this.options.angleOffset,n=this.options.nucleusCenter.x+Math.sin(t)*this.options.outerRadius,i=this.options.nucleusCenter.y+Math.cos(t)*this.options.outerRadius;this.setCenter(n,i)}}]),t}(ag.Circle),hx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getElectrons",value:function(){for(var e=[],t=0;t<this.options.electronCount;t+=1)e.push(Lc.createElement(cx,{ref:this.refLinkArray("electrons",t),radius:this.options.electronRadius,angleOffset:t*Math.PI*2/this.options.electronCount,outerRadius:this.options.radius,nucleusCenter:this.options.center,fill:"black"}));return e}},{key:"render",value:function(){return[Lc.createElement(ag.Circle,{radius:this.options.radius,center:this.options.center,fill:"transparent",stroke:"black",strokeWidth:this.options.strokeWidth}),this.getElectrons()]}},{key:"recalcElectrons",value:function(e){var t=this.options.radius*Math.PI%1,n=-e*this.options.electronSpeed/2e3+t,i=!0,r=!1,a=void 0;try{for(var o,s=this.electrons[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.updateCenter(n)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}}]),t}(ag.Group),dx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options=Object.assign({version:5,electronSpeed:[1,.8,.5,.24,.1]},this.options);for(var n=[2,8,18,18,18],i=[],r=this.options.version,a=0;a<n.length&&r;a+=1){var o=Math.min(r,n[a]);i.push(o),r-=o}this.options.ringCount=a,this.options.electronCount=i,this.setSize(this.options.size)}},{key:"setSize",value:function(e,t){e||console.error("You need to specify a size for the logo!"),this.size=e,this.nucleusCenter={x:e/2,y:e/2};var n=Math.log2(this.options.ringCount+1);this.nucleusRadius=.08*e/n,this.electronRadius=.034*e/n,this.electronRingStrokeWidth=.01*e/n,this.maxRadius=.4*e,t&&this.redraw()}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("height",this.size+"px"),e.setStyle("width",this.size+"px"),e}},{key:"calculateElectronCenter",value:function(e){var t=-Date.now()/2e3+e;return{x:this.nucleusCenter.x+Math.sin(t)*this.outerRadius,y:this.nucleusCenter.y+Math.cos(t)*this.outerRadius}}},{key:"getRings",value:function(){for(var e=[],t=0;t<this.options.ringCount;t+=1)e.push(Lc.createElement(hx,{ref:this.refLinkArray("rings",t),center:this.nucleusCenter,radius:(t+1)*this.maxRadius/this.options.ringCount,strokeWidth:this.electronRingStrokeWidth,electronRadius:this.electronRadius,electronCount:this.options.electronCount[t],electronSpeed:this.options.electronSpeed[t]}));return e}},{key:"render",value:function(){return[this.getRings(),Lc.createElement(ag.Circle,{ref:"nucleusCircle",center:this.nucleusCenter,radius:this.nucleusRadius,fill:"black"})]}},{key:"onMount",value:function(){var e=this;this.redrawOrbitAnimation=function(){var t=Date.now(),n=!0,i=!1,r=void 0;try{for(var a,o=e.rings[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.recalcElectrons(t)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}requestAnimationFrame(e.redrawOrbitAnimation)},requestAnimationFrame(this.redrawOrbitAnimation)}},{key:"onUnmount",value:function(){cancelAnimationFrame(this.redrawOrbitAnimation)}}]),t}(ag.SVGRoot),px=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,e)),n.extraAngles=new Array(250),n.outerRadius=[],n.electrons=[];for(var i=0;i<n.extraAngles.length;i++)n.extraAngles[i]=2*Math.random()*Math.PI,n.outerRadius[i]=160*Math.random();return n.size=n.options.size||400,n}return h(t,e),o(t,[{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("height",this.size+"px"),e.setStyle("width",this.size+"px"),e}},{key:"render",value:function(){for(var e=-Date.now()/1e3,t={x:200,y:200},n=[],i=0;i<this.extraAngles.length;i++){e+=this.extraAngles[i];var r={x:t.x+Math.sin(e)*this.outerRadius[i],y:t.y+Math.cos(e)*this.outerRadius[i]},a="#"+((1<<24)*Math.random()|0).toString(16);n.push(Lc.createElement(ag.Circle,{key:i+1,center:r,radius:1,fill:a}))}return this.electrons=n,n}},{key:"updateCircles",value:function(){for(var e={x:200,y:200},t=-Date.now()/1e3,n=this.extraAngles,i=n.length,r=0;r<i;r+=1)t+=n[r],this.electrons[r].setCenter(e.x+Math.sin(t)*this.outerRadius[r],e.y+Math.cos(t)*this.outerRadius[r]),this.electrons[r].setRadius(5*Math.abs(t%1))}},{key:"onMount",value:function(){var e=this,t=0,n=performance.now(),i=function i(){var r=window.performance.now();e.updateCircles(),t+=window.performance.now()-r,n=performance.now(),requestAnimationFrame(i)};requestAnimationFrame(i)}}]),t}(ag.SVGRoot),fx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{size:500,color:$c.Global.getProperty("COLOR_PRIMARY","black"),background:"transparent"}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setAttribute("height",this.options.size+"px"),e.setAttribute("width",this.options.size+"px"),e.setAttribute("preserveAspectRatio","none"),e.setAttribute("viewBox","0 0 500 500")}},{key:"render",value:function(){return[Lc.createElement(ag.Group,{ref:"circlesGroup"},Lc.createElement(ag.Circle,{radius:1.15*50,center:{x:250,y:62.5},strokeWidth:"0",stroke:this.options.color,fill:this.options.color}),Lc.createElement(ag.Circle,{radius:1.15*50,center:{x:250,y:62.5},strokeWidth:"0",stroke:this.options.color,fill:this.options.color,transform:"rotate(240,".concat(250,",").concat(250,")")}),Lc.createElement(ag.Circle,{radius:1.15*50,center:{x:250,y:62.5},strokeWidth:"0",stroke:this.options.color,fill:this.options.color,transform:"rotate(120,".concat(250,",").concat(250,")")})),Lc.createElement(ag.Group,{ref:"triangleGroup"},Lc.createElement(ag.Path,{stroke:this.options.color,strokeWidth:50,d:"M".concat(250,",").concat(50*(5-1.6*Math.sqrt(3)*2/3),"L").concat(170,",").concat(50*(5+1.6*Math.sqrt(3)/3),"L").concat(330,",").concat(50*(5+1.6*Math.sqrt(3)/3),"z"),fill:this.options.background})),Lc.createElement(ag.Group,{ref:"linesGroup"},Lc.createElement(ag.Rect,{stroke:this.options.color,strokeWidth:"0",x:225,y:50,width:50,height:150,fill:this.options.color}),Lc.createElement(ag.Rect,{stroke:this.options.color,strokeWidth:"0",x:225,y:50,width:50,height:150,fill:this.options.color,transform:"rotate(240,".concat(250,",").concat(250,")")}),Lc.createElement(ag.Rect,{stroke:this.options.color,strokeWidth:"0",x:225,y:50,width:50,height:150,fill:this.options.color,transform:"rotate(120,".concat(250,",").concat(250,")")}))]}}]),t}(ag.SVGRoot),gx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"easeFunction",value:function(e){return e<0&&(e=0),e>1&&(e=1),(e*=2)<1?.5*e*e+0:-.5*(--e*(e-2)-1)+0}},{key:"onMount",value:function(){var e=this,t=0,n=0,i=function i(){(t+=.05)>=1&&(t=0,n+=60);var r=60*e.easeFunction(t);e.circlesGroup.setAttribute("transform","rotate(".concat(n+r,",").concat(250,",").concat(250,")")),e.triangleGroup.setAttribute("transform","rotate(".concat(-(n+r),",").concat(250,",").concat(250,")")),e.linesGroup.setAttribute("transform","rotate(".concat(n+r,",").concat(250,",").concat(250,")")),e.animationFrame=requestAnimationFrame(i)};this.animationFrame=requestAnimationFrame(i)}},{key:"onUnmount",value:function(){cancelAnimationFrame(this.animationFrame)}}]),t}(fx),mx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.EXTRA_SMALL)}},{key:"render",value:function(){return[Lc.createElement(ix,{variableHeightPanels:!0,ref:"articleTabArea",path:"/about"},Hk),Lc.createElement("hr",null),Lc.createElement("div",{style:{"text-align":"center"}},Lc.createElement("h2",null,"CS Academy version ",Lc.createElement("strong",null,"Carbon")),Lc.createElement(dx,{size:300,version:6}))]}},{key:"setURL",value:function(e){this.articleTabArea.setURL(e)}}]),t}(Lc.Element),vx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({textAlign:"center"})}},{key:"render",value:function(){return Lc.createElement(dx,this.options)}}]),t}(Lc.Element);lx.markupClassMap.addClass("CSAAtomLogo",vx);var yx=function(e){function t(e){var i;r(this,t),i=b(this,d(t).call(this,e)),i.emojiMap=new Map,i.unicodeToEmojiMap=new Map;for(var a in n.Emoji.EMOJI)i.emojiMap.set(n.Emoji.EMOJI[a].key,a),i.unicodeToEmojiMap.set(n.Emoji.EMOJI[a].unicode,a);for(var o in n.Emoji.EMOTICONS){var s=i.unicodeToEmojiMap.get(n.Emoji.EMOTICONS[o]);i.emojiMap.set(o,s)}for(var l in n.Emoji.TWITCH_EMOTICONS)i.emojiMap.set(l,l);return i}return h(t,e),o(t,[{key:"modify",value:function(e,t){for(var n=this,i=[],r=0,a=e[r],o=0,s=function(e,r){var o=t.substring(e,r);n.emojiMap.has(o)&&(a.start<e&&i.push({isString:!0,start:a.start,end:e}),i.push({content:{tag:"Emoji",value:n.emojiMap.get(o)},start:e,end:r}),a={isString:!0,start:r,end:a.end})},l=0;l<t.length;l+=1)l>=a.end&&(i.push(a),r+=1,a=e[r]),a.isJSX||/\s/.test(t[l])&&(s(o,l),o=l+1);return o<t.length&&s(o,t.length),a.start<t.length&&i.push(a),i}}]),t}(Sc);Cc.modifiers.push(new yx);var bx=null;Lc.Emoji=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.height=e.height||"1.25em",e.width=e.width||"1.25em",w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getNodeType",value:function(){return"span"}},{key:"render",value:function(){return bx?bx.EMOJI[this.options.value]?Lc.createElement(ag.SVGRoot,{ref:"svg",height:this.options.height,width:this.options.width,style:{display:"inline-block",margin:"-.2ex .15em .2ex","line-height":"normal","vertical-align":"middle"}}):bx.TWITCH_EMOTICONS[this.options.value]?Lc.createElement("img",{src:"https://static-cdn.jtvnw.net/emoticons/v1/"+bx.TWITCH_EMOTICONS[this.options.value].imageId+"/1.0",alt:this.options.value,style:{display:"inline-block",margin:"-.2ex .15em .2ex","line-height":"normal","vertical-align":"middle"}}):[]:[]}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return bx?(bx.EMOJI[this.options.value]?e.setAttribute("title",":"+this.options.value+":"):bx.TWITCH_EMOTICONS[this.options.value]&&e.setAttribute("title",this.options.value),this.options.title&&e.setAttribute("title",this.options.title),e):e}},{key:"updateEmojiContent",value:function(){bx.EMOJI[this.options.value]?(this.svg.node.innerHTML=bx.EMOJI[this.options.value].svgData,this.svg.node.setAttribute("viewBox","0 0 64 64")):bx.TWITCH_EMOTICONS[this.options.value]||console.error("Invalid emoji value",this.options.value)}},{key:"redraw",value:function(){var e=this
;if(bx)return w(d(t.prototype),"redraw",this).call(this),void this.updateEmojiContent();window.require(["Emoji"],function(t){bx=t.Emoji||{},e.node||e.createNode(),e.redraw()})}}]),t}(Lc.Element);var kx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"li"}},{key:"getNotificationClass",value:function(){return""}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("padding","10px"),e.setStyle("borderBottom","1px solid #ddd"),e.setStyle("textAlign","right"),e.addClass(this.getNotificationClass()),e}},{key:"getChildrenToRender",value:function(){return[Lc.createElement("div",{style:{textAlign:"initial"}},this.render()),Lc.createElement(np,{timeStamp:this.options.notification.dateCreated})]}}]),t}(Lc.Element),wx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNotificationClass",value:function(){return"ratingNotification"}},{key:"render",value:function(){var e=this.options.notification.data.oldRating,t=this.options.notification.data.newRating;return e<t?["Congratulations! Your rating has increased by ",Lc.createElement("span",{style:{color:"green"}},t-e)," points ",Lc.createElement(Lc.Emoji,{value:"smile"}),". Keep it up!"]:["Your rating has decreased by ",Lc.createElement("span",{style:{color:"red"}},e-t)," points ",Lc.createElement(Lc.Emoji,{value:"disappointed"}),". Better luck next time!",Lc.createElement(Lc.Emoji,{value:"smiley"})]}}]),t}(kx),Ex=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNotificationClass",value:function(){return"announcementNotification"}},{key:"render",value:function(){return Lc.createElement(sp,{value:this.options.notification.data.value})}}]),t}(kx),Sx=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.unreadNotificationsCount=0,n.notificationsCount=0,n.displayedNotifications=new Set,n}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({height:"100%",width:"100%",lineHeight:"normal",overflow:"auto",backgroundColor:"#fff",color:"#262626"})}}]),o(t,[{key:"render",value:function(){return 0==this.options.children.length&&this.options.children.push(Lc.createElement("div",{style:{cursor:"default",textAlign:"center",fontSize:"1.05em",height:"30px",lineHeight:"30px"}},"You don't have any notifications.")),this.options.children}},{key:"getStoredNotifications",value:function(){zu.getJSON("/accounts/get_user_notifications/",{})}},{key:"insertChild",value:function(e,t){return t=t||0,this.options.children.splice(t,0,e),e.mount(this,t+1<this.options.children.length?this.children[t+1].node:null),e}},{key:"handleNewNotification",value:function(e){if(!this.displayedNotifications.has(e)){e.isRead()||this.options.icon.increaseUnreadNotificationsCount();var t=this.constructor.NotificationClassMap.get(e.type);if(!t)return void console.error("There is no notification class for ",e.type);var n=Lc.createElement(t,{notification:e});this.notificationsCount+=1,1===this.notificationsCount?(this.options.children=[n],this.redraw()):this.insertChild(n,0),this.displayedNotifications.add(e)}}},{key:"onMount",value:function(){var e=this;this.getStoredNotifications();var t=!0,n=!1,i=void 0;try{for(var r,a=uk.all().sort(function(e,t){return e.dateCreated-t.dateCreated})[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;this.handleNewNotification(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.attachCreateListener(uk,function(t){e.handleNewNotification(t)})}}]),t}(Lc.Element);Sx.NotificationClassMap=new Map([["ratingsChange",wx],["announcement",Ex]]);var Cx,xx,Tx,Ax,Lx,Ix,Nx=(Cx=Ax=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.descriptionFontSize="1.05em",O(n,"messagesPanelList",xx,y(n)),O(n,"textInputStyle",Tx,y(n)),n}return h(t,e),t}(Jc),xx=R(Cx.prototype,"messagesPanelList",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#fff",display:"flex",flexDirection:"column"}}}),Tx=R(Cx.prototype,"textInputStyle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#eee",border:"0",width:"85%",height:"30px",lineHeight:"30px",display:"inline-block",float:"left",outline:"none"}}}),Cx),Ox=function(e){var t=Ap.now();return t.format("DD/MM/YYYY")===e.format("DD/MM/YYYY")?e.format("HH:mm"):t.getYear()===e.getYear()?t.getWeekInYear()===e.getWeekInYear()?e.format("ddd"):e.format("MMM Do"):e.format("DD/MM/YYYY")},Rx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{hoverColor:"rgba(0, 0, 0, .05)",backgroundColorActive:"#3373b7"}}},{key:"getPrivateChat",value:function(){return wE.get(this.options.privateChatId)}},{key:"getMessageThread",value:function(){return this.getPrivateChat().getMessageThread()}},{key:"getLastMessage",value:function(){return this.getMessageThread().getLastMessage()||{content:"",timeAdded:0,id:"0"}}},{key:"getUserId",value:function(){return this.getPrivateChat().getOtherUserId()}},{key:"isLastMessageRead",value:function(){return!this.getPrivateChat().firstUnreadMessage[USER.id]}},{key:"extraNodeAttributes",value:function(e){e.setStyle({padding:"10px",borderBottom:"1px solid #ddd",whiteSpace:"nowrap",color:this.isLastMessageRead()?this.options.active?"white":"black":this.options.active?"white":"red",backgroundColor:this.options.active?this.options.backgroundColorActive:""})}},{key:"render",value:function(){return[Lc.createElement(sE,{ref:"userHandle",id:this.getUserId(),noPopup:!0,color:this.options.active?"white":null}),Lc.createElement("div",{ref:"timeAttribute",className:"pull-right",style:{color:this.options.active?"white":"#888"}},0!==this.getLastMessage().timeAdded?Ox(Ap(this.getLastMessage().timeAdded)):""),Lc.createElement("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",paddingTop:"8px"}},this.getLastMessage().content)]}},{key:"setActive",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.active!==e&&this.updateOptions({active:e})}},{key:"setAsRead",value:function(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.isLastMessageRead()||zu.postJSON("/chat/private_chat_mark_read/",{privateChatId:this.options.privateChatId}).then(function(){},function(){})}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(){e.setAsRead(),e.options.list.dispatch("messageSelected",e.getUserId())}),this.attachListener(this.getMessageThread(),"newMessage",function(){e.redraw(),e.options.list.redraw(),e.options.active?e.setAsRead(!0):e.options.list.recalculateTotalUnread()}),this.attachEventListener(this.getPrivateChat(),"updateFirstUnreadMessage",function(){e.redraw(),e.options.list.recalculateTotalUnread()})}}]),t}(Lc.Element),Mx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{width:"100%"}}}},{key:"render",value:function(){var e=this,t={position:"absolute",maxWidth:"300px",maxHeight:"300px",overflow:"auto",marginTop:"30px",backgroundColor:"#eee"};return[Lc.createElement(kf,{icon:"search",style:{display:"inline-block",backgroundColor:"#eee",color:"#999",width:"15%",height:"30px",textAlign:"center",float:"left",lineHeight:"30px",cursor:"pointer"},onClick:function(){e.input.node.focus(),e.input.node.select()}}),Lc.createElement(vg,{ref:"input",className:this.options.textInputStyle||"",placeholder:this.options.placeholder||""}),Lc.createElement(Kg,{className:"searchList",style:t,ref:"window"})]}},{key:"updateList",value:function(e){var t=this;if(!e)return this.window.options.children="",void this.window.redraw();for(var n={paddingLeft:"7px",paddingRight:"7px",paddingTop:"2px",paddingBottom:"2px"},i=[],r=0;r<e.length;r+=1)!function(r){var a=function(){t.input.setValue(e[r].username),t.window.hide(),t.dispatch("userChosen",e[r].id)};i.push(Lc.createElement("div",{style:n,onClick:a},e[r].username))}(r);this.window.options.children=i,this.window.redraw()}},{key:"onMount",value:function(){var e=this;this.input.addNodeListener("keyup",function(){e.window.show(),e.input.getValue()?zu.getJSON(sk.options.fetchURL,{usernamePrefix:e.input.getValue()}).then(function(t){return e.updateList(t.state.publicuser)},function(){}):e.updateList()})}}]),t}(Lc.Element),Px=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.miniMessages=[],n.unreadMessages=0,n}return h(t,e),o(t,[{key:"getMiniMessages",value:function(){this.miniMessages=[];var e=!0,t=!1,n=void 0;try{for(var i,r=wE.all()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value,o=a.getOtherUserId(),s=Lc.createElement(Rx,{active:o===this.activeUserId,list:this,privateChatId:a.id});this.miniMessages.push(s)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return this.miniMessages.sort(function(e,t){return-parseInt(e.getLastMessage().timeAdded)+parseInt(t.getLastMessage().timeAdded)}),this.miniMessages}},{key:"render",value:function(){return Lc.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},Lc.createElement("div",{ref:"miniMessagesList",style:{position:"absolute",top:0,bottom:0,left:0,right:0}},this.getMiniMessages()))}},{key:"setActiveMiniMessage",value:function(e){this.activeUserId=e,this.redraw()}},{key:"recalculateTotalUnread",value:function(){this.unreadMessages=0;var e=!0,t=!1,n=void 0;try{for(var i,r=this.miniMessages[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.isLastMessageRead()||(this.unreadMessages+=1)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.dispatch("unreadCountChanged",this.unreadMessages)}},{key:"refreshList",value:function(){var e=this;zu.getJSON("/chat/private_chat_list/",{}).then(function(){e.redraw(),e.recalculateTotalUnread()})}},{key:"onMount",value:function(){this.refreshList()}}]),t}(Lc.Element),Dx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({lineHeight:"normal",backgroundColor:"#fff",width:"100%",height:"100%",overflow:"auto",maxWidth:"100%",position:"absolute",right:"0px",display:"flex",flexDirection:"column"})}},{key:"render",value:function(){return[Lc.createElement(Px,{ref:"messagesList",style:{flex:"1",overflow:"auto"}}),Lc.createElement("div",{style:{textAlign:"center",width:"100%",padding:"0.5em",borderTop:"1px solid #ddd"}},Lc.createElement(Xd,{href:"/messages/",newTab:!1,value:"View all messages"}))]}},{key:"onMount",value:function(){var e=this;this.attachListener(this.messagesList,"unreadCountChanged",function(t){e.dispatch("unreadCountChanged",t)}),this.attachListener(this.messagesList,"messageSelected",function(e){window.open(xt(e))})}}]),t}(Lc.Element),Bx=(Lx=Ze(Nx))(Ix=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.messagesPanelList)}},{key:"render",value:function(){return[Lc.createElement("div",{style:{padding:"16px",paddingRight:"50px",height:"62px",borderBottom:"1px solid #ddd"}},Lc.createElement(Mx,{ref:"userSearchInput",textInputStyle:this.styleSheet.textInputStyle,placeholder:"Search for user"})),Lc.createElement(Px,{ref:"messagesList",style:{flex:"1",overflow:"auto"}})]}},{key:"setActiveMiniMessage",value:function(e){this.messagesList.setActiveMiniMessage(e)}},{key:"routeToUser",value:function(e){nm.changeURL(xt(e))}},{key:"onMount",value:function(){var e=this;this.attachListener(this.userSearchInput,"userChosen",function(t){e.routeToUser(t),e.messagesList.refreshList()}),this.attachListener(this.messagesList,"messageSelected",function(t){e.setActiveMiniMessage(t),e.dispatch("userChanged",t),e.routeToUser(t)})}}]),t}(Lc.Element))||Ix,_x=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this,t=wE.getChatWithUser(parseInt(this.options.userId));if(t){var n={marginLeft:"0px",marginRight:"0px",width:"100%",paddingLeft:"0px !important",paddingRight:"0px !important",height:"100%"};return this.options.style&&this.options.style.height&&(n.height=this.options.style.height),Lc.createElement(fS,{ref:"chat",style:n,extraHeightOffset:75,privateChat:t})}return wE.fetchForUser(this.options.userId,function(t){e.updateOptions({privateChat:t}),e.chat.messageWindow.scrollToBottom()}),[Lc.createElement("h3",null,"Chat loading..."),Lc.createElement("span",{className:"fa fa-spinner fa-spin"})]}},{key:"onMount",value:function(){var e=this;this.addListener("hide",function(){e.chat&&e.chat.dispatch("hide")}),this.addListener("show",function(){e.chat&&e.chat.dispatch("show")})}}]),t}(Lc.Element),Fx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNoChat",value:function(){return Lc.createElement("h3",{style:{marginTop:"40px",textAlign:"center"}},"Click on a chat box to start a conversation.")}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getNoChat()},[new im("%s",function(e){return Lc.createElement(_x,{userId:parseInt(e.args[0]),style:{height:"100%"}})})]),this.routes}}]),t}(nm),Ux=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({border:"1px solid #ddd",height:"100%",maxWidth:"1280px",margin:"0 auto",position:"relative"})}},{key:"setURL",value:function(e){this.messagesPanelList.setActiveMiniMessage(parseInt(e[0])),this.chatWidget.setURL(e)}},{key:"render",value:function(){return[Lc.createElement("div",{style:{display:"inline-flex",height:"100%",overflow:"hidden",position:"relative"}},Lc.createElement(Bx,{ref:"messagesPanelList",style:{height:"100%",overflow:"auto",width:"250px",borderRight:"1px solid #ddd",transition:"margin .7s ease"}})),Lc.createElement(Md,{ref:"collapseButton",size:Dc.SMALL,faIcon:"chevron-left",level:Pc.PRIMARY,style:{position:"absolute",top:"15px",left:"208px",zIndex:"2017",transition:"all .7s ease"}}),Lc.createElement(Fx,{style:{display:"inline-block",flex:"1",width:"calc(100% - 250px)",height:"100%",transition:"width .7s ease",verticalAlign:"top"},ref:"chatWidget"})]}},{key:"onMount",value:function(){var e=this;this.collapseButton.addClickListener(function(){e.collapsed?(e.messagesPanelList.setStyle("marginLeft","0"),e.collapseButton.setFaIcon("chevron-left"),e.collapseButton.setStyle("left","208px"),e.collapseButton.setStyle("opacity","1"),e.chatWidget.setWidth("calc(100% - 250px)"),e.collapsed=!1):(e.messagesPanelList.setStyle("marginLeft","-250px"),e.collapseButton.setFaIcon("chevron-right"),e.collapseButton.setStyle("left","8px"),e.collapseButton.setStyle("opacity",".3"),e.chatWidget.setWidth("100%"),e.collapsed=!0)})}}]),t}(Lc.Element),zx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.count=0}},{key:"render",value:function(){return this.iconMessagesList=this.iconMessagesList||Lc.createElement(Dx,null),[this.iconMessagesList]}},{key:"getIcon",value:function(){return Lc.createElement(kf,{icon:"envelope",size:Dc.LARGE})}},{key:"getContent",value:function(){return Lc.createElement(xd,{ref:this.refLink("messagesCount"),style:{backgroundColor:"crimson",bottom:"5px",marginLeft:"-9px",marginTop:"15px",position:"absolute"},className:"hidden"})}},{key:"updateUnreadCount",value:function(e){this.messagesCount&&(this.count=e,this.messagesCount.options.children=e,this.messagesCount.options.className=e?"":"hidden",this.messagesCount.redraw(),this.dispatch("changeTabCount"))}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.iconMessagesList.addListener("unreadCountChanged",function(t){e.updateUnreadCount(t)}),this.addClickListener(function(){e.parent.dispatch("changeSwitcher",e.iconMessagesList||Lc.createElement(Dx,null),e)})}}]),t}(Wf),Wx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.unreadNotificationsCount=0,this.count=0}},{key:"render",value:function(){return[Lc.createElement(Sx,{icon:this})]}},{key:"getIcon",value:function(){return Lc.createElement(kf,{icon:"bell",size:Dc.LARGE})}},{key:"getContent",value:function(){return Lc.createElement(xd,{ref:this.refLink("notificationsCount"),style:{backgroundColor:"crimson",bottom:"5px",marginLeft:"-9px",marginTop:"15px",position:"absolute"},className:"hidden"})}},{key:"setUnreadNotificationsCount",value:function(e){this.notificationsCount&&(this.count=e,this.notificationsCount.options.children=e,this.notificationsCount.options.className=e?"":"hidden",this.notificationsCount.redraw(),this.dispatch("changeTabCount"))}},{key:"setNotificationsAsRead",value:function(){var e=this;zu.postJSON("/accounts/set_user_notifications_read/",{}).then(function(){return e.setUnreadNotificationsCount(0)},function(){})}},{key:"increaseUnreadNotificationsCount",value:function(){this.isToggled?this.setNotificationsAsRead():(this.unreadNotificationsCount+=1,this.setUnreadNotificationsCount(this.unreadNotificationsCount))}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),rk.getCurrentUser().addUpdateListener(function(t){"lastReadNotification"===t.type&&(e.unreadNotificationsCount=0,e.setUnreadNotificationsCount(e.unreadNotificationsCount))}),this.addClickListener(function(){e.notificationsList=e.notificationsList||Lc.createElement(Sx,{icon:e}),e.isToggled=!e.isToggled,e.parent.dispatch("changeSwitcher",e.notificationsList,e),e.isToggled&&e.setNotificationsAsRead()})}}]),t}(Wf),Hx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle("white-space","nowrap")}},{key:"getDefaultOptions",value:function(){return{value:Lc.createElement(Lc.Emoji,{height:"1.8em",width:"1.8em",value:fk.Locale.flagEmoji})}}},{key:"render",value:function(){var e=this,t=[],n=!0,i=!1,r=void 0;try{for(var a,o=this.constructor.Languages[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var n=a.value,i=function(){e.setLanguage(n),e.options.value=Lc.createElement(Lc.Emoji,{height:"1.8em",width:"1.8em",value:n.flagEmoji}),e.redraw()};t.push(Lc.createElement(_f,{onClick:i,value:[Lc.createElement(Lc.Emoji,{height:"1.8em",width:"1.8em",value:n.flagEmoji}),n.toString()]}))}()}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}},{key:"setLanguage",value:function(e){fk.setLocale(e);var t={localeLanguageId:e.id};zu.postJSON("/accounts/profile_changed/",t).then(function(){},function(){})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),setTimeout(function(){e.options.value=Lc.createElement(Lc.Emoji,{height:"1.8em",width:"1.8em",value:fk.Locale.flagEmoji}),e.redraw()})}}],[{key:"addLanguage",value:function(e,t){e&&(e.flagEmoji=t,this.Languages.push(e))}}]),t}(_f);Hx.Languages=[],setTimeout(function(){Hx.addLanguage(fk.ENGLISH,"flag_gb"),Hx.addLanguage(fk.ROMANIAN,"flag_ro"),Hx.addLanguage(fk.RUSSIAN,"flag_ru"),Hx.addLanguage(fk.ARABIC,"flag_ara")});var Vx,Gx,jx,Yx,Jx,qx,Xx,Kx,Qx,Zx=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.value=[Lc.createElement(kf,{icon:"circle",style:{color:"#d99a01",marginRight:"10px"}}),Lc.T("Connecting")],w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("cursor","default"),e}},{key:"onMount",value:function(){var e=this,t=function(){var t=Ok.Global.connectionStatus,n=Ok.ConnectionStatus;switch(t){case n.CONNECTED:e.options.value[0].setStyle("color","#417a5a"),e.options.value[1]=Lc.T("Connected");break;case n.CONNECTING:e.options.value[0].setStyle("color","#d99a01"),e.options.value[1]=Lc.T("Connecting");break;case n.DISCONNECTED:e.options.value[0].setStyle("color","#d64144"),e.options.value[1]=Lc.T("Disconnected")}e.redraw()};Ok.Global.addListener("connectionStatus",function(){t()}),t()}}]),t}(_f),$x=(Vx=jx=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"accordion",Gx,y(n)),n}return h(t,e),t}(Qy),Gx=R(Vx.prototype,"accordion",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:nth-of-type(odd)":{color:jf.getInstance().colors.text,transition:"background-color ".concat(jf.getInstance().dimensions.backgroundTransitionDuration),":hover":{backgroundColor:jf.getInstance().colors.sidepanelHover}}}}}),Vx),eT=(Yx=Ze($x))(Jx=qx=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.sessionManager=Rf,n}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);var n=this.sessionManager.get(this.options.sessionKey);n?this.setChildrenStatus(n):this.setChildrenStatus(this.getDefaultChildrenStatus()),this.addListener("childrenStatusChange",function(){e.sessionManager.set(e.options.sessionKey,e.getChildrenStatus()),tg.Global.dispatch("changedAccordion")}),this.addListener("dragging",function(){tg.Global.dispatch("changedAccordion")})}}]),t}(ib))||Jx,tT=(Xx=Qx=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"online",Kx,y(n)),n}return h(t,e),t}(Jc),Kx=R(Xx.prototype,"online",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",height:"calc(1em + 16px)",padding:"8px",top:0,position:"absolute",right:0,color:qe(this.themeProperties.COLOR_PRIMARY,1),cursor:"pointer",backgroundColor:qe(this.themeProperties.COLOR_PRIMARY,.2),":hover":{backgroundColor:qe(this.themeProperties.COLOR_PRIMARY,.3)}}}}),Xx),nT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getRightFixed",value:function(){return USER.isAuthenticated?[Lc.createElement(zf,{anchor:Mc.RIGHT},Lc.createElement(Hx,null),Lc.createElement(zx,null),Lc.createElement(Wx,null))]:[Lc.createElement(Uf,{anchor:Mc.RIGHT},Lc.createElement(Hx,null),Lc.createElement(_f,{value:[Lc.createElement(kf,{icon:"sign-in",style:Object.assign({},{fontSize:"170%",paddingRight:"6px",width:"auto",verticalAlign:"middle"})}),Lc.T("Sign in")],style:{textTransform:"uppercase"},onClick:function(){return aE.show()}}))]}},{key:"getSuperUserArea",value:function(){if(!USER.isSuperUser&&!USER.isProblemsetter)return[];var e=[Lc.createElement(Ff,{value:[Lc.T("Eval Tasks")],href:"/eval/manager/"}),Lc.createElement(Ff,{value:[Lc.T("My Contests")],href:"/contest/manager/"})];if(USER.isSuperUser){var t=USER.isStaff&&Lc.createElement(_f,{value:Lc.T("Server (Admin)"),persistent:!0,sessionKey:"server"},Lc.createElement(Ff,{value:[Lc.T("Machines")],href:"/manage/icarus/"}),Lc.createElement(Ff,{value:[Lc.T("Analytics")],href:"/analytics/"}),Lc.createElement(Ff,{value:[Lc.T("Users")],href:"/manage/users/"}),Lc.createElement(Ff,{value:[Lc.T("Commands")],href:"/baseconfig/command/manager/"}),Lc.createElement(Ff,{value:[Lc.T("Testing")],href:"/testing/"}));return[Lc.createElement("hr",{className:this.styleSheet.hrStyle}),Lc.createElement(Uf,null,t,Lc.createElement(_f,{value:Lc.T("Content (Admin)"),persistent:!0,sessionKey:"content"},[].concat(e,[Lc.createElement(Ff,{value:[Lc.T("Checkers")],href:"/eval/checkers/"}),Lc.createElement(Ff,{value:[Lc.T("Private Archives")],href:"/private-archives/"}),Lc.createElement(Ff,{value:[Lc.T("Eval Jobs")],href:"/eval/global/"}),Lc.createElement(Ff,{value:[Lc.T("Articles")],href:"/article/manager/"}),Lc.createElement(Ff,{value:[Lc.T("Raw Ratings")],href:"/real_ratings/"}),Lc.createElement(Ff,{value:[Lc.T("Reputation")],href:"/reputations/"}),Lc.createElement(Ff,{value:[Lc.T("File Storage")],href:"/manage/storage/"})])))]}return[Lc.createElement("hr",{className:this.styleSheet.hrStyle}),Lc.createElement(_f,{value:Lc.T("Content (Admin)"),persistent:!0,sessionKey:"content"},e)]}},{key:"getLeftSidePanelFixedChildren",value:function(){return[]}},{key:"getLeftSidePanelChildren",value:function(){var e=[];if(USER.isAuthenticated){var t=rk.getCurrentUser(),n=USER.username?"/user/"+USER.username:"/userid/"+USER.id,i=t.displayName?t.firstName+" "+t.lastName:t.username;i=i||Lc.createElement("em",{style:{color:"red"}},Lc.createElement("strong",null,"no username set")),e.push(Lc.createElement(_f,{value:["Profile (",i,")"],persistent:!0,sessionKey:"user",defaultToggled:!0},Lc.createElement(Ff,{value:[Lc.T("My Profile")],href:n}),Lc.createElement(Ff,{value:[Lc.T("Account Settings")],href:"/accounts/settings/"}),Lc.createElement(Ff,{value:[Lc.T("Workspace Settings")],href:"/accounts/workspace_settings/"}),Lc.createElement(Ff,{value:[Lc.T("Messages")],href:"/messages/"}))),e.push(Lc.createElement(_f,{value:[Lc.T("Logout")],onClick:function(){return oE.logout()}}))}return e.push(Lc.createElement(Zx,null)),[Lc.createElement(Uf,null,Lc.createElement(Ff,{value:[Lc.createElement(fx,{style:{marginRight:"6px",verticalAlign:"middle"},size:"14",color:$e($c.Global.properties.COLOR_PRIMARY),background:"transparent"}),Lc.T("Home")],href:"/"}),Lc.createElement(_f,{value:Lc.T("Interviews"),persistent:!0,sessionKey:"interviews",defaultToggled:!0},Lc.createElement(Ff,{value:Lc.T("Tasks"),href:"/contest/interview-archive/"}),Lc.createElement(Ff,{value:Lc.T("My Interviews"),href:"/interview/"})),Lc.createElement(_f,{value:Lc.T("Algorithms"),persistent:!0,sessionKey:"algorithms",defaultToggled:!0},Lc.createElement(Ff,{value:Lc.T("Tasks"),href:"/contest/archive/"}),Lc.createElement(Ff,{value:Lc.T("Lessons"),href:"/lessons/"}),Lc.createElement(Ff,{value:Lc.T("Contests"),href:"/contests/"}),Lc.createElement(Ff,{value:Lc.T("Leaderboard"),href:"/ratings/"})),Lc.createElement(_f,{value:Lc.T("Apps"),persistent:!0,sessionKey:"apps"},Lc.createElement(Ff,{value:Lc.T("Graph Editor"),href:"/app/graph_editor/"}),Lc.createElement(Ff,{value:Lc.T("Geometry Widget"),href:"/app/geometry_widget/"}),Lc.createElement(Ff,{value:Lc.T("Diff Tool"),href:"/app/diffing_tool/"})),Lc.createElement(Ff,{value:Lc.T("Workspace"),href:"/workspace/"})),Lc.createElement("hr",{className:this.styleSheet.hrStyle}),Lc.createElement(Uf,null,Lc.createElement(Ff,{value:Lc.T("Forum"),href:"/forum/"}),Lc.createElement(Ff,{value:Lc.T("Blog"),href:"/blog/"}),Lc.createElement(Ff,{value:Lc.T("About"),href:"/about/"})),Lc.createElement("hr",{className:this.styleSheet.hrStyle}),Lc.createElement(Uf,null,e)].concat(C(this.getSuperUserArea()))}},{key:"getRightSidePanelChildren",value:function(){var e=Lc.createElement("div",{ref:this.refLink("onlineButton"),className:tT.getInstance().online});return[Lc.createElement(Uf,{style:{height:"100%",position:"relative"}},Lc.createElement(eT,{ref:this.refLink("accordion"),style:{height:"100%",bottom:"0"},sessionKey:"accordion"},Lc.createElement(bS,{ref:this.refLink("navChat"),style:{backgroundColor:"#fafafa"},title:[Lc.T("Chat"),e]}),Lc.createElement(_C,{title:Lc.T("Activity"),style:{backgroundColor:"#fafafa"}})),e)]}},{key:"initGlobalRouterListener",value:function(){var e=this;nm.Global.addListener("change",function(){setTimeout(function(){e.checkForWrap()},0)})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),document.body.addEventListener("click",function(){e.leftSidePanel&&e.leftSidePanel.visible&&e.toggleLeftSidePanel()}),this.attachListener(this.navChat,"updateOnlineUsers",function(){return e.onlineButton.setChildren([Lc.createElement(kf,{icon:"users",style:{marginRight:"5px"}}),e.navChat.onlineUsers.size+" online"])}),this.onlineButton.addClickListener(function(){return e.togglePopup(e.navChat.onlineUsers)})}},{key:"togglePopup",value:function(e){if(this.onlineUsersPopup&&this.onlineUsersPopup.isInDocument())return this.onlineUsersPopup.hide(),void delete this.onlineUsersPopup;e.size&&(this.onlineUsersPopup=rw.create(document.body,{target:this.onlineButton,children:Array.from(e).map(function(e){return Lc.createElement("div",{style:{width:"100%"}},Lc.createElement(sE,{userId:e}))}),arrowDirection:Mc.UP,bodyPlaced:!0,style:{zIndex:3e3}}))}}]),t}(tg),iT=function e(t){return function(t){function n(){return r(this,n),b(this,d(n).apply(this,arguments))}return h(n,t),o(n,[{key:"importState",value:function(e){cp.importState(e.state||{});for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];"state"!==i&&(this.options[i]=e[i])}}},{key:"getAjaxUrl",value:function(){var e=location.pathname;return e.endsWith("/")||(e+="/"),e}},{key:"getAjaxRequest",value:function(){return{}}},{key:"renderNotLoaded",value:function(){var t=e.renderLoading;return"function"==typeof t&&(t=t()),t}},{key:"setError",value:function(e){this.options.error=e}},{key:"renderError",value:function(){var t=e.renderError;return"function"==typeof t&&(t=t(this.options.error)),t}},{key:"renderLoaded",value:function(){return this.options.error?this.renderError():w(d(n.prototype),"renderLoaded",this).call(this)}},{key:"onDelayedMount",value:function(){this.options.error||w(d(n.prototype),"onDelayedMount",this).call(this)}},{key:"beforeRedrawNotLoaded",value:function(){var e=this;zu.getJSON(this.getAjaxUrl(),this.getAjaxRequest()).then(function(t){e.importState(t),e.setLoaded()},function(t){e.setError(t),e.setLoaded()})}}]),n}(db(t))};iT.renderLoading=function(){return Lc.createElement(wS,null)},iT.renderError=function(e,t){return Lc.createElement("div",{style:{maxWidth:"300px",margin:"0 auto",marginTop:"30px"}},Lc.createElement(ub,{title:Lc.T("Error in opening the URL"),level:Pc.ERROR},Lc.createElement("h3",null,t||e.message)))};var rT,aT,oT,sT,lT,uT,cT,hT,dT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getChildrenToRender",value:function(){return[Lc.createElement("div",{ref:"content"},this.render())]}},{key:"onMount",value:function(){var e=this;this.content.addNodeListener("mouseover",function(){var t=e.options.popupContent;"function"==typeof t&&(t=t()),e.popup=rw.create(e.content,Object.assign({target:e.content,children:t,transitionTime:300,titleFontSize:"10pt",contentStyle:{padding:"0 0 0 5px",textAlign:"left"},style:{minWidth:"100px",maxWidth:"300px"}},e.options.popupOptions||{}))}),this.content.addNodeListener("mouseout",function(){e.popup&&e.popup.hide()})}}]),t}(Lc.Primitive("span")),pT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Transfer ownership"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getArticle",value:function(){return this.options.article}},{key:"getBody",value:function(){return[Lc.createElement(Lc.TextElement,{ref:"text",value:"Set owner for "+this.getArticle().name+":"}),Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"ownerFormField",label:"Author ID"},Lc.createElement(vg,{ref:"ownerFormInput",value:this.getArticle().userCreatedId})))]}},{key:"getFooter",value:function(){var e=this
;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Dd,{ref:"transferOwnershipButton",level:this.getActionLevel(),onClick:function(){return e.action()},statusOptions:[this.getActionName(),{faIcon:"spinner fa-spin",label:" transfering ownership ..."},this.getActionName(),"Failed"]}))]}},{key:"action",value:function(){var e=this,t=this.ownerFormInput.getValue(),n={newOwner:t};this.messageArea.showMessage("Saving...","black",null),this.transferOwnershipButton.postJSON("/article/"+this.getArticle().id+"/set_owner/",n).then(function(){return e.hide()},function(t){return e.messageArea.showMessage("Error in changing owner "+t.message,"red")})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Zg),fT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Delete article"}},{key:"getBody",value:function(){return Lc.createElement(Lc.TextElement,{ref:"text",value:"Delete "+this.getArticle().name+"?"})}},{key:"getArticle",value:function(){return this.options.article}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Dd,{ref:"deleteArticleButton",level:Pc.DANGER,onClick:function(){e.deleteArticle()},statusOptions:["Delete article",{faIcon:"spinner fa-spin",label:" deleting article ..."},"Delete article","Failed"]}))]}},{key:"deleteArticle",value:function(){var e=this;this.deleteArticleButton.postJSON("/article/"+this.getArticle().id+"/delete/",{}).then(function(){var t=e.options.parent.table;t.options.articles.splice(t.getArticleIndex(e.getArticle().id),1),t.redraw(),e.hide()},function(t){return e.messageArea.showMessage(t.message,"red")})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Zg),gT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Create article"}},{key:"getBody",value:function(){return Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"articleNameFormField",label:"Article name"},Lc.createElement(vg,{ref:"articleNameInput",value:""})),Lc.createElement(Nb,{ref:"dependencyFormField",label:"Dependencies"},Lc.createElement(vg,{ref:"dependencyInput",value:""})),Lc.createElement(Nb,{ref:"languageFormField",label:"Language"},Lc.createElement(Gg,{ref:"languageSelect",options:fk.all()})),Lc.createElement(Nb,{ref:"publicFormField",label:"Public"},Lc.createElement(Eg,{ref:"publicCheckbox",checked:!1})))}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Dd,{ref:"createArticleButton",level:Pc.PRIMARY,onClick:function(){e.createArticle()},statusOptions:["Create article",{faIcon:"spinner fa-spin",label:" creating article ..."},"Create article","Failed"]}))]}},{key:"createArticle",value:function(e){var t=this,n=this.articleNameInput.getValue(),i=this.dependencyInput.getValue(),r=this.languageSelect.get().id,a=this.publicCheckbox.getValue(),o={name:n,dependency:i,languageId:r,isPublic:a};e&&Object.assign(o,e),this.createArticleButton.postJSON("/create_article/",o).then(function(e){t.options.parent.table.addArticle(xS.get(e.article.id)),t.hide()},function(e){t.messageArea.showMessage(e.message,"red")})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Zg),mT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActioName",value:function(){return"Add translation"}},{key:"getBody",value:function(){var e=this.options.baseArticle;return Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"articleNameFormField",label:"Article name"},Lc.createElement(vg,{ref:"articleNameInput",value:"Translation for "+e.name})),Lc.createElement(Nb,{ref:"dependencyFormField",label:"Dependencies"},Lc.createElement(vg,{ref:"dependencyInput",value:e.dependency})),Lc.createElement(Nb,{ref:"languageFormField",label:"Language"},Lc.createElement(Gg,{ref:"languageSelect",options:fk.all()})),Lc.createElement(Nb,{ref:"publicFormField",label:"Public"},Lc.createElement(Eg,{ref:"publicCheckbox",checked:e.isPublic})))}},{key:"getFooter",value:function(){var e=this,t=this.options.baseArticle;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Dd,{ref:"createArticleButton",level:Pc.PRIMARY,onClick:function(){return e.createArticle({baseArticleId:t.id,markup:t.markup})},statusOptions:["Add translation",{faIcon:"spinner fa-spin",label:" creating translation article ..."},"Success","Failed"]}))]}}]),t}(gT),vT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getArticle",value:function(){return this.options.article}},{key:"render",value:function(){return Lc.createElement(sE,{id:this.getArticle().userCreatedId})}},{key:"onMount",value:function(){var e=this;this.attachUpdateListener(this.getArticle(),function(){return e.redraw()})}}]),t}(Lc.Primitive("span")),yT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{size:"lg"}}},{key:"getArticle",value:function(){return this.options.article}},{key:"isPublic",value:function(){return this.options.article.isPublic}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle("color",this.isPublic()?"green":"red")}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.icon=this.isPublic()?"check":"times"}},{key:"onMount",value:function(){var e=this;this.attachUpdateListener(this.getArticle(),function(){return e.updateOptions({icon:e.isPublic()?"check":"times"})})}}]),t}(kf),bT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.resetColumnSortingOrder()}},{key:"resetColumnSortingOrder",value:function(){this.columnSortingOrder=[this.columns[4],this.columns[5],this.columns[0],this.columns[3],this.columns[2],this.columns[1]]}},{key:"getArticleIndex",value:function(e){for(var t=0;t<this.options.articles.length;t+=1)if(this.options.articles[t].id===e)return t;return-1}},{key:"addArticle",value:function(e){this.options.articles.push(e),this.redraw()}},{key:"setColumns",value:function(){var e=this,n={textAlign:"left",verticalAlign:"middle"},i={textAlign:"left",verticalAlign:"middle"},r=[{value:function(e){return Lc.createElement(Xd,{href:"/article/"+e.id+"/edit/",value:e.name})},rawValue:function(e){return e.name},headerName:"Article",headerStyle:i,cellStyle:n},{value:function(e){return Lc.createElement(vT,{article:e})},rawValue:function(e){return sk.get(e.userCreatedId).username},headerName:"Author",headerStyle:i,cellStyle:n},{value:function(e){return Lc.createElement(yT,{article:e})},rawValue:function(e){return e.isPublic?"Yes":"No"},headerName:"Public",headerStyle:i,cellStyle:n},{value:function(e){return fk.get(e.languageId).name},rawValue:function(e){return fk.get(e.languageId).name},headerName:"Language",headerStyle:i,cellStyle:n},{value:function(e){return Ap.unix(e.dateCreated).locale("en").format("DD/MM/YYYY HH:mm:ss")},rawValue:function(e){return e.dateCreated},sortDescending:!0,headerName:"Date created",headerStyle:i,cellStyle:n},{value:function(e){return Ap.unix(e.dateModified).locale("en").format("DD/MM/YYYY HH:mm:ss")},rawValue:function(e){return e.dateModified},sortDescending:!0,headerName:"Date modified",headerStyle:i,cellStyle:n}];this.options.parent.options.readOnly||(USER.isSuperUser&&r.push({value:function(e){return Lc.createElement(Md,{level:Pc.PRIMARY,label:"Set owner",onClick:function(){return pT.show({article:e})}})},headerName:"Set owner",headerStyle:i,cellStyle:n}),r.push({value:function(t){return Lc.createElement(Md,{level:Pc.DANGER,label:"Delete",onClick:function(){fT.show({article:t,parent:e.options.parent})}})},headerName:"Delete",headerStyle:i,cellStyle:n})),w(d(t.prototype),"setColumns",this).call(this,r)}},{key:"getEntries",value:function(){return this.sortEntries(this.options.articles)}}]),t}(Tb),kT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{title:"Article manager",articles:[]}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.SMALL)}},{key:"setOptions",value:function(e){e=Object.assign(this.getDefaultOptions(),e),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"render",value:function(){var e=this,t=null;return this.options.readOnly||(t=Lc.createElement("div",{className:"pull-right"},Lc.createElement(Md,{level:Pc.PRIMARY,label:"Create article",onClick:function(){return gT.show({parent:e})},style:{marginTop:"5px",marginBottom:"5px"}}))),this.options.articles=xS.all(),[Lc.createElement("div",{className:"pull-left"},Lc.createElement("h4",null,Lc.createElement("strong",null,this.options.title))),t,Lc.createElement(bT,{ref:"table",articles:this.options.articles,parent:this})]}}]),t}(jd),wT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{title:"Translation manager"}}},{key:"setOptions",value:function(e){e=Object.assign(this.getDefaultOptions(),e),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"render",value:function(){var e=this;this.table=Lc.createElement(bT,{articles:[],parent:this});var t=null;return this.options.readOnly||(t=Lc.createElement("div",{className:"pull-right"},Lc.createElement(Md,{level:Pc.PRIMARY,label:"Add translation",onClick:function(){return mT.show({parent:e,baseArticle:e.options.baseArticle})},style:{marginTop:"5px",marginBottom:"5px"}}))),[Lc.createElement("div",{className:"pull-left"},Lc.createElement("h4",null,Lc.createElement("strong",null,this.options.title))),t,this.table]}},{key:"onMount",value:function(){var e=this;this.options.baseArticle&&zu.getJSON("/article/"+this.options.baseArticle.id+"/get_translations/",{}).then(function(){var t=!0,n=!1,i=void 0;try{for(var r,a=xS.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.baseArticleId===e.options.baseArticle.id&&e.table.options.articles.push(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}e.table.redraw()})}}]),t}(jd),ET=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.value=this.options.article.markup}},{key:"getMarkupRenderer",value:function(){return Lc.createElement(FC,{ref:this.refLink("markupRenderer"),article:this.options.article,style:{flex:"1",height:"100%",overflow:"auto"}})}},{key:"updateValue",value:function(e){this.options.article.markup=e,w(d(t.prototype),"updateValue",this).call(this,e)}}]),t}(EE),ST=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Delete Article"}},{key:"getBody",value:function(){return Lc.createElement("p",null,"Delete ",this.options.article.name,"?")}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Dd,{ref:"deleteArticleButton",level:Pc.DANGER,onClick:function(){e.deleteArticle()},statusOptions:["Delete article",{faIcon:"spinner fa-spin",label:" deleting article ..."},"Delete article","Failed"]}))]}},{key:"deleteArticle",value:function(){var e=this;this.deleteArticleButton.postJSON("/article/"+this.options.article.id+"/delete/",{}).then(function(){e.options.article.baseArticleId?window.location.replace("/article/"+e.options.article.baseArticleId+"/edit/"):window.location.replace("/")},function(t){return e.messageArea.showMessage(t.message,"red")})}}]),t}(Zg),CT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getArticle",value:function(){return xS.get(this.options.articleId)}},{key:"initializeVersioning",value:function(){if(t.DiffWidgetClass){this.versions=[],this.versionsLabels=[];var e=!0,n=!1,i=void 0;try{for(var r,a=this.getArticle().getEdits()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;this.versions.push(o.content),this.versionsLabels.push("Version "+o.id)}}catch(e){n=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}this.versions.push(this.getArticle().markup),this.versionsLabels.push("Edit version"),this.versions.reverse(),this.versionsLabels.reverse(),this.leftEditable=!0,this.rightEditable=!1}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({display:"flex",flexDirection:"column",height:"100%"})}},{key:"render",value:function(){var e=this;this.initializeVersioning();var n=null,i=null;this.getArticle().baseArticleId?i=Lc.createElement(Nb,{ref:"baseArticleFormField",label:"Base article"},Lc.createElement(Xd,{href:"/article/"+this.getArticle().baseArticleId+"/edit/",value:"Go to base article"})):n=Lc.createElement(jd,{title:"Translations"},Lc.createElement(wT,{title:"Translations for "+this.getArticle().name,baseArticle:this.getArticle()}));var r=null;USER.isSuperUser&&(r=Lc.createElement(jd,{title:"Ownership"},Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"ownerFormField",label:"Author ID"},Lc.createElement(vg,{ref:"ownerFormInput",value:this.getArticle().userCreatedId}))),Lc.createElement(Dd,{ref:"setOwnerButton",level:Pc.INFO,onClick:function(){var t=e.ownerFormInput.getValue();e.setOwner(t)},statusOptions:["Transfer ownership",{faIcon:"spinner fa-spin",label:" transfering ownership ..."},"Transfer ownership","Failed"]}),Lc.createElement($d,{ref:"setOwnerMessageArea"})));var a;if(t.DiffWidgetClass){var o=t.DiffWidgetClass;a=Lc.createElement(jd,{title:"Revisions",style:{height:"100%",display:"flex",flexDirection:"column"}},Lc.createElement(jd,null,Lc.createElement(Gg,{ref:"leftTextSelector",options:this.versionsLabels}),Lc.createElement(Gg,{style:{float:"right",marginRight:"25px"},ref:"rightTextSelector",options:this.versionsLabels})),Lc.createElement(o,{ref:"diffWidget",leftEditable:this.leftEditable,rightEditable:this.rightEditable,leftTextValue:this.versions[2],arrows:this.arrows,rightTextValue:this.versions[1],style:{flex:"1",height:"calc(100% - 100px)",width:"calc(100% - 100px)"}}))}return[Lc.createElement("h3",null,this.getArticle().name+" Id="+this.options.articleId),Lc.createElement(Gb,{ref:"tabArea",variableHeightPanels:!0,style:{flex:"1",height:"100%",display:"flex",flexDirection:"column"}},Lc.createElement(jd,{title:"Edit",active:!0,style:{height:"100%",overflow:"hidden"}},Lc.createElement(Dd,{ref:"saveMarkupButton",level:Pc.INFO,onClick:function(){var t=e.markupEditor.getValue();e.saveMarkup(t)},statusOptions:["Save",{faIcon:"spinner fa-spin",label:" saveing ..."},"Save","Failed"]}),Lc.createElement($d,{ref:"saveMarkupMessageArea"}),Lc.createElement(ET,{style:{height:"100%",marginTop:"-31px",display:"flex",flexDirection:"column"},ref:"markupEditor",article:this.getArticle()})),a,Lc.createElement(jd,{title:"Summary"},Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"articleNameFormField",label:"Article name"},Lc.createElement(vg,{ref:"articleNameFormInput",value:this.getArticle().name})),Lc.createElement(Nb,{ref:"dependencyFormField",label:"Dependencies"},Lc.createElement(vg,{ref:"dependencyFormInput",value:this.getArticle().dependency})),i,Lc.createElement(Nb,{ref:"languageFormField",label:"Language"},Lc.createElement(Gg,{ref:"languageSelect",options:fk.all(),selected:fk.get(this.getArticle().languageId)})),Lc.createElement(Nb,{ref:"publicFormField",label:"Public"},Lc.createElement(Eg,{ref:"publicCheckbox",checked:this.getArticle().isPublic}))),Lc.createElement(Dd,{ref:"saveOptionsButton",level:Pc.INFO,onClick:function(){var t=e.articleNameFormInput.getValue(),n=e.dependencyFormInput.getValue(),i=e.languageSelect.get().id,r=e.publicCheckbox.getValue(),a={name:t,dependency:n,languageId:i,isPublic:r};e.saveOptions(a)},statusOptions:["Save",{faIcon:"spinner fa-spin",label:" saveing ..."},"Save","Failed"]}),Lc.createElement(Md,{ref:"deleteArticleButton",level:Pc.DANGER,label:"Delete article",style:{marginLeft:"3px"},onClick:function(){return e.deleteArticleModal.show()}}),Lc.createElement($d,{ref:"saveOptionsMessageArea"})),n,r)]}},{key:"saveMarkup",value:function(e){var n=this,i={markup:e};this.saveMarkupMessageArea.showMessage("Saving...","black",null),this.saveMarkupButton.postJSON("/article/"+this.options.articleId+"/edit/",i).then(function(){t.DiffWidgetClass&&n.addNewVersion(e),n.saveMarkupMessageArea.showMessage("Saved article")},function(e){return n.saveMarkupMessageArea.showMessage("Error in saving the article: "+e.message,"red")})}},{key:"saveOptions",value:function(e){var t=this,n={};Object.assign(n,e),this.saveOptionsMessageArea.showMessage("Saving...","black",null),this.saveOptionsButton.postJSON("/article/"+this.options.articleId+"/edit/",n).then(function(){return window.location.replace("/article/"+t.options.articleId+"/edit/")},function(e){return t.saveOptionsMessageArea.showMessage("Error in saving the article: "+e.message,"red")})}},{key:"setOwner",value:function(e){var t=this;this.setOwnerMessageArea.showMessage("Saving...","black",null),this.setOwnerButton.postJSON("/article/"+this.options.articleId+"/set_owner/",{newOwner:e}).then(function(){return t.setOwnerMessageArea.showMessage("Author successfully changed")},function(e){return t.setOwnerMessageArea.showMessage("Error in changing owner "+e.message,"red")})}},{key:"addNewVersion",value:function(e){this.versionsLabels[0]="Version "+this.versionsLabels.length,this.versions[0]=e,this.versions.unshift(this.markupEditor.getValue()),this.versionsLabels.unshift("Edit version");var t=this.leftTextSelector.getIndex(),n=this.rightTextSelector.getIndex();this.leftTextSelector.redraw(),this.rightTextSelector.redraw(),this.setLeftIndex(t),this.setRightIndex(n)}},{key:"setLeftIndex",value:function(e){this.leftTextSelector.setIndex(e),this.diffWidget.setLeftText(this.versions[e])}},{key:"setRightIndex",value:function(e){this.rightTextSelector.setIndex(e),this.diffWidget.setRightText(this.versions[e])}},{key:"onMount",value:function(){var e=this;if(this.deleteArticleModal=Lc.createElement(ST,{article:this.getArticle()}),t.DiffWidgetClass){this.tabArea.titleArea.children[1].addClickListener(function(){e.versions[0]=e.markupEditor.getValue(),e.setLeftIndex(e.leftTextSelector.getIndex()),e.setRightIndex(e.rightTextSelector.getIndex())});var n=function(){e.leftEditable=0===e.leftTextSelector.getIndex(),e.rightEditable=0===e.rightTextSelector.getIndex(),e.diffWidget.setLeftEditable(e.leftEditable),e.diffWidget.setRightEditable(e.rightEditable)};this.leftTextSelector.addChangeListener(function(){e.diffWidget.setLeftText(e.versions[e.leftTextSelector.getIndex()]),n()}),this.rightTextSelector.addChangeListener(function(){e.diffWidget.setRightText(e.versions[e.rightTextSelector.getIndex()]),n()}),this.setLeftIndex(0),this.setRightIndex(1)}window.onbeforeunload=function(){return""}}}]),t}(jd),xT=(rT=sT=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.loadMoreButton={border:"0px",color:"#333",borderRadius:"0",borderBottom:"0",backgroundColor:"#eee",padding:"5px 10px"},n.writingSectionStyle={height:"auto",marginTop:"10px"},O(n,"chatInputStyle",aT,y(n)),O(n,"chatInputMax",oT,y(n)),n.previewButtonStyle={height:"30px",width:"auto",fontSize:"100%",marginLeft:"5px"},n}return h(t,e),t}(Jc),aT=R(rT.prototype,"chatInputStyle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"30px",width:"100%",paddingBottom:"0",fontSize:"14px",borderRadius:"0",outline:"none",paddingLeft:"8px",paddingTop:"5px",resize:"none",transition:".2s",display:"block",border:"1px solid #aaa",":focus":{height:"120px",transition:".2s"},":active":{height:"120px",transition:".2s"}}}}),oT=R(rT.prototype,"chatInputMax",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"120px"}}}),rT),TT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{deletable:!1})}},{key:"render",value:function(){var e,t=this,n=Lc.createElement(np,{timeStamp:this.message.getDate(),style:{color:"#666 !important",textTransform:"uppercase",fontSize:".85em"}});(this.message.userId===USER.id||USER.isSuperUser)&&(e=Lc.createElement("a",{style:Object.assign({cursor:"pointer",padding:"0 10px",fontSize:"1.05em",lineHeight:"0px"}),onClick:function(){return t.toggleEditMode()}},"edit")),this.contentSwitcher||(this.contentSwitcher=Lc.createElement(Of,null,Lc.createElement("div",{ref:"contentContainer"},Lc.createElement(sp,{ref:"content",value:this.message.getContent()}))));var i=Lc.createElement($E,{height:40,style:{float:"left"},message:this.message,ref:"commentVotingWidget"});return[Lc.createElement("span",{style:{float:"right",display:"inline-block",height:"40px",lineHeight:"40px"}},n),Lc.createElement("div",{style:{height:"40px",lineHeight:"40px"}},Lc.createElement("div",{style:{height:"40px",lineHeight:"40px",display:"inline-block",float:"left",fontSize:".95em",color:"#333"}},Lc.createElement(sE,{userId:this.message.userId,style:{fontSize:"1.1em"}})),e),Lc.createElement("div",{style:{paddingTop:"5px",fontSize:"16px"}},this.contentSwitcher),Lc.createElement("div",{style:{height:"40px"}},i),Lc.createElement("div",{style:{height:"1px",width:"100%",backgroundColor:"#ddd"}})]}}]),t}(lS),AT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(){aE.show()})}}]),t}(Lc.Primitive("span")),LT=(lT=Ze(ox))(uT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{entryComparator:function(e,t){return t.getNormalizedId()-e.getNormalizedId()}})}},{key:"renderMessageView",value:function(){var e,t=this;return this.showLoadMoreButton&&(e=Lc.createElement("div",{className:"text-center"},Lc.createElement(Dd,{ref:this.refLink("loadMoreButton"),level:Pc.DEFAULT,onClick:function(){t.loadMoreMessages()},style:this.commentWidgetStyle.loadMoreButton,statusOptions:["Load more messages",{faIcon:"spinner fa-spin",label:" loading messages..."},"Load more messages","Failed"]}))),[Lc.createElement(hS,{ref:"messageWindow",entryRenderer:this.options.renderMessage,entries:this.messageThread.getMessages(!0),entryComparator:this.options.entryComparator,staticTop:e})]}},{key:"renderMessageBox",value:function(){var e=this;return[Lc.createElement("div",{ref:"writingSection",style:this.commentWidgetStyle.writingSectionStyle},Lc.createElement(Vg,{readOnly:this.messageThread.muted,ref:"chatInput",onChange:function(){e.chatInput.getValue()?e.chatInput.addClass(e.commentWidgetStyle.chatInputMax):e.chatInput.removeClass(e.commentWidgetStyle.chatInputMax)},className:this.commentWidgetStyle.chatInputStyle,placeholder:"Leave a comment..."}),Lc.createElement(Md,{disabled:this.messageThread.muted,label:"SUBMIT",ref:"sendMessageButton",className:this.styleSheet.sendMessageButtonStyle,level:Pc.PRIMARY,onClick:function(){return e.sendMessage()}}))]}},{key:"render",value:function(){return[this.renderMessageBox(),this.renderMessageView()]}},{key:"getDefaultPlugins",value:function(){return IT.defaultPlugins||[]}},{key:"createVirtualMessage",value:function(e,t){return null}},{key:"commentWidgetStyle",get:function(){return xT.getInstance()}}]),t}(dS(TT)))||uT,IT=(cT=Ze(ox))(hT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.key=this.messageThread.id,this.options.baseRequest={chatId:this.options.chatId},this.options.dateTimestamps=!1}},{key:"getPostURL",value:function(){return"/chat/group_chat_post/"}},{key:"renderMessageBox",value:function(){return USER.isAuthenticated?w(d(t.prototype),"renderMessageBox",this).call(this):Lc.createElement("div",{style:{color:"#333",paddingTop:"5px",paddingBottom:"5px"}},"You need toÂ ",Lc.createElement(AT,{style:{backgroundColor:"#eee",cursor:"pointer",padding:"5px 10px"}},"login"),"Â to send a comment.")}},{key:"render",value:function(){var e,n=this.messageThread.getMessages().length;return e=Lc.createElement("div",{className:this.styleSheet.commentsTitle},n," ",1!=n?"comments":"comment"),[e,w(d(t.prototype),"render",this).call(this)]}}]),t}(LT))||hT,NT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getMessageThread",value:function(){var e=bE.get(this.options.chatId);return e&&e.getMessageThread()}},{key:"render",value:function(){var e=this,t=this.getMessageThread(),n={marginBottom:"10px",paddingBottom:"10px",height:"auto",width:"100%",marginTop:"50px",marginLeft:"0px",marginRight:"0px",border:"0px",maxWidth:"900px"};return t?[Lc.createElement(IT,{ref:"commentsSection",chatId:this.options.chatId,messageThread:t,style:n})]:(bE.fetch(this.options.chatId,function(t){e.redraw()}),[Lc.createElement("div",{style:{width:"100%",height:"60px",lineHeight:"60px",fontSize:"1em",textAlign:"center",textTransform:"uppercase",fontWeight:"bold"}},Lc.createElement("span",{className:"fa fa-spinner fa-spin",style:{padding:"0 8px"}}),"Comments loading...")])}}]),t}(Lc.Element),OT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getModalWindowStyle",value:function(){return Object.assign({},w(d(t.prototype),"getModalWindowStyle",this).call(this),{margin:"0 auto",maxHeight:"100%",overflow:"initial",display:"flex",flexDirection:"column",top:"1vh",height:"98vh"})}},{key:"render",value:function(){var e=this,t=IS.get(this.options.entryId),n=t.getArticle(),i=null;return t.discussionId||(i=Lc.createElement(Md,{level:Pc.WARNING,label:"Create discussion",onClick:function(){return e.createDiscussion()},style:{marginLeft:"5px"}})),[Lc.createElement("h3",null,"Edit Entry"),Lc.createElement(Lb,null,Lc.createElement(Nb,{label:"Title"},Lc.createElement(vg,{ref:"titleInput",value:n.name})),Lc.createElement(Nb,{label:"URL Name"},Lc.createElement(vg,{ref:"urlInput",value:t.urlName})),Lc.createElement(Nb,{label:"Visible"},Lc.createElement(Eg,{ref:"visibleCheckbox",value:t.visible})),Lc.createElement(Md,{level:Pc.PRIMARY,label:"Change settings",onClick:function(){return e.changeSettings()}}),i,Lc.createElement($d,{ref:"messageArea"})),Lc.createElement(CT,{ref:"contentEditor",articleId:n.id,style:{flex:"1"}})]}},{key:"changeSettings",value:function(){var e=this,t=this.titleInput.getValue(),n=this.urlInput.getValue(),i={entryId:this.options.entryId,isVisible:this.visibleCheckbox.getValue()};t&&(i.title=t),n&&(i.urlName=n),zu.postJSON("/blog/change_entry_settings/",i).then(function(t){t.urlName&&nm.changeURL(["blog",t.urlName]),e.hide()})}},{key:"createDiscussion",value:function(){var e=this,t={entryId:this.options.entryId};zu.postJSON("/blog/create_entry_discussion/",t).then(function(){return e.hide()})}}]),t}(Qg),RT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this;return[Lc.createElement("h1",null,"New Entry"),Lc.createElement(Ib,null,Lc.createElement(Nb,{label:"Title"},Lc.createElement(vg,{ref:"titleInput"})),Lc.createElement(Nb,{label:"URL Name"},Lc.createElement(vg,{ref:"urlInput"})),Lc.createElement(Nb,{label:"Visible"},Lc.createElement(Eg,{ref:"visibleCheckbox"})),Lc.createElement(Md,{label:"Add Entry",level:Pc.PRIMARY,onClick:function(){e.addEntry()}}),Lc.createElement(EE,{ref:"postContentMarkup",style:{height:"450px"}}))]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.titleInput.onKeyUp(function(){e.urlInput.setValue(U(e.titleInput.getValue()))})}},{key:"addEntry",value:function(){var e=this,t={},n=this.titleInput.getValue();n&&(t.title=n);var i=this.urlInput.getValue();i&&(t.urlName=i),t.isVisible=this.visibleCheckbox.getValue();var r=this.postContentMarkup.getValue();r&&(t.content=r),zu.postJSON("/blog/add_entry/",t).then(function(t){var n=IS.get(t.blogEntryId);nm.changeURL(["blog",n.urlName]),e.hide()})}}]),t}(Qg),MT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({position:"relative",maxHeight:"420px",marginTop:"45px",marginBottom:"45px"})}},{key:"canOverwrite",value:function(e){return w(d(t.prototype),"canOverwrite",this).call(this,e)&&this.options.entryId===e.options.entryId}},{key:"getBlogEntry",value:function(){return IS.get(this.options.entryId)}},{key:"getBlogArticle",value:function(){return this.getBlogEntry().getArticle()}},{key:"getEntryURL",value:function(){return"/blog/"+this.getBlogEntry().urlName+"/"}},{key:"render",value:function(){var e,t=this.getStyleSheet(),n=this.getBlogArticle(),i=n.dateCreated,r=Ap.unix(i).format("LL"),a={color:"#777",fontSize:"1em",margin:"0",fontStyle:"italic"};return n.dateModified>n.dateCreated&&(e=Lc.createElement("p",{style:a},Lc.T("Last update on")," ",Ap.unix(n.dateModified).format("LL"),".")),[Lc.createElement("div",{style:{height:"100%"}},Lc.createElement("div",{style:{boxShadow:"0px 0px 10px rgb(160, 162, 168)","background-color":"#fff",padding:"1% 4% 10px 4%",margin:"0 auto",width:"900px","max-width":"100%",position:"relative"}},Lc.createElement("div",{style:t.writtenBy},Lc.T("Written by")," ",Lc.createElement(sE,{userId:n.userCreatedId}),", ",r,".",e),Lc.createElement("div",{style:t.title},Lc.createElement(Xd,{href:this.getEntryURL(),value:n.name,style:{"text-decoration":"none",color:"inherit"}})),Lc.createElement(lx,{article:n,style:t.blogArticleRenderer}),Lc.createElement("div",{className:t.whiteOverlay}),Lc.createElement(Xd,{href:this.getEntryURL(),style:t.link,value:Lc.T("Continue reading")})))]}}]),t}(Lc.Element),PT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBlogEntry",value:function(){return IS.get(this.options.entryId)}},{key:"getBlogArticle",value:function(){return this.getBlogEntry().getArticle()}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.getStyleSheet().blogEntryView)}},{key:"getComments",value:function(){var e=this.getBlogEntry().discussionId;return e?Lc.createElement("div",{style:{marginBottom:"20px",marginTop:"20px"}},Lc.createElement(NT,{chatId:e})):null}},{key:"render",value:function(){var e,t=this,n=this.getBlogArticle(),i=this.getStyleSheet(),r=n.dateCreated,a=Ap.unix(r).format("LL"),o={margin:"3px",color:"#777",fontSize:"1em",fontStyle:"italic"};n.dateModified>n.dateCreated&&(e=Lc.createElement("p",{style:o
},"Last update on ",Ap.unix(n.dateModified).format("LL"),"."));var s;return USER.isSuperUser&&(s=Lc.createElement(Md,{level:Pc.DEFAULT,label:"Edit",onClick:function(){OT.show({entryId:t.getBlogEntry().id,fillScreen:!0})}})),[Lc.createElement("div",{style:{"background-color":"#fff",padding:"2% 5%","box-shadow":"rgb(160, 160, 160) 0px 3px 15px"}},s,Lc.createElement("div",{style:i.writtenBy},"Written by ",Lc.createElement(sE,{userId:n.userCreatedId})," on ",a,".",e),Lc.createElement("div",{style:i.title},n.name),Lc.createElement(lx,{style:i.article,article:n}),Lc.createElement("div",{style:{"margin-top":"30px","margin-bottom":"10px"}},Lc.createElement(Xd,{href:"/blog/",style:i.link,value:"Back to the Main Blog"})),this.getComments()),Lc.createElement("div",{className:i.bottomSection})]}},{key:"pageTitle",get:function(){return this.getBlogArticle().name}}]),t}(Lc.Element),DT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("paddingTop","10px")}},{key:"showNewBlogPostModal",value:function(){Lc.createElement(RT,{fillScreen:!0}).show()}},{key:"render",value:function(){var e=this,t=this.getStyleSheet(),n=[],i=IS.all().sort(function(e,t){return t.getArticle().dateCreated-e.getArticle().dateCreated}),r=!0,a=!1,o=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.push(Lc.createElement(MT,{key:u.id,entryId:u.id}))}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return[USER.isSuperUser?Lc.createElement(Md,{label:"New Entry",level:Pc.DEFAULT,onClick:function(){return e.showNewBlogPostModal()}}):null,Lc.createElement("div",{ref:"entriesList"},n),Lc.createElement(Md,{label:this.options.finishedLoading?Lc.T("End of blog"):Lc.T("Load More"),ref:"loadMoreButton",style:{margin:"0px auto",display:"block"},className:t.loadMoreButton,disabled:this.options.finishedLoading}),Lc.createElement("div",{style:{height:"45px",width:"100%"}})]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.loadMoreButton.addClickListener(function(){e.options.finishedLoading||zu.getJSON("/blog/",{lastDate:Math.min.apply(null,IS.all().map(function(e){return e.getArticle().dateCreated}))}).then(function(t){e.options.finishedLoading=t.finishedLoading,e.options.finishedLoading&&(e.loadMoreButton.options.label=Lc.T("No more posts"),e.loadMoreButton.redraw(),e.loadMoreButton.disable()),e.redraw()})}),this.attachCreateListener(IS,function(){e.redraw()})}}]),t}(Lc.Element);$c.register(PT,ox),$c.register(MT,ox),$c.register(DT,ox);var BT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(iT(DT)),_T=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBlogEntry",value:function(){return IS.getEntryForURL(this.options.entryURL)}},{key:"onDelayedMount",value:function(){w(d(t.prototype),"onDelayedMount",this).call(this),nm.updateURL()}},{key:"getAjaxUrl",value:function(){return"/blog/get_blog_post/"}},{key:"getAjaxRequest",value:function(){return{entryUrlName:this.options.entryURL}}},{key:"pageTitle",get:function(){return this.getBlogEntry()?w(d(t.prototype),"pageTitle",this):null},set:function(e){}}]),t}(iT(PT)),FT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"blog",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),i.title=i.title||"Blog",e=b(this,d(t).call(this,n,BT,[],i)),e.subroutes=e.getSubroutes(),e}return h(t,e),o(t,[{key:"getSubroutes",value:function(){return[new im("%s",function(e){var t=e.args[e.args.length-1],n=IS.getEntryForURL(t);return n?Lc.createElement(PT,{entryId:n.id}):Lc.createElement(_T,{entryURL:t})})]}}]),t}(im),UT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.customRun&&(this.customRun=this.options.customRun)}},{key:"render",value:function(){if(!this.customRun)return null;var e=this.customRun.compilerMessage?Lc.createElement("pre",{className:"compilerOutputMessage"},this.customRun.compilerMessage):null;return[Lc.createElement("strong",{style:{padding:"5px",lineHeight:"2em"}},this.customRun.getCompilationStatusMessage()),e]}},{key:"setCustomRun",value:function(e){var t=this;this.customRun=e,this.customRun.addUpdateListener(function(e){"compile_status"===e.type&&t.redraw()})}}]),t}(jd),zT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.customRun&&(this.customRun=this.options.customRun)}},{key:"extraNodeAttributes",value:function(e){e.addClass(mh.FlexContainer.HORIZONTAL),e.setStyle({paddingLeft:"5px",paddingRight:"5px"})}},{key:"render",value:function(){if(!this.customRun)return null;var e=[Lc.createElement("div",{style:{marginTop:"30px"}},Lc.createElement(ub,{title:Lc.T("CPU Time"),level:"TO"===this.customRun.results.internalStatus?Pc.DANGER:Pc.PRIMARY,bodyCentered:!0},Lc.createElement("div",{style:{padding:"8px"}},Ek.cpuTime(this.customRun.results.cpuTime)))),Lc.createElement("div",{style:{marginTop:"30px"}},Lc.createElement(ub,{title:Lc.T("Memory Usage"),level:9===parseInt(this.customRun.results.signalCode)?Pc.DANGER:Pc.PRIMARY,bodyCentered:!0},Lc.createElement("div",{style:{padding:"8px"}},Ek.memory(this.customRun.results.memUsage)))),Lc.createElement("div",{style:{marginTop:"30px"}},Lc.createElement(ub,{title:Lc.T("Exit Code"),level:0!==parseInt(this.customRun.results.exitCode||0)?Pc.DANGER:Pc.PRIMARY,bodyCentered:!0},Lc.createElement("div",{style:{padding:"8px"}},this.customRun.results.exitCode||"-")))];return this.customRun.results.signalCode&&e.push(Lc.createElement("div",{style:{marginTop:"30px"}},Lc.createElement(ub,{title:Lc.T("Killed by signal"),level:Pc.DANGER,bodyCentered:!0},Lc.createElement("div",{style:{padding:"8px"}},this.customRun.results.signalCode)))),e}},{key:"setCustomRun",value:function(e){var t=this;this.customRun=e,this.customRun.addUpdateListener(function(e){t.redraw()})}}]),t}(Lc.Element),WT=function(){function e(t,n){r(this,e),this.userId=t,this.contestUsers=n}return o(e,[{key:"getContestUser",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.contestUsers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.getContest()===e.getEvalTask().getDefaultContest())return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),e}(),HT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getName",value:function(){return this.longName}},{key:"getEvalTasks",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.evalTaskIds[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=EC.get(o);s&&e.push(s)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getContestTasks",value:function(){var e=[],t=this.getEvalTasks(),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=zS.get(s.defaultContestTaskId);l&&e.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e}},{key:"getContests",value:function(){var e=[],t=this.getEvalTasks(),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.push(s.getDefaultContest())}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e}},{key:"getUsers",value:function(){var e=new Map,t=this.getContests(),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,u=!1,c=void 0;try{for(var h,d=s.getUsers()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;e.has(p.userId)||e.set(p.userId,[]),e.get(p.userId).push(p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var f=[],g=!0,m=!1,v=void 0;try{for(var y,b=e.entries()[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var k=S(y.value,2),w=k[0],E=k[1];f.push(new WT(w,E))}}catch(e){m=!0,v=e}finally{try{g||null==b.return||b.return()}finally{if(m)throw v}}return f}},{key:"toString",value:function(){return this.longName}}]),t}(fp),VT=new mp("PrivateArchive",HT),GT=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getProgrammingLanguage",value:function(){return Bk.get(this.programmingLanguageId)}},{key:"getSize",value:function(){return this.sourceText.length}},{key:"getSourceText",value:function(){return this.sourceText}},{key:"hasCompileError",value:function(){return!this.compileOK}},{key:"getDuration",value:function(){return this.duration}},{key:"getCompilationStatusMessage",value:function(){var e=this.getDuration();if(this.hasCompileError()){return"Compilation failed"+(e?" ("+e+" seconds).":".")}return"Compilation done"+(e?" in "+e+" seconds.":".")}}]),t}(fp),jT=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.tests=[],n.exampleTests=[],n.loadTests(e),n}return h(t,e),o(t,[{key:"applyEvent",value:function(e){"test_results"===e.type?this.loadTests(e.data):(w(d(t.prototype),"applyEvent",this).call(this,e),"started"===e.type?(this.exampleTests=[],this.tests=[]):this.reloadTests())}},{key:"updateTests",value:function(e,t){var n=function(e,t){var n=t.find(function(t){return t.id===e.id});n?t[t.indexOf(n)]=e:t.push(e)},i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){n(o.value,this.tests)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}var l=!0,u=!1,c=void 0;try{for(var h,d=e[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){n(h.value,this.exampleTests)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}},{key:"loadTests",value:function(e){for(var t=[],n=[],i=0,r=Object.keys(e.tests);i<r.length;i++){var a=r[i],o=e.tests[a];this.getExampleTest(o.id)?n.push(o):t.push(o)}this.updateTests(n,t)}},{key:"reloadTests",value:function(){var e=this;this.tests=this.tests.concat(this.exampleTests||[]);var t=this.tests.filter(function(t){return!e.getExampleTest(t.id)}),n=this.tests.filter(function(t){return!!e.getExampleTest(t.id)});this.exampleTests=[],this.tests=[],this.updateTests(n,t)}},{key:"getExampleTests",value:function(){return Array.from(this.exampleTests)}},{key:"getAllTests",value:function(){return this.exampleTests.concat(this.tests)}},{key:"getContestTask",value:function(){return zS.get(this.contestTaskId)}},{key:"getEvalTask",value:function(){return EC.get(this.evalTaskId)}},{key:"hasPartialScoring",value:function(){var e=this.getContestTask();return e&&e.hasPartialScore()}},{key:"getLastTest",value:function(){return this.tests.length>0?this.tests[this.tests.length-1]:this.exampleTests.length>0?this.exampleTests[this.exampleTests.length-1]:null}},{key:"getStatus",value:function(){return this.compileStarted||this.compileOK||this.tests&&this.tests.length?this.hasOwnProperty("compileOK")?this.isDone?t.Status.DONE:t.Status.RUNNING:t.Status.COMPILING:t.Status.WAITING}},{key:"getResultStatus",value:function(){if(this.getStatus()!==t.Status.DONE)return t.ResultStatus.UNKNOWN;if(this.hasCompileError())return t.ResultStatus.COMPILE_ERROR;if(this.hasInternalJudgeError())return t.ResultStatus.INTERNAL_JUDGE_ERROR;var e=this.getLastTest();return e?"TO"===e.internalStatus?t.ResultStatus.TIME_LIMIT_EXCEEDED:"RE"===e.internalStatus?t.ResultStatus.RUNTIME_ERROR:"SG"===e.internalStatus?9===parseInt(e.signalCode)?t.ResultStatus.MEMORY_LIMIT_EXCEEDED:t.ResultStatus.KILLED_BY_SIGNAL:"Wrong answer"===e.message||e.hasOwnProperty("checkerPassed")&&!e.checkerPassed?t.ResultStatus.WRONG_ANSWER:t.ResultStatus.ACCEPTED:t.ResultStatus.UNKNOWN}},{key:"getNumTestsPassed",value:function(){var e=0,t=!0,n=!1,i=void 0;try{for(var r,a=this.tests.concat(this.exampleTests)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.checkerPassed&&(e+=1)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"hasInternalJudgeError",value:function(){var e=this.getLastTest();return e&&"XX"===e.internalStatus}},{key:"getExampleTest",value:function(e){var t=this.getEvalTask();if(!t)return null;var n=!0,i=!1,r=void 0;try{for(var a,o=(t.exampleTests||[])[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.id===parseInt(e))return s}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return null}}]),t}(GT);jT.Status={WAITING:1,COMPILING:2,RUNNING:3,DONE:4},jT.ResultStatus={COMPILE_ERROR:1,INTERNAL_JUDGE_ERROR:2,TIME_LIMIT_EXCEEDED:3,MEMORY_LIMIT_EXCEEDED:4,RUNTIME_ERROR:5,KILLED_BY_SIGNAL:6,WRONG_ANSWER:7,PASSED:8,ACCEPTED:8,UNKNOWN:9};var JT,qT,XT,KT,QT,ZT,$T,eA,tA,nA,iA,rA,aA,oA,sA,lA,uA,cA,hA,dA,pA,fA,gA,mA,vA,yA,bA,kA,wA,EA,SA,CA,xA,TA,AA,LA,IA,NA,OA,RA,MA,PA,DA,BA,_A,FA,UA,zA,WA,HA,VA,GA,jA,YA,JA,qA,XA,KA,QA,ZA,$A,eL,tL,nL,iL,rL,aL,oL,sL,lL,uL,cL,hL,dL,pL,fL,gL,mL,vL,yL,bL,kL,wL,EL,SL,CL,xL=function(e){function t(){return r(this,t),b(this,d(t).call(this,"evaljob",jT,{fetchURL:"/eval/get_eval_jobs/",maxFetchObjectCount:64,dependencies:["evaltask","publicuser"]}))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){return"reevalDone"===e.type?this.dispatch("reevalDone",e):w(d(t.prototype),"applyEvent",this).call(this,e)}},{key:"getFetchRequestData",value:function(e,n){var i=w(d(t.prototype),"getFetchRequestData",this).call(this,e,n),r=[],a=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.requestContest&&r.push(c.id)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return r.length>0&&(i.contestRequests=r),i}},{key:"fetchWithContest",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.fetch(e,t,n,i),this.fetchJobs[this.fetchJobs.length-1].requestContest=!0}}]),t}(bp(mp)),TL=new xL,AL=(JT=QT=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"taskLog",qT,y(n)),O(n,"inputMessage",XT,y(n)),O(n,"outputMessage",KT,y(n)),n}return h(t,e),t}(Jc),qT=R(JT.prototype,"taskLog",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),XT=R(JT.prototype,"inputMessage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{float:"left",maxWidth:"45%",marginRight:"50%",minWidth:"20%"}}}),KT=R(JT.prototype,"outputMessage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{float:"right",maxWidth:"45%",marginLeft:"50%",minWidth:"20%"}}}),JT),LL=(ZT=Ze(AL))($T=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setAttribute("extra",this.options.extra),e.setAttribute("align",this.options.align),e.addClass(this.styleSheet.taskLog)}},{key:"render",value:function(){var e=this;return this.options.extra.map(function(t){return Lc.createElement("pre",{className:1==t.type?e.styleSheet.inputMessage:e.styleSheet.outputMessage},t.message.trim())})}}]),t}(Lc.Element))||$T,IL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLoadButton",value:function(){throw Error("Unimplemented. This method should be implemented by subclasses.")}},{key:"render",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.options.columns[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(this.renderEntryCell(o))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var s=this.getLoadButton();return s&&e.push(Lc.createElement("td",null,s)),[Lc.createElement("tr",{className:Eb.heading},e),Lc.createElement("tr",null,Lc.createElement("td",{style:{overflow:"hidden",padding:"0px"},colspan:e.length},Lc.createElement("div",{ref:"contentArea",className:"".concat(Eb.collapsed," hidden")})))]}},{key:"getEvalTask",value:function(){return this.options.evalJob.getEvalTask()}},{key:"getTest",value:function(){throw Error("Unimplemented. This method should be implemented by subclasses.")}},{key:"filePanel",value:function(e,t,n,i){return Lc.createElement(jd,{key:n,style:i},Lc.createElement("div",{style:{height:"20px",paddingLeft:"10px",boxSizing:"border-box",backgroundColor:"white"}},e),Lc.createElement(ap,{style:{width:"100%",height:"150px"},value:t}))}},{key:"renderCollapsible",value:function(){var e=this.options.entry,t=this.getTest(),n={height:"170px",width:"49%",display:"inline-block"};if(!t)return[Lc.createElement("h3",null,"Test loading..."),Lc.createElement("span",{className:"fa fa-spinner fa-spin"})];var i=" Input "+Ek.memory(t.inputSize);t.inputSize>t.input.length&&(i+=" (truncated to 1 MB)");var r=" Judge output "+Ek.memory(t.outputSize);t.outputSize>t.output.length&&(r+=" (truncated to 1 MB)");var a=[this.filePanel(i,t.input,Math.random(),n),this.filePanel(r,t.output,Math.random(),n)];return e.hasOwnProperty("stdout")&&(a.push(this.filePanel(" Your output",e.stdout,Math.random(),n)),n.width="32%"),Lc.createElement(jd,{className:"section"+e.testNumber,key:e.testNumber,orientation:Rc.HORIZONTAL,style:{height:n.height,width:"100%",padding:"5px"}},Lc.createElement(tb,{style:{height:"100%"},orientation:Rc.HORIZONTAL},a))}}]),t}(Cb),NL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLoadButton",value:function(){var e=this;if(this.getEvalTask().isPublic){var t=function(t){t.inputSize>t.input.length?e.expand():Hu.Global.dispatch("loadWorkspaceInput",t.input)};return Lc.createElement(Dd,{ref:"loadTestButton",level:Pc.INFO,size:Dc.SMALL,onClick:function(){return e.loadTest(e.options.entry.id,t)},statusOptions:["Load",{faIcon:"spinner fa-spin",label:""},"Load","Failed"]})}}},{key:"getTest",value:function(){return this.getEvalTask().systemTests[this.options.entry.id]}},{key:"expand",value:function(){this.getTest()||this.loadTest(this.options.entry.id),w(d(t.prototype),"expand",this).call(this)}},{key:"loadTest",value:function(e,t){var n=this,i=this.getEvalTask();if(i.systemTests[e])return void(t&&t(i.systemTests[e]));this.loadTestButton.getJSON("/eval/download_test/",{evalTaskId:i.id,testId:e}).then(function(r){i.systemTests[e]=r,n.redrawCollapsible(),t&&t(r)})}}]),t}(IL),OL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLoadButton",value:function(){var e=this;return Lc.createElement(Md,{ref:"loadTestButton",label:"Load",level:Pc.INFO,size:Dc.SMALL,onClick:function(){Hu.Global.dispatch("loadWorkspaceInput",e.getTest().input)}})}},{key:"getTest",value:function(){return this.options.evalJob.getExampleTest(this.options.entry.id)}}]),t}(IL),RL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"renderCollapsible",value:function(){var e=this.options.entry,t=(this.options.evalJob.getExampleTest(e.id),{height:"170px",width:"49%",display:"inline-block"}),n=Lc.createElement(LL,{extra:e.extra});return Lc.createElement(jd,{className:"section"+e.testNumber,key:e.testNumber,orientation:Rc.HORIZONTAL,style:{height:t.height,width:"100%",padding:"5px"}},n)}}]),t}(Cb),ML=function(){var e={textAlign:"right"};return[{value:function(e){return e.testNumber},headerName:"Test Number",sortDescending:!0,cellStyle:e,headerStyle:e},{value:function(e){return e.hasOwnProperty("cpuTime")?Ek.cpuTime(e.cpuTime):"-"},rawValue:function(e){return e.cpuTime},headerName:"CPU Usage",cellStyle:e,headerStyle:e},{value:function(e){return e.hasOwnProperty("memUsage")?Ek.memory(e.memUsage):"-"},rawValue:function(e){return e.memUsage},headerName:"Memory Usage",cellStyle:e,headerStyle:e},{value:function(e){return e.hasOwnProperty("message")?e.message:"-"},headerName:"Result",cellStyle:e,headerStyle:e}]},PL=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.columnSortingOrder=[n.columns[0]],n}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.evalJob=e.evalJob}},{key:"getRowClass",value:function(e){var t=this.evalJob.getEvalTask();return this.evalJob.getExampleTest(e.id)?0==t.getType()?OL:RL:t&&t.isPublic&&0==t.getType()?(t.systemTests=t.systemTests||{},NL):kb}},{key:"getRowOptions",value:function(e){var n=w(d(t.prototype),"getRowOptions",this).call(this,e);return n.evalJob=this.evalJob,n}},{key:"getEntries",value:function(){if(!this.evalJob)return[];for(var e=this.evalJob.getAllTests(),t=0;t<e.length;t+=1)e[t].testNumber=t;return e.reverse(),e}},{key:"setColumns",value:function(){w(d(t.prototype),"setColumns",this).call(this,ML())}},{key:"onMount",value:function(){var e=this;this.attachUpdateListener(this.evalJob,function(){e.options.examplesOnly&&e.evalJob.tests.length>0||e.evalJob.getStatus()!==jT.Status.DONE&&e.redraw()})}}]),t}(ft(Tb)),DL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"hide",value:function(){w(d(t.prototype),"hide",this).call(this),this.options.submissionSummary.node.focus()}}]),t}(Qg),BL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContestTask",value:function(){return this.options.contestTask}},{key:"getValue",value:function(){var e=this.options.score,t=this.getContestTask(),n=t&&t.pointsWorth||1,i=Ek.truncate(e*n,2)+" points";return 100!=n&&(i+=" ("+Ek.truncate(100*e)+"%)"),i}},{key:"onMount",value:function(){var e=this;this.options.contestTask&&this.attachUpdateListener(this.options.contestTask,function(){return e.redraw()})}}]),t}(Lc.TextElement),_L=function(){function e(t){r(this,e),this.evalJob=t}return o(e,[{key:"getSummary",value:function(){var e=0,t=0,n=!0,i=!1,r=void 0;try{for(var a,o=this.evalJob.tests[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e=Math.max(e,s.cpuTime||0),t=Math.max(t,s.memUsage)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return Lc.createElement("div",null,Lc.createElement("p",null,Lc.T("User:")," ",this.getUserHandle()),Lc.createElement("p",null,Lc.T("Verdict:")," ",this.getStatus()),Lc.createElement("p",null,Lc.T("")," "),Lc.createElement("p",null,Lc.T("Language:")," ",this.evalJob.getProgrammingLanguage().name),Lc.createElement("p",null,Lc.T("CPU Time usage:")," ",Ek.cpuTime(e)),Lc.createElement("p",null,Lc.T("Memory usage:")," ",Ek.memory(t)," "),Lc.createElement("p",null,Lc.T("Source code:")," ",Ek.memory(this.evalJob.sourceText.length)," "))}},{key:"getResultsTable",value:function(){return Lc.createElement(PL,{ref:"evalJobResultsTable",evalJob:this.evalJob})}},{key:"getCompilationMessage",value:function(){return Lc.createElement(UT,{customRun:this.evalJob})}},{key:"getJobId",value:function(){return"Job #"+this.evalJob.id}},{key:"getJobIdWithExternalLink",value:function(){return["Job ",Lc.createElement("span",{onClick:function(){window.event.stopPropagation()}},Lc.createElement(Xd,{href:"/submission/"+this.evalJob.id,newTab:!0,value:["#"+this.evalJob.id+" ",Lc.createElement(kf,{icon:"external-link"})]})," ")]}},{key:"getTimeSubmitted",value:function(){var e=Ap();return this.evalJob.timeSubmitted&&(e=Ap.unix(this.evalJob.timeSubmitted)),e=e.format("DD MMM YYYY HH:mm:ss")}},{key:"getUserHandle",value:function(){return Lc.createElement(sE,{userId:this.evalJob.userId})}},{key:"getTask",value:function(){var e=zS.getByEvalTaskId(this.evalJob.evalTaskId);return e?"Task "+e.longName:"Task id #"+this.evalJob.evalTaskId}},{key:"getContest",value:function(){var e=XS.get(this.evalJob.contestId);return e?e.longName:"Contest #"+this.evalJob.contestId}},{key:"getStatus",value:function(){var e=this.evalJob,t="",n=e.getStatus(),i=new Map([[jT.Status.WAITING,"Waiting"],[jT.Status.COMPILING,"Compiling"],[jT.Status.RUNNING,"Running"]]);if(n===jT.Status.DONE){var r=e.hasPartialScoring();if(e.hasCompileError())t="Compilation Error";else if(e.hasInternalJudgeError())t="Internal Judge Error!";else if(e.onlyExamples)t=e.getNumTestsPassed()+"/"+e.exampleTests.length;else{if(r){var a=e.score,o=e.getContestTask();return Lc.createElement(BL,{score:a,contestTask:o,value:""})}if(e.getNumTestsPassed()<e.exampleTests.length)t="Passed "+e.getNumTestsPassed()+"/"+e.exampleTests.length+" examples";else{var s=e.getResultStatus(),l=e.getLastTest(),u=new Map([[jT.ResultStatus.TIME_LIMIT_EXCEEDED,"Time Limit Exceeded"],[jT.ResultStatus.MEMORY_LIMIT_EXCEEDED,"Memory Limit Exceeded"],[jT.ResultStatus.RUNTIME_ERROR,"Runtime Error"],[jT.ResultStatus.KILLED_BY_SIGNAL,l?l.message:""],[jT.ResultStatus.WRONG_ANSWER,l?l.message:""],[jT.ResultStatus.ACCEPTED,"Accepted"],[jT.ResultStatus.UNKNOWN,"Internal Judge Error!"]]);t=u.get(s)}}}else t=i.get(n);return t}}]),e}(),FL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEvalJob",value:function(){return this.options.evalJob}},{key:"render",value:function(){var e=this.getEvalJob(),t=new _L(e),n={},i={padding:"1em"},r={margin:"0.3em"},a=e.getProgrammingLanguage();return a&&(n.aceMode=a.aceMode),this.options.style={padding:"0px",margin:"0px"},Lc.createElement(Gb,{keepActiveTab:!0},Lc.createElement(jd,{ref:"sourceCodeTabPanel",title:Lc.T("Source"),style:i},Lc.createElement("div",{key:"optionButtons",className:"row",style:{padding:"10px"}},Lc.createElement(Md,{ref:"downloadSourceButton",label:Lc.T("Download Source"),level:Pc.INFO,faIcon:"download",style:r}),Lc.createElement(Md,{ref:"loadInWorkspaceButton",label:Lc.T("Load in Workspace"),level:Pc.INFO,style:r})),Lc.createElement(ap,l({ref:"sourceCodeHighlighter",value:e.sourceText,maxLines:this.options.maxCodeLines||32},n))),Lc.createElement(jd,{ref:"summaryTabPanel",title:Lc.T("Summary"),style:i},t.getSummary()),Lc.createElement(jd,{ref:"resultsTabPanel",title:Lc.T("Results"),style:i},t.getResultsTable()),Lc.createElement(jd,{ref:"compilationTabPanel",title:Lc.T("Compilation messages"),style:i},t.getCompilationMessage()))}},{key:"onMount",value:function(){var e=this;this.downloadSourceButton.addClickListener(function(){var t=new Blob([e.getEvalJob().sourceText],{type:"text/plain;charset=utf-8"}),n=e.getEvalJob().getProgrammingLanguage(),i=e.getEvalJob().id;n&&(i+="."+n.getExtension()),Xu.saveAs(t,i)}),this.loadInWorkspaceButton.addClickListener(function(){Hu.Global.dispatch("loadEvalJobSource",{evalJob:e.getEvalJob()})}),this.attachUpdateListener(this.getEvalJob(),function(){e.redraw()})}}]),t}(Lc.Element),UL=(eA=nA=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"submissionSummary",tA,y(n)),n}return h(t,e),t}(Jc),tA=R(eA.prototype,"submissionSummary",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"white",cursor:"pointer",margin:"10px 0",padding:"10px 15px",boxShadow:"0 1px 3px "+qe($c.Global.properties.COLOR_BACKGROUND,.3),transition:"0.2s",":hover":{boxShadow:"0 1px 5px "+qe($c.Global.properties.COLOR_BACKGROUND,.5),transition:"0.2s"}}}}),eA),zL=(iA=Ze(UL))(rA=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.submissionSummary),e.setAttribute("tabindex","0")}},{key:"getEvalJob",value:function(){return this.options.evalJob}},{key:"render",value:function(){var e=new _L(this.getEvalJob());return Lc.createElement("div",null,[e.getJobIdWithExternalLink()," ",e.getTimeSubmitted()," ",e.getUserHandle()," -- ",e.getTask(),", ",e.getContest()," -- ",e.getStatus()])}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(){DL.show({fillScreen:!0,children:[Lc.createElement(FL,{evalJob:e.getEvalJob()})],submissionSummary:e})}),this.attachUpdateListener(this.getEvalJob(),function(){e.redraw()})}}]),t}(Lc.Element))||rA,WL=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.submissionSummaryMap=new Map,n}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.fetchEvalJobs()}},{key:"render",value:function(){var e=this,t=TL.all().filter(function(t){return e.filterEvalJob(t)}).sort(function(e,t){return t.id-e.id});return this.options.children=t.map(function(t){return e.getSubmissionSummary(t)}),this.options.children}},{key:"getSubmissionSummary",value:function(e){return Lc.createElement(zL,{evalJob:e,key:e.id})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.attachCreateListener(TL,function(t){if(e.filterEvalJob(t)){var n=e.getSubmissionSummary(t),i=e.options.children.length;if(0===i)return void e.appendChild(n);var r=e.options.children[0].options.evalJob.id,a=e.options.children[i-1].options.evalJob.id;if(t.id>r)e.insertChild(n);else if(t.id<a)e.appendChild(n);else{for(var o=-1,s=1<<20;s>0;s>>=1)(function(n){return!(n>=i)&&e.options.children[n].options.evalJob.id>t.id})(o+s)&&(o+=s);o+=1,e.options.children[o].options.evalJob.id<t.id&&e.insertChild(n,o)}}})}},{key:"getFilters",value:function(){return this.options.filters}},{key:"filterEvalJob",value:function(e){var t=Object.assign({examplesPassed:!0,onlyExamples:!1},this.getFilters());if(t.startTime&&e.timeSubmitted<t.startTime)return!1;if(t.endTime&&e.timeSubmitted>t.endTime)return!1;if(t.status&&e.getStatus()!==t.status)return!1;if(t.resultStatus&&(e.getStatus()!==jT.Status.DONE||e.getResultStatus()!==t.resultStatus))return!1;for(var n=["userId","contestId","contestTaskId","evalTaskId","score","programmingLanguageId","onlyExamples"],i=0,r=n;i<r.length;i++){var a=r[i];if(t.hasOwnProperty(a)&&e[a]!==t[a])return!1}return!0}},{key:"fetchEvalJobs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getEvalJobRequest(e);zu.getJSON("/eval/get_eval_jobs/",t).then(function(e){e.jobCount&&(TL.jobCount=e.jobCount)},function(){})}},{key:"getEvalJobRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n={numJobs:t||200,requestCount:e};return Object.assign(n,this.getFilters()),n}}]),t}(jd),HL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.evalJobId=this.options.evalJobId||this.options.id,this.options.evalJob=TL.get(this.options.evalJobId)}},{key:"render",value:function(){var e=this;if(this.options.error)return[Lc.createElement("span",{className:"fa fa-warning"}),Lc.createElement("strong",null,"Failed to open submission with id ",this.options.evalJobId)];if(this.options.evalJob)return[Lc.createElement(zL,{evalJob:this.options.evalJob,maxCodeLines:32})];var t=function(t){e.options.evalJob=t,e.node||e.createNode(),e.redraw()},n=function(t){e.options.error=t||"Error",e.redraw()};return TL.fetch(this.options.evalJobId,t,n),[]}}]),t}(Lc.Element),VL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(mh.SMALL),e.setStyle({width:900,maxWidth:"calc(100% - 30px)",margin:"0 auto",padding:15})}},{key:"render",value:function(){var e=this,t=At(),n=Lt(),i=Tt();return[Lc.createElement("h2",null,"Filter jobs"),Lc.createElement("div",null,Lc.createElement(Nb,{label:"After:",inline:!0},Lc.createElement(iw,{ref:"startTimePicker"})),Lc.createElement(Nb,{label:"Before:",inline:!0},Lc.createElement(iw,{ref:"endTimePicker"})),Lc.createElement(Nb,{label:"Status:",inline:!0},Lc.createElement(Gg,{options:t,
ref:"statusSelect"})),Lc.createElement(Nb,{label:"Result status:",inline:!0},Lc.createElement(Gg,{options:n,ref:"resultStatusSelect"})),Lc.createElement(Nb,{label:"User id:",inline:!0},Lc.createElement(yg,{ref:"userIdInput"})),Lc.createElement(Nb,{label:"Language:"},Lc.createElement(Gg,{options:i,ref:"programmingLanguageSelect"})),Lc.createElement(Nb,{label:" "},Lc.createElement("div",null,Lc.createElement(Md,{level:Pc.PRIMARY,label:Lc.T("Set filter"),onClick:function(){return e.setFilters()}})))),Lc.createElement("br",null),Lc.createElement(WL,{ref:"submissionSummaryPanel"})]}},{key:"setFilters",value:function(){var e={},t=this.startTimePicker.getDate();if(t){if(!t.isValid())return void alert("Invalid time");e.startTime=t.unix()}var n=this.endTimePicker.getDate();if(n){if(!n.isValid())return void alert("Invalid time");e.endTime=n.unix()}var i=this.statusSelect.get().value;i&&(e.status=i);var r=this.resultStatusSelect.get().value;r&&(e.resultStatus=r);var a=this.programmingLanguageSelect.get().id;a&&(e.programmingLanguageId=a);var o=this.userIdInput.getValue();o&&(e.userId=o),this.submissionSummaryPanel.updateOptions({filters:e})}},{key:"onMount",value:function(){cp.registerStream("evaljobs")}}]),t}(Lc.Element),GL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.contest=XS.get(e.contestId)}},{key:"render",value:function(){var e,t=this;if(this.contest.canShowPublicSources()){var n,i=At(),r=Lt(),a=Tt("All");this.options.contestTaskId||(n=Lc.createElement(Nb,{label:"Contest task:"},Lc.createElement(Gg,{options:[""].concat(this.contest.getContestTasks()),ref:"contestTaskSelect"}))),e=[Lc.createElement(Ob,{ref:"filterView",title:Lc.T("Filter jobs")},Lc.createElement("div",null,Lc.createElement(Nb,{label:"After:"},Lc.createElement(iw,{ref:"startTimePicker"})),Lc.createElement(Nb,{label:"Before:"},Lc.createElement(iw,{ref:"endTimePicker"})),n,Lc.createElement(Nb,{label:"Status:"},Lc.createElement(Gg,{options:i,ref:"statusSelect"})),Lc.createElement(Nb,{label:"Result status:"},Lc.createElement(Gg,{options:r,ref:"resultStatusSelect"})),Lc.createElement(Nb,{label:"Language:"},Lc.createElement(Gg,{options:a,ref:"programmingLanguageSelect"})),Lc.createElement(Nb,{label:"Show my submissions:"},Lc.createElement(Eg,{ref:"userOnlyCheckbox",style:{display:"inline-block",width:"initial"}})),Lc.createElement(Nb,{label:" "},Lc.createElement("div",null,Lc.createElement(Md,{level:Pc.PRIMARY,label:Lc.T("Set filter"),onClick:function(){return t.setFilters()}})))))]}return[e,Lc.createElement(WL,{ref:"submissionSummaryPanel",filters:this.getFilters()})]}},{key:"getFilters",value:function(){var e={};if(this.options.allContests||(e.contestId=this.contest.id),this.options.contestTaskId)e.contestTaskId=this.options.contestTaskId;else if(this.filterView){var t=this.contestTaskSelect.get();t&&(this.options.allContests?e.evalTaskId=t.evalTaskId:e.contestTaskId=t.id)}else e.userId=USER.id;if(!this.filterView)return e;var n=this.startTimePicker.getDate();if(n){if(!n.isValid())return void alert("Invalid time");e.startTime=n.unix()}var i=this.endTimePicker.getDate();if(i){if(!i.isValid())return void alert("Invalid time");e.endTime=i.unix()}var r=this.statusSelect.get().value;r&&(e.status=r);var a=this.resultStatusSelect.get().value;a&&(e.resultStatus=a);var o=this.programmingLanguageSelect.get().id;return o&&(e.programmingLanguageId=o),this.userOnlyCheckbox.getValue()&&(e.userId=USER.id),e}},{key:"setFilters",value:function(){this.submissionSummaryPanel.updateOptions({filters:this.getFilters()})}}]),t}(Lc.Element),jL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getFilters",value:function(){var e={};return e.contestId=this.options.contestTask.contestId,e.contestTaskId=this.options.contestTask.id,USER.isSuperUser||(e.userId=USER.id),e}}]),t}(WL),YL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(WL,{ref:"submissionSummaryPanel",filters:this.getFilters()})]}},{key:"getFilters",value:function(){var e={},t=VT.get(this.options.privateArchiveId),n=t.getContestTasks(),i=[],r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i.push(u.id)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return e.contestTaskIdList=i,e}}]),t}(Lc.Element),JL=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.archiveUsers=new Map,n.users=new Map,n.addListener("archiveUserUpdate",function(e){n.dispatch("rankingsChange",e),n.recalculateUsers()}),n}return h(t,e),o(t,[{key:"getBaseContest",value:function(){return XS.get(this.baseContestId)}},{key:"addArchiveUser",value:function(e){this.archiveUsers.set(e.id,e),this.users.set(e.userId,e)}},{key:"getUser",value:function(e){return this.users.get(e)}},{key:"getUsers",value:function(){return Array.from(this.archiveUsers.values())}},{key:"getContestTasks",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=zS.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.contestId===this.baseContestId&&e.push(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e.sort(function(e,t){return e.contestIndex===t.contestIndex?e.getBaseTask().id-t.getBaseTask().id:e.contestIndex-t.contestIndex}),e}},{key:"getNumUsers",value:function(){return this.archiveUsers.size}},{key:"recalculateUsers",value:function(){var e=this;this.recalculatingUserInProgress||(this.recalculatingUserInProgress=!0,setTimeout(function(){var t=e.getUsers();e.constructor.calculateRanks(t),e.dispatch("rankingsChange"),e.recalculatingUserInProgress=!1},500))}},{key:"getChat",value:function(){return bE.get(this.chatId)}},{key:"toString",value:function(){return this.longName}},{key:"getCountries",value:function(){var e=new Set,t=!0,n=!1,i=void 0;try{for(var r,a=this.getUsers()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o&&o.countryId&&!e.has(o.countryId)&&e.add(o.countryId)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return tk.getCountriesFromIds(e)}}],[{key:"calculateRanks",value:function(e){e.sort(XL.compareScoreboard);for(var t=0;t<e.length;t+=1)t>0&&e[t].totalScore===e[t-1].totalScore?e[t].rank=e[t-1].rank:e[t].rank=t+1}}]),t}(fp),qL=new mp("Archive",JL),XL=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.metaContest=qL.get(n.archiveId),n.metaContest&&n.metaContest.addArchiveUser(y(n)),n}return h(t,e),o(t,[{key:"applyEvent",value:function(e){w(d(t.prototype),"applyEvent",this).call(this,e),this.metaContest.dispatch("archiveUserUpdate",{metaContestUser:this,event:e}),this.metaContest.dispatch("contestUserUpdate",{metaContestUser:this,event:e})}},{key:"solvedTask",value:function(e){var t=rk.get(this.userId);return!!t&&(t.taskSummaries.has(e.evalTaskId)&&100===t.taskSummaries.get(e.evalTaskId).bestScore)}},{key:"triedTask",value:function(e){var t=rk.get(this.userId);return!!t&&t.taskSummaries.has(e.evalTaskId)}},{key:"getPublicUser",value:function(){return sk.get(this.userId)}}],[{key:"compare",value:function(e,t){return e.totalScore===t.totalScore?(e.penalty||1/0)-(t.penalty||1/0):(t.totalScore||-1/0)-(e.totalScore||-1/0)}},{key:"compareScoreboard",value:function(e,n){return t.compare(e,n)}}]),t}(fp),KL=new mp("ArchiveUser",XL,{dependencies:["Archive","PublicUser"]}),QL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getMessageThread",value:function(){var e=bE.get(this.options.chatId);return e&&e.getMessageThread()}},{key:"render",value:function(){var e=this.getMessageThread();return e?[Lc.createElement(pS,{className:mh.Container.MEDIUM,style:{height:window.innerHeight-70+"px"},ref:"chatWidget",chatId:this.options.chatId,messageThread:e})]:this.options.error?iT.renderError(this.options.error):[Lc.createElement("h3",null,"Chat loading..."),Lc.createElement("span",{className:"fa fa-spinner fa-spin"})]}},{key:"onMount",value:function(){var e=this;this.addListener("hide",function(){e.chatWidget&&e.chatWidget.dispatch("hide")}),this.addListener("show",function(){e.chatWidget&&e.chatWidget.dispatch("show")})}}]),t}(Lc.Element),ZL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return XS.get(this.contestId)}},{key:"isOwned",value:function(){return USER.id===this.ownerId}},{key:"getCode",value:function(){var e=this.getContest().name;return e.substr(e.length-12)}}]),t}(fp),$L=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getForContest",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.contestId===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}}]),t}(mp),eI=new $L("contestregisterer",ZL),tI={ALL_PARTICIPANTS:0,ONLY_OFFICIAL:1,ONLY_UNOFFICIAL:2},nI=function(e){function t(e,n,i){var a;return r(this,t),a=b(this,d(t).call(this,[],{comparator:i})),a.addContestListeners(e),a.addContestListeners(n),a.contest=e,a.virtualContest=n,a.cacheEntries(),a}return h(t,e),o(t,[{key:"addContestListeners",value:function(e){var t=this;e&&(this.attachUpdateListener(e,function(){t.updateEntries()}),this.attachListener(e,"rankingsChange",function(){t.updateEntries()}))}},{key:"getRawEntries",value:function(){if(!this.contest)return[];var e=this.contest.getUsers();return this.virtualContest&&(e=[].concat(C(e),C(this.virtualContest.getUsers()))),e}}]),t}(Pb),iI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this),{columnWidths:{rank:0,user:80}})}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.resetColumnSortingOrder()}},{key:"resetColumnSortingOrder",value:function(){this.columnSortingOrder=[this.columns[2],this.columns[1]]}},{key:"getEntriesManager",value:function(){return this.entriesManager||(this.entriesManager=new nI(this.options.contest,this.options.virtualContest,this.getComparator())),this.entriesManager}},{key:"applyFilter",value:function(e){this.getEntriesManager().setFilter(e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("reorder",function(){e.getEntriesManager().setComparator(e.getComparator())}),this.attachListener(this.getEntriesManager(),"update",function(){document.body.contains(e.node)?e.redraw():e.parent.dispatch("shouldRedrawChild",{child:e})})}},{key:"getRowClass",value:function(){return aI}},{key:"getEntries",value:function(){return this.getEntriesManager().getEntries()}},{key:"getColumns",value:function(){var e={textAlign:"right",width:"1%",verticalAlign:"middle"},t={textAlign:"center",margin:"auto",verticalAlign:"middle"};return[{value:function(e,t){return t+1},headerName:"#",sortDescending:!1,headerStyle:{verticalAlign:"middle"},cellStyle:e},{value:function(e){var t=Lc.createElement(sE,{userId:e.userId,showCountry:!0});return e.getContest().isVirtual()?Lc.createElement("span",null,t," virtual ",e.getContestStartTime()<yf.now().unix()&&yf.now().unix()<e.getContestEndTime()?new Sp(1e3*(yf.now().unix()-e.getContestStartTime())).format("HH:mm"):""):t},rawValue:function(e){var t=sk.get(e.userId);return t?t.getDisplayHandle():"publicUser-"+e.userId},headerName:"User",sortDescending:!1,headerStyle:{verticalAlign:"middle",width:this.options.columnWidths.user+"%"},cellStyle:{verticalAlign:"middle"}},{value:function(e){var t=sk.get(e.userId);return t?t.rating||"-":"-"},rawValue:function(e){var t=sk.get(e.userId);return t?t.rating||0:0},headerName:"Rating",sortDescending:!0,headerStyle:t,cellStyle:t}]}},{key:"setColumns",value:function(){w(d(t.prototype),"setColumns",this).call(this,this.getColumns())}}]),t}(Tb),rI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntriesManager",value:function(){return this.entriesManager||(this.entriesManager=new nI(this.options.contest,this.options.virtualContest,this.getComparator())),this.entriesManager}},{key:"getEntries",value:function(){return this.getEntriesManager().getEntries()}}]),t}(vt(iI)),aI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return this.options.entry.userId===USER.id&&(e.setAttribute("id","currentUserRow"),e.setStyle("backgroundColor",qe($c.Global.properties.COLOR_BACKGROUND,.15))),e}}]),t}(mb),oI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"cacheEntries",value:function(){var e=this.getRawEntries();qS.calculateRanks(e),this.cachedEntries=this.sortEntries(this.filterEntries(e)),this.dispatch("update")}}]),t}(nI),sI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this),{columnWidths:{rank:1,user:29,score:10,tasks:60}})}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.resetColumnSortingOrder()}},{key:"resetColumnSortingOrder",value:function(){this.columnSortingOrder=[this.columns[2],this.columns[1]]}},{key:"getRowClass",value:function(){return aI}},{key:"getEntriesManager",value:function(){return this.entriesManager||(this.entriesManager=new oI(this.options.contest,this.options.virtualContest,this.getComparator())),this.entriesManager}},{key:"getEntries",value:function(){return this.getEntriesManager().getEntries()}},{key:"applyFilter",value:function(e){this.getEntriesManager().setFilter(e)}},{key:"showSubmissions",value:function(e,t){if(USER.isSuperUser||this.options.originalContest.canShowPublicSources()){var n;this.options.originalContest.canShowPublicSources()||(n=Lc.createElement("h3",null,"Sources are NOT public! You can only see this as an admin!"));var i={contestId:e.contestId,userId:e.userId,contestTaskId:e.getContest().getMatchingContestTask(t).id};Qg.show({fillScreen:!0,children:[n,Lc.createElement(WL,{filters:i,style:{paddingRight:"5%"}})]})}}},{key:"renderContestUserAndContestTaskCell",value:function(e,t){var n=this;if(!e.scores)return"-";var i=e.scores[t.id];if(this.options.virtualContest){var r=t.getVirtualTask();i=i||e.scores[r.id]}if(!i)return"-";var a,o,s=i.score||0;if(a=t.hasPartialScore()?Lc.createElement("span",null,Ek.truncate(s*t.pointsWorth,2)):1==s?Lc.createElement("span",{className:"fa fa-check fa-lg",style:{color:"green"}}):Lc.createElement("span",{className:"fa fa-times fa-lg",style:{color:"red"}}),t.hasPenalty()){var l=null;1==s?i.scoreSubmissionNumber>1&&(l=Lc.createElement("span",{style:{fontSize:"0.8em"}},"(",i.scoreSubmissionNumber-1,")")):i.numSubmissions>0&&(l=Lc.createElement("span",{style:{fontSize:"0.8em"}},"(",i.numSubmissions,")")),a=[a,l];var u=Ap(e.getContestStartTime()),c=Ap(i.scoreTime),h=c.diffDuration(u);(t.hasPartialScore()||1==s)&&(o=Lc.createElement("div",{style:{fontSize:"0.8em",color:"grey"}},h.format("HH:mm")))}return Lc.createElement("div",{onClick:function(){return n.showSubmissions(e,t)}},[a,o])}},{key:"getContestUserAndContestTaskCellRawValue",value:function(e,t){if(!e.scores)return-1;var n=e.scores[t.id];if(this.options.virtualContest){var i=t.getVirtualTask();n=n||e.scores[i.id]}return n?t.hasPartialScore()?n.score:n.score?1:0:-1}},{key:"renderContestTaskHeader",value:function(e,t){var n;n=this.options.contest.scoreboardType===qS.scoreboardType.TASK_NAME?Lc.createElement("div",null,Lc.T(e.longName)):Lc.createElement(dT,{popupContent:Lc.T(e.longName)},String.fromCharCode("A".charCodeAt(0)+t));var i=null;return e.hasScore()&&(i=Lc.createElement("div",{style:{fontSize:"0.9em"}},Ek.truncate(e.pointsWorth,2))),[n,i]}},{key:"shouldShowTaskColumns",value:function(){return this.options.contest.scoreboardType!==qS.scoreboardType.TOTAL_SCORE_ONLY}},{key:"getColumns",value:function(){var e=this,t={textAlign:"right",width:"1%",verticalAlign:"middle"},n={textAlign:"center",margin:"auto",verticalAlign:"middle"},i=[{value:function(e){return e.rank},headerName:Lc.T("Rank"),sortDescending:!1,headerStyle:{verticalAlign:"middle",width:this.options.columnWidths.rank+"%",maxWidth:"50px"},cellStyle:Object.assign({},t,{width:this.options.columnWidths.rank+"%",maxWidth:"50px"})},{value:function(e){var t=Lc.createElement(sE,{userId:e.userId,showCountry:!0});return!e.getContest().isVirtual()||eI.getForContest(e.getContest().getBaseContest().id)?t:Lc.createElement("span",null,t," ",Lc.T("virtual")," ",e.getContestStartTime()<yf.now().unix()&&yf.now().unix()<e.getContestEndTime()?new Sp(1e3*(yf.now().unix()-e.getContestStartTime())).format("HH:mm"):"")},rawValue:function(e){var t=sk.get(e.userId);return t?t.getDisplayHandle():"publicUser-"+e.userId},headerName:Lc.T("User"),sortDescending:!1,headerStyle:{verticalAlign:"middle",width:this.options.columnWidths.user+"%"},cellStyle:{verticalAlign:"middle",width:this.options.columnWidths.user+"%"}},{value:function(t){var n;t.penalty&&e.options.contest.hasPenalty()&&(n=Lc.createElement("span",{style:{fontSize:"0.8em"}}," (",Math.round(t.penalty),")"));var i=t.numSubmissions?Ek.truncate(t.totalScore,2):"-";return[Lc.createElement("strong",{style:{fontSize:"1.2em"}},i),n]},headerName:[Lc.createElement("span",{style:{fontSize:"1.2em"}},Lc.T("Score")),this.options.contest.hasPenalty()?Lc.createElement("span",{style:{fontSize:"0.8em"}}," (",Lc.T("Penalty"),")"):null],rawValue:function(e){return e},cmp:WS.compareScoreboard,headerStyle:Object.assign({},n,{width:this.options.columnWidths.score+"%"}),cellStyle:Object.assign({},n,{width:this.options.columnWidths.score+"%"})}];if(this.shouldShowTaskColumns())for(var r=this.options.contest.getContestTasks(),a=0;a<r.length;a+=1)!function(t){var a=r[t];i.push({value:function(t){return e.renderContestUserAndContestTaskCell(t,a)},rawValue:function(t){return e.getContestUserAndContestTaskCellRawValue(t,a)},headerName:function(){return e.renderContestTaskHeader(a,t)},sortDescending:!0,headerStyle:Object.assign({},n,{width:e.options.columnWidths.tasks/e.options.contest.getContestTasks().length+"%"}),cellStyle:n})}(a);return i}},{key:"setColumns",value:function(){w(d(t.prototype),"setColumns",this).call(this,this.getColumns())}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("reorder",function(){e.getEntriesManager().setComparator(e.getComparator())}),this.attachListener(this.getEntriesManager(),"update",function(){e.redraw()})}}]),t}(Tb),lI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntriesManager",value:function(){return this.entriesManager||(this.entriesManager=new oI(this.options.contest,this.options.virtualContest,this.getComparator())),this.entriesManager}},{key:"getEntries",value:function(){return this.getEntriesManager().getEntries()}}]),t}(vt(sI)),uI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),VS.addCreateListener(function(t){e.parent.dispatch("shouldRedrawChild",{child:e})}),VS.addUpdateListener(function(t){e.parent.dispatch("shouldRedrawChild",{child:e})})}},{key:"getEntries",value:function(){return this.options.privateArchive?this.options.privateArchive.getUsers():[]}},{key:"setColumns",value:function(){var e={textAlign:"right",width:"1%",verticalAlign:"middle"},n={textAlign:"center",margin:"auto",verticalAlign:"middle"},i=[{value:function(e,t){return t+1},headerName:"#",sortDescending:!1,headerStyle:{verticalAlign:"middle"},cellStyle:e},{value:function(e){return Lc.createElement(sE,{userId:e.userId,showCountry:!0})},rawValue:function(e){return e.userId},headerName:"User",sortDescending:!1,headerStyle:{verticalAlign:"middle"},cellStyle:{verticalAlign:"middle"}}],r=!0,a=!1,o=void 0;try{for(var s,l=this.options.privateArchive.getContestTasks()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)!function(){var e=s.value;i.push({value:function(t){var n=t.getContestUser(e);if(!n)return"-";if(!n.scores)return"-";var i=n.scores[e.id];if(!i)return"-";var r,a=function(){var t={contestId:e.getEvalTask().getDefaultContest().id,userId:n.userId,contestTaskId:e.id};Qg.show({fillScreen:!0,children:[Lc.createElement(WL,{filters:t,style:{paddingRight:"5%"}})]})};return r=n.solvedTask(e)?Lc.createElement("span",{className:"fa fa-check fa-lg",style:{color:"green"},onClick:a}):Ek.truncate(i.score,2),Lc.createElement("span",{onClick:a},r)},rawValue:function(t){var n=t.getContestUser(e);if(!n)return-1;if(!n.scores)return-1;var i=n.scores[e.id];return i?i.score||0:-1},headerName:function(){return Lc.createElement("div",null,e.longName)},sortDescending:!0,headerStyle:n,cellStyle:n})}()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}w(d(t.prototype),"setColumns",this).call(this,i)}}]),t}(Tb),cI=function(e){function t(e,n){var i;return r(this,t),i=b(this,d(t).call(this,[],{comparator:n})),i.metaContest=e,i.addMetaContestListeners(),i.cacheEntries(),i}return h(t,e),o(t,[{key:"addMetaContestListeners",value:function(){var e=this,t=new Nu({throttle:500}),n=t.wrap(function(t){return e.updateEntries()}),i=["updateOrCreate","create"];this.attachListener(KL,i,n),this.attachUpdateListener(this.metaContest,n)}},{key:"getRawEntries",value:function(){return this.metaContest?this.metaContest.getUsers():[]}}]),t}(Pb),hI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this),{columnWidths:{rank:0,user:80,score:20}})}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.resetColumnSortingOrder()}},{key:"resetColumnSortingOrder",value:function(){this.columnSortingOrder=[this.columns[2],this.columns[1]]}},{key:"getRowClass",value:function(){return aI}},{key:"getEntriesManager",value:function(){return this.entriesManager||(this.entriesManager=new cI(this.options.metaContest,this.getComparator())),this.entriesManager}},{key:"getEntries",value:function(){return this.getEntriesManager().getEntries()}},{key:"applyFilter",value:function(e){this.getEntriesManager().setFilter(e)}},{key:"setColumns",value:function(){var e={textAlign:"right",width:"1%",verticalAlign:"middle"},n={textAlign:"center",margin:"auto",verticalAlign:"middle"},i={width:this.options.columnWidths.rank+"%"},r={width:this.options.columnWidths.user+"%"},a={width:this.options.columnWidths.score+"%"},o=[{value:function(e,t){return t+1},headerName:Lc.T("Rank"),sortDescending:!1,headerStyle:Object.assign({verticalAlign:"middle"},i),cellStyle:Object.assign({},e,i)},{value:function(e){return Lc.createElement(sE,{userId:e.userId,user:e,showCountry:!0})},rawValue:function(e){var t=sk.get(e.userId);return t?t.getDisplayHandle():"publicUser-"+e.userId},headerName:Lc.T("User"),sortDescending:!1,headerStyle:Object.assign({verticalAlign:"middle"},r),cellStyle:Object.assign({verticalAlign:"middle"},r)},{value:function(e){return Ek.truncate(e.totalScore,2)},rawValue:function(e){return e.totalScore},headerName:Lc.T("Score"),sortDescending:!0,headerStyle:Object.assign({},n,a),cellStyle:Object.assign({},n,a)}];w(d(t.prototype),"setColumns",this).call(this,o)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("reorder",function(){e.getEntriesManager().setComparator(e.getComparator())})}}]),t}(vt(Tb)),dI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle("whiteSpace","nowrap")}},{key:"render",value:function(){return[Lc.createElement(Gg,{ref:"filterUsers",options:["All participants","Only official","Only unofficial"],style:{height:"2.2em"}}),Lc.createElement(Gg,{ref:"filterCountry",style:{height:"2.2em",marginLeft:"10px"},options:this.options.contest.getCountries()}),Lc.createElement(vg,{ref:"findUserInput",style:{height:"2.03em",marginLeft:"10px",verticalAlign:"middle"},placeholder:"Find user..."})]}},{key:"getFilter",value:function(){var e=this;return function(t){var n=e.filterUsers.getIndex(),i=e.filterCountry.get().id,r=e.findUserInput.getValue()||"",a=t.isOfficial();if(a&&n===tI.ONLY_UNOFFICIAL||!a&&n===tI.ONLY_OFFICIAL)return!1;var o=r.trim().toLowerCase(),s=sk.get(t.userId);return!!s&&((""===o||-1!=(s.name||"").toLowerCase().indexOf(o)||-1!=(s.username||"").toLowerCase().indexOf(o))&&(!i||s.countryId===i))}}},{key:"updateFilter",value:function(){this.dispatch("filterChange")}},{key:"onMount",value:function(){var e=this;this.filterUsers.addChangeListener(function(){e.updateFilter()}),this.filterCountry.addChangeListener(function(){e.updateFilter()}),this.findUserInput.addNodeListener("keyup",function(){e.updateFilter()}),this.updateFilter();var t=new Nu({throttle:300}),n=t.wrap(function(){return e.filterCountry.updateOptions({options:e.options.contest.getCountries()})});this.attachListener(this.options.contest,"contestUserUpdate",n)}}]),t}(Lc.Primitive("span")),pI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Utils.fullHeight),e.setStyle({display:"flex",flexDirection:"column"})}},{key:"getContestUsersFilter",value:function(){return Lc.createElement(dI,{ref:"contestUsersFilter",contest:this.options.contest})}},{key:"getContestUsersTableClass",value:function(){return rI}},{key:"getScoreboardTableClass",value:function(){return lI}},{key:"getScoreboardActionableArea",value:function(){var e,t=this;return this.options.contest.getUser(USER.id)&&(e=Lc.createElement(Md,{ref:"showMeButton",style:{marginRight:"10px",height:"2.2em"},level:Pc.INFO,label:Lc.T("Show Me"),size:Dc.SMALL,onClick:function(){return t.showMe()}})),[e,this.getContestUsersFilter()]}},{key:"render",value:function(){var e;if(this.options.originalContest.hasStarted()){var t=this.getScoreboardTableClass();e=Lc.createElement(t,{ref:"scoreboardTable",contest:this.options.contest,virtualContest:this.options.virtualContest,originalContest:this.options.originalContest,style:{flex:"1"}})}else{var n=this.getContestUsersTableClass();e=Lc.createElement(n,{ref:"scoreboardTable",contest:this.options.contest,virtualContest:this.options.virtualContest})}return[Lc.createElement("div",{style:{padding:"20px 0"}},this.getScoreboardActionableArea()),e]}},{key:"showMe",value:function(){var e=document.getElementById("currentUserRow");e?document.body.scrollTop=Math.max(e.offsetTop-window.innerHeight/2,0):this.scoreboardTable.dispatch("showCurrentUser")}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.scoreboardTable.applyFilter(this.contestUsersFilter.getFilter()),this.contestUsersFilter.addListener("filterChange",function(){e.scoreboardTable.applyFilter(e.contestUsersFilter.getFilter())}),this.addListener("setActive",function(t){setTimeout(function(){e.scoreboardTable.redraw()}),t?"function"==typeof e.scoreboardTable.applyScrollState&&e.scoreboardTable.applyScrollState():"function"==typeof e.scoreboardTable.saveScrollState&&e.scoreboardTable.saveScrollState()})}}]),t}(jd),fI=new Hu,gI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(Lc.TextElement,{ref:this.refLink("content"),value:this.getLabel()||"show tags"})]}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(t){t.preventDefault(),t.stopPropagation(),e.options.bubble.updateOptions({showTags:!0})})}}]),t}(Ed),mI=(aA=fA=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,{updateOnResize:!0})),e.fontColor="rgb(55, 55, 55)",e.height=110,O(e,"className",oA,y(e)),O(e,"tags",sA,y(e)),O(e,"userScore",lA,y(e)),O(e,"taskDescription",uA,y(e)),O(e,"taskName",cA,y(e)),O(e,"originalContest",hA,y(e)),O(e,"taskDifficulty",dA,y(e)),O(e,"taskStatistics",pA,y(e)),e}return h(t,e),t}(Jc),oA=R(aA.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",boxShadow:"0px 0px 1px "+this.fontColor,width:"99%",marginLeft:"0.5%",marginRight:"0.5%",height:this.height,fontColor:this.fontColor,display:"block",marginTop:"20px",whiteSpace:"nowrap",userSelect:"none",":hover":{transition:"0.23s",boxShadow:"0px 0px 5px "+this.fontColor,textDecoration:"none"},">*":{verticalAlign:"top",display:"inline-block",height:"100%",lineHeight:this.height,textAlign:"center",float:"initial !important"}}}}),sA=R(aA.prototype,"tags",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"22%",padding:this.height/6,paddingLeft:this.height/12,paddingRight:this.height/12}}}),lA=R(aA.prototype,"userScore",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"11%",color:this.fontColor,fontSize:"20px"}}}),uA=R(aA.prototype,"taskDescription",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"35%",paddingLeft:"6%"}}}),cA=R(aA.prototype,"taskName",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"50%",lineHeight:this.height/2,width:"100%",fontSize:"130%",color:"black",textAlign:"left"}}}),hA=R(aA.prototype,"originalContest",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"50%",width:"100%",fontSize:"100%",lineHeight:this.height/2,textAlign:"left"}}}),dA=R(aA.prototype,"taskDifficulty",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"9%",fontSize:"16px"}}}),pA=R(aA.prototype,"taskStatistics",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"20%"}}}),aA),vI=(gA=Ze(mI))(mA=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{svgColor:"#337AB7",showTags:!0,circleStrokeWidth:5,revealedTagIds:[],circlePadding:15}}},{key:"getContestTask",value:function(){return this.options.contestTask}},{key:"getEvalTaskSummary",value:function(){return _S.getByEvalTaskId(this.getContestTask().evalTaskId)}},{key:"getTagIds",value:function(){return this.getContestTask().tagIds||[]}},{key:"getTags",value:function(){return this.getTagIds().map(function(e){return hk.get(e)})}},{key:"getRevealedTags",value:function(){return this.options.revealedTagIds.map(function(e){return hk.get(e)})}},{key:"recalculateStatistics",value:function(){var e=0,t=0,n=function(n,i){n.scores[i.id]&&(e+=1,1==n.scores[i.id].score&&(t+=1))},i=this.getContestTask(),r=i.getContest().getUsers(),a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){n(l.value,i)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}if(i.getContest().isVirtual()){var c=i.getContest().getBaseContest().getMatchingContestTask(i),h=i.getContest().getBaseContest().getUsers(),d=!0,p=!1,f=void 0;try{for(var g,m=h[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){n(g.value,c)}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}}this.usersTried=e,this.usersSolved=t}},{key:"getUsersTried",value:function(){
return this.options.isArchive?this.getEvalTaskSummary().usersTried||0:this.usersTried||0}},{key:"getUsersSolved",value:function(){return this.options.isArchive?this.getEvalTaskSummary().usersSolved||0:this.usersSolved||0}},{key:"getSuccessRate",value:function(){var e=this.getUsersTried(),t=this.getUsersSolved();return e?parseInt(t/e*100):0}},{key:"setOptions",value:function(e){e.href=e.href||e.contestTask.getFullURL(),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.className)}},{key:"getTaskDescriptionSection",value:function(){var e=this.getContestTask().getOriginalContest();return e=e?Lc.createElement(Xd,{href:"/contest/"+e.name,value:e.longName}):this.getContestTask().originalContestName,Lc.createElement("div",{className:this.styleSheet.taskDescription},Lc.createElement("div",{className:this.styleSheet.taskName},Lc.T(this.getContestTask().longName)),Lc.createElement("div",{className:this.styleSheet.originalContest},e))}},{key:"getUserScoreSection",value:function(){var e,t=function(e){return[Ek.truncate(e,2),Lc.createElement("span",{style:{"font-size":"13px"}},"pts")]},n=function(){return Lc.createElement("span",{className:"fa fa-check fa-lg",style:{color:"green"}})};if(this.options.isArchive){var i=bC.getByEvalTaskAndUserId(this.getContestTask().evalTaskId,USER.id);i&&i.tried&&(e=i.solved?n():t(i.bestScore))}else{var r=this.getContestTask(),a=r.getContest().getUser(USER.id);if(a&&a.scores&&a.scores[r.id]){var o=a.scores[r.id].score;e=1==o?n():r.hasPartialScore()?t(o*r.pointsWorth):function(){return Lc.createElement("span",{className:"fa fa-times fa-lg",style:{color:"red"}})}()}}return Lc.createElement("div",{className:this.styleSheet.userScore},e)}},{key:"getTagsSection",value:function(){var e=[],t=[];return this.options.isArchive&&!this.options.showTags?(t=this.getRevealedTags(),e.push(Lc.createElement(gI,{bubble:this,label:t.length?"show all tags":null,style:{display:"inline-block",float:"left",margin:".1em"}}))):t=this.getTags(),e=[t.map(function(e){return Lc.createElement(Ed,{level:Pc.SUCCESS,style:{display:"inline-block",float:"left",margin:".1em"},onClick:function(){window.event.preventDefault(),window.event.stopPropagation(),fI.dispatch(e)}},e.name)})].concat(C(e)),Lc.createElement("div",{className:this.styleSheet.tags},e)}},{key:"getTaskDifficultySection",value:function(){var e=Wk.get(this.getContestTask().getDifficulty());return e?Lc.createElement("div",{className:this.styleSheet.taskDifficulty,style:{color:e.color}},e.toString()):Lc.createElement("div",{className:this.styleSheet.taskDifficulty})}},{key:"getCircleArgs",value:function(){return{strokeWidth:this.options.circleStrokeWidth,radius:(this.styleSheet.height-this.options.circleStrokeWidth)/2-this.options.circlePadding,fill:"transparent",center:{x:this.styleSheet.height/2,y:this.styleSheet.height/2},stroke:this.options.svgColor}}},{key:"getCircleArc",value:function(e){return 1===e?Lc.createElement(ag.Circle,this.getCircleArgs()):Lc.createElement(ag.CircleArc,l({},this.getCircleArgs(),{startAngle:1.5*Math.PI,endAngle:Math.PI*(1.5+2*e)}))}},{key:"getTaskStatisticsSection",value:function(){return Lc.createElement("div",{className:this.styleSheet.taskStatistics},Lc.createElement(ag.SVGRoot,{height:this.styleSheet.height,width:this.styleSheet.height},this.getCircleArc(this.getSuccessRate()/100),Lc.createElement(ag.Text,{x:this.styleSheet.height/2,y:this.styleSheet.height/2-9,text:this.getSuccessRate()+"%",fontSize:"20",fill:"#337AB7"}),Lc.createElement(ag.Text,{x:this.styleSheet.height/2,y:this.styleSheet.height/2+9,text:this.getUsersSolved()+"/"+this.getUsersTried(),fontSize:"10",fill:"#337AB7"})))}},{key:"render",value:function(){return this.options.isArchive||this.recalculateStatistics(),[this.getTaskDescriptionSection(),this.getUserScoreSection(),this.getTagsSection(),this.getTaskDifficultySection(),this.getTaskStatisticsSection()]}},{key:"onMount",value:function(){var e=this;if(w(d(t.prototype),"onMount",this).call(this),this.options.isArchive){var n=_S.getByEvalTaskId(this.getContestTask().evalTaskId);n&&n.addUpdateListener(function(){e.redraw()}),bC.addListener("updateOrCreate",function(t){t.evalTaskId===e.getContestTask().evalTaskId&&e.redraw()})}else{this.attachUpdateListener(this.getContestTask().getContest(),function(){e.redraw()});var i=new Nu({throttle:300}),r=i.wrap(function(){e.redraw()});this.attachListener(this.getContestTask().getContest(),"contestUserUpdate",r)}}}]),t}(Xd))||mA,yI=function(){function e(){r(this,e)}return o(e,null,[{key:"getName",value:function(e,t){return e.longName}},{key:"getContest",value:function(e,t){var n=e.getOriginalContest();return n?n.name:""}},{key:"getScore",value:function(e,t){if(t){var n=bC.getByEvalTaskAndUserId(e.evalTaskId,USER.id);return n&&n.bestScore?n.bestScore:0}var i=e.getContest().getUser(USER.id);return i&&i.scores&&i.scores[e.id]?i.scores[e.id].score*e.pointsWorth:0}},{key:"getTags",value:function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=(e.tagIds||[])[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;n.push(hk.get(l).name)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n.sort().join(" ")}},{key:"getDifficulty",value:function(e,t){return e.getDifficulty()}},{key:"getSolved",value:function(e,t){if(t)return(_S.getByEvalTaskId(e.evalTaskId)||{}).usersSolved||0;var n=e.getContest().getUsers(),i=0,r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u.scores&&u.scores[e.id]&&1==u.scores[e.id].score&&(i+=1)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i}},{key:"getTried",value:function(e,t){if(t)return(_S.getByEvalTaskId(e.evalTaskId)||{}).usersTried||0;var n=e.getContest().getUsers(),i=0,r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u.scores&&u.scores[e.id]&&(i+=1)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i}},{key:"getRatio",value:function(e,t){var n=this.getSolved(e,t),i=this.getTried(e,t);return i?n/i:0}}]),e}(),bI=function(e,t,n){return function(i){function a(){return r(this,a),b(this,d(a).apply(this,arguments))}return h(a,i),o(a,[{key:"getDefaultOptions",value:function(){return{state:0,style:{display:"inline-block",cursor:"pointer"}}}},{key:"render",value:function(){return[Lc.createElement(Ef,{ref:"icon",style:{display:"inline-block",opacity:0}}),Lc.createElement("div",{ref:"header",style:{marginRight:"7.44px",display:"inline-block"}},this.options.name)]}},{key:"updateIcon",value:function(){var e;1===this.options.state&&(e=Mc.DOWN),-1===this.options.state&&(e=Mc.UP),e?(this.icon.setDirection(e),this.icon.setStyle("opacity",1)):this.icon.setStyle("opacity",0)}},{key:"setState",value:function(e){this.options.state=e,this.updateIcon()}},{key:"onMount",value:function(){var t=this;this.updateIcon(),1!==this.options.state&&-1!==this.options.state||setTimeout(function(){return e.promoteCmp(t)}),this.addClickListener(function(){t.setState(1===t.options.state?-1:1),e.promoteCmp(t),t.updateIcon()})}}],[{key:"cmp",value:function(i,r){return It(i,r,e.options.isArchive,t,n)}}]),a}(Lc.Element)},kI=(vA=TA=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.height=35,O(n,"className",yA,y(n)),O(n,"taskDescription",bA,y(n)),O(n,"userScore",kA,y(n)),O(n,"tags",wA,y(n)),O(n,"taskDifficulty",EA,y(n)),O(n,"taskStatistics",SA,y(n)),O(n,"taskStatisticsTitle",CA,y(n)),O(n,"taskStatisticsSubtitle",xA,y(n)),n}return h(t,e),t}(mI),yA=R(vA.prototype,"className",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",pointerEvents:"cursor"}}}),bA=R(vA.prototype,"taskDescription",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{lineHeight:function(){return e.height+"px"},fontSize:"13px",paddingLeft:"5.25%",textAlign:"left"}}}),kA=R(vA.prototype,"userScore",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),wA=R(vA.prototype,"tags",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{padding:0,textAlign:"center",lineHeight:function(){return e.height+"px"}}}}),EA=R(vA.prototype,"taskDifficulty",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),SA=R(vA.prototype,"taskStatistics",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"auto"}}}),CA=R(vA.prototype,"taskStatisticsTitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{height:function(){return e.height/2+"px"},width:"100%",fontSize:"12px",textAlign:"center",lineHeight:function(){return e.height/2+"px"}}}}),xA=R(vA.prototype,"taskStatisticsSubtitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{height:function(){return e.height/2+"px"},lineHeight:function(){return e.height/2+"px"},width:"100%",fontSize:"12px",textAlign:"center"}}}),vA),wI=(AA=Ze(kI))(LA=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.createSortableHeaders(),n.headers=[],n}return h(t,e),o(t,[{key:"createSortableHeaders",value:function(){this.NameSort=bI(this,yI.getName),this.ContestSort=bI(this,yI.getContest,this.NameSort.cmp),this.ScoreSort=bI(this,yI.getScore,this.NameSort.cmp),this.TagsSort=bI(this,yI.getTags,this.NameSort.cmp),this.DifficultySort=bI(this,yI.getDifficulty,this.NameSort.cmp),this.SolvedSort=bI(this,yI.getSolved,this.NameSort.cmp),this.TriedSort=bI(this,yI.getTried,this.NameSort.cmp),this.RatioSort=bI(this,yI.getRatio,this.NameSort.cmp)}},{key:"render",value:function(){var e,t;if(this.headers=[],this.options.isArchive||!this.options.contest.isRunning()){var n;t=[Lc.createElement(this.TagsSort,{name:Lc.T("Tags"),className:this.styleSheet.tags}),Lc.createElement(this.DifficultySort,{name:Lc.T("Difficulty"),className:this.styleSheet.taskDifficulty})],(n=this.headers).push.apply(n,C(t))}else t=Lc.createElement("div",{style:{width:"31%",height:"100%",display:"inline-block",float:"left"}});var i=Lc.createElement(this.NameSort,{name:Lc.T("Task"),style:{marginRight:"2px",display:"inline-block"}}),r=Lc.createElement(this.ContestSort,{name:Lc.T("Contest"),style:{marginLeft:"2px",display:"inline-block"}}),a=Lc.createElement(this.ScoreSort,{name:Lc.T("Score"),className:this.styleSheet.userScore}),o=Lc.createElement(this.SolvedSort,{name:Lc.T("Solved"),state:-1}),s=Lc.createElement(this.TriedSort,{name:Lc.T("Tried")}),l=Lc.createElement(this.RatioSort,{name:Lc.T("Ratio")});return(e=this.headers).push.apply(e,[i,r,a,o,s,l]),[Lc.createElement("div",{className:this.styleSheet.className},Lc.createElement("div",{className:this.styleSheet.taskDescription},i,"|",r),a,t,Lc.createElement("div",{className:this.styleSheet.taskStatistics},Lc.createElement("div",{className:this.styleSheet.taskStatisticsTitle,style:{paddingLeft:"13.72px"}},Lc.T("Stats")),Lc.createElement("div",{className:this.styleSheet.taskStatisticsSubtitle},o,"|",s,"|",l)))]}},{key:"promoteCmp",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.headers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o!==e&&o.setState(0)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.dispatch("setOrderCriterion",function(t,n){return e.options.state*e.constructor.cmp(t,n)})}}]),t}(Lc.Element))||LA,EI=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.bubbles=[],n}return h(t,e),o(t,[{key:"getTasks",value:function(){return this.getContest().getContestTasks()}},{key:"getContest",value:function(){return this.options.contest}},{key:"getContestTaskBubble",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Lc.createElement(vI,{key:e.id,isArchive:this.options.isArchive,contestTask:e,showTags:this.options.showTags,revealedTagIds:t})}},{key:"setShowTags",value:function(e){this.options.showTags=e,this.refreshBubbles()}},{key:"setText",value:function(e){this.text=e,this.refreshBubbles()}},{key:"getHeader",value:function(){return Lc.createElement(wI,{ref:"header",isArchive:this.options.isArchive,contest:this.getContest()})}},{key:"render",value:function(){return[this.getHeader(),Lc.createElement("div",{ref:"taskList"},this.bubbles)]}},{key:"refreshBubbles",value:function(){var e=this,t=this.getTasks();this.options.sortingCriterion&&t.sort(function(t,n){return e.options.sortingCriterion(t,n)});var n=Nt(this.text||""),i=S(n,2),r=i[0],a=i[1];this.text&&(t=t.filter(function(e){return Ot(e.tagIds,r)&&Rt(e,a)}));var o=t.map(function(t){return e.getContestTaskBubble(t,r)});this.bubbles=o,this.taskList.setChildren(o)}},{key:"setSortingCriterion",value:function(e){this.options.sortingCriterion=e,this.refreshBubbles()}},{key:"onMount",value:function(){var e=this;if(this.refreshBubbles(),this.header&&this.header.addListener("setOrderCriterion",function(t){e.setSortingCriterion(t)}),!this.options.isArchive){this.getContest()&&this.attachListener(this.options.contest,"addTask",function(){e.refreshBubbles()})}}}]),t}(Lc.Element),SI=(IA=MA=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"className",NA,y(n)),O(n,"checked",OA,y(n)),O(n,"unchecked",RA,y(n)),n}return h(t,e),t}(Jc),NA=R(IA.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",height:"25px",lineHeight:"25px",width:"100%",paddingLeft:"0%",cursor:"pointer",":hover":{backgroundColor:"#eee"}}}}),OA=R(IA.prototype,"checked",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"black",fontWeight:"bold"}}}),RA=R(IA.prototype,"unchecked",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"rgb(55, 55, 55)",fontWeight:"initial"}}}),IA),CI=(PA=Ze(SI))(DA=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{checked:!1}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.className),this.options.checked?e.addClass(this.styleSheet.checked):e.addClass(this.styleSheet.unchecked)}},{key:"render",value:function(){return this.options.tag.name}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(){e.updateOptions({checked:!e.options.checked}),e.options.tagFilters.dispatch("tagClicked",e.options.tag)})}}]),t}(Lc.Element))||DA,xI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContestTasks",value:function(){return this.options.contest.getContestTasks()}},{key:"getAppearingTags",value:function(){var e=new Set,t=!0,n=!1,i=void 0;try{for(var r,a=this.getContestTasks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.tagIds){var s=!0,l=!1,u=void 0;try{for(var c,h=o.tagIds[Symbol.iterator]();!(s=(c=h.next()).done);s=!0)for(var d=c.value,p=hk.get(d);p;)e.add(p),p=hk.get(p.parentId)}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"render",value:function(){var e=Array.from(this.getAppearingTags());e.sort(function(e,t){for(var n=e.toString().split("-"),i=t.toString().split("-"),r=0;r<Math.min(n.length,i.length);r+=1)if(n[r]!==i[r])return n[r]<i[r]?-1:1;return n.length<i.length?-1:n.length>i.length?1:0});for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];t.push(Lc.createElement("div",{style:{paddingLeft:18*r.getDepth()+"px",height:"25px"}},Lc.createElement(CI,{tag:r,ref:this.refLink("tagCheckbox"+r.id),tagFilters:this})))}return t}},{key:"onMount",value:function(){var e=this;this.addListener("textInput",function(t){var n=Nt(t)[0],i=!0,r=!1,a=void 0;try{for(var o,s=e.getAppearingTags()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;-1!==n.indexOf(l.id)?e["tagCheckbox"+l.id].updateOptions({checked:!0}):e["tagCheckbox"+l.id].updateOptions({checked:!1})}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}),this.addListener("tagClicked",function(t){var n=e.options.filterArea;n.changeSearchBarText(t,n.searchBar.getValue()),n.dispatch("changeText",n.searchBar.getValue())})}}]),t}(Lc.Element),TI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(vg,{ref:"searchBar",placeholder:"Search here (use # for tags)",className:this.options.searchBarCss}),Lc.createElement(xI,{ref:"tags",className:this.options.tagFiltersCss,filterArea:this,contest:this.options.contest})]}},{key:"changeSearchBarText",value:function(e,t){var n=t.split(" "),i=t.toLocaleLowerCase(),r="#"+e.name.toLocaleLowerCase().split(" ").join("-"),a=i.split(" ");if(this.tags["tagCheckbox"+e.id].options.checked&&-1===a.indexOf(r))n.push("#"+e.name.split(" ").join("-"));else for(var o=0;o<a.length;o+=1)r===a[o]&&(a.splice(o,1),n.splice(o,1));t=n.join(" "),this.searchBar.setValue(t)}},{key:"setText",value:function(e){this.searchBar.setValue(e),this.tags.dispatch("textInput",e)}},{key:"onMount",value:function(){var e=this;this.searchBar.addNodeListener("input",function(){var t=e.searchBar.getValue();e.tags.dispatch("textInput",t),e.dispatch("changeText",t)})}}]),t}(Lc.Element),AI=(BA=VA=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,{updateOnResize:!0})),O(e,"searchBar",_A,y(e)),O(e,"tagFilters",FA,y(e)),O(e,"collapseFiltersButton",UA,y(e)),O(e,"filterArea",zA,y(e)),O(e,"contestTaskList",WA,y(e)),O(e,"className",HA,y(e)),e.filterAreaCollapsed=rc.isMobileDevice(),e.addBeforeUpdateListener(function(){return e.updateVariables()}),e}return h(t,e),o(t,[{key:"updateVariables",value:function(){this.screenWidth=Math.min(256,2*window.innerWidth/10),this.screenHeight=window.innerHeight-60,this.filterAreaCollapsed?this.resizeWidth=Math.min(9*window.innerWidth/10-30>Math.max(0,6*window.innerWidth/10)?9*window.innerWidth/10-30:Math.max(0,6*window.innerWidth/10),1122)+"px":this.resizeWidth=Math.min(window.innerWidth-5*Math.min(256,2*screen.width/10)/4,Math.min(7*window.innerWidth/10>768?7*window.innerWidth/10:768,Math.min(7*screen.width/10,896)))+"px",this.screenWidthBack=Math.min(256,2*screen.width/10)}},{key:"toggleCollapsed",value:function(){this.filterAreaCollapsed=!this.filterAreaCollapsed,this.update()}}]),t}(Jc),_A=R(BA.prototype,"searchBar",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"20px",marginBottom:"20px",border:"0px",fontSize:"85%",height:"25px",width:"85%",boxShadow:"0px 0px 1px rgb(55, 55, 55)",paddingLeft:"5%",lineHeight:"25px",outline:"none",":focus":{textDecoration:"none",backgroundColor:"#f6f6f6"}}}}),FA=R(BA.prototype,"tagFilters",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{fontSize:"95%",whiteSpace:"nowrap",overflowY:"auto",overflowX:"auto",maxHeight:function(){return e.screenHeight-65}}}}),UA=R(BA.prototype,"collapseFiltersButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{display:"inline-block",float:"left",width:"35px",position:"absolute",overflowY:"hidden",textAlign:"center",fontSize:"14px",marginTop:"22.5px",marginLeft:function(){return e.screenWidth/4-25},zIndex:"3"}}}),zA=R(BA.prototype,"filterArea",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{display:function(){return e.filterAreaCollapsed?"none":"inline-block"},float:"left",width:function(){return e.screenWidth},position:"absolute",paddingLeft:function(){return.1*e.screenWidth+"px"},maxHeight:function(){return e.screenHeight+"px"},marginLeft:function(){return 20+e.screenWidth/4-20+"px"}}}}),WA=R(BA.prototype,"contestTaskList",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{display:"inline-block",float:"left",position:"absolute",marginLeft:function(){return e.filterAreaCollapsed?(30+e.screenWidthBack/4)*Math.max(.4,window.innerWidth/screen.width)+"px":e.screenWidth+e.screenWidth/4+"px"},width:function(){return e.resizeWidth},maxHeight:function(){return e.screenHeight+"px"},minHeight:function(){return e.screenHeight+"px"},overflowY:"auto",overflowX:"auto",whiteSpace:"nowrap",paddingRight:"20px"}}}),HA=R(BA.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"auto",width:Math.min(1920,10*screen.width/10)+"px",overflow:"hidden"}}}),BA),LI=(GA=Ze(AI))(jA=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{defaultSortingCriterion:function(e,t){return this.cachedCompareFunction||(this.cachedCompareFunction=new wI({isArchive:!0}).SolvedSort.cmp),-this.cachedCompareFunction(e,t)},showTags:!!USER.isAuthenticated&&rk.getCurrentUser().getShowTagsInArchive(this.options.contest.id)}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.className)}},{key:"render",value:function(){var e=this;return[Lc.createElement(Md,{ref:"collapseFiltersButton",className:this.styleSheet.collapseFiltersButton,faIcon:this.getCollapseFiltersButtonIcon(),level:Pc.INFO,size:Dc.SMALL,onClick:function(){return e.toggleFiltersCollapsed()}}),Lc.createElement(TI,{ref:"filterArea",className:this.styleSheet.filterArea,tagFiltersCss:this.styleSheet.tagFilters,searchBarCss:this.styleSheet.searchBar,contest:this.options.contest}),Lc.createElement("div",{ref:"contestTaskList",className:this.styleSheet.contestTaskList},Lc.createElement("div",null,Lc.createElement("div",{style:{display:"inline-block","padding-right":"10px"}},Lc.T("Show tags")),Lc.createElement("div",{style:{display:"inline-block"}},Lc.createElement(Eg,{ref:this.refLink("showTagsCheckbox"),checked:this.options.showTags,style:{display:"inline-block"}}))),Lc.createElement(EI,{ref:"table",contest:this.options.contest,isArchive:!0,showTags:this.options.showTags,sortingCriterion:this.options.defaultSortingCriterion}))]}},{key:"getCollapseFiltersButtonIcon",value:function(){return"chevron-"+(this.styleSheet.filterAreaCollapsed?"right":"left")}},{key:"toggleFiltersCollapsed",value:function(){this.styleSheet.toggleCollapsed(),this.collapseFiltersButton.setFaIcon(this.getCollapseFiltersButtonIcon())}},{key:"onMount",value:function(){var e=this;if(this.filterArea.addListener("changeText",function(t){return e.table.setText(t)}),this.showTagsCheckbox.addChangeListener(function(){e.options.showTags=e.showTagsCheckbox.getValue(),e.table.setShowTags(e.options.showTags),USER.isAuthenticated&&rk.getCurrentUser().saveCustomSetting("archive:showTags-"+e.options.contest.id,e.options.showTags)}),USER.isAuthenticated){var t=function(){var t=rk.getCurrentUser().getShowTagsInArchive(e.options.contest.id);t!==e.options.showTags&&(e.options.showTags=t,e.showTagsCheckbox.setValue(t),e.table.setShowTags(e.options.showTags))};t(),this.attachUpdateListener(rk.getCurrentUser(),t)}this.addListener("setActive",function(t){t?e.contestTaskList.node.scrollTop=e._scrollState||0:e._scrollState=e.contestTaskList.node.scrollTop}),fI.addListener(function(t){var n="#"+t.name.split(" ").join("-");e.filterArea.setText(n),e.table.setText(n)})}}]),t}(Lc.Element))||jA,II=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Broadcast task"}},{key:"getBody",value:function(){return"Are you sure you want to broadcast this task now?"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getActionName",value:function(){return"Do it!"}},{key:"action",value:function(){zu.postJSON("/contest/change_task_delay/",{contestTaskId:this.options.contestTask.id}),this.hide()}}]),t}(Zg),NI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e,t=this;return e=this.options.editMode?[Lc.createElement(Md,{level:Pc.PRIMARY,size:Dc.EXTRA_SMALL,style:{marginLeft:"3px"},faIcon:"floppy-o",onClick:function(){return t.save()}}),Lc.createElement(vg,{value:this.getTextInputValue(),ref:"broadcastDelayInput",style:{width:"95px",marginLeft:"5px"}})]:[Lc.createElement(Md,{level:Pc.PRIMARY,size:Dc.EXTRA_SMALL,style:{marginLeft:"3px"},faIcon:"pencil",onClick:function(){return t.updateOptions({editMode:!0})}}),Lc.createElement("span",{style:{paddingLeft:"5px"}},this.getTextValue())],[Lc.createElement(Md,{level:Pc.PRIMARY,size:Dc.EXTRA_SMALL,onClick:function(){return t.showBroadcastNowModal()}},"Now!"),e]}},{key:"save",value:function(){var e,t=this.broadcastDelayInput.getValue(),n=t.split(":");if(1===n.length)e=parseInt(n);else if(2===n.length)e=60*parseInt(n[0])+parseInt(n[1]);else{if(3!==n.length)return void alert("Invalid duration format");e=3600*parseInt(n[0])+60*parseInt(n[1])+parseInt(n[2])}zu.postJSON("/contest/change_task_delay/",{contestTaskId:this.options.contestTask.id,delay:e})}},{key:"getTextValue",value:function(e){return(e=e||this.options.contestTask.broadcastDelay)?new Sp({seconds:e}).format("+HH:mm:ss"):Lc.createElement("em",null,"On contest start")}},{key:"getTextInputValue",value:function(){return new Sp({seconds:this.options.contestTask.broadcastDelay||0}).format("HH:mm:ss")}},{key:"showBroadcastNowModal",value:function(){II.show({contestTask:this.options.contestTask})}},{key:"onMount",value:function(){var e=this;this.attachUpdateListener(this.options.contestTask,function(){return e.updateOptions({editMode:!1})})}}]),t}(Lc.Element),OI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"deleteTask",value:function(e){var t={contestId:this.getContest().id,contestTaskId:e.id};zu.postJSON("/contest/delete_task/",t)}},{key:"getEntries",value:function(){return this.getContest().getContestTasks()}},{key:"moveTaskUp",value:function(e){for(var t=this,n=this.getContest().getContestTasks(),i={},r=0;r<n.length;r+=1)i[n[r].id]=r+1,n[r]===e&&(i[n[r].id]-=1,i[n[r-1].id]+=1);var a={updates:JSON.stringify(i),contestId:this.options.contest.id};zu.postJSON("/contest/update_order/",a).then(function(){return t.redraw()})}},{key:"setColumns",value:function(){var e=this;w(d(t.prototype),"setColumns",this).call(this,[{value:function(t,n){return n>0?Lc.createElement(Md,{level:Pc.PRIMARY,faIcon:"arrow-up",onClick:function(){return e.moveTaskUp(t)}}):null},rawValue:function(e){return e.contestIndex},headerName:Lc.T("Order")},{value:function(t){return Lc.createElement(Xd,{href:"/contest/"+e.getContest().name+"/task/"+t.name+"/",value:t.longName})},rawValue:function(e){return e.longName},headerName:Lc.T("Task")},{value:function(e){return e.name},headerName:Lc.T("URL Name")},{value:function(e){return e.scoreTypeName},headerName:Lc.T("Score type")},{value:function(e){return Lc.createElement(NI,{contestTask:e})},headerName:Lc.T("Delay")},{value:function(t){return Lc.createElement(Md,{level:"danger",onClick:function(){return e.deleteTask(t)}},Lc.T("Delete"))},headerName:Lc.T("Delete")}])}},{key:"onMount",value:function(){var e=this;this.getContest().addUpdateListener(function(){return e.redraw()})}}]),t}(vb),RI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"handleEventAndHandlePositionChange",value:function(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(e=w(d(t.prototype),"handleEventAndHandlePositionChange",this)).call.apply(e,[this].concat(i)),rw.clearBodyPopups()}}]),t}(Bb),MI=(YA=KA=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.workspaceBase=Object.assign({},n.base,{border:"none",borderRadius:"0",fontSize:"14px"}),O(n,"RUN",JA,y(n)),O(n,"COMPILE",qA,y(n)),O(n,"SUBMIT",XA,y(n)),n}return h(t,e),t}(Nd),JA=R(YA.prototype,"RUN",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.workspaceBase,this.colorStyleRule(this.themeProperties.COLOR_RUN)]}}),qA=R(YA.prototype,"COMPILE",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.workspaceBase,this.colorStyleRule(this.themeProperties.COLOR_COMPILE)]}}),XA=R(YA.prototype,"SUBMIT",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.workspaceBase,this.colorStyleRule(this.themeProperties.COLOR_SUBMIT)]}}),YA),PI=(QA=sL=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.workspaceBackground=function(){return n.themeProperties.COLOR_WORKSPACE},n.menuButtonSelected=function(){return qe(n.workspaceBackground(),1)},n.menuButtonColor=function(){return qe(n.workspaceBackground(),.8)},n.menuSelectSelected=function(){return qe(n.workspaceBackground(),.3)},n.menuSelectBackground=function(){return qe(n.workspaceBackground(),.2)},n.menuButtonSelectedStyle={color:n.menuButtonSelected,background:"none"},n.menuSelectSelectedStyle={color:n.menuButtonSelected,background:n.menuSelectSelected},n.menuSelectBackgroundStyle={background:n.menuSelectBackground},n.menuButtonStyle={fontSize:"14px",background:"none",border:"none",fontWeight:"bold",padding:"5px 10px",color:n.menuButtonColor,":hover":n.menuButtonSelectedStyle,":focus":{background:"none"},":active":{background:"none"},":focus:active":{background:"none"},":hover:active":{background:"none"},outline:"0"},O(n,"actionButtons",ZA,y(n)),O(n,"menuButton",$A,y(n)),O(n,"menuSelect",eL,y(n)),O(n,"workspace",tL,y(n)),O(n,"optionButtons",nL,y(n)),O(n,"bottomTab",iL,y(n)),O(n,"tabAreaTitleArea",rL,y(n)),O(n,"expandTabAreaButton",aL,y(n)),O(n,"expandedButton",oL,y(n)),n}return h(t,e),t}(Jc),ZA=R(QA.prototype,"actionButtons",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{whiteSpace:"nowrap",padding:"5px 0",float:"right",">*":{marginRight:"5px",display:"inline-block"},paddingLeft:"5px"}}}),$A=R(QA.prototype,"menuButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.menuButtonStyle}}),eL=R(QA.prototype,"menuSelect",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign({},this.menuButtonStyle,{cursor:"pointer",":hover":this.menuSelectSelectedStyle,":focus":this.menuSelectBackgroundStyle,":active":this.menuSelectBackgroundStyle,":focus:active":this.menuSelectBackgroundStyle,":hover:active":this.menuSelectSelectedStyle,":hover:focus":this.menuSelectSelectedStyle,background:this.menuSelectBackground,marginLeft:"10px",height:"1.9em",verticalAlign:"middle"})}}),tL=R(QA.prototype,"workspace",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:this.workspaceBackground}}}),nL=R(QA.prototype,"optionButtons",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{whiteSpace:"nowrap",margin:"5px 2.5px 5px 2.5px"},whiteSpace:"nowrap"}}}),iL=R(QA.prototype,"bottomTab",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:this.themeProperties.COLOR_BACKGROUND}}}),rL=R(QA.prototype,"tabAreaTitleArea",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",width:"100%",backgroundColor:this.workspaceBackground}}}),aL=R(QA.prototype,"expandTabAreaButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){
return{">:first-child":{transform:"rotate(180deg)",fontSize:"120%",position:"relative",width:"1em",height:"1em",borderRadius:"100%",transition:"transform .3s ease",verticalAlign:"top"},">:first-child::before":{position:"absolute",left:0,top:"-.1em"}}}}),oL=R(QA.prototype,"expandedButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:first-child":{transform:"rotate(0deg) !important"}}}}),QA),DI=(lL=pL=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navBackground=function(){return n.themeProperties.COLOR_WORKSPACE},n.tabColor=function(){return qe(n.navBackground(),.8)},n.tabHoverBackground=function(){return qe(n.navBackground(),.1)},n.tabHoverColor=function(){return qe(n.navBackground(),.9)},n.tabActiveColor=function(){return qe(n.navBackground(),1)},n.tabActiveBackground=function(){return qe(n.navBackground(),-.2)},n.transitionTime=.2,O(n,"workspaceTab",uL,y(n)),O(n,"tab",cL,y(n)),O(n,"activeTab",hL,y(n)),O(n,"nav",dL,y(n)),n}return h(t,e),t}(Fb),uL=R(lL.prototype,"workspaceTab",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",">*":{position:"absolute",height:"100%",width:"100%"}}}}),cL=R(lL.prototype,"tab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.tabColor,border:"none",borderRadius:"0",margin:"0",fontSize:"14px",padding:"6px",paddingRight:"12px",paddingLeft:"12px",transition:"padding "+this.transitionTime+"s ease",":hover":{cursor:"pointer",backgroundColor:this.tabHoverBackground,border:"none",color:this.tabHoverColor}}}}),hL=R(lL.prototype,"activeTab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{border:"none",color:this.tabActiveColor,backgroundColor:this.tabActiveBackground,paddingTop:"3px",":hover":{backgroundColor:this.tabActiveBackground,color:this.tabActiveColor}}}}),dL=R(lL.prototype,"nav",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{border:"none",whiteSpace:"nowrap",backgroundColor:this.navBackground}}}),lL),BI=(fL=mL=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.transitionTime=.3,n.barPadding=0,n.barThickness=5,n.dividerColor=function(){return qe(n.themeProperties.COLOR_WORKSPACE,.3)},O(n,"animatedSectionDivider",gL,y(n)),n}return h(t,e),t}(Zy),gL=R(fL.prototype,"animatedSectionDivider",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{transition:this.transitionTime+"s height ease"}}}}),fL),_I=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.baseColor=function(){return n.themeProperties.COLOR_WORKSPACE},n}return h(t,e),t}(Db),FI=new MI,UI=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.fileUnsavedListener=function(){n.updateLabel()},n.fileSavingListener=function(){n.updateLabel()},n.fileSavedListener=function(){n.updateLabel(),setTimeout(function(){n.file.isSaved()&&n.hide()},1500)},n}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),this.file||e.addClass("hidden")}},{key:"updateLabel",value:function(){if(this.show(),this.file.isSaved())this.setLabel(Lc.T("Saved"));else{if(this.file.isSavedInBrowser())return void this.setLabel(Lc.T("Saved locally"));this.file.isSaving?this.setLabel(Lc.T("Saving...")):this.setLabel(Lc.T("Unsaved changes"))}}},{key:"setFile",value:function(e){this.fileListeners&&this.fileListeners.cleanup(),this.file=e,this.updateLabel(),this.file.isSaved&&this.hide(),this.fileListeners=new Yu([this.file.addListener("unsaved",this.fileUnsavedListener),this.file.addListener("saving",this.fileSavingListener),this.file.addListener("saved",this.fileSavedListener)])}}]),t}(Ed),zI=(vL=Ze(DI))(yL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getSwitcher",value:function(e){var n=w(d(t.prototype),"getSwitcher",this).call(this,e);return n.addClass(this.styleSheet.workspaceTab),n}},{key:"getTitleArea",value:function(e){return Lc.createElement(Bb,{ref:"titleArea",className:this.styleSheet.nav,styleSheet:_I},e)}}]),t}(Gb))||yL,WI=(bL=Ze(BI))(kL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(eb))||kL,HI=(wL=Ze(BI))(EL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{autoCollapse:!0})}},{key:"getDividerBarClass",value:function(){return WI}},{key:"isCollapsed",value:function(e){return e.collapsed}},{key:"animateAceResize",value:function(){var e=this,t=function t(){e.panels[0].dispatch("resize"),e.animationId=requestAnimationFrame(t)};this.animationId=requestAnimationFrame(t)}},{key:"cancelAceResizeAnimation",value:function(){cancelAnimationFrame(this.animationId),delete this.animationId}},{key:"collapseChild",value:function(e){var t=this;if(0!==e){this.clearListeners&&this.clearListeners();var n=this.panels[0],i=this.panels[1];this.addClass(this.styleSheet.animatedSectionDivider),this.dividers[0].hide(),this.setDimension(n,"100%"),this.setDimension(i,0),this.animateAceResize(),setTimeout(function(){t.removeClass(t.styleSheet.animatedSectionDivider),t.cancelAceResizeAnimation(),i.collapsed=!0},1e3*this.styleSheet.transitionTime),this.dispatch("collapse")}}},{key:"expandChild",value:function(e){var t=this;if(0!==e){var n=this.panels[0],i=this.panels[1];this.addClass(this.styleSheet.animatedSectionDivider),this.setDimension(i,"30%"),this.setDimension(n,"70%"),this.animateAceResize(),setTimeout(function(){t.removeClass(t.styleSheet.animatedSectionDivider),t.cancelAceResizeAnimation(),t.dividers[0].show(),i.collapsed=!1},1e3*this.styleSheet.transitionTime)}}}]),t}(tb))||EL,VI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this,t=rk.getCurrentUser();this.aceThemeSelect.set(Fk.getDefaultTheme()),this.aceThemeSelect.addChangeListener(function(){t.saveCustomSetting("workspace:aceTheme",e.aceThemeSelect.get().id)}),this.codeFontSizeInput.addChangeListener(function(){t.saveCustomSetting("workspace:codeFontSize",e.codeFontSizeInput.getValue())}),this.fileFontSizeInput.addChangeListener(function(){t.saveCustomSetting("workspace:fileFontSize",e.fileFontSizeInput.getValue())}),this.tabSizeInput.addChangeListener(function(){t.saveCustomSetting("workspace:tabSize",e.tabSizeInput.getValue())}),this.showLineNumberInput.addChangeListener(function(){t.saveCustomSetting("workspace:showLineNumber",e.showLineNumberInput.getValue())}),this.showPrintMarginInput.addChangeListener(function(){t.saveCustomSetting("workspace:showPrintMargin",e.showPrintMarginInput.getValue())}),this.printMarginSizeInput.addChangeListener(function(){t.saveCustomSetting("workspace:printMarginSize",e.printMarginSizeInput.getValue())}),this.enableBasicAutocompletionInput.addChangeListener(function(){t.saveCustomSetting("workspace:enableBasicAutocompletion",e.enableBasicAutocompletionInput.getValue())}),this.enableLiveAutocompletionInput.addChangeListener(function(){t.saveCustomSetting("workspace:enableLiveAutocompletion",e.enableLiveAutocompletionInput.getValue())}),this.enableSnippetsInput.addChangeListener(function(){t.saveCustomSetting("workspace:enableSnippets",e.enableSnippetsInput.getValue())}),this.aceKeyboardHandlerSelect.set(Uk.getDefaultKeyboardHandler()),this.aceKeyboardHandlerSelect.addChangeListener(function(){t.saveCustomSetting("workspace:aceKeyboardHandler",e.aceKeyboardHandlerSelect.get().id)})}},{key:"render",value:function(){var e=rk.getCurrentUser();return[Lc.createElement(Lb,{orientation:Rc.VERTICAL,style:{height:"330px",background:"#fff",display:"block","overflow-y":"auto","overflow-x":"hidden",padding:"10px"},role:"menu"},Lc.createElement(Nb,{label:Lc.T("Theme")},Lc.createElement(Gg,{options:Fk.all(),ref:"aceThemeSelect",selected:Fk.getDefaultTheme()})),Lc.createElement(Nb,{label:Lc.T("Keyboard handler")},Lc.createElement(Gg,{options:Uk.all(),ref:"aceKeyboardHandlerSelect",selected:Uk.getDefaultKeyboardHandler()})),Lc.createElement(Nb,{label:Lc.T("Code font size")},Lc.createElement(yg,{ref:"codeFontSizeInput",min:"6",max:"36",value:e.getCodeFontSize()})),Lc.createElement(Nb,{label:Lc.T("Files font size")},Lc.createElement(yg,{ref:"fileFontSizeInput",min:"6",max:"36",value:e.getFileFontSize()})),Lc.createElement(Nb,{label:Lc.T("Tab size")},Lc.createElement(yg,{ref:"tabSizeInput",min:"2",max:"8",value:e.getTabSize()})),Lc.createElement(Nb,{label:Lc.T("Show line number"),inline:!1},Lc.createElement(Eg,{ref:"showLineNumberInput",checked:e.getShowLineNumber()})),Lc.createElement(Nb,{label:Lc.T("Show print margin"),inline:!1},Lc.createElement(Eg,{ref:"showPrintMarginInput",checked:e.getShowPrintMargin()})),Lc.createElement(Nb,{label:Lc.T("Print margin column")},Lc.createElement(yg,{ref:"printMarginSizeInput",min:"60",max:"180",value:e.getPrintMarginSize()})),Lc.createElement(Nb,{label:Lc.T("Enable basic autocompletion"),inline:!1},Lc.createElement(Eg,{ref:"enableBasicAutocompletionInput",checked:e.getBasicAutocompletionStatus()})),Lc.createElement(Nb,{label:Lc.T("Enable live autocompletion"),inline:!1},Lc.createElement(Eg,{ref:"enableLiveAutocompletionInput",checked:e.getLiveAutocompletionStatus()})),Lc.createElement(Nb,{label:Lc.T("Enable snippets"),inline:!1},Lc.createElement(Eg,{ref:"enableSnippetsInput",checked:e.getSnippetsStatus()})))]}}]),t}(Lc.Element),GI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getUser",value:function(){return this.options.user}},{key:"getProgrammingLanguage",value:function(){return this.options.programmingLanguage}},{key:"render",value:function(){var e=this,t=this.getProgrammingLanguage();return[Lc.createElement(ip,{ref:"codeEditor",aceMode:t.aceMode,value:t.getDefaultSource(),maxLines:32}),Lc.createElement(Md,{size:Dc.SMALL,faIcon:"save",style:{marginTop:"10px"},label:[Lc.T(" Save template for")," "+t.name],level:Pc.INFO,onClick:function(){return e.saveTemplate()}})]}},{key:"saveTemplate",value:function(){var e=this.getUser(),t=this.getProgrammingLanguage(),n=this.codeEditor.getValue();e.saveCustomSetting("workspace:programmingLanguage:"+t.id+":defaultSource",n)}}]),t}(Lc.Element),jI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.languageTemplatesMap=new Map;var n=!0,i=!1,r=void 0;try{for(var a,o=Bk.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.languageTemplatesMap.set(s,Lc.createElement(GI,{user:this.options.user,programmingLanguage:s}))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"render",value:function(){return[Lc.createElement(Nb,{label:Lc.T("Edit your default code for"),style:{maxWidth:"800px"}},Lc.createElement(Gg,{ref:"programmingLanguageSelect",options:Bk.all(),style:{maxWidth:"300px"}})),Lc.createElement(Of,{ref:"templateSwitcher"},Array.from(this.languageTemplatesMap.values()))]}},{key:"onMount",value:function(){var e=this,t=Bk.getDefaultLanguage();this.programmingLanguageSelect.addChangeListener(function(){var t=e.programmingLanguageSelect.get();e.templateSwitcher.setActive(e.languageTemplatesMap.get(t))}),this.templateSwitcher.setActive(this.languageTemplatesMap.get(t))}}]),t}(Lc.Element),YI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.SMALL)}},{key:"savePreferredProgrammingLanguage",value:function(e){this.options.user.saveCustomSetting("workspace:preferredProgrammingLanguage",e.id)}},{key:"getTitle",value:function(){return Lc.T("Workspace settings")}},{key:"render",value:function(){return this.options.user=rk.getCurrentUser(),[Lc.createElement(Nb,{style:{marginTop:"5px",marginBottom:"5px",maxWidth:"800px"},label:Lc.T("Preferred language:")},Lc.createElement(Gg,{ref:"preferredProgrammingLanguageSelect",options:Bk.all(),style:{maxWidth:"300px"}})),Lc.createElement("hr",null),Lc.createElement(jI,{style:{marginTop:"5px",marginBottom:"5px"},user:this.options.user})]}},{key:"onMount",value:function(){var e=this,t=Bk.getDefaultLanguage();this.preferredProgrammingLanguageSelect.set(t),this.preferredProgrammingLanguageSelect.addChangeListener(function(){e.savePreferredProgrammingLanguage(e.preferredProgrammingLanguageSelect.get())})}}]),t}(jd),JI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){var e=rk.getCurrentUser();return{aceKeyboardHandler:Uk.getDefaultKeyboardHandler(),aceTheme:Fk.getDefaultTheme(),fontSize:e.getFileFontSize(),tabSize:e.getTabSize(),showLineNumber:e.getShowLineNumber()}}},{key:"onMount",value:function(){var e=this,n=rk.getCurrentUser();n&&this.attachListener(n,"updateCustomSetting",function(t){e.dispatch(t.key,t.value)}),this.addListener("workspace:aceTheme",function(t){var n=Fk.get(t);e.setAceTheme(n)}),this.addListener("workspace:tabSize",function(t){e.setAceTabSize(t)}),this.addListener("workspace:showLineNumber",function(t){e.setAceLineNumberVisible(t)}),this.addListener("workspace:enableBasicAutocompletion",function(t){e.setBasicAutocompletion(t)}),this.addListener("workspace:enableLiveAutocompletion",function(t){e.setLiveAutocompletion(t)}),this.addListener("workspace:enableSnippets",function(t){e.setSnippets(t)}),this.addListener("workspace:aceKeyboardHandler",function(t){var n=Uk.get(t);e.setAceKeyboardHandler(n)}),w(d(t.prototype),"onMount",this).call(this)}}]),t}(ip),qI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;this.addListener("workspace:fileFontSize",function(t){e.setAceFontSize(t)}),w(d(t.prototype),"onMount",this).call(this)}}]),t}(JI),XI=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){var e=w(d(t.prototype),"getDefaultOptions",this).call(this);return e.fontSize=rk.getCurrentUser().getCodeFontSize(),e}},{key:"onMount",value:function(){var e=this;this.addListener("workspace:codeFontSize",function(t){e.setAceFontSize(t)}),this.addListener("workspace:showPrintMargin",function(t){e.setAcePrintMarginVisible(t)}),this.addListener("workspace:printMarginSize",function(t){e.setAcePrintMarginSize(t)}),w(d(t.prototype),"onMount",this).call(this)}}]),t}(JI),KI=function(e){var t;return t=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onDelayedMount",value:function(){var e=this;w(d(t.prototype),"onDelayedMount",this).call(this),this.options.file&&this.setFile(this.options.file),this.addAceSessionChangeListener(function(t){e.apiChange||(t.newValue=e.getValue(),t.file=e.file,e.file.setValue(t.newValue,!0),e.file.dispatch("userChanged",t))})}},{key:"setFile",value:function(e,t){var n=this;this.file=e,this.setValue(e.getValue()),!t&&e.hasOwnProperty("getProgrammingLanguage")&&(t=e.getProgrammingLanguage()),t&&this.setAceMode(t);var i=e.getBrowserVersion();i&&i.serverTime>(e.serverLastSaved||0)&&i.value!=e.getValue()&&(console.log("Using browser version for file ",e.getName()),this.setValue(i.value),e.setValue(i.value)),this.fileListener&&this.fileListener.remove(),this.fileListener=this.file.addListener("updateExternal",function(e){console.log("File listener for file: ",n.file),n.setValue(n.file.getValue())})}},{key:"getFile",value:function(){return this.file}}]),t}(e),R(t.prototype,"setFile",[et],Object.getOwnPropertyDescriptor(t.prototype,"setFile"),t.prototype),t},QI=KI(qI),ZI=KI(XI),$I=(SL=Ze(PI))(CL=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.workspace)}},{key:"addFullscreenListeners",value:function(){var e=this;this.addListener("enterFullScreen",function(){e.fullScreenButton.setFaIcon("compress")}),this.addListener("exitFullScreen",function(){e.fullScreenButton.setFaIcon("expand")}),this.fullScreenButton.addClickListener(function(){e.toggleFullScreen(),e.resizeCodeEditor()})}},{key:"addUploadButtonListeners",value:function(){var e=this;"Firefox"===rc.getBrowser()&&(console.log("Use a different browser, for god's sake, it's for the good of the Realm."),this.uploadFileButton.addClickListener(function(t){e.uploadFile.node.click(t)})),this.uploadFile.node.onchange=function(){var t=new FileReader,n=e.uploadFile.getFile();if(console.log(n),n){if(n.size>1e6)return e.fileWarningModal.show(),console.warn("File ",n.name," too large. Skipping upload."),void e.uploadFile.setValue("");t.onprogress=function(){e.uploadFileButton.setLevel(Pc.WARNING),e.uploadFileButton.setLabel(Lc.T("Uploading...")),e.uploadFileButton.disable()},t.onload=function(t){e.uploadFileButton.setLevel(Pc.SUCCESS),e.uploadFileButton.setLabel(Lc.T("Successfully uploaded!")),setTimeout(function(){e.uploadFileButton.enable(),e.uploadFileButton.setLevel(Pc.INFO),e.uploadFileButton.setLabel(Lc.T("Open file"))},700);var n=t.currentTarget.result;n.replace("\r\n","\n"),e.codeEditor.setValue(n,1),e.uploadFile.setValue(""),e.dispatch("finishedFileUpload")},t.readAsText(n)}}}},{key:"addTabAreaListeners",value:function(){var e=this;setTimeout(function(){e.tabArea.titleArea.appendChild(Lc.createElement("div",{style:{flex:"1"}})),e.tabArea.titleArea.appendChild(Lc.createElement(Md,{faIcon:"chevron-down",size:Dc.LARGE,onClick:function(){return e.sectionDivider.collapseChild(1)},className:e.styleSheet.menuButton}))},1e3),this.expandTabAreaButton.addClickListener(function(){e.sectionDivider.panels[1].collapsed?e.expandTabAreaButton.addClass(e.styleSheet.expandedButton):e.expandTabAreaButton.removeClass(e.styleSheet.expandedButton),e.sectionDivider.toggleChild(1)}),this.attachListener(this.sectionDivider,"collapse",function(){e.expandTabAreaButton.removeClass(e.styleSheet.expandedButton)})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.codeSectionPanel.addListener("resize",function(){return e.resizeCodeEditor()}),this.addListener("resize",function(){e.workspaceButtons.dispatch("resize"),e.actionButtons.dispatch("resize"),e.tabArea.titleArea.dispatch("resize")}),this.settingsButton.addClickListener(function(){e.workspaceSettingsWindow.toggleClass("hidden")}),setTimeout(function(){e.addTabAreaListeners(),e.addFullscreenListeners(),e.addUploadButtonListeners()})}},{key:"resizeCodeEditor",value:function(){this.codeEditor.dispatch("resize"),this.tabArea.dispatch("resize")}},{key:"maximizeTabSection",value:function(){this.expandTabAreaButton.addClass(this.styleSheet.expandedButton),this.sectionDivider.expandChild(1)}},{key:"render",value:function(){var e=rk.getCurrentUser();return this.codeEditorOptions={aceKeyboardHandler:Uk.getDefaultKeyboardHandler(),aceTheme:Fk.getDefaultTheme(),fontSize:e.getCodeFontSize(),tabSize:e.getTabSize(),showLineNumber:e.getShowLineNumber(),showPrintMargin:e.getShowPrintMargin(),printMarginSize:e.getPrintMarginSize(),enableBasicAutocompletion:e.getBasicAutocompletionStatus(),enableLiveAutocompletion:e.getLiveAutocompletionStatus(),enableSnippets:e.getSnippetsStatus()},[Lc.createElement(Qg,{ref:"fileWarningModal"},Lc.createElement("h5",{style:{color:"red"}},"File is too large. Skipping upload.")),Lc.createElement("div",{style:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},Lc.createElement(HI,{ref:"sectionDivider",orientation:Rc.VERTICAL,style:{width:"100%",height:"100%",overflow:"hidden",flex:"1"}},Lc.createElement(jd,{ref:"codeSectionPanel",className:"row codeSection",style:{margin:"0px",height:"70%",boxSizing:"border-box",position:"relative",display:"flex",flexDirection:"column"}},Lc.createElement(RI,{ref:"workspaceButtons",className:this.styleSheet.topMenu,styleSheet:_I},Lc.createElement("div",{ref:"optionButtonsTopLeft",className:this.styleSheet.optionButtons},Lc.createElement(Md,{ref:"uploadFileButton",className:"".concat(this.styleSheet.menuButton," file-upload-button"),label:Lc.T("Open file"),faIcon:"upload",style:{position:"relative",overflow:"hidden"},HTMLtitle:"Press "+(navigator.platform.match("Mac")?"Cmd":"Ctrl")+" + O to open file"},Lc.createElement(wg,{ref:"uploadFile",style:{position:"absolute",top:"0",right:"0",margin:"0",height:"200%",padding:"0",cursor:"pointer",opacity:"0",filter:"alpha(opacity=0)"}})),Lc.createElement(Gg,{ref:"programmingLanguageSelect",options:Bk.all(),className:this.styleSheet.menuSelect,style:{minWidth:"auto"}})),Lc.createElement("div",{style:{flex:1,overflow:"hidden",marginLeft:"-5px",marginRight:0}},Lc.createElement(UI,{ref:"saveFileStatusLabel",size:Dc.MEDIUM,className:this.styleSheet.menuSelect,style:{pointerEvents:"none",padding:"2px 5px",height:"initial",maxWidth:"fit-content",width:"-webkit-fill-available",textOverflow:"ellipsis",overflow:"inherit",marginBottom:"-13px"}})),Lc.createElement("div",{ref:"optionButtonsTopRight",className:this.styleSheet.optionButtons},Lc.createElement(Md,{label:Lc.T("Settings"),faIcon:"cog",ref:"settingsButton",className:this.styleSheet.menuButton}),Lc.createElement(Md,{label:Lc.T("Fullscreen"),faIcon:"expand",ref:"fullScreenButton",className:this.styleSheet.menuButton,HTMLtitle:"Press "+(navigator.platform.match("Mac")?"Cmd":"Ctrl")+" + Enter to enter/exit full screen"}))),Lc.createElement("div",{ref:"workspaceSettingsWindow",className:"hidden",style:{position:"absolute",zIndex:"2016",right:"0px",top:"40px",boxShadow:this.styleSheet.themeProperties.BASE_BOX_SHADOW}},Lc.createElement(VI,null)),Lc.createElement(ZI,l({ref:"codeEditor",style:{flex:1,height:"100%"}},this.codeEditorOptions))),Lc.createElement(jd,{ref:"bottomArea",className:this.styleSheet.tabSection,style:{zIndex:"20",width:"100%",right:"0",bottom:"0",height:"30%",display:"flex",flexDirection:"column"},minHeight:50},Lc.createElement(zI,{ref:"tabArea",className:"tabSection",panelClass:this.styleSheet.bottomTab,style:{flexGrow:"1",width:"100%",boxSizing:"border-box",fontSize:"9.5pt"},titleAreaClass:this.styleSheet.tabAreaTitleArea}))),Lc.createElement(RI,{styleSheet:_I,ref:"actionButtons"},Lc.createElement(Md,{ref:"expandTabAreaButton",faIcon:"chevron-up",label:Lc.T("Execution Details"),className:"".concat(this.styleSheet.menuButton," ").concat(this.styleSheet.expandedButton," ").concat(this.styleSheet.expandTabAreaButton)}),Lc.createElement("div",{style:{flex:1}}),Lc.createElement("div",{ref:"optionButtonsBottom",className:this.styleSheet.actionButtons})))]}}]),t}(Af(Lc.Element)))||CL,eN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"linkToParent",value:function(e){this.workspaceIDE=e}},{key:"refLink",value:function(e){return{parent:this,name:e}}}]),t}(Qu),tN=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.workspaceIDE.addListener("initDone",function(){n.panel=n.workspaceIDE.workspaceSettings,n.addUserSettingsListeners()}),n}return h(t,e),o(t,[{key:"addUserSettingsListeners",value:function(){var e=this;this.attachListener(rk.getCurrentUser(),"updateCustomSetting",function(t){e.dispatch(t.key,t.value)})}}],[{key:"pluginName",value:function(){return"SettingsManager"}}]),t}(eN);tN.priorityIndex=100;var nN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTranslation",value:function(){yk.get(this.translationKeyId)}}]),t}(fp),iN=function(e){function t(){return r(this,t),b(this,d(t).call(this,"ErrorMessage",nN))}return h(t,e),t}(mp),rN=new iN,aN={};aN.wrapError=function(e){return e instanceof fp?e:e.id?rN.fakeCreate(e):("string"==typeof e||e instanceof String?e={message:e}:e instanceof Error&&(e={name:e.name,message:e.message}),new nN(e))},aN.showErrorAlert=function(e){em.show({error:aN.wrapError(e)})},aN.PAGE_NOT_FOUND=aN.wrapError("Page not found.");var oN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"buildPublicUrl",value:function(){return location.origin+"/code/"+this.urlHash+"/"}},{key:"setPublic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au;if(this.isPublic)return void e();this.makePublic(e)}},{key:"makePublic",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au,n={customRunId:this.id,makePublic:!0};zu.postJSON("/eval/edit_custom_run/",n).then(function(n){e.isPublic=!0,e.urlHash=n.urlHash,t()},Au)}}]),t}(GT),sN=new(bp(mp))("customrun",oN,{fetchURL:"/eval/get_custom_run/",maxFetchObjectCount:1}),lN=function(){function e(){r(this,e)}return o(e,[{key:"showPopup",value:function(e,t){var n=this;this.popup=rw.create(document.body,{target:e,bodyPlaced:!0,children:this.constructor.getTextForDuration(t),arrowDirection:Mc.DOWN,style:{width:"200px"}});var i=setTimeout(function(){n.cancelInQueuePopup()},this.constructor.POPUP_HANGTIME);this.popup.addCleanupJob(function(){return clearTimeout(i)})}},{key:"scheduleInQueuePopup",value:function(e,t,n){var i=this;this.cancelInQueuePopup(),this.inQueuePopupTimeout=setTimeout(function(){i.showPopup(e,t),n&&n()},this.constructor.DELAY_BEFORE_POPUP)}},{key:"cancelInQueuePopup",value:function(){this.inQueuePopupTimeout&&(clearTimeout(this.inQueuePopupTimeout),delete this.inQueuePopupTimeout),this.popup&&(this.popup.destroyNode(),delete this.popup)}}],[{key:"getTextForDuration",value:function(e){return"Your submission was received. The estimated queue time is "+Ek.duration(1e3*e,{hours:!0,minutes:!0,seconds:!0,lastSeparator:" and "})+"."}}]),e}();lN.DELAY_BEFORE_POPUP=1e3,lN.POPUP_HANGTIME=4e3;var uN=new lN,cN=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,e));var i=e.tabArea,a=Object.assign({},n.workspaceIDE.codeEditorOptions,{className:"custom-height",style:{height:"100%"},fontSize:rk.getCurrentUser().getFileFontSize(),enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1});return i.appendChild(Lc.createElement(jd,{ref:n.refLink("inputEditorTab"),title:Lc.T("Input"),active:"true"},Lc.createElement(QI,l({ref:n.refLink("inputEditor")},a)))),i.appendChild(Lc.createElement(jd,{ref:n.refLink("outputEditorTab"),title:Lc.T("Output")},Lc.createElement(qI,l({ref:n.refLink("outputEditor")},a)))),i.appendChild(Lc.createElement(jd,{ref:n.refLink("stderrEditorTab"),title:Lc.T("Stderr")},Lc.createElement(qI,l({ref:n.refLink("stderrEditor")},a)))),i.appendChild(Lc.createElement(UT,{ref:n.refLink("compilationStatusTab"),style:{height:"100%"},title:Lc.T("Compilation")})),i.appendChild(Lc.createElement(zT,{ref:n.refLink("executionStatusTab"),style:{height:"100%"},title:Lc.T("Execution")})),n.workspace=e.workspace,n.workspaceIDE.optionButtonsBottom.appendChild(Lc.createElement("span",{ref:n.refLink("compilePopupContainer"),style:{position:"relative"}},Lc.createElement(Md,{ref:n.refLink("compileButton"),faIcon:"cogs",HTMLtitle:"Press "+(navigator.platform.match("Mac")?"Cmd":"Ctrl")+" + B to compile",className:FI.COMPILE,label:Lc.T("Compile")}))),n.workspaceIDE.optionButtonsBottom.appendChild(Lc.createElement("span",{ref:n.refLink("runInputPopupContainer"),style:{position:"relative"}},Lc.createElement(Md,{ref:n.refLink("runInputButton"),HTMLtitle:"Press "+(navigator.platform.match("Mac")?"Cmd":"Ctrl")+" + I to run input",faIcon:"play",label:Lc.T("Run input"),className:FI.RUN}))),n.compileButton.addClickListener(function(e){e.stopPropagation(),n.workspaceIDE.maximizeTabSection(),n.compileCode()}),n.runInputButton.addClickListener(function(e){n.workspaceIDE.maximizeTabSection(),e.stopPropagation(),n.runCode()}),n.inputEditor.setFile(n.workspace.getOrCreateFile(".stdin")),i.addListener("resize",function(){n.inputEditor.dispatch("resize"),n.outputEditor.dispatch("resize"),n.stderrEditor.dispatch("resize")}),n.exportFunctions(),cp.registerStream("workspacesession-"+n.workspace.userId+"-"+n.workspace.sessionId),sN.addCreateListener(function(e){n.compilationStatusTab.setCustomRun(e),n.executionStatusTab.setCustomRun(e)}),Ok.addListener("workspacesession-"+n.workspace.userId+"-"+n.workspace.sessionId,function(e){"started"===e.type?n.workspaceIDE.dispatch("compileStarted",e):"compile_status"===e.type?n.workspaceIDE.dispatch("compileStatus",e):"runResults"===e.type?n.workspaceIDE.dispatch("customRunTestResult",e):"finished"===e.type&&n.workspaceIDE.dispatch("customRunFinished",e),uN.cancelInQueuePopup()}),n.workspaceIDE.addListener("compileStarted",function(e){n.setCompilationStarted()}),n.workspaceIDE.addListener("compileStatus",function(e){n.setCompilationStatus(e.data)}),n.workspaceIDE.addListener("customRunTestResult",function(e){n.setCustomTestResult(e.data),n.stderrEditor.dispatch("resize")}),n.workspaceIDE.addListener("submissionRunFinished",function(e){n.enableSubmission()}),n.workspaceIDE.addListener("customRunTestResult",function(e){n.enableSubmissionDelayed()}),n.workspaceIDE.addListener("customRunFinished",function(e){n.enableSubmissionDelayed()}),Hu.Global.addListener("loadWorkspaceInput",function(e){n.inputEditor.setValue(e),n.inputEditorTab.show(),n.inputEditorTab.dispatch("show")}),n}return h(t,e),o(t,[{key:"setSubmissionDisabled",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.runInputButton.setEnabled(!e),this.compileButton.setEnabled(!e),this.workspaceIDE.getPlugin("ContestSubmit")&&t&&this.workspaceIDE.getPlugin("ContestSubmit").setSubmissionDisabled(e,!1)}},{key:"enableSubmission",value:function(){this.compileButton.setLabel(Lc.T("Compile")),this.compileButton.setLevel("info"),this.setSubmissionDisabled(!1)}},{key:"enableSubmissionDelayed",value:function(){var e=this;setTimeout(function(){e.enableSubmission()},200)}},{key:"submitCode",value:function(e,t){var n=this;this.setSubmissionDisabled(!0),console.log("Submitting file: ",e);var i=this.workspace.getBaseRequest();i.sourceCode=e.getValue(),i.programmingLanguageId=this.workspaceIDE.getPlugin("FileManager").getSelectedProgrammingLanguage().id,t?i.compileOnly=!0:i.customInput=this.getInputEditor().getValue(),this.workspaceIDE.options.contestTaskId&&(i.contestTaskId=this.workspaceIDE.options.contestTaskId),zu.postJSON("/eval/submit_custom_run/",i).then(function(e){var i=e.customRunId,r=sN.get(i);if(!r||!r.compileStarted){var a=n.runInputButton;t&&(a=n.compileButton),uN.scheduleInQueuePopup(a,e.estimatedWait,function(){n.enableSubmission()})}},function(e){aN.showErrorAlert("Error in compiling/running custom code:\n"+e.message),n.enableSubmission()})}},{key:"compileCode",value:function(){this.submitCode(this.workspaceIDE.codeEditor.getFile(),!0),this.compilationStatusTab.show(),this.compilationStatusTab.dispatch("show")}},{key:"runCode",value:function(){this.submitCode(this.workspaceIDE.codeEditor.getFile(),!1)}},{key:"getInputEditor",value:function(){return this.inputEditor}},{key:"exportFunctions",value:function(){this.workspaceIDE.getInputEditor=function(){return this.inputEditor}}},{key:"setCompilationStarted",value:function(){this.compileButton.setLevel("warning"),this.compileButton.setLabel(Lc.T("Compiling...")),this.setSubmissionDisabled(!0)}},{key:"setCompilationStatus",value:function(e){!0===e.compileOK?(this.compileButton.setLabel(Lc.T("Compiled")),this.compileButton.setLevel("success")):(this.compileButton.setLabel("Compilation error!"),
this.compileButton.setLevel("danger"),this.enableSubmissionDelayed(),this.compilationStatusTab.show(),this.compilationStatusTab.dispatch("show"))}},{key:"setCustomTestResult",value:function(e){e.hasOwnProperty("stderr")&&this.stderrEditor.setValue(e.stderr),e.results.terminationReason?(this.executionStatusTab.show(),this.executionStatusTab.dispatch("show")):(this.outputEditorTab.show(),this.outputEditorTab.dispatch("show")),this.outputEditor.setValue(e.stdout||"")}}],[{key:"pluginName",value:function(){return"CustomRun"}}]),t}(eN);cN.priorityIndex=500;var hN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"New contest"}},{key:"getActionName",value:function(){return"Create contest"}},{key:"getDefaultValues",value:function(){return{contestName:"",contestLongName:"",startDate:Mt()}}},{key:"getBody",value:function(){var e=this.getDefaultValues();return[Lc.createElement(Nb,{label:"Contest name"},Lc.createElement(vg,{placeholder:"Contest name",ref:"contestNameInput",value:e.contestName})),Lc.createElement(Nb,{label:"Contest long name"},Lc.createElement(vg,{placeholder:"Contest long name",ref:"contestLongNameInput",value:e.contestLongName})),Lc.createElement(Nb,{label:Lc.createElement(Lc.TextElement,{ref:this.refLink("timeTracker"),value:""})},Lc.createElement(iw,{ref:"startDatePicker",date:e.startDate})),Lc.createElement(Ib,{style:{borderBottom:"1px solid #ddd"}},Lc.createElement("h4",null,"Duration:"),Lc.createElement(Nb,{label:"Days"},Lc.createElement(yg,{ref:"daysInput",min:"0",value:e.durationDays})),Lc.createElement(Nb,{label:"Hours"},Lc.createElement(yg,{ref:"hoursInput",min:"0",value:e.durationHours})),Lc.createElement(Nb,{label:"Minutes"},Lc.createElement(yg,{ref:"minutesInput",min:"0",value:e.durationMinutes}))),Lc.createElement(Nb,{label:"Scoring"},Lc.createElement(Gg,{ref:"scoringSelect",options:Gk.all(),selected:Gk.get(e.scoringId)})),Lc.createElement(Nb,{label:"Visible"},Lc.createElement(Eg,{ref:"visibleCheckbox",checked:e.visible})),Lc.createElement(Nb,{label:"Rated"},Lc.createElement(Eg,{ref:"ratedCheckbox",checked:e.rated})),Lc.createElement(Nb,{label:"Public sources"},Lc.createElement(Eg,{ref:"publicSourcesCheckbox",checked:e.publicSources}))]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.intervalId=setInterval(function(){var t=yf.now().format("HH:mm:ss");e.timeTracker.setValue("Start/end date (Server time: ".concat(t,")"))},1e3)}},{key:"onUnmount",value:function(){clearInterval(this.intervalId)}},{key:"getRequest",value:function(){var e={contestName:this.contestNameInput.getValue(),contestLongName:this.contestLongNameInput.getValue(),isVisible:this.visibleCheckbox.getValue(),rated:this.ratedCheckbox.getValue(),publicSources:this.publicSourcesCheckbox.getValue(),scoringId:this.scoringSelect.get().id},t=this.startDatePicker.getDate();if(t){if(!t.isValid())return"datetime invalid";var n=Math.max(this.daysInput.getValue(),0)||0,i=Math.max(this.hoursInput.getValue(),0)||0,r=Math.max(this.minutesInput.getValue(),0)||0,a=t.clone().add({days:n,hours:i,minutes:r});e.startDate=t.unix(),e.endDate=a.unix()}return e.contestLongName?e:"Please provide the contest long name"}},{key:"getAjaxUrl",value:function(){return"/contest/add/"}},{key:"action",value:function(){var e=this,t=this.getRequest();if("string"==typeof t)return void alert(t);zu.postJSON(this.getAjaxUrl(),t).then(function(e){return window.location.replace("/contest/"+e.contestName+"/edit/")},function(t){return e.messageArea.showMessage(t.message,"red")})}}]),t}(Zg),dN=$g(hN),pN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"getVirtualContest",value:function(){return this.getContest().getVirtualContest()}},{key:"getTitle",value:function(){return Lc.createElement("h4",null,"Register for ",this.getVirtualContest().getName())}},{key:"getDefaultStartDate",value:function(){var e=yf.now().add({minutes:1}),t=3e5-e%3e5;return e.add(t,"milliseconds"),e}},{key:"getBody",value:function(){var e=this,t=null;return VS.all().find(function(t){return t.userId===USER.id&&t.getContest()&&t.getContest().getVirtualContest()===e.getVirtualContest()})&&(t=Lc.createElement("div",null,"Warning: You have another virtual participation for this contest. If you register, you will delete your past virtual participation.")),[Lc.createElement("label",{style:{display:"inline-block","padding-right":"8px"}},"Start date (",Lc.createElement("span",{ref:"timeTracker"}),")"),Lc.createElement(iw,{style:{display:"inline-block"},ref:"startDatePicker",date:Mt()}),t]}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getActionName",value:function(){return Lc.T("Register")}},{key:"action",value:function(){var e=this,t=this.startDatePicker.getDate(),n={contestId:this.getVirtualContest().id,startTime:t.unix()};zu.postJSON("/contest/register/",n).then(function(){nm.changeURL(["contest",e.getVirtualContest().name]),e.hide()})}},{key:"onMount",value:function(){var e=this,t=function(){var t=yf.now().format("HH:mm:ss");e.timeTracker.setChildren("Now "+t)};t(),this.timerId=setInterval(t,1e3)}},{key:"onUnmount",value:function(){clearInterval(this.timerId),delete this.timerId}}]),t}(Zg),fN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{level:Pc.PRIMARY,label:Lc.T("Virtual participation")}}}]),t}($g(pN)),gN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setColumns",value:function(){var e={textAlign:"right",width:"1%",verticalAlign:"middle"},n=[{value:function(e){return Lc.createElement(Xd,{href:"/contest/"+e.name,value:e.getName()})},headerName:Lc.T("Contest"),headerStyle:{verticalAlign:"middle"},cellStyle:{verticalAlign:"middle"}},{value:function(e){return e.getFormattedStartTime("DD/MM/YYYY, H:mm")},headerName:Lc.T("Start time"),headerStyle:{verticalAlign:"middle"},cellStyle:{verticalAlign:"middle"}},{value:function(e){return e.getFormattedDuration()},headerName:Lc.T("Duration"),headerStyle:{verticalAlign:"middle"},cellStyle:{verticalAllign:"middle"}}];USER.isAuthenticated&&this.options.displayRank&&n.push({value:function(e){var t=e.getUser(USER.id);return t?t.rank:"-"},headerName:Lc.T("Rank"),headerStyle:{verticalAlign:"middle"},cellStyle:e}),USER.isSuperUser&&this.options.displayEdit&&n.push({value:function(e){return Lc.createElement(Xd,{href:"/contest/"+e.name+"/edit/",value:Lc.T("Edit contest")})},headerName:"",headerStyle:{verticalAlign:"middle"},cellStyle:{verticalAllign:"middle"}}),this.options.displayVirtual&&n.push({value:function(e){return e.virtualContestId?Lc.createElement(fN,{modalOptions:{contest:e}}):null},headerName:"",headerStyle:{verticalAlign:"middle"},cellStyle:{verticalAllign:"middle"}}),w(d(t.prototype),"setColumns",this).call(this,n)}}]),t}(vb),mN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return this.options.contests.length?[Lc.createElement("h3",null,Lc.T("Running contests")),Lc.createElement(gN,{entries:this.options.contests,displayEdit:!0})]:[]}}]),t}(jd),vN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return this.options.contests.length?[Lc.createElement("h3",null,Lc.T("Future contests")),Lc.createElement(gN,{entries:this.options.contests,displayEdit:!0})]:[]}}]),t}(jd),yN=[{tabName:Lc.T("CSA Rounds"),displayRank:!0,displayVirtual:!0,check:function(e){for(var t=1;t<yN.length;t+=1)if(yN[t].check(e))return!1;return!0}},{tabName:Lc.T("CSA Hourly"),check:function(e){return e.systemGenerated}},{tabName:"IEEE",check:function(e){return-1!==e.longName.indexOf("IEEE")}}],bN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this,t=[],n=!0,i=!1,r=void 0;try{for(var a,o=yN[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var n=a.value,i=e.options.contests.filter(function(e){return n.check(e)});i.length&&t.push(Lc.createElement(jd,{title:Lc.createElement("h4",null,n.tabName)},Lc.createElement(gN,{entries:i,displayRank:n.displayRank,displayVirtual:n.displayVirtual})))}()}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return this.options.contests.length?[Lc.createElement("h3",null,Lc.T("Past contests")),Lc.createElement(Gb,null,t)]:[Lc.createElement("h3",null,Lc.T("Past contests")),Lc.createElement("h5",null,"No past contests")]}}]),t}(jd),kN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.MEDIUM)}},{key:"render",value:function(){var e,t=XS.all().filter(function(e){return e.getStartTime()&&e.getEndTime()&&!e.isVirtual()}),n=XS.all().filter(function(e){return e.isVirtual()&&e.getBaseContest().hasFinished()&&!e.hasFinished()});t=[].concat(C(t),C(n));var i=t.filter(function(e){return e.hasFinished()}).sort(function(e,t){return t.getEndTime()-e.getEndTime()}),r=t.filter(function(e){return e.isRunning()&&!e.systemGenerated}).sort(function(e,t){return e.getStartTime()-t.getStartTime()}),a=t.filter(function(e){return!e.hasStarted()&&!e.systemGenerated}).sort(function(e,t){return e.getStartTime()-t.getStartTime()});r.length&&(e=Lc.createElement(mN,{contests:r}));var o;return USER.isSuperUser&&(o=Lc.createElement(dN,{label:Lc.T("Create contest"),level:Pc.PRIMARY})),[o,Lc.createElement("h2",null,Lc.T("Available contests"),":"),e,Lc.createElement(vN,{contests:a}),Lc.createElement(bN,{contests:i})]}}]),t}(jd),wN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setEvalJob",value:function(e){var t=this;this.listenerHandler&&(this.listenerHandler.cleanup(),delete this.listenerHandler),this.setChildren(Lc.createElement(PL,{evalJob:e,examplesOnly:!0,key:Math.random()})),this.listenerHandler=e.addUpdateListener(function(){e.exampleTests.length>0&&0===e.tests.length&&t.dispatch("show")}),this.show()}}]),t}(jd),EN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=[Lc.createElement(Ld,l({ref:"resultsProgressBar"},this.getRunProgress()))];return this.evalJob&&e.push(Lc.createElement(PL,{evalJob:this.evalJob,key:Math.random()})),e}},{key:"setEvalJob",value:function(e){var t=this;this.listenerHandler&&(this.listenerHandler.cleanup(),delete this.listenerHandler),this.evalJob=e,this.evalJob?(this.listenerHandler=this.evalJob.addUpdateListener(function(e){t.updateEvalJobStatus(e),t.evalJob.tests.length>0&&t.dispatch("show")}),this.resultsProgressBar.updateOptions(this.getRunProgress()),this.redraw()):this.resultsProgressBar.updateOptions({level:Pc.PRIMARY})}},{key:"updateEvalJobStatus",value:function(){this.show(),this.resultsProgressBar.updateOptions(this.getRunProgress())}},{key:"getRunProgress",value:function(){if(!this.evalJob)return{};var e={},t=this.getTestResults(),n=this.evalJob.getStatus(),i=this.options.evalTask.numSystemTests;this.options.evalTask.exampleTests&&(i+=this.options.evalTask.exampleTests.length),e.value=t.length/i;for(var r=0,a=0,o=0;o<t.length;o+=1)r=Math.max(r,t[o].cpuTime||0),a=Math.max(a,t[o].memUsage||0);var s="("+Ek.cpuTime(r)+" - "+Ek.memory(a)+")";if(n===jT.Status.RUNNING?(e.active=!0,e.striped=!0,t.length>0?e.label="Successfully done "+t.length+" tests"+s:e.label="Running"):(e.value=0,e.active=!1,e.striped=!1,e.disableSmoothTransision=!0),n===jT.Status.DONE){var l=this.evalJob.getResultStatus();if(e.value=1,this.evalJob.hasCompileError())e.level=Pc.WARNING,e.label="Compilation Error";else if(this.evalJob.hasInternalJudgeError())e.level=Pc.DANGER,e.label="Internal Judge Error!";else if(this.evalJob.hasPartialScoring()){var u=this.evalJob.score;e.label="Score: "+Ek.truncate(100*u,2)+"/100 "+s,e.level=1==u?Pc.SUCCESS:Pc.WARNING}else{var c=this.evalJob.getLastTest(),h=new Map([[jT.ResultStatus.ACCEPTED,"Accepted "+s],[jT.ResultStatus.WRONG_ANSWER,c.message+" on test "+c.testNumber],[jT.ResultStatus.TIME_LIMIT_EXCEEDED,"Time Limit Exceeded"],[jT.ResultStatus.MEMORY_LIMIT_EXCEEDED,"Memory Limit Exceeded"],[jT.ResultStatus.RUNTIME_ERROR,"Runtime Error"],[jT.ResultStatus.KILLED_BY_SIGNAL,c.message]]);e.level=l===jT.ResultStatus.ACCEPTED?Pc.SUCCESS:Pc.DANGER,e.label=h.get(l)}}return e}},{key:"getTestResults",value:function(){return this.evalJob?this.evalJob.exampleTests.concat(this.evalJob.tests):[]}}]),t}(jd),SN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this;return[Lc.createElement("h3",null,"The contest is not currently running."),Lc.createElement(fN,{modalOptions:{contest:this.options.contest}}),Lc.createElement(Md,{label:Lc.T("Submit in ".concat(this.options.archiveName)),style:{margin:"20px"},level:Pc.PRIMARY,onClick:function(){e.options.parent.submitCode(e.options.onlyExamples,e.options.archiveTaskId),e.hide()}}),Lc.createElement(Xd,{style:{margin:"20px"},href:"/contest/".concat(this.options.archiveUrl,"/task/")+this.options.evalTask.urlName,value:Lc.T("Open task in ".concat(this.options.archiveName))}),Lc.createElement("div",null,Lc.createElement(Nb,{label:"Always submit in archive"},Lc.createElement(Eg,{ref:"disableCheckbox"})))]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.disableCheckbox.addChangeListener(function(){e.options.parent.contestNotRunningModalDisabled=!e.options.parent.contestNotRunningModalDisabled})}},{key:"hide",value:function(){this.options.parent.setSubmissionDisabled(!1),w(d(t.prototype),"hide",this).call(this)}}]),t}(Qg),CN=new Uu("/eval/submit_evaljob/"),xN=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,e));var i=e.tabArea;return n.workspace=n.workspaceIDE.workspace,n.contestTask=zS.get(n.workspaceIDE.options.contestTaskId),n.evalTask=n.contestTask.getEvalTask(),n.contest=n.contestTask.getContest(),i.appendChild(Lc.createElement(wN,{ref:n.refLink("examplesTab"),title:Lc.T("Examples"),evalTask:n.evalTask})),i.appendChild(Lc.createElement(EN,{ref:n.refLink("submissionTab"),title:Lc.T("Submission"),evalTask:n.evalTask})),n.workspaceIDE.optionButtonsBottom.appendChild(Lc.createElement("span",{ref:n.refLink("runExamplesPopupContainer"),style:{position:"relative"}},Lc.createElement(Md,{ref:n.refLink("runExamplesButton"),HTMLtitle:"Press "+(navigator.platform.match("Mac")?"Cmd":"Ctrl")+" + E to run examples",className:FI.RUN,faIcon:"check",label:Lc.T("Run examples")}))),n.workspaceIDE.optionButtonsBottom.appendChild(Lc.createElement("span",{ref:n.refLink("submitPopupContainer"),style:{position:"relative"}},Lc.createElement(Md,{ref:n.refLink("submitButton"),HTMLtitle:"Press "+(navigator.platform.match("Mac")?"Cmd":"Ctrl")+" + U to submit",className:FI.SUBMIT,faIcon:"paper-plane",label:Lc.T("Submit")}))),n.submitButton.addClickListener(function(e){e.stopPropagation(),n.submitCode(),n.workspaceIDE.maximizeTabSection()}),n.runExamplesButton.addClickListener(function(){n.examplesTab.show(),n.examplesTab.dispatch("show"),n.submitCode(!0),n.workspaceIDE.maximizeTabSection()}),TL.addCreateListener(function(e){e.statusStream.endsWith(n.workspace.sessionId)&&n.setEvalJob(e)}),n.workspaceIDE.addListener("submissionStarted",function(e){n.setSubmissionDisabled(!0),uN.cancelInQueuePopup()}),n.workspaceIDE.addListener("submissionRunFinished",function(e){n.setSubmissionDisabled(!1)}),Hu.Global.addListener("loadEvalJobSource",function(e){var t=e.evalJob;if(t.contestTaskId==n.contestTask.id){var i=e.evalJob.getProgrammingLanguage();n.workspaceIDE.getPlugin("FileManager").updateProgrammingLanguage(i),n.workspaceIDE.codeEditor.setValue(t.sourceText,!0),n.workspaceIDE.resizeCodeEditor(),Hu.Global.dispatch("finishedLoadEvalJobSource")}}),n}return h(t,e),o(t,[{key:"setSubmissionDisabled",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.submitButton.setEnabled(!e),this.runExamplesButton.setEnabled(!e),this.workspaceIDE.getPlugin("CustomRun")&&t&&this.workspaceIDE.getPlugin("CustomRun").setSubmissionDisabled(e,!1)}},{key:"showContestNotRunningModal",value:function(e,t,n,i){this.contestNotRunningModalDisabled?this.submitCode(i,e):SN.show({archiveTaskId:e,archiveUrl:t,archiveName:n,contest:this.contest,evalTask:this.evalTask,overflow:"auto",parent:this,onlyExamples:i,fillScreen:!0})}},{key:"getAjaxHandler",value:function(){return this.ajaxHandler||CN}},{key:"setAjaxHandler",value:function(e){this.ajaxHandler=e}},{key:"submitCode",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=this.workspaceIDE.codeEditor.getFile(),r=this.workspace.getBaseRequest();r.contestTaskId=-1===n?this.contestTask.id:n,r.sourceCode=i.getValue(),r.programmingLanguageId=this.workspaceIDE.getPlugin("FileManager").getSelectedProgrammingLanguage().id,e&&(r.onlyExamples=!0),this.resetStatus(),this.setSubmissionDisabled(!0),this.getAjaxHandler().postJSON(r).then(function(n){var i=n.evalJobId,r=TL.get(i);if(!r||!r.compileStarted){var a=t.submitButton;e&&(a=t.runExamplesButton),uN.scheduleInQueuePopup(a,n.estimatedWait,function(){t.setSubmissionDisabled(!1)})}},function(n){"The contest is not running"===n.message&&n.archiveTask?(zS.fakeCreate(n.archiveTask,"create"),t.showContestNotRunningModal(n.archiveTask.id,n.archiveUrl,n.archiveName,e)):(aN.showErrorAlert("Error in submitting code:\n"+n.message),t.setSubmissionDisabled(!1))})}},{key:"setEvalJob",value:function(e){var t=this;this.examplesTab.setEvalJob(e),this.workspaceIDE.getPlugin("CustomRun").compilationStatusTab.setCustomRun(e),e.onlyExamples||this.submissionTab.setEvalJob(e),e.addUpdateListener(function(e){"started"===e.type?(t.workspaceIDE.dispatch("compileStarted",e),t.workspaceIDE.dispatch("submissionStarted",e)):"compile_status"===e.type?(t.workspaceIDE.dispatch("compileStatus",e),e.data.compileOK||t.setSubmissionDisabled(!1)):"test_results"===e.type?t.workspaceIDE.dispatch("submissionTestResult",e):"finished"===e.type&&t.workspaceIDE.dispatch("submissionRunFinished",e)})}},{key:"resetStatus",value:function(){this.submissionTab.setEvalJob(null),this.resultsProgressBar=this.submissionTab.resultsProgressBar,this.resultsProgressBar.striped=!0,this.resultsProgressBar.active=!0,this.resultsProgressBar.value=0,this.numTests=0,this.numTestsDone=0,this.currentTest=0,this.worstCPU=0,this.worstMemory=0}}],[{key:"pluginName",value:function(){return"ContestSubmit"}}]),t}(eN);xN.priorityIndex=600;var TN=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.workspace=e.workspace,cp.registerStream(n.workspace.streamName()),n.workspace.addListener("updateExternal",function(e){console.log("Workspace update event data: ",e)}),n.undoManagers=new Map,n.programmingLanguageSelect=n.workspaceIDE.programmingLanguageSelect,n.changeFileCallback=function(){n.updateProgrammingLanguage(n.programmingLanguageSelect.get())},n.programmingLanguageSelect.addChangeListener(n.changeFileCallback),n.loadFiles(),n}return h(t,e),o(t,[{key:"updateUndoManager",value:function(e){if(!this.undoManagers.has(e)){var t=window.ace.require("ace/undomanager").UndoManager;this.undoManagers.set(e,new t)}this.workspaceIDE.codeEditor.setUndoManager(this.undoManagers.get(e))}},{key:"updateProgrammingLanguage",value:function(e){var t,n=this.getLanguageAndCode(e),i=S(n,2);e=i[0],t=i[1],e!==this.getSelectedProgrammingLanguage()&&this.setSelectedProgrammingLanguage(e);var r=this.workspace.getOrCreateFileForLanguage(e,t);this.setIDEOpenFile(r,e),this.workspaceIDE.dispatch("changeLanguage",e)}},{key:"getSelectedProgrammingLanguage",value:function(){return this.programmingLanguageSelect.get()}},{key:"setSelectedProgrammingLanguage",value:function(e){this.programmingLanguageSelect.set(e)}},{key:"setIDEOpenFile",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=t||Bk.getLanguageForFileName(e.getName()),this.workspaceIDE.saveFileStatusLabel.setFile(e),this.workspaceIDE.codeEditor.setFile(e),this.workspaceIDE.codeEditor.setAceMode(t),n&&this.setSelectedProgrammingLanguage(t),this.updateUndoManager(e)}},{key:"getLanguageAndCode",value:function(e){var t;if(this.workspaceIDE.options.contestTaskId){var n=zS.get(this.workspaceIDE.options.contestTaskId).getEvalTask();n.hasEnforcedTemplates()&&n.getTemplate(e)?t=n.getTemplate(e):n.hasEnforcedTemplates()&&(t=e.getDefaultTemplateComment()+e.getDefaultSource())}return[e,t]}},{key:"getDefaultFile",value:function(){var e=this.workspace,t=null,n=!0,i=!1,r=void 0;try{for(var a,o=e.files.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;!s.name.startsWith(".")&&(null==t||s.serverLastSaved>t.serverLastSaved)&&(t=s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}if(t)return t;var l=Bk.getDefaultLanguage();return e.getOrCreateFileForLanguage.apply(e,C(this.getLanguageAndCode(l)))}},{key:"loadFiles",value:function(){this.setIDEOpenFile(this.getDefaultFile())}}],[{key:"pluginName",value:function(){return"FileManager"}}]),t}(eN);TN.priorityIndex=200;var AN=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,e,"CompilerParser"));var i=Bk.get(1),a=Bk.get(2),o=Bk.get(3),s=Bk.get(4);i.compilerParser=function(){var e={};return e.getCompilerAnnotations=function(e){var t=[];return e.split("\n").forEach(function(e){var n=e.match(/Main.cpp:(\d*)\:(\d*):\s*\w* (\w+): (.*)/);null!=n&&t.push({row:parseInt(n[1])-1,column:n[2],type:n[3],text:n[4]})}),t},e}(),a.compilerParser=function(){var e={};return e.getCompilerAnnotations=function(e){var t=[];return e.split("\n").forEach(function(e){var n=e.match(/Main.java:(\d*)\:\s*\w* (\w+): (.*)/);null!=n&&t.push({row:parseInt(n[1])-1,column:1,type:n[2],text:n[3]})}),t},e}(),o.compilerParser=function(){var e={};return e.getCompilerAnnotations=function(e){var t=[],n=e.match(/File "Main.py", line (\d*)\n.*\n.*\n.*\: (.*)/);if(null!=n)return t.push({row:parseInt(n[1])-1,column:1,type:"error",text:n[2]}),t},e}(),s.compilerParser=function(){var e={};return e.getCompilerAnnotations=function(e){var t=[],n=e.match(/File "Main.py", line (\d*)\n.*\n.*\n.*\: (.*)/);if(null!=n)return t.push({row:parseInt(n[1])-1,column:1,type:"error",text:n[2]}),t},e}();var l=!0,u=!1,c=void 0;try{for(var h,p=Bk.all()[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var f=h.value;f.compilerParser||(f.compilerParser=function(){var e={};return e.getCompilerAnnotations=function(e){return[]},e}())}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}return n.workspaceIDE.addListener("compileStatus",function(e){var t=n.workspaceIDE.getPlugin("FileManager").getSelectedProgrammingLanguage();n.workspaceIDE.codeEditor.setAnnotations(t.compilerParser.getCompilerAnnotations(e.data.compilerMessage))}),n}return h(t,e),t}(eN);AN.priorityIndex=800;var LN=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e,"KeymapManager")),n.keyboardShortcutsHandler=function(e){if(document.body.contains(n.workspaceIDE.node)&&(e.keyCode,e.ctrlKey||e.metaKey)){var t,i,r;switch(i=e.ctrlKey?"Ctrl":"Cmd",13===e.which&&(e.preventDefault(),(t=n.workspaceIDE.fullScreenButton)&&t.node.click()),String.fromCharCode(e.which).toLowerCase()){case"s":e.preventDefault(),n.workspaceIDE.workspace.saveAllFiles();break;case"b":e.preventDefault(),r=n.workspaceIDE.getPlugin("CustomRun"),r&&r.compileButton.node.click();break;case"o":e.preventDefault(),n.workspaceIDE.uploadFile.node.click();break;case"i":e.preventDefault(),r=n.workspaceIDE.getPlugin("CustomRun"),r&&r.runInputButton.node.click();break;case"u":e.preventDefault(),r=n.workspaceIDE.getPlugin("ContestSubmit"),r&&r.submitButton.node.click();break;case"e":e.preventDefault(),r=n.workspaceIDE.getPlugin("ContestSubmit"),r&&(console.log(i+"+E pressed, running examples"),r.runExamplesButton.node.click());break;case"m":e.preventDefault(),t=n.workspaceIDE.toggleTabAreaButton,t&&t.node.click()}}},window.addEventListener("keydown",n.keyboardShortcutsHandler),n}return h(t,e),o(t,[{key:"register",value:function(e,t){}},{key:"unregister",value:function(e,t){}}]),t}(eN);LN.priorityIndex=700;var IN=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.workspace=e.workspace,n.workspaceIDE.optionButtonsTopLeft.insertChild(Lc.createElement(Md,{ref:n.refLink("shareButton"),faIcon:"share-square-o",HTMLtitle:"Click to share the code",className:n.workspaceIDE.styleSheet.menuButton,label:Lc.T("Share")}),0),n.workspaceIDE.codeEditor.file.addListener("userChanged",function(){n.customRun=void 0,n.popup&&n.popup.hide(),delete n.popup}),n.workspaceIDE.addListener("compileStarted",function(){n.popup&&n.popup.hide(),delete n.popup}),n.workspaceIDE.addListener("customRunFinished",function(e){"customrun"===e.objectType&&(n.customRun=sN.get(e.objectId),n.popup&&n.popup.hide(),delete n.popup)}),n.shareButton.addClickListener(function(e){e.stopPropagation(),n.togglePopup()}),n}return h(t,e),o(t,[{key:"getPopupContent",value:function(){var e=this,t=function(){return[Lc.createElement(Xd,{ref:e.refLink("popupUrl"),newTab:!0,href:e.customRun.buildPublicUrl(),value:e.customRun.buildPublicUrl()}),Lc.createElement(Md,{ref:e.refLink("copyUrlButton"),size:Dc.SMALL,onClick:function(){return e.copyUrl()},style:{marginLeft:"5px"},level:Pc.DEFAULT,faIcon:"files-o",label:Lc.T("Copy")})]},n=function(){e.popup.setContent(t()),e.popup.bindInsideParent()};return this.customRun?this.customRun&&!this.customRun.isPublic?(this.customRun.setPublic(n),Lc.createElement(kf,{icon:"spinner fa-spin"})):t():(this.createCustomRun(n),Lc.createElement(kf,{icon:"spinner fa-spin"}))}},{key:"createCustomRun",value:function(e){var t=this,n=this.workspaceIDE.codeEditor.getFile(),i=this.workspace.getBaseRequest();i.sourceCode=n.getValue(),i.programmingLanguageId=this.workspaceIDE.getPlugin("FileManager").getSelectedProgrammingLanguage().id,zu.postJSON("/eval/create_share_custom_run/",i).then(function(n){t.customRun=sN.get(n.customRunId),e()})}},{key:"copyUrl",value:function(){window.getSelection().removeAllRanges();var e=document.createRange();e.selectNode(this.popupUrl.node),window.getSelection().addRange(e);var t;try{t=document.execCommand("copy");var n=t?"successful":"unsuccessful";console.log("Copy command was "+n)}catch(e){t=!1,console.log("Oops, unable to copy")}t||(this.copyUrlButton.hide(),this.popup.bindInsideParent()),window.getSelection().removeAllRanges()}},{key:"togglePopup",value:function(){if(this.popup&&this.popup.isInDocument())return this.popup.hide(),void delete this.popup;this.popup=rw.create(document.body,{target:this.shareButton,children:this.getPopupContent(),arrowDirection:Mc.UP,bodyPlaced:!0})}}],[{key:"pluginName",value:function(){return"Share"}}]),t}(eN);IN.priorityIndex=300;var NN,ON,RN,MN,PN=(NN=MN=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"readOnly",ON,y(n)),O(n,"firstLine",RN,y(n)),n}return h(t,e),o(t,null,[{key:"getCollapsedClassName",value:function(){return[this.getInstance().firstLine,"fa","fa-caret-right"]}},{key:"getUncollapsedClassName",value:function(){return[this.getInstance().firstLine,"fa","fa-caret-down"]}}]),t}(Jc),ON=R(NN.prototype,"readOnly",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"background-color":"#630707",opacity:"0.2",position:"absolute","z-index":"10","border-radius":"0"}}}),RN=R(NN.prototype,"firstLine",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{":before":{"margin-right":"7px",font:"normal normal normal 14px/1 FontAwesome","font-size":"1.1em"},"margin-left":"-7px",font:"inherit"}}}),NN),DN=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,e));for(var i=n.workspaceIDE.codeEditor.getValue();-1!==i.indexOf("\r");)i=i.replace("\r","");if(n.workspaceIDE.codeEditor.setValue(i),!zS.get(n.workspaceIDE.options.contestTaskId).getEvalTask().hasEnforcedTemplates())return b(n);n.markers=[],n.ranges=[],n.workspace=e.workspace,n.programmingLanguageSelect=n.workspaceIDE.programmingLanguageSelect;var a=function(){n.updateTemplate(n.programmingLanguageSelect.get())?n.updateAceMethods():n.undoUpdateAceMethods(),n.updateGutter()};n.programmingLanguageSelect.addChangeListener(function(){a()}),Hu.Global.addListener("finishedLoadEvalJobSource",function(){a()}),n.workspaceIDE.addListener("finishedFileUpload",function(){a()});var o=window.ace.require("ace/undomanager").UndoManager,s=o.prototype.undo;o.prototype.undo=function(){var e=s.call.apply(s,[this].concat(Array.prototype.slice.call(arguments)));return e&&a(),e};var l=o.prototype.redo;o.prototype.redo=function(){var e=l.call.apply(l,[this].concat(Array.prototype.slice.call(arguments)));return e&&a(),e},a();var u=n.workspaceIDE.codeEditor.ace;return n.lastCursorPosition=n.currentCursorPosition=u.selection.getCursor(),n.lineCount=0,u.on("change",function(){n.updateGutter()}),u.selection.on("changeCursor",function(){n.lastCursorPosition=n.currentCursorPosition,n.currentCursorPosition=u.selection.getCursor()}),n.workspaceIDE.resetTemplateButton=Lc.createElement(Md,{className:n.workspaceIDE.styleSheet.menuButton,label:"Load template",faIcon:"refresh",style:{display:"inline-block"},onClick:function(){return n.resetTemplate()}}),n.workspaceIDE.resetTemplateButton.mount(n.workspaceIDE.optionButtonsTopRight,n.workspaceIDE.settingsButton.node),n}return h(t,e),o(t,[{key:"undoUpdateAceMethods",value:function(){if(this.updatedAceMethods){var e=this.workspaceIDE.codeEditor,t=e.ace,n=this.session;e.removeNodeListener("keypress",this.keyPressCallback),t.$tryReplace=t.old$tryReplace,n.insert=n.oldInsert,n.remove=n.oldRemove,n.moveTest=n.oldMoveText,n.off("changeFold",this.changeFoldCallback),t.off("gutterclick",this.gutterClickCallback);var i=window.ace.require("ace/mode/text").Mode;i.prototype.toggleCommentLines=i.prototype.oldToggleCommentLines,this.updatedAceMethods=!1}}},{key:"updateAceMethods",value:function(){var e=this;if(!this.updatedAceMethods){var t=this.workspaceIDE.codeEditor,n=t.ace,i=this.session;this.keyPressCallback=function(t){var i=n.getCursorPosition(),r=!0,a=!1,s=void 0;try{for(var l,u=e.ranges[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;if(o(c,i))return t.preventDefault(),void t.stopPropagation()}}catch(e){a=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw s}}},t.addNodeListener("keypress",this.keyPressCallback);var r=function(e,t){var n=e.start;return t.row<n.row||t.row==n.row&&t.column<=n.column},a=function(e,t){var n=e.end;return t.row>n.row||t.row==n.row&&t.column>=n.column},o=function(e,t){return!r(e,t)&&!a(e,t)},s=function(e,t){return o(e,t.start)||o(e,t.end)||o(t,e.start)||o(t,e.end)},l=function(e,t,n){return e.row===t.start.row&&e.column===t.start.column&&n.row===t.end.row&&n.column===t.end.column},u=this;n.old$tryReplace=n.$tryReplace,n.$tryReplace=function(e){var t=!0,i=!1,r=void 0;try{for(var a,o=u.ranges[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;if(s(l,e))return null}}catch(e){i=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(i)throw r}}return n.old$tryReplace.apply(n,arguments)},i.oldInsert=i.insert,i.insert=function(e,t){var n=!0,s=!0,l=!0,c=!1,h=void 0;try{for(var d,p=u.ranges[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;if(o(f,e)||0===e.column&&e.row===f.start.row)return;r(f,e)&&(n=!1),a(f,e)&&(s=!1)}}catch(e){c=!0,h=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw h}}if(!n&&!s)return i.oldInsert.apply(i,arguments)},i.oldRemove=i.remove,i.remove=function(e){var t=!0,n=!1,r=void 0
;try{for(var a,o=u.ranges[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var c=a.value;if(s(c,e)||e.end.row===c.start.row)return!1}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}for(var h=0;h<u.ranges.length-1;h+=1)if(l(u.ranges[h].end,e,u.ranges[h+1].start))return!1;return i.oldRemove.apply(i,arguments)},i.oldMoveText=i.moveText,i.moveText=function(e,t,n){var r=!0,a=!1,l=void 0;try{for(var c,h=u.ranges[Symbol.iterator]();!(r=(c=h.next()).done);r=!0){var d=c.value;if(s(d,e)||o(d,t))return e}}catch(e){a=!0,l=e}finally{try{r||null==h.return||h.return()}finally{if(a)throw l}}return i.oldMoveText.apply(i,arguments)},this.changeFoldCallback=function(n){if(n.data&&""!==t.getValue()&&"remove"===n.action)for(var r=0;r<e.folds.length;r+=1)if(n.data===e.folds[r]){e.folds[r]={isFolded:!1},Dt(i,e.ranges[r]),e.updateGutter();break}},i.on("changeFold",this.changeFoldCallback),this.gutterClickCallback=function(t){for(var r=t.getDocumentPosition().row,a=0;a<e.ranges.length;a+=1)if(e.ranges[a].start.row===r&&e.folds[a])if(n.selection.clearSelection(),n.selection.moveCursorTo(e.lastCursorPosition.row,e.lastCursorPosition.column),e.folds[a].isFolded)i.removeFold(e.folds[a]);else if(!e.folds[a].isFolded){var o=window.ace.require("ace/range").Range;e.folds[a]=i.addFold("...",new o(e.ranges[a].start.row,e.ranges[a].start.column,e.ranges[a].end.row-1,1e4)),e.folds[a].isFolded=!0,Bt(i,e.ranges[a])}},n.on("gutterclick",this.gutterClickCallback);var c=window.ace.require("ace/mode/text").Mode;c.prototype.oldToggleCommentLines=c.prototype.toggleCommentLines,c.prototype.toggleCommentLines=function(e,t,n,i){var r=u.programmingLanguageSelect.get(),a=zS.get(u.workspaceIDE.options.contestTaskId),o=a.getEvalTask(),s=o.enforcedTemplates[r.id]||[],l=_t(s,u.workspaceIDE.codeEditor.getValue()),c=!0,h=!1,d=void 0;try{for(var p,f=l[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var g=p.value;if(g.start.row<=n&&n<g.end.row)return;if(g.start.row<=i&&i<g.end.row)return}}catch(e){h=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(h)throw d}}this.oldToggleCommentLines(e,t,n,i)},this.updatedAceMethods=!0}}},{key:"updateGutter",value:function(){if(this.workspaceIDE.codeEditor.getValue()){this.lineCount=Math.max(this.lineCount,this.session.doc.getLength());for(var e=0;e<=this.lineCount;e+=1)Pt(this.session,e);for(var t=0;t<(this.ranges||[]).length;t+=1)this.folds[t]&&this.folds[t].isFolded?Bt(this.session,this.ranges[t]):this.folds[t]&&Dt(this.session,this.ranges[t])}}},{key:"updateTemplate",value:function(e){var t,n=this.workspaceIDE.codeEditor,i=n.ace;this.session=t=i.getSession();var r=n.getValue(),a=zS.get(this.workspaceIDE.options.contestTaskId),o=a.getEvalTask(),s=o.enforcedTemplates[e.id]||[],l=!0,u=!1,c=void 0;try{for(var h,d=this.markers[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;t.removeMarker(p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}this.markers=[];var f=!0,g=!1,m=void 0;try{for(var v,y=(this.folds||[])[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value;b&&b.isFolded&&t.removeFold(b)}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}if(this.folds=[],o.getTemplate(e))return this.ranges=Ft(s,r,this.markers,this.folds,t,!0),this.ranges&&this.updateGutter(),!!this.ranges}},{key:"resetTemplate",value:function(){var e=this.programmingLanguageSelect.get(),t=zS.get(this.workspaceIDE.options.contestTaskId),n=t.getEvalTask();if(n.hasEnforcedTemplates()&&n.getTemplate(e)){this.workspaceIDE.codeEditor.setValue(n.getTemplate(e),1);this.updateTemplate(e)?this.updateAceMethods():this.undoUpdateAceMethods()}else this.workspaceIDE.codeEditor.setValue(e.getDefaultTemplateComment()+e.getDefaultSource())}}]),t}(eN);DN.priorityIndex=400;var BN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Confirm"}},{key:"getBody",value:function(){return[Lc.createElement("span",null,"Are you sure you want to remove file ",Lc.createElement("em",null,this.options.file.name)," from the workspace?")]}},{key:"getCloseName",value:function(){return"Cancel"}},{key:"action",value:function(){var e=this;zu.postJSON("/workspace/delete_workspace_file/",{fileId:this.options.file.id}).then(function(){iC.applyDeleteEvent({objectId:e.options.file.id}),iC.dispatch("changedFile"),e.hide()})}}]),t}(Zg),_N=$g(BN),FN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(_N,{faIcon:"minus",level:Pc.DANGER,ref:"destroyButton",size:Dc.EXTRA_SMALL,style:{margin:"5px"},modalOptions:{file:this.options.file,title:"Destroy file"}}),Lc.createElement(Md,{faIcon:"pencil",level:Pc.PRIMARY,ref:"editButton",size:Dc.EXTRA_SMALL,style:{margin:"5px"}}),Lc.createElement("span",{ref:"nameSpan"},this.options.file.name),Lc.createElement(vg,{ref:"fileNameInput",className:"hidden",style:{"padding-left":"5px"}})]}},{key:"setFileName",value:function(e){var t=this;zu.postJSON("/workspace/rename_workspace_file/",{fileId:this.options.file.id,fileName:e}).then(function(){iC.dispatch("changedFile"),t.redraw()})}},{key:"onMount",value:function(){var e=this;this.fileNameInput.addNodeListener("keypress",function(t){13===t.keyCode&&(t.preventDefault(),e.setFileName(e.fileNameInput.getValue()))}),this.editButton.addClickListener(function(){e.nameSpan.addClass("hidden"),e.fileNameInput.removeClass("hidden"),e.fileNameInput.setValue(e.options.file.name),e.fileNameInput.node.focus(),e.fileNameInput.node.select()})}}]),t}(Lc.Element),UN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement("div",{style:{display:"inline-block","margin-right":"10px"}},"File Name:"),Lc.createElement(vg,{placeholder:"Main1.cpp",ref:"fileNameInput",style:{"padding-left":"5px"}})]}},{key:"getActionName",value:function(){return"Add"}},{key:"action",value:function(){var e=this;zu.postJSON("/workspace/create_workspace_file/",{fileName:this.fileNameInput.getValue(),workspaceId:this.options.workspaceId}).then(function(){return e.hide()})}}]),t}(Zg),zN=$g(UN),WN=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Files"}},{key:"getFiles",value:function(){return this.options.workspace.getFiles().filter(function(e){return!e.getName().startsWith(".")})}},{key:"render",value:function(){var e=[Lc.createElement(zN,{faIcon:"plus",ref:"addFileButton",style:{margin:"5px"},level:Pc.SUCCESS,size:Dc.EXTRA_SMALL,modalOptions:{title:"Add file to workspace "+this.options.workspace.name,workspaceId:this.options.workspace.id}})],t=!0,n=!1,i=void 0;try{for(var r,a=this.getFiles()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(Lc.createElement(FN,{file:o,ref:"file"+o.id}))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"onMount",value:function(){var e=this,t=function(){e.redraw(),e.options.fileSelect.options.selected=e.options.fileSelect.get(),e.options.fileSelect.options.options=e.getFiles(),e.options.fileSelect.redraw()};iC.addListener("changedFile",t),this.options.workspace.addListener("newFile",t),this.options.workspace.addListener("removedFile",t)}}]),t}(jd),HN=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,e)),n.workspace=e.workspace;var i=e.getPlugin("FileManager"),a=n.workspaceIDE.programmingLanguageSelect;return a.removeNodeListener("change",i.changeFileCallback),a.options.options=n.workspace.getFiles().filter(function(e){return"."!==e.getName()[0]}),a.options.selected=i.getDefaultFile(),a.redraw(),a.addChangeListener(function(){var e=a.get();i.setIDEOpenFile(e,Bk.getLanguageForFileName(e.getName()),!1)}),e.tabArea.appendChild(Lc.createElement(WN,{workspace:n.workspace,fileSelect:a})),n}return h(t,e),t}(eN);HN.priorityIndex=1e3;var VN={};VN.BASE=[tN,TN,cN,LN,AN],VN.CHECKER=[].concat(C(VN.BASE),[HN]),VN.GLOBAL=[].concat(C(VN.BASE),[IN]),VN.CONTEST=[].concat(C(VN.BASE),[xN]),VN.CONTEST_PUBLIC_SOURCES=[].concat(C(VN.CONTEST),[IN]),VN.CONTEST_ENFORCED_TEMPLATE=[].concat(C(VN.CONTEST),[DN]),VN.CONTEST_PUBLIC_SOURCES_ENFORCED_TEMPLATE=[].concat(C(VN.CONTEST),[IN,DN]);var GN,jN,YN,JN,qN,XN,KN,QN,ZN,$N,eO,tO,nO,iO,rO,aO,oO,sO,lO,uO,cO,hO,dO,pO=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.startTime=performance.now(),n.options.aceTheme=n.options.aceTheme||"ace/theme/dawn",n}return h(t,e),o(t,[{key:"registerPlugins",value:function(){this.options.plugins=(this.options.plugins||[]).sort(function(e,t){return e.priorityIndex-t.priorityIndex});var e=!0,t=!1,n=void 0;try{for(var i,r=this.options.plugins[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.registerPlugin(a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.addSettingsListeners(),this.dispatch("initDone")}},{key:"whenLoaded",value:function(e){this._loaded?e():this.addListenerOnce("loaded",e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.workspace=this.options.workspace,this.sessionId=Math.random().toString().substr(2),this.workspace.sessionId=this.sessionId,console.log("Init without plugin registrations: ",performance.now()-this.startTime),this.codeEditor.whenLoaded(function(){e.registerPlugins(),e._loaded=!0,e.dispatch("loaded")})}},{key:"addSettingsListeners",value:function(){this.getPlugin("SettingsManager")}}]),t}(Zu($I)),fO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{right:"-5px",top:"30px",position:"absolute",zIndex:"1"},counter:0}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),0===this.options.counter?e.addClass("hidden"):e.removeClass("hidden")}},{key:"render",value:function(){return this.options.counter}},{key:"setValue",value:function(e){this.updateOptions({counter:e}),tg.Global.checkForWrap()}},{key:"getValue",value:function(){return this.options.counter}},{key:"increment",value:function(){this.setValue(this.getValue()+1)}},{key:"reset",value:function(){this.setValue(0)}},{key:"attachListenerForAction",value:function(e,t,n,i){this.attachListener(e,t,function(){i&&"function"==typeof i&&!i.apply(void 0,arguments)||n.apply(void 0,arguments)})}},{key:"attachListenerForIncrement",value:function(e,t,n){var i=this;this.attachListenerForAction(e,t,function(){return i.increment()},n)}},{key:"attachListenerForReset",value:function(e,t,n){var i=this;this.attachListenerForAction(e,t,function(){return i.reset()},n)}}]),t}(xd),gO=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.summaries=n.options.summaries,n}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("h3",null,Lc.T("Users that solved this task: ")," ",this.summaries.length," (",Lc.createElement("span",{ref:"details",style:{color:"blue",cursor:"pointer"}},"details"),")"),Lc.createElement("div",{ref:"userHandlesArea",style:{maxWidth:"500px",maxHeight:"300px","overflow-y":"scroll"}}," ")]}},{key:"onMount",value:function(){var e=this;this.details.addClickListener(function(){if(e.users)e.userHandlesArea.addClass("hidden"),e.users=!1;else if(e.users=!0,e.userHandlesArea.hasClass("hidden"))e.userHandlesArea.removeClass("hidden");else{var t=!0,n=!1,i=void 0;try{for(var r,a=e.summaries[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.userHandlesArea.appendChild(Lc.createElement("div",{style:{margin:"3px",padding:"4px",display:"inline-block",border:"2px solid #e6e6e6",borderRadius:"4px"}},Lc.createElement(sE,{id:o.userId})))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}})}}]),t}(Lc.Element),mO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntryKey",value:function(e,t){return t}},{key:"getEntries",value:function(){return this.summaries}}]),t}(vb),vO=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.summaries=n.options.summaries,n.summaries.sort(function(e,t){return e.bestTime-t.bestTime}),n.summaries=n.summaries.slice(0,Math.min(10,n.summaries.length)),n}return h(t,e),o(t,[{key:"setColumns",value:function(){var e={textAlign:"center"};w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return Lc.createElement(sE,{id:e.userId})},headerName:"User",cellStyle:e,headerStyle:e},{value:function(e){return Ek.cpuTime(e.bestTime)},headerName:"CPU Time",cellStyle:e,headerStyle:e},{value:function(e){return Lc.createElement(HL,{id:e.bestTimeEvalJobId})},headerName:"Submission",headerStyle:e}])}}]),t}(mO),yO=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.summaries=n.options.summaries,n.summaries.sort(function(e,t){return e.bestMemory-t.bestMemory}),n.summaries=n.summaries.slice(0,Math.min(10,n.summaries.length)),n}return h(t,e),o(t,[{key:"setColumns",value:function(){var e={textAlign:"center"};w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return Lc.createElement(sE,{id:e.userId})},headerName:"User",cellStyle:e,headerStyle:e},{value:function(e){return Ek.memory(e.bestMemory)},headerName:"Memory usage",cellStyle:e,headerStyle:e},{value:function(e){return Lc.createElement(HL,{id:e.bestMemoryEvalJobId})},headerName:"Submission",headerStyle:e}])}}]),t}(mO),bO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntryKey",value:function(e,t){return t}},{key:"getEntries",value:function(){return[0]}},{key:"setColumns",value:function(){var e={textAlign:"center"};w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return"Loading..."},headerName:"User",cellStyle:e,headerStyle:e},{value:function(e){return""},headerName:"CPU Time",cellStyle:e,headerStyle:e},{value:function(e){return""},headerName:"Submission",headerStyle:e}])}}]),t}(vb),kO=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.options.evalTaskId=n.options.evalTaskId||n.options.evalTask.id,n}return h(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.getSummaries();return t?[Lc.createElement(gO,{summaries:t}),Lc.createElement("h3",null," ",Lc.T("Solutions with lowest CPU Time:")," "),Lc.createElement(vO,{summaries:t,style:{border:"1px solid #BBB",borderRadius:"5px"}}),Lc.createElement("h3",null," ",Lc.T("Solutions with lowest memory usage:")," "),Lc.createElement(yO,{summaries:t,style:{border:"1px solid #BBB",borderRadius:"5px"}})]:(bC.fetchEvalTask(this.options.evalTaskId,function(){e.redraw()}),[Lc.createElement("h3",null,"Loading..."),Lc.createElement("h3",null," ",Lc.T("Solutions with lowest CPU Time:")," "),Lc.createElement(bO,null),Lc.createElement("h3",null," ",Lc.T("Solutions with lowest memory usage:")," "),Lc.createElement(bO,null)])}},{key:"getSummaries",value:function(){if(bC.fetchedEvalTasks.has(this.options.evalTaskId)){var e=bC.getByEvalTaskId(this.options.evalTaskId),t=[],n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.solved&&t.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}return null}}]),t}(Lc.Element),wO=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#eeeeaa";return function(a){function s(){return r(this,s),b(this,d(s).apply(this,arguments))}return h(s,a),o(s,[{key:"getDefaultOptions",value:function(){return{HTMLtitle:e,style:{cursor:"help",backgroundColor:i,padding:"6px",borderRadius:"4px",fontSize:"1.3em",marginBottom:"5px",marginLeft:"6px"}}}},{key:"render",value:function(){return[Lc.createElement(kf,{icon:n}),t]}}]),s}(Lc.Primitive("span"))},EO=wO("This task is interactive","Interactive","exchange"),SO=wO("This task uses enforced templates","Template","code"),CO=wO("This task is output-only","Output","file-text-o"),xO=wO("This is an approximation task","Aprox",""),TO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{type:"increment",height:150}}},{key:"setOptions",value:function(e){e.input=e.input&&e.input.replace(new RegExp("\\\\n","g"),"\n"),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"extraNodeAttributes",value:function(e){e.setStyle("height",this.options.height+"px"),e.setStyle("display","flex"),e.setStyle("flex-direction","column")}},{key:"render",value:function(){var e=this;return[Lc.createElement("div",null,Lc.createElement(Md,{ref:"runInputButton",level:Pc.PRIMARY,onClick:function(){return e.recalculate()},faIcon:"cogs",style:{marginBottom:"10px"}}," ",Lc.T("Compute"))),Lc.createElement("div",{ref:"container",style:{flex:"1"}},Lc.createElement("div",{style:{float:"left",width:"48%",height:"100%"}},Lc.createElement(ip,{ref:"inputEditor",value:this.options.input,style:{height:"100%"}})),Lc.createElement("div",{style:{float:"right",width:"48%",height:"100%",marginRight:"2%"}},Lc.createElement(ap,{ref:"outputView",style:{height:"100%"}})))]}},{key:"recalculate",value:function(){var e=this,t={type:this.options.type,input:this.inputEditor.getValue()};this.runInputButton.setLevel(Pc.WARNING),zu.postJSON("/eval/input_server_test/",t,{onComplete:function(){return setTimeout(function(){return e.runInputButton.setLevel(Pc.PRIMARY)},2e3)}}).then(function(t){e.outputView.setValue(String(t.output)),e.runInputButton.setLevel(Pc.SUCCESS)})}}]),t}(Lc.Element),AO=function(e){return function(t){function n(){return r(this,n),b(this,d(n).apply(this,arguments))}return h(n,t),o(n,[{key:"extraNodeAttributes",value:function(e){w(d(n.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({tableLayout:"fixed"})}},{key:"setOptions",value:function(t){w(d(n.prototype),"setOptions",this).call(this,t),this.entries=e.exampleTests,this.haveComments=!1;for(var i=0;i<this.entries.length;i+=1)this.haveComments=this.haveComments||this.entries[i].hasOwnProperty("comment");this.setColumns()}},{key:"getCellStyle",value:function(){return{}}},{key:"setColumns",value:function(){var t,i=this;t=0==e.getType()?[{value:function(e){return Lc.createElement("pre",null,e.input)},headerName:Lc.T("Input"),cellStyle:this.getCellStyle()},{value:function(e){return Lc.createElement("pre",null,e.output)},headerName:Lc.T("Output"),cellStyle:this.getCellStyle()}]:[{value:function(e){return Lc.createElement(LL,{extra:e.extra})},headerName:Lc.T("Interaction"),cellStyle:this.getCellStyle()}],(this.haveComments||this.options.loadTestButton)&&t.push({value:function(t){var n=[];return t.comment&&n.push(Lc.createElement(sp,{classMap:e.articleClassMap,value:t.comment})),i.options.loadTestButton&&n.push(Lc.createElement(Md,{label:Lc.T(i.options.loadTestText||"Load test"),onClick:function(){e.dispatch("loadTest",t.input)},level:Pc.INFO,style:{display:"block",margin:"5px"}})),n},headerName:Lc.T("Explanation"),cellStyle:this.getCellStyle()}),w(d(n.prototype),"setColumns",this).call(this,t)}}]),n}(vb)},LO=function(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{pageBreakInside:"avoid"})}},{key:"getCellStyle",value:function(){return{pageBreakBefore:"avoid"}}}]),t}(AO(e))},IO=(GN=tO=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"contestQuestionList",jN,y(n)),O(n,"cardPanelContainer",YN,y(n)),n.cardPanelBodyStyle={padding:n.themeProperties.CONTEST_QUESTION_CARD_PANEL_BODY_PADDING+"px",lineHeight:n.themeProperties.CONTEST_QUESTION_CARD_PANEL_LINE_HEIGHT+"px"},O(n,"extraElementStyle",JN,y(n)),O(n,"questionsContainer",qN,y(n)),O(n,"questionsColumnContainer",XN,y(n)),O(n,"filterContainer",KN,y(n)),O(n,"filterSwitcherContainer",QN,y(n)),n.filterOptionBase={height:"40px",paddingLeft:"5px",border:"1px solid black",justifyContent:"center",display:"flex",flexDirection:"column",fontSize:"1.2em",cursor:"pointer"},O(n,"filterOption",ZN,y(n)),O(n,"filterOptionFocused",$N,y(n)),O(n,"filterSwitcher",eO,y(n)),n}return h(t,e),t}(sb),jN=R(GN.prototype,"contestQuestionList",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",margin:"0 auto",justifyContent:"center"}}}),YN=R(GN.prototype,"cardPanelContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",maxWidth:"100%",padding:this.themeProperties.CONTEST_QUESTION_CARD_PANEL_PADDING,width:this.themeProperties.CONTEST_QUESTION_CARD_PANEL_WIDTH}}}),JN=R(GN.prototype,"extraElementStyle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flex:"1",padding:this.themeProperties.CONTEST_QUESTION_CARD_PANEL_PADDING,minWidth:this.themeProperties.CONTEST_QUESTION_CARD_PANEL_MIN_WIDTH}}}),qN=R(GN.prototype,"questionsContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",margin:"0 auto",display:"flex",justifyContent:"center",overflow:"hidden"}}}),XN=R(GN.prototype,"questionsColumnContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"50%",overflow:"auto"}}}),KN=R(GN.prototype,"filterContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflowY:"auto",width:"25%",height:"100%",float:"left"}}}),QN=R(GN.prototype,"filterSwitcherContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"75%",height:"100%",float:"right"}}}),ZN=R(GN.prototype,"filterOption",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign({backgroundColor:this.themeProperties.COLOR_BACKGROUND,":hover":{backgroundColor:this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE}},this.filterOptionBase)}}),$N=R(GN.prototype,"filterOptionFocused",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign({":hover":{backgroundColor:this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE},backgroundColor:this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE},this.filterOptionBase)}}),eO=R(GN.prototype,"filterSwitcher",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",overflow:"auto"}}}),GN),NO={ALL:"All",GENERAL:"General"},OO=(nO=Ze(IO))(iO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({displayListTitle:!0},w(d(t.prototype),"getDefaultOptions",this).call(this))}},{key:"getContest",value:function(){return this.options.contest}},{key:"getQuestions",value:function(){return this.getContest().getQuestions()}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.contestQuestionList)}},{key:"renderQuestion",value:function(e){if(!e.shouldAppear())return null;var t,n,i=Ap(e.timeAsked).format("HH:mm:ss");e.replyTime&&(t=Ap(e.replyTime).format("HH:mm:ss"),n=Lc.createElement("i",null," (Answered at ".concat(t,")")));var r;e.isPublic&&(r="Public Answer");var a,o=Pc.PRIMARY;e.isAnswered()&&(o=Pc.SUCCESS,a=Lc.createElement("div",null,Lc.createElement("strong",null,"Answer: "),Lc.createElement(sp,{value:e.reply}))),e.isInvalid&&(o=Pc.DANGER,a=Lc.createElement("div",null,Lc.createElement("strong",null,"Invalid question")));var s=e.contestTaskId?zS.get(e.contestTaskId).longName:NO.GENERAL,l=e.isPublic&&e.isAnswered()&&Lc.createElement($E,{height:40,message:e}),u=Lc.createElement("div",null,Lc.createElement("div",null,i,n,": ",Lc.createElement("strong",null,s)),Lc.createElement("div",null,Lc.createElement("strong",null,r)));return Lc.createElement("div",{className:this.styleSheet.cardPanelContainer,key:e.id},Lc.createElement(ub,{title:u,level:o,bodyStyle:this.styleSheet.cardPanelBodyStyle,id:"question"+e.id},Lc.createElement("p",null,Lc.createElement(sE,{userId:e.userAskedId}),": "+e.question),a,l||null))}},{key:"render",value:function(){var e=this.getQuestions().filter(function(e){return e.isAskedByCurrentUser()}).sort(function(e,t){return Math.max(t.timeAsked,t.replyTime||0)-Math.max(e.timeAsked,e.replyTime||0)}),t=this.getQuestions().filter(function(e){return!e.isAskedByCurrentUser()}).sort(function(e,t){return Math.max(t.timeAsked,t.replyTime||0)-Math.max(e.timeAsked,e.replyTime||0)}),n=t.slice(0,2),i=t.length>2?t.slice(n.length,t.length).sort(function(e,t){return t.getVotesBalance()-e.getVotesBalance()}):[],r=this.options.displayListTitle&&e.length?Lc.createElement("h4",{style:{textAlign:"center",borderBottom:"2px solid black"}},"Own questions"):null,a=this.options.displayListTitle&&t.length?Lc.createElement("h4",{style:{textAlign:"center",borderBottom:"2px solid black"}},"Public questions"):null;return[r,e.map(this.renderQuestion,this),a,n.concat(i).map(this.renderQuestion,this)]}},{key:"attachQuestionListeners",value:function(){var e=this,t=function(t){t.contestId===e.getContest().id&&e.redraw()};this.attachCreateListener(JS,t),this.attachListener(this.getContest(),"updateQuestion",t)}},{key:"onMount",value:function(){this.attachQuestionListeners()}}]),t}(Lc.Element))||iO,RO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getQuestions",value:function(){var e=this;return this.getContest().getQuestions().filter(function(t){return t.contestTaskId===e.options.contestTaskId})}}]),t}(OO),MO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLevel",value:function(){if(this.options.question){if(this.options.question.isInvalid)return Pc.DANGER;if(this.options.question.isAnswered())return Pc.SUCCESS}return Pc.PRIMARY}},{key:"getTitle",value:function(){var e,t,n=this.options.question,i=Ap(n.timeAsked).format("HH:mm:ss");n.replyTime&&(t=Ap(n.replyTime).format("HH:mm:ss"),e=Lc.createElement("i",null,"(Answered at ",t," by ",Lc.createElement(sE,{id:n.replyUserId}),")"));var r=n.contestTaskId?zS.get(n.contestTaskId).longName:NO.GENERAL;return Lc.createElement("div",null,i,e,": ",Lc.createElement("strong",null,r))}},{key:"logReply",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=zu.postJSON("/contest/question_typing_state_change/",{questionId:this.options.question.id,contestId:this.options.question.contestId,reply:this.answerField.getValue(),sessionId:this.sessionId});t&&n.then(function(){return e.redraw()})}},{key:"render",value:function(){var e,t=this,n=this.options.question,i=!1,r=$c.Global.getProperty("COLOR_BACKGROUND","#fff");!n.replyUserId||n.replyUserId===USER.id||n.isAnswered()||n.isInvalid||(i=!0,r=$c.Global.getProperty("COLOR_BACKGROUND_ALTERNATIVE","#f6f6f6"),e=Lc.createElement(xd,{level:Pc.WARNING,key:"someoneTypingArea",style:{marginBottom:"10px"}},Lc.createElement("em",null,Lc.createElement(sE,{userId:n.replyUserId})," is typing a response!"),Lc.createElement(Md,{level:Pc.PRIMARY,size:Dc.EXTRA_SMALL,onClick:function(){return t.logReply(!0)},style:{marginLeft:"3px"}},"Take over")));var a=Lc.createElement("div",null,Lc.createElement(Nb,{inline:!1,style:{margin:"initial",padding:"0"}},Lc.createElement("strong",{style:{display:"block"}},"Answer: "),e,Lc.createElement(Vg,{ref:"answerField",rows:"5",readOnly:i,value:n.reply||"",style:{height:"100px",maxWidth:"100%",backgroundColor:r}})),Lc.createElement(jg,{size:Dc.SMALL},Lc.createElement(Md,{ref:"answerQuestionButton",level:Pc.PRIMARY,disabled:i},n.isAnswered()?"Change answer":"Answer"),Lc.createElement(Md,{ref:"invalidQuestionButton",level:Pc.DANGER,disabled:i},"Invalid question")),Lc.createElement("div",{style:{paddingTop:"10px"}},Lc.createElement("strong",null,"Public answer",Lc.createElement(Eg,{ref:"publicAnswerCheckbox",checked:n.isPublic}))));return[Lc.createElement(sE,{userId:n.userAskedId}),Lc.createElement("strong",null,": "),n.question,a]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.sessionId=Math.random().toString().substr(2),this.attachEventListener(this.options.question,"typingStateChange",function(t){t.sessionId!==e.sessionId&&e.redraw()});var n=new Nu({throttle:500}),i=n.wrap(function(){return e.logReply()});this.answerField.addNodeListener("input",i),this.answerQuestionButton.addClickListener(function(){confirm("Are you sure you want to answer this question?")&&e.answerQuestion()}),this.invalidQuestionButton.addClickListener(function(){confirm("Are you sure you want to invalidate this question? This cannot be undone!")&&e.answerQuestion(!0)})}},{key:"answerQuestion",value:function(e){var t=this.answerField.getValue(),n=this.publicAnswerCheckbox.getValue(),i={contestId:this.options.contest.id,questionId:this.options.question.id};if(e)i.isInvalid=!0;else{if(!t)return;n&&(i.isPublic=!0),i.reply=t}zu.postJSON("/contest/answer_question/",i)}}]),t}(ub),PO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{displayListTitle:!1})}},{key:"renderQuestion",value:function(e){return Lc.createElement("div",{className:this.styleSheet.cardPanelContainer,key:e.id},Lc.createElement(MO,{question:e,contest:this.getContest(),bodyStyle:{padding:"15px"}}))}},{key:"getQuestions",value:function(){return Ut(this.options.filter||NO.ALL,this.getContest())}}]),t}(OO),DO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getQuestions",value:function(){var e=w(d(t.prototype),"getQuestions",this).call(this);return e=e.filter(function(e){return e.isAnswered()||e.isInvalid}).sort(function(e,t){return t.replyTime-e.replyTime}),e.length>20&&(e=e.slice(0,20)),e}}]),t}(PO),BO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getQuestions",value:function(){return w(d(t.prototype),"getQuestions",this).call(this).filter(function(e){return!(e.isAnswered()||e.isInvalid)}).sort(function(e,t){return e.id-t.id})}}]),t}(PO),_O=(rO=Ze(IO))(aO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.filterOption)}},{key:"focus",value:function(){this.removeClass(this.styleSheet.filterOption),this.addClass(this.styleSheet.filterOptionFocused)}},{key:"unfocus",value:function(){this.removeClass(this.styleSheet.filterOptionFocused),this.addClass(this.styleSheet.filterOption)}},{key:"getNumQuestions",value:function(){return Ut(this.options.filter,this.options.contest).filter(function(e){return!(e.isAnswered()||e.isInvalid)}).length}},{key:"render",value:function(){var e=this.getNumQuestions(),t=null;return e&&(t=Lc.createElement("span",{style:{paddingRight:"5px"}},Lc.createElement(xd,{level:Pc.DANGER},e))),[Lc.createElement("div",null,[t,this.options.filter])]}},{key:"onMount",value:function(){var e=this;this.attachCreateListener(JS,function(t){e.options.contest.id===t.contestId&&e.redraw()}),this.attachListener(this.options.contest,"updateQuestion",function(){return e.redraw()})}}]),t}(Lc.Element))||aO,FO=(oO=Ze(IO))(sO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContestTasks",value:function(){return this.options.contest.getContestTasks()}},{key:"getFilterOptions",value:function(){var e=[NO.ALL,NO.GENERAL],t=!0,n=!1,i=void 0;try{for(var r,a=this.getContestTasks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(o.longName)}}catch(e){n=!0,i=e}finally{try{
t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"renderQuestionListForFilter",value:function(e){return Lc.createElement("div",{className:this.styleSheet.questionsContainer,ref:"switcherChild"+e},Lc.createElement("div",{className:this.styleSheet.questionsColumnContainer},Lc.createElement(BO,{filter:e,ref:"unansweredQuestionList",contest:this.options.contest})),Lc.createElement("div",{className:this.styleSheet.questionsColumnContainer},Lc.createElement(DO,{filter:e,ref:"answeredQuestionList",contest:this.options.contest})))}},{key:"changeFilter",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.getFilterOptions()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){this["filter"+r.value].unfocus()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.filterSwitcher.setActive(this["switcherChild"+e]),this["filter"+e].focus()}},{key:"render",value:function(){var e=this;return[Lc.createElement("div",{className:this.styleSheet.filterContainer},this.getFilterOptions().map(function(t){return Lc.createElement(_O,{onClick:function(){return e.changeFilter(t)},filter:t,contest:e.options.contest,ref:"filter"+t})})),Lc.createElement("div",{className:this.styleSheet.filterSwitcherContainer},Lc.createElement(Of,{className:this.styleSheet.filterSwitcher,ref:"filterSwitcher"},this.getFilterOptions().map(function(t){return e.renderQuestionListForFilter(t)}))),Lc.createElement("div",{style:{clear:"both"}})]}},{key:"onMount",value:function(){this.changeFilter(NO.ALL)}}]),t}(Lc.Element))||sO,UO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Ask question"}},{key:"getActionName",value:function(){return"Ask question"}},{key:"getBody",value:function(){var e=this.options.contest.getContestTasks();return e.push({general:!0,toString:function(){return NO.GENERAL}}),[Lc.createElement(Nb,{label:"Task name"},Lc.createElement(Gg,{ref:"contestTaskSelect",className:"form-control",options:e})),Lc.createElement(Vg,{rows:"2",ref:"questionTextField",placeholder:"Type question...",style:{resize:"vertical",width:"100%"}})]}},{key:"action",value:function(){var e=this.questionTextField.getValue(),t=this.contestTaskSelect.get(),n={contestId:this.options.contest.id,question:e};t.general||(n.contestTaskId=t.id),zu.postJSON("/contest/ask_question/",n),this.hide()}}]),t}(Zg),zO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement(Vg,{rows:"2",ref:"questionTextField",placeholder:"Type question...",style:{resize:"vertical",width:"100%"}})]}},{key:"action",value:function(){var e=this.questionTextField.getValue(),t=this.options,n=t.contest,i=t.contestTask,r={contestId:n.id,question:e};r.contestTaskId=i.id,zu.postJSON("/contest/ask_question/",r),this.hide()}}]),t}(UO),WO=$g(UO),HO=$g(zO),VO=function(){function e(){r(this,e),this.localStorageMap=new Map}return o(e,[{key:"getLocalStorageMap",value:function(e,t){var n="contest-"+e+"user-"+USER.id+t;return this.localStorageMap.has(n)||this.localStorageMap.set(n,new tc(n)),this.localStorageMap.get(n)}},{key:"getQuestionsLocalStorageMap",value:function(e){return this.getLocalStorageMap(e,"questions")}},{key:"getAnnouncementsLocalStorageMap",value:function(e){return this.getLocalStorageMap(e,"announcements")}},{key:"getNotificationsLocalStorageMap",value:function(e){return this.getLocalStorageMap(e,"notifications")}}]),e}(),GO=new VO,jO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this.options.evalTask;return[Lc.T("Time limit:")," ",Lc.createElement("em",null,Ek.cpuTime(e.getTimeLimit(this.options.programmingLanguageId)/1e3)),Lc.createElement("br",null),Lc.T("Memory limit:")," ",Lc.createElement("em",null,Ek.memory(1024*e.getMemoryLimit(this.options.programmingLanguageId))),Lc.createElement("br",null),Lc.createElement("br",null)]}},{key:"setProgrammingLanguageId",value:function(e){this.updateOptions({programmingLanguageId:e})}}]),t}(Lc.Element),YO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContestTask",value:function(){return this.options.contestTask}},{key:"getEvalTaskBadges",value:function(){var e=[],t=this.getContestTask().getEvalTask();return t&&(t.hasEnforcedTemplates()&&e.push(Lc.createElement(SO,null)),t.isInteractive()&&e.push(Lc.createElement(EO,null))),e}},{key:"render",value:function(){var e=this.getContestTask(),t=e.getEvalTask(),n=new op(op.GLOBAL,[["TaskExamples",AO(t)],["RawHTML",Qd],["ServerInputTest",TO]]);t.articleClassMap=n;var i=Lc.createElement(FC,{ref:"statementArticle",article:e.getStatementArticle(),showEditButton:!0,liveLanguage:!0,editButtonUrl:"/task/"+t.urlName+"/edit/",classMap:n});return[Lc.createElement("div",{className:"text-center"},Lc.createElement("h1",null,Lc.T(t.longName)),Lc.createElement(jO,{ref:"taskLimits",evalTask:t,programmingLanguageId:this.options.programmingLanguageId}),Lc.createElement("div",null,this.getEvalTaskBadges())),i]}}]),t}(jd),JO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Editorial")}},{key:"render",value:function(){return Lc.createElement(FC,{article:this.options.evalTask.getSolutionArticle(),liveLanguage:!0})}}]),t}(jd),qO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Statistics")}},{key:"onMount",value:function(){var e=this;this.addListener("setActive",function(){if(0===e.options.children.length){var t=Lc.createElement(kO,{evalTask:e.options.evalTask});e.appendChild(t)}})}}]),t}(jd),XO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this.options,t=e.contest,n=e.contestTask;return[Lc.createElement(HO,{level:Pc.PRIMARY,label:Lc.T("Ask question"),modalOptions:{contest:t,contestTask:n},style:{margin:"10px"}}),Lc.createElement(RO,{contest:t,contestTaskId:n.id})]}}]),t}(jd),KO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{style:{right:0,top:0,marginLeft:5,position:"initial"}})}}]),t}(fO),QO=(lO=cO=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"taskPanel",uO,y(n)),n}return h(t,e),t}(Jc),uO=R(lO.prototype,"taskPanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"5px 24px",backgroundColor:this.themeProperties.COLOR_BACKGROUND}}}),lO),ZO=(hO=Ze(QO))(dO=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{updateURL:!0})}},{key:"getContestTask",value:function(){return zS.get(this.options.contestTaskId)}},{key:"getEvalTask",value:function(){return this.getContestTask().getEvalTask()}},{key:"getContest",value:function(){return this.getContestTask().getContest()}},{key:"getWorkspace",value:function(){return this.getEvalTask().getWorkspace()}},{key:"showWorkspace",value:function(){this.divider.collapseChild(0),this.divider.expandChild(1)}},{key:"showStatement",value:function(){this.divider.collapseChild(1),this.divider.expandChild(0)}},{key:"showBoth",value:function(){0===this.idePanel.getWidth()&&(this.idePanel.setWidth("50%"),this.taskPanel.setWidth("50%")),this.divider.expandChild(0),this.divider.expandChild(1)}},{key:"setURL",value:function(e){this.showUrlTab(e[0]||"")}},{key:"addQuestionBadgeListeners",value:function(){var e=this,t=GO.getQuestionsLocalStorageMap(this.getContestTask().id);this.badge.setValue(t.get(this.getContestTask().id)||0),this.attachListener(this.tabArea.activeTabDispatcher,function(){e.tabArea.getActive()===e.questionsPanel&&(e.badge.reset(),t.set(e.getContestTask().id,0))}),t.addChangeListener(function(t){t.newValue||e.badge.reset()});var n=function(t){t.contestId===e.getContest().id&&t.contestTaskId===e.getContestTask().id&&e.badge.increment()};this.attachListener(JS,"create",function(e){e.isAskedByCurrentUser()||n(e)}),this.attachListener(this.getContest(),"updateQuestion",n)}},{key:"onMount",value:function(){var e=this;this.attachUpdateListener(this.getEvalTask(),function(){return e.redraw()});var t=function(){var t=function(t){e.taskSummaryPanel.taskLimits.setProgrammingLanguageId(t.id)};e.ide.addListener("changeLanguage",t),t(e.ide.programmingLanguageSelect.get()),e.ide.codeEditor.focus(),e.ide.codeEditor.gotoEnd()};this.addListener("workspaceLoaded",function(){return t()}),this.ide&&t();var n=function(){e.ide&&e.ide.sectionDivider.dispatch("resize")};window.addEventListener("resize",function(){n()}),this.idePanel.addListener("resize",function(){n()});var i=this.getContest();i.systemGenerated&&this.attachEventListener(i,"contestEnd",function(){e.tabArea.redraw()}),i.addEventListener("broadcastTask",function(e){cp.importState(e.extra.state)}),window.taskView=!1,this.questionsPanel&&this.addQuestionBadgeListeners(),this.addListener("enterFullScreen",function(){return e.ide.dispatch("enterFullScreen")}),this.addListener("exitFullScreen",function(){return e.ide.dispatch("exitFullScreen")}),this.attachListener(this.idePanel,"resize",function(){e.ide&&e.ide.dispatch("resize")}),this.attachListener(this.taskPanel,"resize",function(){e.tabArea.titleArea.dispatch("resize")})}},{key:"getCommentsPanel",value:function(){var e=this.getEvalTask().discussionId;if(e&&(!this.getContest().isRunning()||this.getContest().isInfinite()))return Lc.createElement(jd,{ref:"discussionPanel",title:Lc.T("Task Discussion"),tabHref:this.getSubURL("discussion")},Lc.createElement(NT,{chatId:e}))}},{key:"getSolutionPanel",value:function(){if(this.getEvalTask().getSolutionArticle()&&(!this.getContest().isRunning()||this.getContest().isInfinite()))return Lc.createElement(JO,{ref:"solutionPanel",tabHref:this.getSubURL("solution"),evalTask:this.getEvalTask()})}},{key:"getStatisticsPanel",value:function(){if(this.getContestTask().canShowStatistics())return Lc.createElement(qO,{ref:"statisticsPanel",tabHref:this.getSubURL("statistics"),evalTask:this.getEvalTask()})}},{key:"getSubmissionPanel",value:function(){return Lc.createElement(GL,{ref:"submissionsPanel",title:Lc.T("Submissions"),tabHref:this.getSubURL("submissions"),contestId:this.getContest().id,contestTaskId:this.getContestTask().id})}},{key:"getQuestionsPanelTitleWithBadge",value:function(){return this.badge||(this.badge=Lc.createElement(KO,{level:Pc.DANGER})),Lc.createElement("div",null,Lc.createElement("span",null,Lc.T("Questions")),this.badge)}},{key:"getQuestionsPanel",value:function(){if(this.getContest().canReceiveQuestions())return Lc.createElement(XO,{ref:"questionsPanel",title:this.getQuestionsPanelTitleWithBadge(),tabHref:this.getSubURL("questions"),contest:this.getContest(),contestTask:this.getContestTask()})}},{key:"requestEvalTaskWorkspace",value:function(){var e=this;zu.postJSON("/eval/fetch_eval_task_user_summary/",{evalTaskId:this.getEvalTask().id}).then(function(){e.getWorkspace()&&(e.idePanel.setChildren([e.getWorkspaceIDE()]),e.dispatch("workspaceLoaded"))})}},{key:"getWorkspaceIDE",value:function(){var e=this;if(USER.isAuthenticated){var t=this.getWorkspace();if(t){var n=VN.CONTEST;return this.getContest().canShowPublicSources()&&this.getEvalTask().hasEnforcedTemplates()?n=VN.CONTEST_PUBLIC_SOURCES_ENFORCED_TEMPLATE:this.getContest().canShowPublicSources()?n=VN.CONTEST_PUBLIC_SOURCES:this.getEvalTask().hasEnforcedTemplates()&&(n=VN.CONTEST_ENFORCED_TEMPLATE),this.ide=Lc.createElement(pO,{plugins:n,workspace:t,fullContainer:!1,contestTaskId:this.options.contestTaskId}),this.ide.toggleFullScreen=function(){return e.toggleFullScreen()},this.ide}var i=this.getContestTask().getTimeAvailable().add({seconds:10+10*Math.random()}),r=+i-yf.now();return this.getContest()&&this.getContest().isVirtual()&&(r=0),setTimeout(function(){return e.requestEvalTaskWorkspace()},Math.min(Math.max(r,0),2e4)),[iT.renderLoading(),Lc.createElement("div",{style:{marginTop:"20px",textAlign:"center",fontSize:"1.3em"}},"Loading the workspace...")]}return Lc.createElement("div",null,Lc.createElement("h3",{className:"text-center"},Lc.T("Authenticate to use the workspace")),Lc.createElement(rE,{ref:this.refLink("loginPanel")}))}},{key:"redraw",value:function(){this.taskPanel?this.taskPanel.redraw():w(d(t.prototype),"redraw",this).call(this)}},{key:"getSubURL",value:function(e){if(this.options.updateURL){return(this.options.customURLPrefix?this.options.customURLPrefix:this.getContestTask().getFullURL())+e+"/"}}},{key:"getContestTaskSummaryPanelClass",value:function(){return YO}},{key:"render",value:function(){var e=Bk.getDefaultLanguage().id,t=this.getContestTaskSummaryPanelClass(),n=rc.isMobileDevice(),i=n?"0%":"50%",r=n?"100%":"50%";return[Lc.createElement(ob,{ref:"divider",orientation:Rc.HORIZONTAL,style:{overflow:"hidden",height:"100%",width:"100%"}},Lc.createElement(jd,{size:r,style:{overflow:"hidden"},title:"task",ref:"taskPanel"},Lc.createElement(Jb,{style:{height:"100%"},ref:"tabArea",lazyRender:!0,panelClass:this.styleSheet.taskPanel},Lc.createElement(t,{ref:"taskSummaryPanel",title:Lc.T("Statement"),active:"true",tabHref:this.getSubURL("statement"),contestTask:this.getContestTask(),programmingLanguageId:e,style:{width:"100%"}}),this.getSolutionPanel(),this.getCommentsPanel(),this.getStatisticsPanel(),this.getSubmissionPanel(),this.getQuestionsPanel())),Lc.createElement(jd,{collapsed:rc.isMobileDevice(),size:i,ref:"idePanel",title:"workspace / submit"},this.getWorkspaceIDE()))]}},{key:"showUrlTab",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.tabArea.options.children[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.options.tabHref===this.getSubURL(e))return void o.dispatch("show")}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.taskSummaryPanel.dispatch("show")}}]),t}(Af(jd)))||dO,$O=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{height:"80%",width:"80%"})}},{key:"showTask",value:function(){this.modalWindow.setChildren(this.render())}},{key:"getContestTaskPanelStyle",value:function(){return{minHeight:"700px",borderRadius:"10px"}}},{key:"render",value:function(){var e=this;return zS.get(this.options.contestTaskId)?[Lc.createElement(ZO,{style:this.getContestTaskPanelStyle(),contestTaskId:this.options.contestTaskId,updateURL:!1})]:(zu.postJSON("/contest/get_contest_task/",{contestTaskId:this.options.contestTaskId,requestContestTask:!0}).then(function(){return e.showTask()}),[iT.renderLoading()])}}]),t}(Qg),eR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{style:{margin:"5px"},level:Pc.PRIMARY,size:Dc.LARGE})}},{key:"setOptions",value:function(e){e.faIcon||(e.label=e.label||Lc.T("Solve this task")),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(){e.contestTaskModal?e.contestTaskModal.show():e.contestTaskModal=$O.show({contestTaskId:e.options.contestTaskId,destroyOnHide:!1})})}}]),t}(Md),tR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"beforeRedrawNotLoaded",value:function(){var e=this;if(this.getContestTask()&&this.getContestTask().hasStateLoaded())return void this.setLoaded();zu.postJSON("/contest/get_contest_task/",{contestTaskId:this.options.contestTaskId}).then(function(t){e.importState(t),e.setLoaded()})}},{key:"onDelayedMount",value:function(){w(d(t.prototype),"onDelayedMount",this).call(this),this.urlParts&&this.setURL(this.urlParts)}},{key:"setURL",value:function(e){this.taskPanel?w(d(t.prototype),"setURL",this).call(this,e):this.urlParts=e}},{key:"pageTitle",get:function(){return this.getContestTask()&&this.getContestTask().longName}}]),t}(iT(ZO)),nR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"updateTimer",value:function(){var e,t=this.options.contest,n=yf.now();if(t.getStartTime()&&!t.hasStarted()){var i=Ap(t.getStartTime()),r=n.diffDuration(i),a=r.format("H:mm:ss");r>=24*Sp.HOUR&&(a=Ek.duration(r,{days:!0,hours:!0,lastSeparator:" and "})),e="Starts in "+a}else if(t.getEndTime()&&!t.hasFinished()){var o=Ap(t.getEndTime()),s=n.diffDuration(o),l=s.format("H:mm:ss");s>=24*Sp.HOUR&&(l=Ek.duration(s,{days:!0,hours:!0,lastSeparator:" and "})),e="Ends in "+l}else e="Server time: "+n.utc().format("HH:mm:ss");this.setChildren([e]),this.dispatch("update")}},{key:"onMount",value:function(){var e=this;this.updateTimer(),this.intervalId=setInterval(function(){return e.updateTimer()},1e3)}},{key:"onUnmount",value:function(){clearInterval(this.intervalId)}}]),t}(Lc.Primitive("span")),iR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"getContestUser",value:function(){return this.getContest().getUser(USER.id)}},{key:"getRankText",value:function(){if(this.options.loadedScoreboard){var e=this.getContest(),t=this.getContestUser(),n=e.getBaseContest().getUsers();e.isVirtual()&&n.push(t);var i=1,r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;WS.compare(t,u)>0&&(i+=1)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return"Rank "+i+" / "+n.length}}},{key:"getScoreText",value:function(){if(this.getContestUser().hasOwnProperty("totalScore"))return"Score: "+Ek.truncate(this.getContestUser().totalScore,2)}},{key:"track",value:function(){if(this.getContestUser()){var e,t=this.getRankText(),n=this.getScoreText();e=t&&n?t+" ("+n+")":t||n||"",this.setChildren([e])}}},{key:"onMount",value:function(){var e=this;this.track();var t=this.options.contest;this.options.contest.isVirtual()&&this.attachListener(t.getBaseContest(),"rankingsChange",function(){return e.track()}),this.attachListener(t,"rankingsChange",function(){return e.track()})}}]),t}(Lc.Primitive("span")),rR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.archive}},{key:"getRankText",value:function(){var e=this.getContest().getUsers(),t=1,n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;XL.compare(this.getContestUser(),s)>0&&(t+=1)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return"Rank "+t+" / "+e.length}},{key:"onMount",value:function(){var e=this;this.track(),this.attachListener(this.getContest(),"rankingsChange",function(){return e.track()})}}]),t}(iR),aR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);var n=this.options.contestPanel,i=this.options.contest;this.attachListener(n,"activeElementChanged",function(){n.getActive()===n.chat&&e.reset()}),i.getChat()&&this.attachListener(i.getChat().getMessageThread(),"newMessage",function(){n.getActive()!==n.chat&&e.increment()})}}]),t}(fO),oR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);var n=this.options.contestPanel,i=this.options.localStorageMap;this.attachListener(i,"change",function(t){t.newValue||e.reset()}),this.attachListenerForIncrement(jS,"create",function(t){return t.contestId===e.options.contest.id}),this.attachListener(n,"activeElementChanged",function(){n.getActive()===n.announcements&&(e.reset(),i.set("counter",0))})}}]),t}(fO),sR=function(e){function t(e,n){var i;return r(this,t),i=b(this,d(t).call(this)),i.contest=e,i.contestPanel=n,i}return h(t,e),o(t,[{key:"getURLPrefix",value:function(e){var t="/contest/"+this.contest.name+"/";return e&&(t+=e+"/"),t}},{key:"getTasksDropdownElements",value:function(){var e=this;return this.contest.getContestTasks().map(function(t){return Lc.createElement(Ff,{href:e.getURLPrefix("task/"+t.name),value:t.longName,key:Math.random()})})}},{key:"getLeftChildren",value:function(){var e=this.contest,t=[];return t.push(Lc.createElement(Ff,{href:this.getURLPrefix("summary"),key:"summary",value:Lc.T("Summary")})),e.hasStarted()&&t.push(Lc.createElement(Ff,{href:this.getURLPrefix("tasks"),key:"tasks",value:Lc.T("Tasks")},this.getTasksDropdownElements())),e.canShowScoreboard()&&t.push(Lc.createElement(Ff,{href:this.getURLPrefix("scoreboard"),key:"scoreboard",value:Lc.T("Scoreboard")})),e.hasStarted()&&USER.isAuthenticated&&t.push(Lc.createElement(Ff,{href:this.getURLPrefix("submissions"),key:"submissions",value:Lc.T("Own Submissions")})),e.chatId&&t.push(this.createChatButton()),!e.systemGenerated&&e.hasStarted()&&t.push(this.createAnnouncementsButton()),e.hasFinished()&&e.isAnalysisPublic&&t.push(Lc.createElement(Ff,{href:this.getURLPrefix("analysis"),key:"analysis",value:Lc.T("Analysis")})),t}},{key:"getRightChildren",value:function(){var e=this.contest,t=[];return e.hasStarted()&&USER.isAuthenticated&&t.push(this.createRankInfo()),t.push(this.createTimeCounter()),t}},{key:"apply",value:function(){this.contestPanel.isInDocument()&&(tg.Global.skipWrap(),tg.Global.getLeftConditioned().setChildren(this.getLeftChildren()),tg.Global.getRightConditioned().setChildren(this.getRightChildren()),tg.Global.unskipWrap(),tg.Global.checkForWrap())}},{key:"createChatButton",value:function(){var e=Lc.createElement(aR,{contestPanel:this.contestPanel,contest:this.contest});return Lc.createElement(Ff,{href:this.getURLPrefix("chat"),key:"chat",style:{position:"relative"},value:[Lc.T("Chat"),e]})}},{key:"createAnnouncementsButton",value:function(){var e=GO.getAnnouncementsLocalStorageMap(this.contest.id),t=Lc.createElement(oR,{contestPanel:this.contestPanel,contest:this.contest,counter:e.get("counter")||0,level:Pc.DANGER,localStorageMap:e});return Lc.createElement(Ff,{href:this.getURLPrefix("announcements"),key:"announcements",style:{position:"relative"},value:[Lc.T("Announcements"),t]})}},{key:"createTimeCounter",value:function(){var e=Lc.createElement(nR,{contest:this.contest});return this.attachListener(e,"update",function(){return tg.Global.checkForWrap()}),Lc.createElement(_f,{value:[e],key:"timer"})}},{key:"createRankInfo",value:function(){var e=Lc.createElement(iR,{contest:this.contest,loadedScoreboard:this.contestPanel._loadedScoreboard});return this.contestPanel.attachListener(e,"update",function(){return tg.Global.checkForWrap()}),Lc.createElement(_f,{value:e,key:"rank"})}},{key:"reset",value:function(){tg.Global.getLeftConditioned().setChildren([]),tg.Global.getRightConditioned().setChildren([]),tg.Global.checkForWrap()}}]),t}(Gu),lR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLeftChildren",value:function(){var e=[Lc.createElement(Ff,{href:this.getURLPrefix("tasks"),value:Lc.T("Tasks")}),Lc.createElement(Ff,{href:this.getURLPrefix("scoreboard"),value:Lc.T("Scoreboard")}),Lc.createElement(Ff,{href:this.getURLPrefix("submissions"),value:Lc.T("Submissions")})];return this.contest.discussionId&&e.push(Lc.createElement(Ff,{href:this.getURLPrefix("chat"),value:Lc.T("Chat")})),e}},{key:"getRightChildren",value:function(){var e=Lc.createElement(rR,{archive:this.contest});return this.contestPanel.attachListener(e,"update",function(){return setTimeout(function(){return tg.Global.checkForWrap()})}),[Lc.createElement(_f,{value:e,key:Math.random()})]}}]),t}(sR),uR=function(e){return function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getURLPrefix",value:function(e){var t="/"+this.contest.name+"/";return e&&(t+=e+"/"),t}}]),t}(e)},cR=uR(sR),hR=uR(lR),dR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle("whiteSpace","nowrap"),e.setStyle("padding","10px 0")}},{key:"render",value:function(){return[Lc.createElement(Gg,{ref:"filterCountry",style:{height:"2em",marginLeft:"10px"},options:this.options.countries})]}},{key:"getFilter",value:function(){var e=this;return this.options.countryIdFilter=this.filterCountry.get().id,function(t){return!e.options.countryIdFilter||t.countryId===e.options.countryIdFilter}}},{key:"updateFilter",value:function(){this.dispatch("filterChange")}},{key:"onMount",value:function(){var e=this;this.filterCountry.addChangeListener(function(){e.updateFilter()}),this.updateFilter()}}]),t}(Lc.Primitive("span")),pR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({display:"flex",flexDirection:"column",height:"100%"})}},{key:"render",value:function(){return[Lc.createElement(dR,{ref:"archiveUsersFilter",countries:this.options.archive.getCountries()}),Lc.createElement(hI,{ref:"scoreboard",metaContest:this.options.archive,style:{flex:"1",overflow:"hidden"}})]}},{key:"onMount",value:function(){var e=this;this.archiveUsersFilter.addListener("filterChange",function(){e.scoreboard.applyFilter(e.archiveUsersFilter.getFilter())});var t=new Nu({throttle:500}),n=t.wrap(function(){return e.archiveUsersFilter.updateOptions({countries:e.options.archive.getCountries()})});this.attachListener(KL,["create","updateOrCreate"],n),this.addListener("setActive",function(t){e.scoreboard.redraw(),t?"function"==typeof e.scoreboard.applyScrollState&&e.scoreboard.applyScrollState():"function"==typeof e.scoreboard.saveScrollState&&e.scoreboard.saveScrollState()})}}]),t}(Lc.Element),fR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;this.addListener("setActive",function(t){t&&0===e.options.children.length&&e.appendChild(Lc.createElement(GL,{contestId:e.options.archive.baseContestId,allContests:!0}))})}}]),t}(Lc.Element),gR=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new lR(n.getArchive(),y(n)),n}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{fullHeight:!0})}},{key:"getArchive",value:function(){return qL.get(this.options.archiveId)}},{key:"getTasks",value:function(){return Lc.createElement(LI,{contest:this.getArchive(),isArchive:!0})}},{key:"getScoreboard",value:function(){return Lc.createElement(pR,{archive:this.getArchive(),className:mh.Container.MEDIUM})}},{key:"getSubmissions",value:function(){return Lc.createElement(fR,{archive:this.getArchive(),className:mh.Container.MEDIUM})}},{key:"getChat",value:function(){var e=this.getArchive().discussionId;return e&&Lc.createElement(QL,{chatId:e,ref:this.refLink("chat")})}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getTasks()},[new im("tasks",function(){return e.getTasks()}),new im("task",function(){return e.getTasks()},[new qy("%s",function(t){var n=zS.getByContestIdAndUrlName(e.getArchive().baseContestId,t.args[0]);return n&&Lc.createElement(tR,{contestTaskId:n.id})})]),new im("scoreboard",function(){return e.getScoreboard()}),new im("submissions",function(){return e.getSubmissions()}),new im("chat",function(){return e.getChat()})]),this.routes}},{key:"onMount",value:function(){var e=this;zu.getJSON("/contest/archive_scoreboard_state/",{archiveId:this.getArchive().id}).then(function(){return e.getArchive().recalculateUsers()}),this.isInDocument()&&this.navHandler.apply(),this.getArchive().discussionId&&bE.fetch(this.getArchive().discussionId,function(){return e.chat&&e.chat.redraw()},function(t){return e.chat&&e.chat.updateOptions({error:t})}),cp.registerStream("contest-"+this.getArchive().baseContestId+"-scores")}}]),t}(nm),mR=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.columnSortingOrder=[n.columns[0],n.columns[1]],n}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this),{columnWidths:{rank:0,user:80,score:20}})}}]),o(t,[{key:"getEntries",value:function(){return this.sortEntries(sk.all().filter(function(e){return e.rating}))}},{key:"getColumns",value:function(){var e={textAlign:"right",width:"1%",verticalAlign:"middle"},t={paddingTop:"8px",paddingBottom:"8px",paddingLeft:"4px",paddingRight:"3px"},n={width:this.options.columnWidths.rank+"%"},i={width:this.options.columnWidths.user+"%",whiteSpace:"nowrap"},r={width:this.options.columnWidths.score+"%"};return[{value:function(e){return e.globalRatingRank},headerName:Lc.T("Rank"),sortDescending:!1,headerStyle:Object.assign({verticalAlign:"middle"},n,t),cellStyle:Object.assign(e,n,t)},{value:function(e){return Lc.createElement(sE,{userId:e.id,showCountry:!0})},headerName:Lc.T("User"),sortDescending:!1,headerStyle:Object.assign({verticalAlign:"middle"},i,t),cellStyle:Object.assign({verticalAlign:"middle"},i,t)},{value:function(e){return e.rating||"-"},headerName:Lc.T("Rating"),sortDescending:!1,headerStyle:Object.assign({verticalAlign:"middle"},r,t),cellStyle:Object.assign({verticalAllign:"middle"},r,t)}]}},{key:"setColumns",value:function(){w(d(t.prototype),"setColumns",this).call(this,this.getColumns())}}]),t}(Tb),vR=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,[],{comparator:e})),n.cacheEntries(),n}return h(t,e),o(t,[{key:"getRawEntries",value:function(){return sk.all().filter(function(e){return e.rating})}}]),t}(Pb),yR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntriesManager",value:function(){return this.entriesManager||(this.entriesManager=new vR(this.getComparator())),this.entriesManager}},{key:"getEntries",value:function(){return this.getEntriesManager().getEntries()}},{key:"applyFilter",value:function(e){this.getEntriesManager().setFilter(e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("reorder",function(){e.getEntriesManager().setComparator(e.getComparator())})}}]),t}(vt(mR)),bR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle("margin-bottom","0")}},{key:"getEntries",value:function(){if(this.shortList)return this.sortEntries(this.shortList);var e=sk.all().filter(function(e){return!e.isAdmin});return e.sort(function(e,t){return(t.rating||0)-(e.rating||0)}),this.shortList=e.slice(0,10),this.sortEntries(this.shortList)}}]),t}(mR),kR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getColumns",value:function(){var e=this,t={textAlign:"right",width:"1%",verticalAlign:"middle"},n={width:this.options.columnWidths.rank+"%"},i={width:this.options.columnWidths.user+"%"},r={width:this.options.columnWidths.score+"%"};return[{value:function(t){
return e.options.reputationDict[t.id].rank},headerName:"Rank",sortDescending:!1,headerStyle:Object.assign({verticalAlign:"middle"},n),cellStyle:Object.assign({},t,n)},{value:function(e){return Lc.createElement(sE,{userId:e.id,showCountry:!0})},headerName:"Name",sortDescending:!1,headerStyle:Object.assign({verticalAlign:"middle"},i),cellStyle:Object.assign({verticalAlign:"middle"},i)},{value:function(t){return parseInt(e.options.reputationDict[t.id].reputation)},headerName:"Reputation",sortDescending:!1,headerStyle:Object.assign({verticalAlign:"middle"},r),cellStyle:Object.assign({verticalAllign:"middle"},r)}]}}]),t}(yR),wR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{margin:"0 auto",maxWidth:"1000px",width:"90%",display:"flex",flexDirection:"column",height:"100%"}}}},{key:"render",value:function(){var e;return e="reputation"===this.options.type?Lc.createElement(kR,{ref:"ranking",reputationDict:this.options.reputationDict,style:{flex:"1",overflow:"hidden"}}):Lc.createElement(yR,{ref:"ranking",style:{flex:"1",overflow:"hidden"}}),[Lc.createElement("h3",{className:"text-center"},Lc.T("Leaderboard")),Lc.createElement(dR,{ref:"usersFilter",countries:sk.getCountries()}),e]}},{key:"onMount",value:function(){var e=this;this.usersFilter.addListener("filterChange",function(){e.ranking.applyFilter(e.usersFilter.getFilter())})}}]),t}(Tb),ER=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.questions=[],e}return h(t,e),o(t,[{key:"getQuestions",value:function(){return this.questions.sort(function(e,t){return e.priority===t.priority?e.id-t.id:e.priority-t.priority})}},{key:"addQuestion",value:function(e){this.questions.push(e)}},{key:"getAllInstances",value:function(){var e=this;return AP.all().filter(function(t){return t.questionnaireId===e.id})}}]),t}(fp),SR=new mp("questionnaire",ER),CR=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.getQuestionnaire().addQuestion(y(e)),e.options=[],e}return h(t,e),o(t,[{key:"getQuestionnaire",value:function(){return SR.get(this.questionnaireId)}}]),o(t,[{key:"addOption",value:function(e){this.options.push(e)}},{key:"getOptions",value:function(){return this.options.sort(function(e,t){return e.priority===t.priority?e.id-t.id:e.priority-t.priority})}},{key:"getCurrentUserResponse",value:function(){var e=AP.getCurrentUserInstance(this.questionnaireId);return e&&e.getQuestionResponse(this.id)}}]),t}(fp);CR.Type={PLAIN_TEXT:1,SINGLE_CHOICE:2,MULTIPLE_CHOICE:3};var xR,TR,AR,LR,IR,NR,OR,RR,MR,PR,DR,BR,_R,FR,UR,zR,WR,HR,VR,GR,jR,YR,JR,qR,XR,KR,QR,ZR,$R,eM,tM,nM,iM,rM,aM,oM,sM,lM,uM,cM,hM,dM,pM,fM,gM,mM,vM,yM,bM,kM,wM,EM,SM,CM,xM,TM,AM,LM,IM,NM,OM,RM,MM,PM,DM,BM,_M,FM,UM,zM,WM,HM,VM,GM,jM,YM,JM,qM,XM,KM,QM,ZM,$M,eP,tP,nP,iP,rP,aP,oP,sP,lP,uP,cP,hP,dP,pP,fP,gP,mP,vP,yP,bP,kP,wP,EP=new mp("questionnairequestion",CR,{dependencies:["Questionnaire"]}),SP=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.getQuestion()&&e.getQuestion().addOption(y(e)),e}return h(t,e),o(t,[{key:"getQuestion",value:function(){return EP.get(this.questionId)}}]),t}(fp),CP=new mp("QuestionnaireQuestionOption",SP,{dependencies:["QuestionnaireQuestion"]}),xP=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.questionResponses=new Map,e}return h(t,e),o(t,[{key:"getQuestionnaire",value:function(){return SR.get(this.questionnaireId)}},{key:"addQuestionResponse",value:function(e){this.questionResponses.set(e.questionId,e)}},{key:"getQuestionResponse",value:function(e){return this.questionResponses.get(e)}}]),t}(fp),TP=function(e){function t(){return r(this,t),b(this,d(t).call(this,"QuestionnaireInstance",xP,{dependencies:["Questionnaire","QuestionnaireQuestion","QuestionnaireQuestionOption"]}))}return h(t,e),o(t,[{key:"getCurrentUserInstance",value:function(e){return this.all().find(function(t){return t.userId===USER.id&&t.questionnaireId===e})}}]),t}(mp),AP=new TP,LP=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.getQuestionnaireInstance().addQuestionResponse(y(e)),e}return h(t,e),o(t,[{key:"getQuestionnaireInstance",value:function(){return AP.get(this.instanceId)}},{key:"getText",value:function(){return this.text||""}},{key:"getChoice",value:function(){return CP.get(this.choiceId)}}]),t}(fp),IP=(new mp("QuestionnaireQuestionResponse",LP,{dependencies:["QuestionnaireInstance"]}),xR=BR=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"footer",TR,y(n)),O(n,"questionPage",AR,y(n)),O(n,"questionTextArea",LR,y(n)),O(n,"questionAnswerArea",IR,y(n)),O(n,"form",NR,y(n)),O(n,"textArea",OR,y(n)),O(n,"radioInputContainer",RR,y(n)),O(n,"finished",MR,y(n)),O(n,"otherInput",PR,y(n)),O(n,"markup",DR,y(n)),n}return h(t,e),t}(Jc),TR=R(xR.prototype,"footer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}}}),AR=R(xR.prototype,"questionPage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"30px"}}}),LR=R(xR.prototype,"questionTextArea",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"1.2em",minHeight:"60px"}}}),IR=R(xR.prototype,"questionAnswerArea",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"10px"}}}),NR=R(xR.prototype,"form",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),OR=R(xR.prototype,"textArea",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",minHeight:"100px"}}}),RR=R(xR.prototype,"radioInputContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),MR=R(xR.prototype,"finished",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"1.5em",alignItems:"center",height:"250px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center"}}}),PR=R(xR.prototype,"otherInput",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{outline:0,border:0,minWidth:"220px",borderBottom:"1px solid #eee",marginLeft:"5px",transition:"0.4s",":focus":{transition:"0.4s",borderBottom:"1px solid #777"},":hover":{transition:"0.4s",borderBottom:"1px solid #777"}}}}),DR=R(xR.prototype,"markup",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block"," p":{margin:0}}}}),xR),NP=(_R=Ze(IP))(FR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{editable:!0}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.questionPage)}},{key:"isPlainText",value:function(){return this.options.question.type===CR.Type.PLAIN_TEXT}},{key:"isSingleChoice",value:function(){return this.options.question.type===CR.Type.SINGLE_CHOICE}},{key:"isMultipleChoice",value:function(){return this.options.question.type===CR.Type.MULTIPLE_CHOICE}},{key:"getForm",value:function(){var e,t,n=this;return this.isSingleChoice()&&(t=Sg),this.isMultipleChoice()&&(t=Eg),this.isPlainText()?e=[Lc.createElement(Vg,{className:this.styleSheet.textArea,value:this.getTextValue(),ref:"textArea",readOnly:!this.options.editable})]:(e=this.options.question.getOptions().map(function(e){return Lc.createElement("div",{className:n.styleSheet.radioInputContainer},Lc.createElement(t,{ref:"option"+e.id,name:n.options.question.id,checked:n.isChecked(e),disabled:!n.options.editable}),Lc.createElement(sp,{value:e.answer,className:n.styleSheet.markup}))}),this.options.question.otherChoice&&e.push(Lc.createElement("div",{className:this.styleSheet.radioInputContainer},Lc.createElement(t,{ref:"otherChoice",name:this.options.question.id,checked:this.isOtherChoice(),disabled:!this.options.editable}),"Other: ",Lc.createElement(vg,{ref:"textArea",value:this.getTextValue(),className:this.styleSheet.otherInput,readOnly:!this.options.editable})))),Lc.createElement(Lb,{className:this.styleSheet.form},e)}},{key:"getResponse",value:function(){return this.options.instance?this.options.instance.getQuestionResponse(this.options.question.id):this.options.question.getCurrentUserResponse()}},{key:"isChecked",value:function(e){var t=this.getResponse();return t&&t.choiceIds.indexOf(e.id)>=0||!1}},{key:"isOtherChoice",value:function(){var e=this.getResponse();return e&&(0===e.choiceIds.length||this.isMultipleChoice())&&e.text}},{key:"getTextValue",value:function(){var e=this.getResponse();return e&&e.text||""}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.questionTextArea},Lc.createElement(sp,{value:this.options.question.text,className:this.styleSheet.markup})),Lc.createElement("div",{className:this.styleSheet.questionAnswerArea},this.getForm())]}},{key:"getResponseData",value:function(){var e={questionnaireId:this.options.question.questionnaireId,questionId:this.options.question.id};if((this.isPlainText()||this.options.question.otherChoice)&&this.textArea.getValue()&&(e.text=this.textArea.getValue()),!this.isPlainText()){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=this.options.question.getOptions()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this["option"+s.id].getValue()&&t.push(s.id)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}t.length&&(e.choiceIds=t)}return e}},{key:"sendResponse",value:function(){var e=this;this.ajaxThrottler=this.ajaxThrottler||new Nu({throttle:3e3,debounce:500}),this.ajaxThrottler.wrap(function(){return zu.postJSON("/questionnaire_answer/",e.getResponseData()).then(function(){return e.options.panel.dispatch("updateFooter",!1)})})()}},{key:"onMount",value:function(){var e=this;if(this.options.editable){if(!this.isPlainText()){var t=!0,n=!1,i=void 0;try{for(var r,a=this.options.question.getOptions()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){this["option"+r.value.id].addChangeListener(function(){return e.sendResponse()})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.options.question.otherChoice&&this.otherChoice.addChangeListener(function(){return e.sendResponse()})}(this.isPlainText()||this.options.question.otherChoice)&&this.textArea.addNodeListener("input",function(){return e.sendResponse()})}}}]),t}(Lc.Element))||FR,OP=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.childIndex=0,e}return h(t,e),o(t,[{key:"getChildIndex",value:function(){return this.childIndex}},{key:"isFirstChild",value:function(){return 0===this.getChildIndex()}},{key:"isLastChild",value:function(){return this.getChildIndex()===this.options.children.length-1}},{key:"updateChildIndex",value:function(e){var t=this.childIndex+e;0<=t&&t<this.options.children.length&&(this.childIndex=t,this.setActive(this.options.children[this.childIndex]))}}]),t}(Of),RP=(UR=Ze(IP))(zR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getQuestionnaire",value:function(){return SR.get(this.options.questionnaireId)}},{key:"getQuestions",value:function(){return this.getQuestionnaire().getQuestions()}},{key:"render",value:function(){var e=this,t=this.getQuestions();return[Lc.createElement(OP,{ref:"questionPageSwitcher",style:{minHeight:"300px"}},t.map(function(t){return Lc.createElement(NP,{question:t,panel:e})})),Lc.createElement("div",{className:this.styleSheet.footer},Lc.createElement("div",null,Lc.createElement(Md,{level:Pc.PRIMARY,faIcon:"arrow-left",ref:"backButton"})),Lc.createElement("div",{ref:"progressArea"}),Lc.createElement("div",null,Lc.createElement(Md,{level:Pc.PRIMARY,faIcon:"arrow-right",ref:"forwardButton"})))]}},{key:"finish",value:function(){zu.postJSON("/questionnaire_submit/",{questionnaireId:this.options.questionnaireId}),this.dispatch("finished"),this.parent instanceof MP&&this.parent.dispatch("finished")}},{key:"updateFooter",value:function(){var e=this;this.backButton.setStyle("visibility",this.questionPageSwitcher.isFirstChild()?"hidden":"initial");var t=this.questionPageSwitcher.isLastChild();this.forwardButton.setStyle("visibility",t?"hidden":"initial"),this.getQuestions()[this.questionPageSwitcher.childIndex].getCurrentUserResponse()?this.forwardButton.updateOptions({faIcon:"arrow-right",label:""}):this.forwardButton.updateOptions({faIcon:"",label:Lc.T("Skip")}),t?this.progressArea.setChildren([Lc.createElement(Md,{onClick:function(){return e.finish()},level:Pc.PRIMARY},Lc.T("Finish"))]):this.progressArea.setChildren([Lc.createElement("div",{style:{fontSize:"1.3em"}},(this.questionPageSwitcher.getChildIndex()+1).toString()+"/"+this.getQuestions().length)])}},{key:"onMount",value:function(){var e=this;this.updateFooter(),this.backButton.addClickListener(function(){e.questionPageSwitcher.updateChildIndex(-1),e.updateFooter()}),this.forwardButton.addClickListener(function(){e.questionPageSwitcher.updateChildIndex(1),e.updateFooter()}),this.addListener("updateFooter",function(){e.updateFooter()})}}]),t}(Lc.Element))||zR,MP=(WR=Ze(IP))(HR=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"isFinished",value:function(){return!!AP.getCurrentUserInstance(this.options.questionnaireId).dateSubmitted}},{key:"render",value:function(){return this.options.error?iT.renderError(this.options.error):this.options.loaded?Lc.createElement(RP,{questionnaireId:this.options.questionnaireId}):iT.renderLoading()}},{key:"onMount",value:function(){var e=this;zu.postJSON("/questionnaire_state/",{questionnaireId:this.options.questionnaireId}).then(function(){return e.updateOptions({loaded:!0})},function(t){return e.updateOptions({error:t})})}}]),t}(Lc.Element))||HR,PP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return Lc.createElement(MP,{questionnaireId:this.options.questionnaireId,ref:"questionnairePanel"})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.questionnairePanel.addListener("finished",function(){return e.hide()})}}]),t}(Qg),DP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{level:Pc.PRIMARY,label:Lc.T("Open Questionnaire")}}},{key:"getModalOptions",value:function(){return{questionnaireId:this.options.questionnaireId}}}]),t}($g(PP)),BP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({margin:"0 auto",width:"90%",maxWidth:"1000px"})}},{key:"render",value:function(){var e=function(e){return{width:e+"%",display:"inline-block",verticalAlign:"top",textAlign:"none",whiteSpace:"initial",padding:"0px 10px",marginBottom:"-70px"}},t=[Lc.createElement("div",{ref:"leftPanelChild",style:{height:"50px",lineHeight:"50px",fontSize:"1.8em",marginBottom:"-30px",paddingLeft:"16px"}},Lc.T("Latest Blog Entries")),Lc.createElement(_P,{ref:"miniBlog"})],n=Lc.createElement(Uc,null,Lc.createElement(Fc,{selector:"#frontPage h1",attributes:{"font-size":"1.65em","margin-top":"9px","margin-bottom":"5px"}}),Lc.createElement(Fc,{selector:"#frontPage h2",attributes:{"font-size":"1.15em","margin-top":"7px","margin-bottom":"5px"}}),Lc.createElement(Fc,{selector:"#frontPage h3",attributes:{"font-size":"0.88em","margin-top":"7px","margin-bottom":"5px"}}),Lc.createElement(Fc,{selector:"#frontPage h4",attributes:{"font-size":"0.71em","margin-top":"7px","margin-bottom":"5px"}}),Lc.createElement(Fc,{selector:"#frontPage h5",attributes:{"font-size":"0.60em","margin-top":"7px","margin-bottom":"5px"}}),Lc.createElement(Fc,{selector:".panel-body",attributes:{padding:"5px"}}));return rc.isMobileDevice()?[Lc.createElement("div",{ref:"leftPanel",style:e(76)},Lc.createElement(HP,{style:{marginBottom:"40px"}}),Lc.createElement("div",{style:{marginBottom:"40px"}},Lc.createElement(WP,{style:{"margin-bottom":"40px",marginTop:"30px"}}))),Lc.createElement("div",{ref:"rightPanel",style:Object.assign({},e(23),{marginTop:"63.5px"})},t),Lc.createElement("div",{style:Object.assign({},e(100),{marginTop:"63.5px"})},Lc.createElement(UP,{ref:"leaderboard",bodyStyle:{padding:0}}),Lc.createElement(VP,{style:{marginTop:"40px"}}),Lc.createElement(FP,{ref:"suggestionPanel",style:{marginTop:"40px",marginBottom:"40px"}})),n]:[Lc.createElement("div",{ref:"leftPanel",style:e(76)},t),Lc.createElement("div",{ref:"rightPanel",style:Object.assign({},e(23),{marginTop:"63.5px"})},Lc.createElement(HP,{style:{marginBottom:"40px"}}),Lc.createElement("div",{style:{marginBottom:"40px"}},Lc.createElement(WP,{style:{"margin-bottom":"40px",marginTop:"30px"}}),Lc.createElement(VP,null)),Lc.createElement(UP,{ref:"leaderboard",style:{marginBottom:"40px"},bodyStyle:{padding:0}}),Lc.createElement(FP,{ref:"suggestionPanel",style:{marginBottom:"40px"}})),n]}},{key:"recalculateDimensions",value:function(){if(this.getWidth()<=900)return this.setStyle("white-space","initial"),this.rightPanel.setWidth("100%"),void this.leftPanel.setWidth("100%");this.leftPanel.setWidth("76%"),this.rightPanel.setWidth("23%"),this.setStyle("white-space","nowrap")}},{key:"onMount",value:function(){var e=this;setTimeout(function(){e.recalculateDimensions()},0),window.addEventListener("resize",function(){e.recalculateDimensions()}),this.addListener("show",function(){e.recalculateDimensions()})}}]),t}(Lc.Element),_P=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=[],t=IS.all().sort(function(e,t){return t.getArticle().dateCreated-e.getArticle().dateCreated}),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.push(Lc.createElement(MT,{key:s.id,entryId:s.id,urlPrefix:"/blog/",style:{marginBottom:"-20px !important"}}))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e}}]),t}(Lc.Element),FP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Feedback")}},{key:"render",value:function(){var e,t=this;return this.options.children=[Lc.createElement("div",{style:{textAlign:"center",fontSize:"1.1em",height:"30px",lineHeight:"30px"},ref:"titleHeader"},Lc.T("Tell us what you think!")),Lc.createElement("div",{ref:"writingSection",className:"text-center"},Lc.createElement(Vg,{ref:"textInput",style:(e={overflow:"auto",resize:"none",width:"100%",height:"50px",maxWidth:"90%"},s(e,"height","30px"),s(e,"borderRadius","0px"),e)}),Lc.createElement(Md,{ref:"sendFeedbackButton",style:{margin:"2px",backgroundColor:"#fff",border:"0",color:"#337ab7",padding:"0",marginTop:"2px"},faIcon:"book",level:Pc.PRIMARY,size:Dc.MEDIUM,onClick:function(){return t.sendFeedback()},label:Lc.T("Send feedback")}))],this.options.children}},{key:"afterFeedbackSent",value:function(){this.titleHeader.hide(),this.textInput.hide(),this.sendFeedbackButton.setLabel(Lc.T("Thanks for your feedback!")),this.sendFeedbackButton.setLevel(Pc.SUCCESS),this.sendFeedbackButton.setFaIcon("check-square"),this.sendFeedbackButton.disable(),this.options.sentFeedback=!0}},{key:"sendFeedback",value:function(){var e=this;if(!USER.isAuthenticated)return void aE.show();var t=(this.textInput.getValue()||"").trim();if(0!==t.length&&!this.options.sentFeedback){var n={message:t,clientMessage:"{}"};zu.postJSON("/send_feedback/",n).then(function(){return e.afterFeedbackSent()})}}}]),t}(ub),UP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Leaderboard")}},{key:"render",value:function(){return[Lc.createElement(bR,{style:{fontSize:"0.9em",padding:"0 !important",borderTop:"0",borderBottom:"1px solid #ddd"}}),Lc.createElement("div",{style:{textAlign:"center",height:"32px",lineHeight:"32px",padding:"0 !important"}},Lc.createElement(Xd,{href:"/ratings/",value:Lc.T("See full leaderboard")}))]}}]),t}(ub),zP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContests",value:function(){var e=this,t=XS.all().filter(function(t){return t.systemGenerated&&!t.hasFinished()&&t.originArchiveId===e.options.originArchiveId}).sort(function(e,t){return e.getStartTime()-t.getStartTime()});return 0===t.length?null:t}},{key:"goToContest",value:function(e){var t=this;if(e.isRunning()||e.getUser(USER.id))return void nm.changeURL(["contest",e.name]);if(!USER.isAuthenticated)return void aE.show();var n={contestId:e.id};zu.postJSON("/contest/register/",n).then(function(){return t.redraw()})}},{key:"render",value:function(){var e=this,t=this.getContests(),n=[Lc.createElement("div",{style:{width:"100%","font-size":".9em",textTransform:"uppercase",height:"28px",fontWeight:"bold"}},this.options.name)],i={flex:"1",padding:"4px",minHeight:"120px",verticalAlign:"middle",position:"relative"},r={position:"absolute",width:"100%",left:"50%",top:"50%",transform:"translate(-50%, -50%)"};if(t){1!==t.length||t[0].isRunning()||n.push(Lc.createElement("div",{style:i},Lc.createElement("em",{style:r},Lc.T("No contest running"))));var a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)!function(){var t=l.value,r=Lc.T("Register"),a=Lc.T("Next contest"),o=void 0,s=void 0;t.isRunning()?a=Lc.T("Current contest"):(o=VS.all().filter(function(e){return e.contestId===t.id}),o.length>0&&(s=Lc.createElement("div",{style:{display:"block",position:"relative"}},Lc.createElement(dT,{style:{position:"relative",overflow:"hidden",cursor:"pointer",color:"blue"},popupContent:function(){return o.map(function(e){return Lc.createElement("div",{style:{width:"100%",height:"25px","line-height":"25px"}},Lc.createElement(sE,{userId:e.userId}))})}},Lc.T("Users registered"),": ",o.length)))),(t.isRunning()||t.getUser(USER.id))&&(r=Lc.T("Go to contest")),n.push(Lc.createElement("div",{style:i},Lc.createElement("h5",{style:{textTransform:"uppercase",fontWeight:"bold",fontSize:"90%"}},a),Lc.createElement("div",null,Lc.createElement(nR,{contest:t})),Lc.createElement("div",null,Lc.createElement(Md,{onClick:function(){e.goToContest(t)},level:Pc.PRIMARY,size:Dc.SMALL},r)),s))}()}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}}else n.push(Lc.createElement("div",{style:i},Lc.createElement("em",{style:r},Lc.T("No contest scheduled"))));return Lc.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",textAlign:"center"}},n)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),XS.addCreateListener(function(){e.redraw()}),VS.addCreateListener(function(t){var n=t.getContest();n&&n.systemGenerated&&!n.hasFinished()&&n.originArchiveId===e.options.originArchiveId&&e.redraw()}),XS.addDeleteListener(function(){e.redraw()})}}]),t}(Lc.Element),WP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Upcoming Contests")}},{key:"render",value:function(){var e=XS.all().filter(function(e){return!e.systemGenerated&&!e.hasFinished()&&!e.isInfinite()}),t=[];if(e.length){var n=e.filter(function(e){return e.hasStarted()}),i=e.filter(function(e){return!e.hasStarted()});n=n.sort(function(e,t){return-t.getEndTime()+e.getEndTime()}),i=i.sort(function(e,t){return-t.getStartTime()+e.getStartTime()}),t=n.concat(i).map(function(e){return Lc.createElement("div",{style:{border:"2px  #ddd",borderRadius:"8px",textAlign:"center",margin:"1px"}},Lc.createElement("div",{style:{fontSize:"1.3em"}},Lc.createElement(Xd,{href:"/contest/"+e.name,value:e.longName})),Lc.createElement("div",{style:{fontSize:"1em",paddingTop:"8px"}},e.getFormattedStartTime()),Lc.createElement("div",{style:{fontSize:"1em",paddingTop:"8px",fontWeight:"bold",fontStyle:"italic"}},Lc.createElement(nR,{contest:e})))})}else t.push(Lc.createElement("div",{style:{textAlign:"center"}},Lc.T("No upcoming contests.")));return t.push(Lc.createElement("div",{style:{textAlign:"center",paddingTop:"8px"}},Lc.createElement(Xd,{href:"/contests/",value:Lc.T("See full contests list")}))),Lc.createElement("div",{style:{padding:"8px"}},t)}}]),t}(ub),HP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(ub,{title:Lc.T("Contest Preferences Survey")},Lc.createElement("div",{style:{padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},Lc.createElement("div",{style:{paddingBottom:"8px"}},"Please take a couple of minutes to answer a few questions regarding the CS Academy contests."),Lc.createElement(DP,{questionnaireId:2,label:"Take the Survey"})))]}}]),t}(Lc.Element),VP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e={flex:"1",paddingTop:"8px",paddingBottom:"8px"};return[Lc.createElement(ub,{title:Lc.T("Hourly Contests"),style:{display:"flex",flexDirection:"column"},bodyStyle:{display:"flex",flex:"1"}},Lc.createElement(zP,{originArchiveId:1,name:Lc.T("Algorithms"),style:e}),Lc.createElement(zP,{originArchiveId:3,name:Lc.T("Interviews"),style:e}))]}}]),t}(Lc.Element),GP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("width","60%"),e.setStyle("margin-left","20%")}},{key:"render",value:function(){return[Lc.createElement("h1",{style:"margin-bottom: 20px;"},"Problem setting"),Lc.createElement("p",null,"We are looking for hard problems. Each Div. 1 + Div. 2 round consists of ",Lc.createElement("strong",null,"7")," tasks of varying difficulty. The first few are addressed to the casual competitors, while the last three are supposed to be more challenging. These last three problems (let's label them ",Lc.createElement("strong",null,"1, 2, 3"),", with ",Lc.createElement("strong",null,"1")," being the hardest) are what we are looking for."),Lc.createElement("p",null,"You can check out previous Rounds",Lc.createElement(Xd,{value:"#4",href:"/contest/beta-round-4/"}),",",Lc.createElement(Xd,{value:"#9",href:"/contest/round-9/"})," and",Lc.createElement(Xd,{value:"#18",href:"/contest/round-18/"}),"to get an idea about the kind of tasks we consider suitable for future contests."),Lc.createElement("p",null,"As the bottleneck of setting a contest usually consists of finding a suitable ",Lc.createElement("strong",null,"1"),"(the hardest problem), we will accept the following proposals:"),Lc.createElement("ul",null,Lc.createElement("li",null,Lc.createElement("strong",null,"1"),": 200$"),Lc.createElement("li",null,Lc.createElement("strong",null,"1 + 2"),": 200$ + 125$ = 325$"),Lc.createElement("li",null,Lc.createElement("strong",null,"1 + 2 + 3"),": 200$ + 125$ + 75$ = 400$")),Lc.createElement("p",null,"The first step of becoming a problem setter consists in sending us an email at",Lc.createElement("a",{href:"mailto:contact@csacademy.com"},"contact@csacademy.com")," consisting of:"),Lc.createElement("ul",null,Lc.createElement("li",null," Short problem statement. Leave out any unnecessary story details, as we will write the final draft. Our policy is to create minimalistic statements. "),Lc.createElement("li",null," Solution description (.txt, .pdf, .doc, .docx, etc.) ")),Lc.createElement("p",null,"If we accept your proposal you will be required to further provide:"),Lc.createElement("ul",null,Lc.createElement("li",null," Official solution in C++ and/or Java. "),Lc.createElement("li",null," Tests. "),Lc.createElement("li",null," Checker (if it's the case). "),Lc.createElement("li",null," (Optional): Brute force, wrong greedy, or any other solution that shouldn't pass the test cases. ")),Lc.createElement("p",null,"For any other questions contact us at ",Lc.createElement("a",{href:"mailto:contact@csacademy.com"},"contact@csacademy.com"),".")]}}]),t}(Lc.Element),jP={BLUE:"#202e3e",HOVER_BLUE:"#364251",BLACK:"#1c2937",HOVER_BLACK:"#364251",WHITE:"#eee"},YP={color:jP},JP=(VR=jR=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"lessonSectionPanel",GR,y(n)),n}return h(t,e),t}(Jc),GR=R(VR.prototype,"lessonSectionPanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"800px",maxWidth:"80%",margin:"0 auto",marginBottom:"30px"}}}),VR),qP=(YR=QR=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"articleRenderer",JR,y(n)),O(n,"className",qR,y(n)),O(n,"comments",XR,y(n)),O(n,"commentsContainer",KR,y(n)),n}return h(t,e),t}(Jc),JR=R(YR.prototype,"articleRenderer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px",textAlign:"justify"," h1":{textAlign:"center",marginTop:"25px",marginBottom:"25px"}," h2":{textAlign:"center",marginTop:"25px",marginBottom:"25px"}," h3":{textAlign:"center",marginTop:"25px",marginBottom:"25px"}," h4":{textAlign:"center",marginTop:"25px",marginBottom:"25px"}," h5":{textAlign:"center",marginTop:"25px",marginBottom:"25px"}," h6":{textAlign:"center",marginTop:"25px",marginBottom:"25px"}}}}),qR=R(YR.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#fff",boxShadow:"rgb(160, 160, 160) 0px 3px 15px",width:"900px",padding:"2% 5%",maxWidth:"100%",margin:"0 auto"}}}),XR=R(YR.prototype,"comments",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxWidth:"100%"}}}),KR=R(YR.prototype,"commentsContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"20px",paddingBottom:"20px",paddingTop:"10px"}}}),YR),XP=(ZR=Ze(JP))($R=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.lessonSectionPanel)}},{key:"getLessons",value:function(){return this.options.lessonSection.getLessons()}},{key:"getLessonURL",value:function(e){return"/lesson/"+e}},{key:"render",value:function(){var e=this,t=this.options.title,n=this.getLessons();return USER.isSuperUser||(n=n.filter(function(e){return e.visible})),0!==n.length||USER.isSuperUser?Lc.createElement(ub,{title:t,headingCentered:!1,size:Dc.LARGE},Lc.createElement(Xb,{rows:n,alternateColors:!1,size:Dc.LARGE,rowParser:function(t,n){return Lc.createElement(Xd,{href:e.getLessonURL(t.urlName),value:t.name})}})):null}}]),t}(Lc.Element))||$R,KP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return NC.all().map(function(e){return Lc.createElement(XP,{title:e.name,lessonSection:e})})}}]),t}(Lc.Element),QP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getModalWindowStyle",value:function(){return Object.assign({},w(d(t.prototype),"getModalWindowStyle",this).call(this),{margin:"0 auto",maxHeight:"100%",overflow:"initial",display:"flex",flexDirection:"column",top:"1vh",height:"98vh"})}},{key:"render",value:function(){var e=this,t=this.options.lesson,n=t.getArticle(),i=null;return t.discussionId||(i=Lc.createElement(Md,{level:Pc.WARNING,label:"Create discussion",onClick:function(){return e.createDiscussion()},style:{marginLeft:"5px"}})),
[Lc.createElement("h1",null,"Edit Lesson"),Lc.createElement("div",null,Lc.createElement(Nb,{label:"Title"},Lc.createElement(vg,{ref:"titleInput",value:n.name})),Lc.createElement(Nb,{label:"URL Name"},Lc.createElement(vg,{ref:"urlInput",value:t.urlName})),Lc.createElement(Nb,{label:"Visible"},Lc.createElement(Eg,{ref:"visibleCheckbox",value:t.visible})),Lc.createElement(Md,{level:Pc.PRIMARY,label:"Change settings",onClick:function(){return e.changeSettings()}}),i,Lc.createElement($d,{ref:"messageArea"})),Lc.createElement(CT,{ref:"contentEditor",articleId:n.id,style:{flex:"1"}})]}},{key:"changeSettings",value:function(){var e=this.titleInput.getValue(),t=this.urlInput.getValue(),n=this.options.lesson,i={isVisible:this.visibleCheckbox.getValue()};e&&(i.title=e),t&&(i.urlName=t),zu.postJSON("/lesson/"+n.urlName+"/edit/",i)}},{key:"createDiscussion",value:function(){var e=this,t={};zu.postJSON("/lesson/"+this.options.lesson.urlName+"/create_discussion/",t).then(function(t){return e.hide()})}}]),t}(Qg),ZP=(eM=Ze(qP))((iM=nM=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.className)}},{key:"render",value:function(){var e,n=LC.all().find(function(e){return e.urlName===nm.parseURL()[1]}),i=n.getArticle();n.discussionId&&(e=Lc.createElement(NT,{chatId:n.discussionId,className:this.styleSheet.comments}));var r;return USER.isSuperUser&&(r=Lc.createElement(Md,{label:"Edit",onClick:function(){QP.show({lesson:n,fillScreen:!0})}})),[r,Lc.createElement(FC,{article:i,classMap:t.LessonClassMap,liveLanguage:!0,className:this.styleSheet.articleRenderer}),Lc.createElement("div",{className:this.styleSheet.commentsContainer},e)]}},{key:"onMount",value:function(){var e=document.body.style.backgroundColor;document.body.style.backgroundColor="#f3f4f6",this.addListener("urlEnter",function(){e=document.body.style.backgroundColor,document.body.style.backgroundColor="#f3f4f6"}),this.addListener("urlExit",function(){document.body.style.backgroundColor=e})}}]),t}(jd),nM.LessonClassMap=new op(op.GLOBAL,[["ContestTaskButton",eR]]),tM=iM))||tM,$P=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.faIcon||(e.label=e.label||Lc.T("Preview")),e.level=e.level||Pc.PRIMARY,w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(){if(!USER.isAuthenticated)return void aE.show();eD.show({messageInstance:e.options.messageInstance,classMap:wk.classMap})})}}]),t}(Md),eD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.markupEditor.setValue(this.options.messageInstance.getContent()),this.doneButton.addClickListener(function(){e.options.messageInstance.edit(e.markupEditor.getValue())})}}]),t}(XE),tD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Delete message")}},{key:"getActionName",value:function(){return Lc.T("Delete")}},{key:"getBody",value:function(){return Lc.createElement("p",null,Lc.T("Are you sure you want to delete the message?"))}},{key:"action",value:function(){this.options.messageInstance.deleteMessage(),this.hide()}}]),t}(Zg),nD=$g(tD),iD={BLUE:"#202e3e",HOVER_BLUE:"#364251",BLACK:"#1c2937",HOVER_BLACK:"#364251",WHITE:"#eee"},rD=(rM=cM=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"mainClass",aM,y(n)),O(n,"repliesUserAndDate",oM,y(n)),O(n,"repliesUser",sM,y(n)),O(n,"repliesDate",lM,y(n)),O(n,"repliesContent",uM,y(n)),n}return h(t,e),t}(Jc),aM=R(rM.prototype,"mainClass",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",margin:"0 auto",maxWidth:"1200px"}}}),oM=R(rM.prototype,"repliesUserAndDate",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"40px",width:"100%",lineHeight:"40px",fontSize:"15px",marginTop:"8px",marginBottom:"8px"}}}),sM=R(rM.prototype,"repliesUser",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",color:"#444",fontSize:"14px"}}}),lM=R(rM.prototype,"repliesDate",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right"}}}),uM=R(rM.prototype,"repliesContent",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"15px",fontSize:"16px"}}}),hM=OM=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.fontSize="0.9em",n.numRepliesFontSize="1.03em",n.messageFontSize="1.2em",n.buttonFontSize="1em",O(n,"mainClass",dM,y(n)),O(n,"title",pM,y(n)),O(n,"backButton",fM,y(n)),O(n,"replyButtonDiv",gM,y(n)),O(n,"replyButton",mM,y(n)),O(n,"fullPost",vM,y(n)),O(n,"dislikeButton",yM,y(n)),O(n,"likeButton",bM,y(n)),O(n,"author",kM,y(n)),O(n,"header",wM,y(n)),O(n,"message",EM,y(n)),O(n,"buttons",SM,y(n)),O(n,"bottomPanel",CM,y(n)),O(n,"voting",xM,y(n)),O(n,"numReplies",TM,y(n)),O(n,"replies",AM,y(n)),O(n,"editDeleteButtons",LM,y(n)),O(n,"editButton",IM,y(n)),O(n,"deleteButton",NM,y(n)),n}return h(t,e),t}(Jc),dM=R(hM.prototype,"mainClass",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0 auto",marginBottom:"20px",width:"100%"}}}),pM=R(hM.prototype,"title",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",maxWidth:"1200px",margin:"0 auto",fontSize:"2em",color:"#333",minHeight:"50px",display:"flex",justifyContent:"center",alignItems:"center"}}}),fM=R(hM.prototype,"backButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#444",fontSize:this.fontsize,textDecoration:"none",transition:".15s",opacity:"1",":hover":{opacity:"1",color:"#337ab7",transition:".15s"}}}}),gM=R(hM.prototype,"replyButtonDiv",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",maxWidth:"1200px",height:"50px",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"0 auto"}}}),mM=R(hM.prototype,"replyButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0"}}}),vM=R(hM.prototype,"fullPost",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",maxWidth:"1200px",margin:"0 auto",fontSize:this.fontSize,border:"1px solid #ddd",borderTop:"0"}}}),yM=R(hM.prototype,"dislikeButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right",marginRight:"16px"}}}),bM=R(hM.prototype,"likeButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right",marginRight:"8px"}}}),kM=R(hM.prototype,"author",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#262626",fontSize:this.fontSize,height:"50px",display:"flex",alignItems:"center",paddingLeft:"0",textTransform:"uppercase"}}}),wM=R(hM.prototype,"header",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),EM=R(hM.prototype,"message",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"5px 12px",fontSize:this.messageFontSize,color:iD.BLUE," p":{marginBottom:"0",padding:"5px 0"}}}}),SM=R(hM.prototype,"buttons",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"50px",width:"100%",paddingTop:"12px"}}}),CM=R(hM.prototype,"bottomPanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"50px",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"}}}),xM=R(hM.prototype,"voting",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingRight:"12px"}}}),TM=R(hM.prototype,"numReplies",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"50px",fontSize:this.numRepliesFontSize,paddingLeft:"12px",color:"#767676",display:"flex",alignItems:"center",fontWeight:"bold",textTransform:"uppercase"}}}),AM=R(hM.prototype,"replies",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",color:"#444"}}}),LM=R(hM.prototype,"editDeleteButtons",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:"50px",padding:"0 7px",display:"flex",alignItems:"center",justifyContent:"flex-start"}}}),IM=R(hM.prototype,"editButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"35px",width:"35px",margin:"0 4px",border:"0",borderRadius:"0",color:"#fff",backgroundColor:"#333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:this.buttonFontSize,transition:".2s",":hover":{backgroundColor:"#454545",transition:".2s"}}}}),NM=R(hM.prototype,"deleteButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"35px",width:"35px",margin:"0 4px",border:"0",borderRadius:"0",color:"#fff",backgroundColor:"#333",display:"flex",alignItems:"center",justifyContent:"center",fontSize:this.buttonFontSize,transition:".2s",":hover":{backgroundColor:"#454545",transition:".2s"}}}}),hM),aD=(RM=PM=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"button",MM,y(n)),n}return h(t,e),t}(Jc),MM=R(RM.prototype,"button",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return e={marginLeft:"16px",color:"#fff",height:"30px",marginTop:"10px",marginBottom:"20px",width:"auto",borderRadius:"0px",backgroundColor:iD.BLUE,border:"0",padding:"5px 10px"},s(e,"marginBottom","0"),s(e,"borderColor",iD.BLUE),s(e,"fontSize","13px"),s(e,"transition",".2s"),s(e,"outline","none"),s(e,":hover",{backgroundColor:iD.HOVER_BLUE,borderColor:iD.HOVER_BLUE,transition:".2s"}),s(e,":active",{backgroundColor:iD.HOVER_BLUE,borderColor:iD.HOVER_BLUE,transition:".2s"}),s(e,":focus",{backgroundColor:iD.HOVER_BLUE,borderColor:iD.HOVER_BLUE,transition:".2s"}),e}}),RM),oD=(DM=VM=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,{updateOnResize:!0})),e.fontSize="0.85em",e.widthLimit=800,e.tagsHeight=50,e.borderTopColor="#333",e.baseStyleObject={height:e.tagsHeight+"px",color:"#262626",display:"flex",justifyContent:"center",alignItems:"center",textTransform:"uppercase",fontWeight:"bold"},O(e,"mainClass",BM,y(e)),O(e,"tagsTitle",_M,y(e)),O(e,"tagsAuthor",FM,y(e)),O(e,"tagsReplies",UM,y(e)),O(e,"tagsViews",zM,y(e)),O(e,"tagsVotes",WM,y(e)),O(e,"tagsActivity",HM,y(e)),e}return h(t,e),t}(Jc),BM=R(DM.prototype,"mainClass",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return e={height:"40px",width:"100%",maxWidth:"1200px",marginLeft:"auto",marginRight:"auto",color:"#aaa",display:"flex",boxSizing:"content-box",backgroundColor:"#eaeaea"},s(e,"height",this.tagsHeight+"px"),s(e,"borderTop","3px solid "+this.borderTopColor),e}}),_M=R(DM.prototype,"tagsTitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return[this.baseStyleObject,{paddingLeft:"12px",flex:function(){return window.innerWidth<e.widthLimit?"1.5":"3"},justifyContent:"initial",fontSize:this.fontSize}]}}),FM=R(DM.prototype,"tagsAuthor",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{paddingLeft:"4px",paddingRight:"4px",flex:".7",textAlign:"center",fontSize:this.fontSize}]}}),UM=R(DM.prototype,"tagsReplies",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return[this.baseStyleObject,(e={paddingLeft:"4px",paddingRight:"4px"},s(e,"paddingLeft","4px"),s(e,"paddingRight","4px"),s(e,"flex",".5"),s(e,"textAlign","center"),s(e,"fontSize",this.fontSize),e)]}}),zM=R(DM.prototype,"tagsViews",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return[this.baseStyleObject,{paddingLeft:"4px",paddingRight:"4px",flex:".5",textAlign:"center",fontSize:this.fontSize,display:function(){return console.log(window.innerWidth),window.innerWidth<e.widthLimit?"none":"inherit"}}]}}),WM=R(DM.prototype,"tagsVotes",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return[this.baseStyleObject,{paddingLeft:"4px",paddingRight:"4px",flex:".5",textAlign:"center",fontSize:this.fontSize,display:function(){return window.innerWidth<e.widthLimit?"none":"inherit"}}]}}),HM=R(DM.prototype,"tagsActivity",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{paddingLeft:"4px",paddingRight:"12px",flex:".5",textAlign:"center",fontSize:this.fontSize}]}}),DM),sD=(GM=YM=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.maxHeight=50,n.lines=2,n.lineHeight=n.maxHeight/n.lines,n.fontSize=".88em",n.color="#aaa",O(n,"forumThreadPreview",jM,y(n)),n}return h(t,e),t}(Jc),jM=R(GM.prototype,"forumThreadPreview",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxHeight:this.maxHeight+"px",lineHeight:this.lineHeight+"px",overflow:"hidden",fontSize:this.fontSize,color:this.color," *":{marginBottom:"0"}}}}),GM),lD=(JM=lP=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,{updateOnResize:!0})),e.fontSize="1em",e.titlePaddingBottom="10px",e.widthLimit=800,e.baseStyleObject={display:"inline-block",verticalAlign:"top",fontSize:e.fontSize},O(e,"backgroundColorOddInstances",qM,y(e)),O(e,"backgroundColorPinnedInstances",XM,y(e)),O(e,"backgroundColorEvenInstances",KM,y(e)),O(e,"mainClass",QM,y(e)),O(e,"threadTitleAndPreview",ZM,y(e)),O(e,"threadTitle",$M,y(e)),O(e,"pinnedIcon",eP,y(e)),O(e,"threadTitleSpan",tP,y(e)),O(e,"threadAuthor",nP,y(e)),O(e,"threadReplies",iP,y(e)),O(e,"threadRepliesSpan",rP,y(e)),O(e,"threadViews",aP,y(e)),O(e,"threadVotes",oP,y(e)),O(e,"threadActivity",sP,y(e)),e}return h(t,e),t}(Jc),qM=R(JM.prototype,"backgroundColorOddInstances",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#f4f6f7",":hover":{backgroundColor:"#eff1f2"}}}}),XM=R(JM.prototype,"backgroundColorPinnedInstances",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#f4f6f7",":hover":{backgroundColor:"#eff1f2"}}}}),KM=R(JM.prototype,"backgroundColorEvenInstances",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#fff",":hover":{backgroundColor:"#fafafa"}}}}),QM=R(JM.prototype,"mainClass",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",maxWidth:"1200px",marginLeft:"auto",marginRight:"auto",color:"#555",border:"1px solid #ddd",borderTop:"0",display:"flex"}}}),ZM=R(JM.prototype,"threadTitleAndPreview",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{flexDirection:"column",flex:function(){return window.innerWidth<e.widthLimit?"1.5":"3"},paddingTop:"25px",paddingBottom:"25px",paddingLeft:"12px"}}}),$M=R(JM.prototype,"threadTitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{flexDirection:"column",textAlign:"justify",verticalAlign:"middle",wordWrap:"break-word",color:"#252628",paddingBottom:this.titlePaddingBottom}]}}),eP=R(JM.prototype,"pinnedIcon",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",display:"inline-block",float:"left",height:"60px",paddingTop:"25px",paddingRight:"12px"}}}),tP=R(JM.prototype,"threadTitleSpan",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",verticalAlign:"middle",lineHeight:"20px",transition:"0.2s",fontSize:"1.2em",":hover":{color:"#337ab7",transition:"0.2s"}}}}),nP=R(JM.prototype,"threadAuthor",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{flex:".7",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"4px"}]}}),iP=R(JM.prototype,"threadReplies",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{flex:".5",textAlign:"center",fontWeight:"bold",color:"#767676",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"4px"}]}}),rP=R(JM.prototype,"threadRepliesSpan",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:"0.2s",":hover":{color:"#337ab7",transition:"0.2s"}}}}),aP=R(JM.prototype,"threadViews",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return[this.baseStyleObject,s({flex:".5",textAlign:"center",color:"#767676",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"4px"},"display",function(){return window.innerWidth<e.widthLimit?"none":"inherit"})]}}),oP=R(JM.prototype,"threadVotes",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return[this.baseStyleObject,s({flex:".5",textAlign:"center",color:"#767676",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"4px"},"display",function(){return window.innerWidth<e.widthLimit?"none":"inherit"})]}}),sP=R(JM.prototype,"threadActivity",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.baseStyleObject,{flex:".5",textAlign:"center",color:"#767676",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"4px",paddingRight:"12px",fontSize:".85em"}]}}),JM),uD=(uP=gP=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.textColor="#333",n.headerItemHeight=50,O(n,"mainClass",cP,y(n)),O(n,"title",hP,y(n)),O(n,"buttonParent",dP,y(n)),O(n,"button",pP,y(n)),O(n,"header",fP,y(n)),n}return h(t,e),t}(Jc),cP=R(uP.prototype,"mainClass",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),hP=R(uP.prototype,"title",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",fontSize:"2em",color:this.textColor,height:this.headerItemHeight+"px",display:"flex",justifyContent:"center",alignItems:"center"}}}),dP=R(uP.prototype,"buttonParent",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"90%",maxWidth:"1200px",margin:"0 auto",height:this.headerItemHeight+"px",display:"flex",justifyContent:"flex-end",alignItems:"center"}}}),pP=R(uP.prototype,"button",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0"}}}),fP=R(uP.prototype,"header",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:2*this.headerItemHeight+"px",width:"100%"}}}),uP),cD=(mP=Ze(aD))(vP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{level:Pc.PRIMARY,size:Dc.LARGE,label:Lc.T("Preview")}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.button)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(){if(!USER.isAuthenticated)return void aE.show();e.markupEditorModal||(e.markupEditorModal=Lc.createElement(hD,{forumThreadId:e.options.forumThreadId,classMap:wk.classMap})),e.markupEditorModal.show()})}}]),t}(Md))||vP,hD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.doneButton.addClickListener(function(){e.createThreadReply()})}},{key:"createThreadReply",value:function(){zu.postJSON("/forum/forum_thread_post/",{forumThreadId:this.options.forumThreadId,message:this.markupEditor.getValue()})}}]),t}(XE),dD=rD.getInstance();aD.getInstance();var pD,fD,gD,mD,vD,yD,bD,kD,wD,ED,SD,CD,xD,TD,AD,LD,ID,ND=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e={"margin-bottom":"4px",border:"0",outline:"none",color:"#333","font-size":"14px","padding-left":"8px",width:"100%","text-align":"center","font-weight":"bold"};return[Lc.createElement(gg,{label:Lc.T("Title"),ref:"titleInput",style:e,placeholder:"Click here to edit the title (max. 160 characters)."})].concat(C(w(d(t.prototype),"render",this).call(this)))}},{key:"onMount",value:function(){var e=this;this.doneButton.addClickListener(function(){e.createForumThread()})}},{key:"routeToThread",value:function(e){nm.changeURL(["forum",e,"title"])}},{key:"createForumThread",value:function(){var e=this,t={forumId:this.options.forumId,title:this.titleInput.getValue(),message:this.markupEditor.getValue()};zu.postJSON("/forum/create_forum_thread/",t).then(function(t){e.routeToThread(t.forumThreadId),e.titleInput.setValue(""),e.markupEditor.setValue(""),e.markupEditor.redraw(),e.hide()})}}]),t}(XE),OD=(yP=Ze(aD))(bP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.button)}},{key:"setOptions",value:function(e){e.faIcon||(e.label=e.label||Lc.T("Preview")),e.level=e.level||Pc.PRIMARY,e.size=e.size||Dc.LARGE,w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getModalClass",value:function(){return ND}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(){if(!USER.isAuthenticated)return void aE.show();e.getModalClass().show({forumId:e.options.forumId,classMap:wk.classMap})})}}]),t}(Md))||bP,RD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Delete forum thread")}},{key:"getActionName",value:function(){return Lc.T("Delete")}},{key:"getBody",value:function(){return Lc.createElement("p",null,Lc.T("Are you sure you want to delete thread"),' "'+this.options.forumThread.title+'"?')}},{key:"action",value:function(){this.options.forumThread.deleteThread(),this.hide()}}]),t}(Zg),MD=$g(RD),PD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){}},{key:"getMessageInstance",value:function(){return this.options.messageInstance}},{key:"render",value:function(){var e,t,n=this.getMessageInstance(),i=Lc.createElement("span",null);return(USER.isSuperUser||USER.id===n.userId)&&(e=Lc.createElement(nD,{faIcon:"trash",level:Pc.DANGER,className:dD.deleteButton,modalOptions:{messageInstance:n}}),t=Lc.createElement($P,{faIcon:"pencil",level:Pc.INFO,messageInstance:n,forumThreadPanel:this,className:dD.editButton}),i=Lc.createElement("div",{className:dD.editDeleteButtons,style:{width:"auto"}},t,e)),[Lc.createElement("div",{className:dD.fullPost},Lc.createElement("div",{className:dD.author,style:{fontSize:"1em",paddingLeft:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"}},Lc.createElement(sE,{id:n.userId,style:{textTransform:"initial",fontSize:"1.1em"}}),Lc.createElement(np,{timeStamp:n.getDate(),style:{color:"#262626 !important",paddingRight:"12px"}})),Lc.createElement(wk,{ref:this.refLink("postContent"+n.id),value:n.getContent(),className:dD.message}),Lc.createElement("div",{className:dD.bottomPanel},i,Lc.createElement($E,{height:40,balanceColor:"#313534",notVoteColor:"#313534",message:n,className:dD.voting})))]}},{key:"onMount",value:function(){var e=this;this.attachEventListener(this.getMessageInstance(),"messageDelete",function(){e.hide()}),this.attachEventListener(this.getMessageInstance(),"messageEdit",function(){e.redraw()})}}]),t}(Lc.Element),DD=(kP=Ze(rD))(wP=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.mainClass)}},{key:"returnToMainForum",value:function(){nm.changeURL(this.getMainForumURL())}},{key:"getMainForumURL",value:function(){return"/forum/"}},{key:"getForumThreadState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au,n={forumThreadId:this.options.forumThread.id};zu.postJSON("/forum/forum_thread_state/",n).then(t,function(t){e.returnToMainForum(),aN.showErrorAlert(t)})}},{key:"getForumThread",value:function(){return this.options.forumThread}},{key:"getTitle",value:function(){return[Lc.createElement("div",{className:this.styleSheet.title},Lc.createElement(Xd,{href:this.getMainForumURL(),className:this.styleSheet.backButton,value:Lc.createElement("span",{className:"fa fa-arrow-left",style:{paddingRight:"10px",fontSize:".8em",color:"#333"}})}),this.getForumThread().getTitle())]}},{key:"getAuthor",value:function(){return Lc.createElement("div",{className:this.styleSheet.author},Lc.T("written by"),"Â ",Lc.createElement(sE,{id:this.getForumThread().authorId,style:{textTransform:"initial"}}),"Â ",Lc.createElement(np,{timeStamp:this.getForumThread().getTimeAdded(),style:{color:"#262626 !important"}}))}},{key:"getMessage",value:function(){return Lc.createElement("div",{className:this.styleSheet.message},Lc.createElement(wk,{ref:this.refLink("content"),value:this.getForumThread().getContentMessage().getContent(),style:{height:"auto"}}))}},{key:"getNumReplies",value:function(e){return[Lc.createElement("div",{className:this.styleSheet.numReplies},Lc.createElement("span",{style:{"font-weight":"bold"}},e),"Â ","replies in this thread"+(0==e?", be the first one to comment":""))]}},{key:"getVoting",value:function(){return Lc.createElement("div",{className:this.styleSheet.voting},Lc.createElement($E,{height:40,balanceColor:"#313534",notVoteColor:"#313534",message:this.getForumThread().getContentMessage(),style:{"margin-left":"0"}}))}},{key:"render",value:function(){var e=this;if(!this.options.forumThread.isLoaded())return this.getForumThreadState(function(){e.redraw(),e.initializeListeners()}),Lc.createElement(wS,null);var t,n=[],i=this.options.forumThread,r=Array.from(i.getMessageThread().getMessages());r.sort(function(e,t){return e.getDate()-t.getDate()});for(var a=0,o=r;a<o.length;a++){var s=o[a];s!==i.getContentMessage()&&n.push(Lc.createElement(PD,{className:this.styleSheet.replies,messageInstance:s}))}n.length&&(t=Lc.createElement("div",{style:{height:"60px",borderBottom:"1px solid #ddd",width:"90%",maxWidth:"1200px",margin:"0 auto"}}));var l,u,c;return(USER.isSuperUser||USER.id===this.getForumThread().authorId)&&(l=Lc.createElement(MD,{faIcon:"trash",level:Pc.DANGER,className:this.styleSheet.deleteButton,modalOptions:{forumThread:this.getForumThread()}}),u=Lc.createElement($P,{faIcon:"pencil",level:Pc.INFO,className:this.styleSheet.editButton,messageInstance:this.getForumThread().getContentMessage()}),c=Lc.createElement("div",{className:this.styleSheet.editDeleteButtons},u,l)),[Lc.createElement("div",{style:{marginBottom:"60px"}},Lc.createElement("div",{className:this.styleSheet.header},this.getTitle(),Lc.createElement("div",{className:this.styleSheet.replyButtonDiv},this.getAuthor(),Lc.createElement(cD,{label:Lc.T("REPLY"),className:this.styleSheet.replyButton,size:Dc.DEFAULT,forumThreadId:i.id,forumThread:this.getForumThread(),classMap:wk.classMap}))),Lc.createElement("div",{style:{width:"90%",maxWidth:"1200px",margin:"0 auto",height:"3px",backgroundColor:"#333",marginTop:"10px"}}),Lc.createElement("div",{className:this.styleSheet.fullPost},this.getMessage(),Lc.createElement("div",{className:this.styleSheet.bottomPanel},this.getNumReplies(n.length),this.getVoting()),c),t,n)]}},{key:"deleteThread",value:function(){this.getForumThread().deleteThread()}},{key:"initializeListeners",value:function(){var e=this;this.getForumThread().getMessageThread().addListener("newMessage",function(){e.redraw()}),this.getForumThread().getMessageThread().addListener("deleteMessage",function(){e.redraw()}),this.getForumThread().getContentMessage().addEventListener("messageEdit",function(){e.content.setValue(e.getForumThread().getContentMessage().getContent()),e.content.redraw()})}},{key:"onMount",value:function(){var e=this;this.options.forumThread.isLoaded()&&this.initializeListeners(),this.getForumThread().addDeleteListener(function(){e.returnToMainForum()})}}]),t}(jd))||wP,BD=(pD=Ze(oD))(fD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.mainClass)}},{key:"getTitle",value:function(){return Lc.createElement("div",{className:this.styleSheet.tagsTitle},Lc.T("Title"))}},{key:"getAuthor",value:function(){return Lc.createElement("div",{className:this.styleSheet.tagsAuthor},Lc.T("Author"))}},{key:"getReplies",value:function(){return Lc.createElement("div",{className:this.styleSheet.tagsReplies},Lc.T("Replies"))}},{key:"getViews",value:function(){return Lc.createElement("div",{className:this.styleSheet.tagsViews},Lc.T("Views"))}},{key:"getVotes",value:function(){return Lc.createElement("div",{className:this.styleSheet.tagsVotes},Lc.T("Score"))}},{key:"getActivity",value:function(){return Lc.createElement("div",{className:this.styleSheet.tagsActivity},Lc.T("Active"))}},{key:"render",value:function(){return[this.getTitle(),this.getAuthor(),this.getReplies(),this.getViews(),this.getVotes(),this.getActivity()]}}]),t}(Lc.Element))||fD,_D=(gD=Ze(sD))(mD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.forumThreadPreview)}}]),t}(wk))||mD,FD=(vD=Ze(lD))(yD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.addClass(this.styleSheet.mainClass),e}},{key:"getHref",value:function(){return"/forum/"+this.getForumThread().id+"/"+U(this.getForumThread().getTitle())}},{key:"getForumThread",value:function(){return this.options.forumThread}},{key:"getThreadTitle",value:function(){var e=this,t="";this.getForumThread().isPinned()&&(t=Lc.createElement("span",{className:"fa fa-thumb-tack "+this.styleSheet.pinnedIcon,"aria-hidden":"true",style:{paddingTop:"0",lineHeight:"20px",height:"20px"}}));var n=this.getForumThread();return[Lc.createElement("div",{className:this.styleSheet.threadTitleAndPreview},Lc.createElement("div",{className:this.styleSheet.threadTitle,style:{paddingBottom:function(){return n.getContentMessage().content?e.styleSheet.titlePaddingBottom:"0"}}},t,Lc.createElement(Xd,{style:{"text-decoration":"none",color:"inherit","font-size":"14px","text-align":"justify"},href:this.getHref(),value:Lc.createElement("span",{className:this.styleSheet.threadTitleSpan},this.getForumThread().getTitle())})),Lc.createElement(_D,{value:this.getForumThread().getContentMessage().content}))]}},{key:"getThreadAuthor",value:function(){return[Lc.createElement("span",{className:this.styleSheet.threadAuthor},Lc.createElement(sE,{id:this.getForumThread().authorId,style:{"line-height":"normal",wordBreak:"break-word"}}))]}},{key:"getThreadReplies",value:function(){return[Lc.createElement("div",{className:this.styleSheet.threadReplies},Lc.createElement(Xd,{style:{"text-decoration":"none",color:"inherit"},href:this.getHref(),
value:Lc.createElement("span",{className:this.styleSheet.threadRepliesSpan},this.getForumThread().getNumReplies())}))]}},{key:"getThreadViews",value:function(){return[Lc.createElement("div",{className:this.styleSheet.threadViews},this.getForumThread().numViews)]}},{key:"getThreadVotes",value:function(){return[Lc.createElement("div",{className:this.styleSheet.threadVotes},this.getForumThread().getVotesBalance())]}},{key:"getThreadActivity",value:function(){var e=this.getForumThread().getLastActive();return[Lc.createElement("div",{className:this.styleSheet.threadActivity},Lc.createElement(np,{timeStamp:e}))]}},{key:"render",value:function(){return[this.getThreadTitle(),this.getThreadAuthor(),this.getThreadReplies(),this.getThreadViews(),this.getThreadVotes(),this.getThreadActivity()]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.getForumThread().addUpdateListener(function(){e.redraw()}),this.getForumThread().addDeleteListener(function(){e.hide()})}}]),t}(Lc.Element))||yD,UD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle({width:"90%",margin:"0 auto",marginTop:"10px",marginBottom:"60px"}),e}},{key:"getBubbleClass",value:function(){return FD}},{key:"render",value:function(){var e=Array.from(this.options.forum.getForumThreads());e.sort(function(e,t){return e.isPinned()&&t.isPinned()?t.getPinIndex()-e.getPinIndex():e.isPinned()?-1:t.isPinned()?1:t.lastActive-e.lastActive});var t=[],n=1;t.push(Lc.createElement(BD,null));for(var i=this.getBubbleClass(),r=0,a=e;r<a.length;r++){var o=a[r];t.push(Lc.createElement(i,{forumThread:o,color:n,isPinned:o.isPinned()})),o.isPinned()||(n=!n)}return t}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.options.forum.addListener("newForumThread",function(){e.redraw()})}}]),t}(Lc.Element),zD=(bD=Ze(uD))(kD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.mainClass)}},{key:"getTitle",value:function(){return Lc.createElement("div",{className:this.styleSheet.title},this.options.forum.name)}},{key:"getButton",value:function(){return Lc.createElement("div",{className:this.styleSheet.buttonParent},Lc.createElement(OD,{label:"NEW POST",className:this.styleSheet.button,size:Dc.DEFAULT,forumId:this.options.forum.id}))}},{key:"getForumThreadList",value:function(){return Lc.createElement(UD,{forum:this.options.forum})}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.header},this.getTitle(),this.getButton()),this.getForumThreadList()]}},{key:"onMount",value:function(){var e=this;this.attachListener(TC,"create",function(){return e.redraw()}),this.attachListener(TC,"delete",function(){return e.redraw()})}}]),t}(jd))||kD,WD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"importState",value:function(e){w(d(t.prototype),"importState",this).call(this,e),this.options.forum=CC.get(this.options.forumId)}}]),t}(iT(zD)),HD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"beforeRedrawNotLoaded",value:function(){var e=this;zu.postJSON("/forum/forum_thread_state/",{forumThreadId:this.options.forumThreadId}).then(function(t){e.importState(t),e.setLoaded()},function(){})}},{key:"importState",value:function(e){w(d(t.prototype),"importState",this).call(this,e),this.options.forumThread=TC.get(this.options.forumThreadId)}}]),t}(iT(DD)),VD=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"forum",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),e=b(this,d(t).call(this,n,WD,[],i)),e.subroutes=e.getSubroutes(),e}return h(t,e),o(t,[{key:"getSubroutes",value:function(){return[new im(["%s","%s"],function(e){var t=e.args[e.args.length-2],n=TC.get(t);return n?Lc.createElement(DD,{forumThread:n}):Lc.createElement(HD,{forumThreadId:t})})]}}]),t}(im),GD=function e(t,n){r(this,e),this.id=t,this.toString=function(){return n}},jD=[new GD(0,"Batch"),new GD(1,"Interactive")],YD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Add translation"}},{key:"getBody",value:function(){return[Lc.createElement(Lc.TextElement,{ref:"text",value:"Translate statement and solution"}),Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"languageFormField",label:"Language"},Lc.createElement(Gg,{ref:"languageSelect",options:fk.all()})),Lc.createElement(Nb,{ref:"ownerFormField",label:"Assign to user"},Lc.createElement(vg,{ref:"ownerFormInput",value:USER.id})))]}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Md,{level:Pc.PRIMARY,label:"Add translation",onClick:function(){return e.addTranslation()}}))]}},{key:"setTask",value:function(e){this.evalTask=e,this.text.setValue("Translate statement and solution for "+this.evalTask.longName+":")}},{key:"addTranslation",value:function(){var e=this.languageSelect.get(),t=this.ownerFormInput.getValue(),n=this.evalTask.statementArticleId,i=this.evalTask.solutionArticleId;zt(xS.get(n),e,t,this),i&&zt(xS.get(i),e,t,this)}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Zg),JD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Create task"}},{key:"getBody",value:function(){return Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"urlNameFormField",label:"URL name"},Lc.createElement(vg,{ref:"urlNameInput",value:""})),Lc.createElement(Nb,{ref:"longNameFormField",label:"Long name"},Lc.createElement(vg,{ref:"longNameInput",value:""})),Lc.createElement(Nb,{ref:"typeFormField",label:"Type"},Lc.createElement(Gg,{ref:"typeSelect",options:jD})),Lc.createElement(Nb,{ref:"timeLimitFormField",label:"Time limit (ms)"},Lc.createElement(vg,{ref:"timeLimitInput",value:"1000"})),Lc.createElement(Nb,{ref:"memoryLimitFormField",label:"Memory limit (MB)"},Lc.createElement(vg,{ref:"memoryLimitInput",value:"256"})))}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(Md,{level:Pc.PRIMARY,label:"Create task",onClick:function(){return e.createTask()}})]}},{key:"createTask",value:function(){var e=this,t=this.urlNameInput.getValue(),n=this.longNameInput.getValue(),i=this.typeSelect.get().id,r=this.timeLimitInput.getValue(),a=1024*this.memoryLimitInput.getValue(),o={urlName:t,longName:n,type:i,timeLimit:r,memoryLimit:a};zu.postJSON("/eval/create_eval_task/",o).then(function(){return window.location.pathname="/task/"+t+"/edit/"},function(t){return e.messageArea.showMessage(t.message,"red")})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Zg),qD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.resetColumnSortingOrder()}},{key:"resetColumnSortingOrder",value:function(){this.columnSortingOrder=[this.columns[0]]}},{key:"setColumns",value:function(){var e=this,n={textAlign:"left",verticalAlign:"middle"},i={textAlign:"left",verticalAlign:"middle"},r=[{value:function(e){return e.id},headerName:"ID",headerStyle:i,cellStyle:n,sortDescending:!0},{value:function(e){return Lc.createElement(Xd,{href:"/task/"+e.urlName+"/edit/",value:e.longName})},rawValue:function(e){return e.urlName},headerName:"Task",headerStyle:i,cellStyle:n},{value:function(e){return jD[e.type].toString()},headerName:"Type",headerStyle:i,cellStyle:n},{value:function(e){return Ek.cpuTime(e.timeLimit/1e3)},rawValue:function(e){return e.timeLimit},headerName:"Time limit",headerStyle:i,cellStyle:n},{value:function(e){return Ek.memory(1024*e.memoryLimit)},rawValue:function(e){return e.memoryLimit},headerName:"Memory limit",headerStyle:i,cellStyle:n},{value:function(t){return Lc.createElement(Md,{level:Pc.PRIMARY,label:"Translate",onClick:function(){e.parent.translateModal.show(),e.parent.translateModal.setTask(t)}})},headerName:"Translate",headerStyle:i,cellStyle:n}];w(d(t.prototype),"setColumns",this).call(this,r)}},{key:"getEntries",value:function(){var e=EC.all().filter(function(e){return e.canBeEditedByUser()});return this.sortEntries(e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.attachUpdateListener(EC,function(){e.redraw()})}}]),t}(Tb),XD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{title:"Task manager"}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.SMALL)}},{key:"render",value:function(){var e=this;return[Lc.createElement("div",{className:"pull-left"},Lc.createElement("h4",null,Lc.createElement("strong",null,this.options.title))),Lc.createElement("div",{className:"pull-right"},Lc.createElement(Md,{level:Pc.PRIMARY,label:"Create eval task",onClick:function(){return e.createEvalTaskModal.show()},style:{marginTop:"5px",marginBottom:"5px"}})),Lc.createElement(qD,{ref:"table"})]}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.getEvalTasks(),this.translateModal=Lc.createElement(YD,{parent:this}),this.createEvalTaskModal=Lc.createElement(JD,{parent:this})}},{key:"getEvalTasks",value:function(){var e=this;zu.getJSON("/eval/get_available_tasks/",{}).then(function(){return e.table.redraw()})}}]),t}(jd),KD=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getWorkspaces",value:function(){return this.workspaceIds.map(function(e){return tC.get(e)})}},{key:"toString",value:function(){return this.name}}]),t}(fp),QD=function(e){function t(){return r(this,t),b(this,d(t).call(this,"TaskChecker",KD))}return h(t,e),o(t,[{key:"allIncludingDefault",value:function(){var e=this.all();return e.splice(0,0,{name:"------",id:0,workspaceIds:[],toString:function(){return"------"}}),e}}]),t}(mp),ZD=new QD,$D=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"flash",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,i=this.getLevel();this.setLevel(e),setTimeout(function(){t.setLevel(i)},n)}}]),t}(Md),eB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.contests=XS.all();var n=new qS;n.id=0,n.longName="-----",this.contests.insert(0,n),this.selected=XS.get(this.options.evalTask.originalContestId)||n}},{key:"render",value:function(){return[Lc.createElement("h3",null,"Original Contest"),Lc.createElement("div",null,Lc.createElement(Gg,{ref:"originalContestSelect",options:this.contests,selected:this.selected}),Lc.createElement($D,{ref:"saveButton",level:Pc.PRIMARY,size:Dc.SMALL,style:{marginLeft:"10px"},faIcon:"floppy-o"}))]}},{key:"saveOriginalContest",value:function(e){var t=this,n={originalContestChanged:!0,originalContestId:e};zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",n).then(function(){return t.saveButton.flash(Pc.SUCCESS)})}},{key:"onMount",value:function(){var e=this;this.saveButton.addClickListener(function(){var t=e.contests[e.originalContestSelect.getIndex()];0===e.originalContestSelect.getIndex()?e.saveOriginalContest(null):e.saveOriginalContest(t.id)})}}]),t}(Lc.Element),tB=hk.all().sort(function(e,t){return e.toString()<t.toString()?-1:e.toString()>t.toString()?1:0}),nB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e);var n=this.options.evalTask.tagIds||[];this.index=n.length,this.tags=[];for(var i=0;i<n.length;i+=1)this.tags.push(Lc.createElement("div",{ref:this.refLink("tag"+i),style:{"margin-top":"10px"}},Lc.createElement(Gg,{style:{height:"29.09px"},options:tB,selected:hk.get(n[i])}),Lc.createElement(Md,{ref:this.refLink("minusButton"+i),style:{marginLeft:"6px"},level:Pc.DANGER,faIcon:"minus",size:Dc.SMALL})))}},{key:"render",value:function(){return[Lc.createElement("h3",{style:{"margin-right":"10px","margin-bottom":"3px"}},"Tags"),this.tags,Lc.createElement(jg,{style:{marginTop:"10px"},ref:"save"},Lc.createElement(Md,{ref:"plusButton",level:Pc.SUCCESS,faIcon:"plus",size:Dc.SMALL}),Lc.createElement($D,{ref:"saveButton",level:Pc.PRIMARY,faIcon:"floppy-o",size:Dc.SMALL}))]}},{key:"saveTags",value:function(){var e=this,t=[],n=!0,i=!1,r=void 0;try{for(var a,o=this.tags[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(s.options.children[0].get().id)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l={tagsChanged:!0,tagIds:t};zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",l).then(function(){return e.saveButton.flash(Pc.SUCCESS)})}},{key:"onMount",value:function(){var e=this;this.saveButton.addClickListener(function(){e.saveTags()});for(var t=0;t<this.index;t+=1)this["minusButton"+t].addClickListener(function(t){for(var n=0;n<e.tags.length;n+=1)if(-1!==t.path.indexOf(e.tags[n].node)){e.tags.splice(n,1),e.redraw();break}});this.plusButton.addClickListener(function(){var t=Lc.createElement("div",{ref:e.refLink("tag"+e.index),style:{"margin-top":"10px"}},Lc.createElement(Gg,{style:{height:"29.09px"},options:tB}),Lc.createElement(Md,{ref:e.refLink("minusButton"+e.index),style:{marginLeft:"6px"},level:Pc.DANGER,faIcon:"minus",size:Dc.SMALL}));e.tags.push(t),e.redraw(),e["minusButton"+e.index].addClickListener(function(t){for(var n=0;n<e.tags.length;n+=1)if(-1!==t.path.indexOf(e.tags[n].node)){e.tags.splice(n,1),e.redraw();break}}),e.index+=1})}}]),t}(Lc.Element),iB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("h3",null,"Task checker"),Lc.createElement("div",null,Lc.createElement(Gg,{ref:"checkerSelect",options:ZD.allIncludingDefault(),selected:ZD.get(this.options.evalTask.checkerId)}),Lc.createElement($D,{ref:"saveButton",level:Pc.PRIMARY,size:Dc.SMALL,style:{marginLeft:"10px"},faIcon:"floppy-o"})),Lc.createElement("div",null,Lc.createElement($D,{ref:"cachebustButton",level:Pc.PRIMARY,style:{marginTop:"10px"}},"Clear eval cache"))]}},{key:"saveChecker",value:function(){var e=this,t={checkerChanged:!0,checkerId:this.checkerSelect.get().id};zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",t).then(function(){return e.saveButton.flash(Pc.SUCCESS)})}},{key:"cachebust",value:function(){var e=this;zu.postJSON("/eval/checker/cache_bust/",{evalTaskId:this.options.evalTask.id}).then(function(){return e.cachebustButton.flash(Pc.SUCCESS)})}},{key:"onMount",value:function(){var e=this;this.saveButton.addClickListener(function(){e.saveChecker()}),this.cachebustButton.addClickListener(function(){e.cachebust()})}}]),t}(Lc.Element),rB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("h3",null,"Difficulty"),Lc.createElement("div",null,Lc.createElement(Gg,{ref:"difficultySelect",options:Wk.all(),selected:Wk.get(_S.getByEvalTaskId(this.options.evalTask.id).evalTaskDifficulty)}),Lc.createElement($D,{ref:"saveButton",level:Pc.PRIMARY,size:Dc.SMALL,style:{marginLeft:"10px"},faIcon:"floppy-o"}))]}},{key:"saveDifficulty",value:function(){var e=this,t={evalTaskId:this.options.evalTask.id,difficulty:this.difficultySelect.get().id};zu.postJSON("/eval/change_task_difficulty/",t).then(function(){return e.saveButton.flash(Pc.SUCCESS)})}},{key:"onMount",value:function(){var e=this;this.saveButton.addClickListener(function(){e.saveDifficulty()})}}]),t}(Lc.Element),aB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this;return[Lc.createElement("h3",null,"Task Update"),Lc.createElement(Dd,{ref:"broadcastButton",level:Pc.PRIMARY,onClick:function(){e.broadcast()},statusOptions:["Update task for users",{faIcon:"spinner fa-spin",label:" broadcasting ..."},"Success","Failed"]})]}},{key:"broadcast",value:function(){this.broadcastButton.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",{broadcast:!0})}}]),t}(Lc.Element),oB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("h3",null,"Task name"),Lc.createElement(Lb,{style:{maxWidth:"300px",margin:0}},Lc.createElement(Nb,{ref:"urlNameFormField",label:"URL Name",style:{margin:0}},Lc.createElement(vg,{ref:"urlNameFormInput",style:{paddingLeft:"4px"},value:this.options.evalTask.urlName})),Lc.createElement(Nb,{ref:"longNameFormField",label:"Long Name",style:{margin:0}},Lc.createElement(vg,{ref:"longNameFormInput",style:{paddingLeft:"4px"},value:this.options.evalTask.longName})),Lc.createElement($D,{ref:"saveButton",level:Pc.PRIMARY,faIcon:"save"}))]}},{key:"onMount",value:function(){var e=this;this.saveButton.addClickListener(function(){var t={nameChanged:!0,urlName:e.urlNameFormInput.getValue(),longName:e.longNameFormInput.getValue()};zu.postJSON("/task/"+e.options.evalTask.urlName+"/edit/",t).then(function(){return location.reload()})})}}]),t}(Lc.Element),sB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"General"}},{key:"render",value:function(){return[Lc.createElement(oB,{evalTask:this.options.evalTask}),Lc.createElement(iB,{evalTask:this.options.evalTask}),Lc.createElement(aB,{evalTask:this.options.evalTask,style:{marginTop:"20px"}}),Lc.createElement(eB,{evalTask:this.options.evalTask}),Lc.createElement(nB,{evalTask:this.options.evalTask,style:{marginTop:"10px"}}),Lc.createElement(rB,{evalTask:this.options.evalTask})]}}]),t}(jd),lB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Statement"}},{key:"render",value:function(){return Lc.createElement(CT,{articleId:this.options.evalTask.statementArticleId})}}]),t}(jd),uB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.isExampleCheckbox.addClickListener(function(){e.markChanged()}),this.isPretestCheckbox.addClickListener(function(){e.markChanged()}),this.previewButton.addClickListener(function(){e.markChanged()}),this.saveButton.addClickListener(function(){e.saveTest()}),this.deleteButton.addClickListener(function(){console.log("Deleting test ",e.options.entry),e.deleteTest()}),this.downloadButton.addClickListener(function(){e.downloadTest()})}},{key:"downloadTest",value:function(){var e=this.options.entry,t={testId:e.id,downloadTest:!0};zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",t).then(function(e){var t=0;if(e.input){var n=new Blob([e.input],{type:"text/plain;charset=utf-8"});Xu.saveAs(n,"input.txt"),t+=1e3}e.output&&(setTimeout(function(){var t=new Blob([e.output],{type:"text/plain;charset=utf-8"});Xu.saveAs(t,"output.txt")},t),t+=1e3),e.extra&&setTimeout(function(){var t=new Blob([e.extra],{type:"text/plain;charset=utf-8"});Xu.saveAs(t,"extra.txt")},t)})}},{key:"filePanel",value:function(e,t,n){return Lc.createElement(jd,{style:n},Lc.createElement("div",{style:{height:"20px",paddingLeft:"10px",boxSizing:"border-box",backgroundColor:"white"}},e),Lc.createElement(ap,{style:{width:"100%",height:"150px"},value:t}))}},{key:"renderCollapsible",value:function(){var e=this.options.entry,t={height:"170px",width:"33.33%",display:"inline-block"},n=[this.filePanel(" Input",e.input,t),this.filePanel(" Judge output",e.output,t),this.filePanel(" Extra",JSON.stringify(e.extra),t)];return Lc.createElement(jd,{className:"section"+e.testNumber,key:e.testNumber,orientation:Rc.HORIZONTAL,style:{height:t.height,width:"100%",padding:"5px"}},Lc.createElement(tb,{style:{height:"100%"},orientation:Rc.HORIZONTAL},n))}},{key:"markChanged",value:function(){this.setStyle("background-color","lightblue")}},{key:"markUnchanged",value:function(){this.setStyle("background-color","white")}},{key:"saveTest",value:function(){var e=this,t=this.options.entry,n=this.isPretestCheckbox.node.checked,i=this.isExampleCheckbox.node.checked,r=this.previewButton.options.getValue()||"",a={testId:t.id,isPretest:n,isExample:i,comment:r};zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",a).then(function(t){return e.markUnchanged()})}},{key:"deleteTest",value:function(){var e=this,t=this.options.entry,n={testId:t.id,deleteTest:!0};zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",n).then(function(t){return e.parent.redraw()})}}]),t}(Sb),cB=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.addListener("testDeleted",function(){}),n}return h(t,e),o(t,[{key:"getRowClass",value:function(){return uB}},{key:"getRowOptions",value:function(e){var n=w(d(t.prototype),"getRowOptions",this).call(this,e);return n.evalTask=this.options.evalTask,n}},{key:"setColumns",value:function(){var e=this,n={textAlign:"right"};w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return e.index},headerName:"Test ID",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return e.id},headerName:"DB ID",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return e.inputSize},headerName:"Input size",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return e.outputSize},headerName:"Output size",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return e.extraSize},headerName:"Extra size",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return Lc.createElement(Eg,{checked:e.isExample,ref:"isExampleCheckbox"})},headerName:"Is example",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return Lc.createElement(Eg,{checked:e.isPretest,ref:"isPretestCheckbox"})},headerName:"Is pretest",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(t){var n={display:"inline-block",overflow:"auto",resize:"none",height:"46px","vertical-align":"top"},i="messageInput"+t.id;return Lc.createElement("div",null,Lc.createElement(Vg,{ref:e.refLink(i),style:n,value:t.comment||""}),Lc.createElement(sS,{ref:"previewButton",size:Dc.DEFAULT,level:Pc.DEFAULT,getValue:function(){return e[i].getValue()},setValue:function(t){e[i].setValue(t),e[i].node.focus()}}))},headerName:"Comment",sortDescending:!0},{value:function(e){return e.customTimeLimit},headerName:"Custom TL",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return e.customMemoryLimit},headerName:"Custom ML",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return e.lastModified},headerName:"Last modified",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(e){return Lc.createElement(jg,{level:Pc.INFO,size:Dc.SMALL},Lc.createElement(Md,{ref:"saveButton",label:"Save"}),Lc.createElement(Md,{ref:"downloadButton",label:"Download"}),Lc.createElement(Md,{ref:"deleteButton",label:"Delete",level:Pc.DANGER}))},headerName:"Actions",sortDescending:!0}])}},{key:"getEntryKey",value:function(e,t){return t}},{key:"getEntries",value:function(){var e=this.options.evalTask;return[].concat(e.exampleTests,e.systemTests)}}]),t}(xb),hB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Tests"}},{key:"render",value:function(){return[Lc.createElement(wg,{ref:"testInputField",multipleFiles:!0,fileTypes:".in,.ok,.json,.zip"}),Lc.createElement(Md,{ref:"uploadTestsButton",label:"Upload tests",level:Pc.PRIMARY,style:{margin:"5px"}}),Lc.createElement("label",{ref:"testsStatusLabel",className:"hidden",style:{color:"grey",fontStyle:"italic",margin:"5px"}}),Lc.createElement(cB,{ref:"testsTable",evalTask:this.options.evalTask})]}},{key:"onMount",value:function(){var e=this;this.uploadTestsButton.addClickListener(function(){e.uploadTests()})}},{key:"uploadTests",value:function(){var e=this,t=new FormData,n=this.testInputField.getFiles();if(0===n.length)return void Wt(this.testsStatusLabel,"No files selected for upload.");var i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.size>1e8?Wt(this.testsStatusLabel,"File "+l.name+" too large. Skipping it."):t.append(l.name,l)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",t).then(function(){e.testsTable.redraw(),Wt(e.testsStatusLabel,"Successfully uploaded tests.")})}}]),t}(jd),dB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,null,[{key:"requestNewUsers",value:function(e,t){var n=this;zu.getJSON(sk.options.fetchURL,{usernamePrefix:e}).then(function(i){var r=(i.state.publicuser||[]).map(function(e){return e.id});n.usernamePrefixCache.set(e,r),t(r)},function(){})}},{key:"loadUsersForPrefix",value:function(e,t){if(!e.length)return void t([]);if(this.usernamePrefixCache||(this.usernamePrefixCache=new Map),this.usernamePrefixCache.has(e))return void t(this.usernamePrefixCache.get(e));for(var n=1;n<e.length;n+=1){var i=e.substring(0,n);if(this.usernamePrefixCache.has(i)&&0===this.usernamePrefixCache.get(i).length)return void t([])}this.requestNewUsers(e,t)}}]),t}(Gu),pB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("z-index","9999")}},{key:"getDefaultOptions",value:function(){return{direction:Mc.UP,userDivHeight:25,maxHeight:300,highlightColor:"rgb(230, 230, 230)"}}},{key:"setOptions",value:function(e){e=Object.assign(this.getDefaultOptions(),e);var n=Math.min(e.maxHeight,e.userIds.length*e.userDivHeight);e.offsets=Pe(e.parentNode),e.style=Object.assign({marginBottom:"5px",border:"1px solid black",position:"absolute",backgroundColor:"white",maxHeight:e.maxHeight+"px",overflow:"auto",boxShadow:"0 6px 12px rgba(0,0,0,.175)",top:e.offsets.top-n+"px",left:e.offsets.left+"px"},e.style||{}),e.direction===Mc.DOWN&&(e.style.top=parseInt(e.style.top)+n+parseInt(De(e.parentNode,"height"))+"px"),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"render",value:function(){this.userDivs=[];var e=!0,t=!1,n=void 0;try{for(var i,r=this.options.userIds[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.userDivs.push(Lc.createElement("div",{userId:a,style:{padding:"0 5px",border:"1px solid grey",height:this.options.userDivHeight+"px","line-height":this.options.userDivHeight+"px",cursor:"pointer"}},Lc.createElement(sE,{userId:a,disableClick:!0})))}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return this.userDivs}},{key:"moveIndex",value:function(e){var t=this.currentIndex;t+=e,t===this.userDivs.length&&(t-=this.userDivs.length),t<0&&(t+=this.userDivs.length),this.setCurrentIndex(t)}},{key:"getCurrentUserId",value:function(){return this.userDivs[this.currentIndex].options.userId}},{key:"setCurrentIndex",value:function(e){this.hasOwnProperty("currentIndex")&&this.userDivs[this.currentIndex].setStyle("background-color","white"),this.currentIndex=e,this.userDivs[this.currentIndex].setStyle("background-color",this.options.highlightColor),this.scrollTo(e)}},{key:"onMount",value:function(){var e=this;this.setCurrentIndex(0);for(var t=0;t<this.userDivs.length;t+=1)!function(t){e.userDivs[t].addNodeListener("mouseover",function(){e.setCurrentIndex(t)}),e.userDivs[t].addClickListener(function(){e.options.onChooseUser&&e.options.onChooseUser(e.getCurrentUserId())})}(t)}},{key:"scrollTo",value:function(e){this.node&&this.options.userDivHeight*this.userDivs.length>this.options.maxHeight&&(this.node.scrollTop=Math.max(this.node.scrollTop,this.options.userDivHeight*(e+1)-this.options.maxHeight),this.node.scrollTop=Math.min(this.node.scrollTop,this.options.userDivHeight*e))}}],[{key:"handleAutocomplete",value:function(e,n,i){if(e.autocompleteWindow&&e.autocompleteWindow.node&&e.autocompleteWindow.destroyNode(),0===n.length)return void(e.duringAutocomplete=!1);e.duringAutocomplete=!0,e.autocompleteWindow=t.create(document.body,{parentNode:i,userIds:n,onChooseUser:function(t){e.duringAutocomplete=!1,e.autocompleteUser(t)}})}},{key:"handleKeydownEvent",value:function(e,t){"Enter"!==t.key&&13!==t.keyCode||e.duringAutocomplete&&(e.duringAutocomplete=!1,e.autocompleteUser(e.autocompleteWindow.getCurrentUserId()),t.preventDefault()),27===t.keyCode&&(e.duringAutocomplete=!1,e.dispatch("autocomplete",[])),38!==t.keyCode&&40!==t.keyCode||e.autocompleteWindow&&(e.autocompleteWindow.moveIndex(t.keyCode-39),t.preventDefault(),t.stopPropagation())}}]),t}(Kg),fB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(vg,{ref:"usernameInput"}),Lc.createElement(Md,{ref:"submitButton",level:Pc.PRIMARY,size:Dc.EXTRA_SMALL,faIcon:"check",style:{marginLeft:"5px"}}),Lc.createElement($d,{ref:"errorArea"})]}},{key:"getUserId",value:function(){var e=this.usernameInput.getValue(),t=!0,n=!1,i=void 0;try{for(var r,a=sk.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.name===e||o.username===e)return o.id}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return parseInt(e)}},{key:"autocompleteUser",value:function(e){this.usernameInput.setValue(sk.get(e).username),this.dispatch("autocomplete",[])}},{key:"clear",value:function(){this.usernameInput.setValue(""),this.duringAutocomplete=!1,this.dispatch("autocomplete",[])}},{key:"handleChange",value:function(){var e=this,t=this.usernameInput.getValue();dB.loadUsersForPrefix(t,function(t){e.dispatch("autocomplete",t)})}},{key:"onMount",value:function(){var e=this;this.usernameInput.addNodeListener("keydown",function(t){pB.handleKeydownEvent(e,t)}),this.usernameInput.addNodeListener("input",function(){e.handleChange()}),this.addListener("autocomplete",function(t){pB.handleAutocomplete(e,t,e.usernameInput)}),this.submitButton.addClickListener(function(){e.getUserId()?e.dispatch("user",e.getUserId()):e.errorArea.showMessage("Invalid username. Please try again.")})}}]),t}(Lc.Element),gB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntries",value:function(){var e=this;return VS.all().filter(function(t){return t.contestId===e.options.evalTask.defaultContestId})}},{key:"removeTester",value:function(e){confirm("Are you sure you want to remove the tester having userId "+e.userId+" ?")&&zu.postJSON("/contest/external_deregister/",{contestId:this.options.evalTask.defaultContestId,userId:e.userId}).then(VS.applyDeleteEvent({type:"delete",objectId:e.id}))}},{key:"setColumns",value:function(){var e=this,n={textAlign:"right"};w(d(t.prototype),"setColumns",this).call(this,[{value:function(t){return Lc.createElement("span",{className:"fa fa-times fa-lg",style:{color:"red",cursor:"pointer"},onClick:function(){return e.removeTester(t)}})}},{value:function(e,t){return t},headerName:"#",cellStyle:n,headerStyle:n},{value:function(e){return Lc.createElement(sE,{id:e.userId})},headerName:"User"},{value:function(e){return e.totalScore||0},headerName:"Score",
cellStyle:n,headerStyle:n},{value:function(e){return e.numSubmissions||0},headerName:"Num submissions",cellStyle:n,headerStyle:n}])}}]),t}(vb),mB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Testers"}},{key:"render",value:function(){var e="/contest/"+this.options.evalTask.getDefaultContest().name+"/";return[Lc.createElement("h4",null,"Besides the admins, the following people can test this task:"),Lc.createElement("h5",null,"Link: ",Lc.createElement(Xd,{href:location.origin+e,value:location.origin+e})),Lc.createElement(gB,{evalTask:this.options.evalTask,ref:"testersTable"}),Lc.createElement("h4",{style:{marginTop:"20px"}},"Give access to a new user:"),Lc.createElement(fB,{ref:"userInputField"})]}},{key:"onMount",value:function(){var e=this;VS.addCreateListener(function(){e.testersTable.redraw()}),VS.addDeleteListener(function(){e.testersTable.redraw()}),this.attachListener(this.userInputField,"user",function(t){e.userInputField.clear(),zu.postJSON("/contest/external_register/",{contestId:e.options.evalTask.defaultContestId,userId:t}).then(function(){return e.testersTable.redraw()})})}}]),t}(jd),vB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Editorial"}},{key:"extraNodeAttributes",value:function(e){e.setStyle({display:"flex",height:"100%",flexDirection:"column"})}},{key:"render",value:function(){var e=this,t=this.options.evalTask;if(t.getHiddenSolutionArticle()){var n;return n=t.solutionArticleId?Lc.createElement(Md,{label:"Unpublish solution article",level:Pc.WARNING,onClick:function(){e.unpublishSolutionArticle()}}):Lc.createElement(Md,{label:"Publish solution article",level:Pc.WARNING,onClick:function(){e.publishSolutionArticle()}}),[Lc.createElement(jg,null,n,Lc.createElement(Md,{style:{marginLeft:"20px"},label:"Delete hidden solution article",onClick:function(){e.deleteHiddenSolutionArticle()},level:Pc.DANGER})),Lc.createElement(CT,{ref:"solutionEditor",articleId:t.hiddenSolutionArticleId,style:{flex:"1"}})]}return[Lc.createElement("h2",null,"The task doesn't have a solution article, click bellow to create one"),Lc.createElement(Md,{label:"Create hidden solution article",onClick:function(){e.createHiddenSolutionArticle()}})]}},{key:"unpublishSolutionArticle",value:function(){var e=this;zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",{unpublishSolutionArticle:!0}).then(function(){delete e.options.evalTask.solutionArticleId,e.redraw()})}},{key:"publishSolutionArticle",value:function(){var e=this;zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",{publishSolutionArticle:!0}).then(function(){return e.redraw()})}},{key:"createHiddenSolutionArticle",value:function(){var e=this;zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",{createHiddenSolutionArticle:!0}).then(function(t){e.options.evalTask.hiddenSolutionArticleId=parseInt(t.hiddenSolutionArticleId),e.redraw()})}},{key:"deleteHiddenSolutionArticle",value:function(){alert("Can't handle this now")}}]),t}(jd),yB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({boxShadow:"0px 0px 4px #555",padding:"10px 2px",marginBottom:"5px",marginTop:"5px",marginLeft:"3px",borderRadius:"4px"})}},{key:"render",value:function(){for(var e=[{toString:function(){return"collapsed"}},{toString:function(){return"collapsible"}},{toString:function(){return"uncollapsible"}},{toString:function(){return"editable"}}],t=(this.options.initialValue||{type:"editable"}).type,n=0,i=e;n<i.length;n++){var r=i[n];if(r.toString()===t){t=r;break}}return[Lc.createElement(Gg,{ref:"typeSelect",options:e,style:{"margin-bottom":"10px",padding:"5px","background-color":"white"},selected:t}),Lc.createElement(Md,{ref:"removeButton",level:Pc.DANGER,faIcon:"minus",style:{display:"inline-block","margin-left":"20px"}}),Lc.createElement(ip,{ref:"codeEditor",maxLines:10,value:(this.options.initialValue||{lines:[]}).lines.join("\n"),fontSize:"15",aceMode:this.options.aceMode})]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.removeButton.addClickListener(function(){e.parent.dispatch("removeTemplateElement",e),e.options.editor.dispatch("change")}),this.typeSelect.addChangeListener(function(){e.options.editor.dispatch("change")}),this.codeEditor.addAceChangeListener(function(){setTimeout(function(){e.options.editor.dispatch("change")})})}},{key:"getValue",value:function(){return{type:this.typeSelect.get().toString(),lines:this.codeEditor.getValue().replace(/\r/,"").split("\n")}}}]),t}(Lc.Element),bB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{level:Pc.SUCCESS,faIcon:"plus"})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(){var n=e.parent,i=n.addButtons.indexOf(e),r=e.options.editor.options.language,a=Lc.createElement(yB,{initialValue:"",aceMode:r.aceMode,editor:e.options.editor}),o=Lc.createElement(t,{editor:e.options.editor});a.mount(n,e.node),o.mount(n,a.node),n.options.children.splice(2*i,0,o,a),n.addButtons.splice(i,0,o),n.templateEditors.splice(i,0,a)})}}]),t}(Md),kB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.templates=this.options.evalTask.enforcedTemplates[this.options.language.id]||[]}},{key:"render",value:function(){this.options.children=[],this.templateEditors=[],this.addButtons=[];for(var e,t=0;t<this.templates.length;t+=1){var n=Lc.createElement(yB,{initialValue:this.templates[t],aceMode:this.options.language.aceMode,editor:this.options.editor});e=Lc.createElement(bB,{editor:this.options.editor}),this.addButtons.push(e),this.templateEditors.push(n),this.options.children.push(e),this.options.children.push(n)}return e=Lc.createElement(bB,{editor:this.options.editor}),this.addButtons.push(e),this.options.children.push(e),this.options.children}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("removeTemplateElement",function(t){var n=e.templateEditors.indexOf(t),i=e.addButtons[n],r=e.templateEditors[n];e.addButtons.splice(n,1),e.templateEditors.splice(n,1),e.eraseChild(i),e.eraseChild(r)})}},{key:"getParsedArray",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.templateEditors[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(o.getValue())}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}}]),t}(Lc.Element),wB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(kB,{style:{width:"50%","padding-right":"10px",float:"left",height:"100%",overflow:"auto"},ref:"languageTemplateEditor",editor:this,evalTask:this.options.evalTask,language:this.options.language}),Lc.createElement("div",{style:{display:"inline-block",width:"50%",float:"right",height:"100%",overflow:"hidden"}},Lc.createElement(ap,{ref:"codeRenderer",fontSize:"15",aceMode:this.options.language.aceMode,style:{height:"100%"}})),Lc.createElement("div",{style:{clear:"both"}})]}},{key:"getParsedArray",value:function(){return this.languageTemplateEditor.getParsedArray()}},{key:"checkTemplate",value:function(e,t){var n=e.enforcedTemplates[t.id]||[];if(0===n.length)return"Empty template!";for(var i=0;i<n.length;i+=1){if(i>0&&"editable"===n[i].type&&"editable"===n[i-1].type)return"There should not be two editable areas in a row!";if(1===n[i].lines.length&&"editable"!==n[i].type)return"There should be at least one \\n character in every uneditable area."}return"editable"===n[0].type?"The first block should not be editable":"editable"===n[n.length-1].type?"The last block should not be editable":null}},{key:"updateCodeRenderer",value:function(e){var t=this.codeRenderer.ace.getSession();if(this.folds=this.folds||[],this.foldLines=this.foldLines||[],this.markers=this.markers||[],t.folds){var n=!0,i=!1,r=void 0;try{for(var a,o=t.folds[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.removeFold(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}var l=!0,u=!1,c=void 0;try{for(var h,d=this.markers[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;this.codeRenderer.removeMarker(p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}this.folds=[],this.markers=[];var f=this.checkTemplate(e,this.options.language);if(f)this.codeRenderer.setValue(f);else{var g=e.getTemplate(this.options.language);this.codeRenderer.setValue(g);var m=e.enforcedTemplates[this.options.language.id]||[];this.ranges=Ft(m,g,this.markers,this.folds,t,!0)}}},{key:"updateFoldingMethod",value:function(){var e=this,t=this.codeRenderer.ace.getSession();t.on("changeFold",function(n){if(n.data&&""!==e.codeRenderer.getValue()&&"remove"===n.action)for(var i=0;i<e.folds.length;i+=1)n.data===e.folds[i]&&(e.folds[i]={isFolded:!1},Dt(t,e.ranges[i].start.row))}),this.codeRenderer.ace.on("gutterclick",function(n){for(var i=n.getDocumentPosition().row,r=0;r<e.ranges.length;r+=1)if(e.ranges[r].start.row===i)if(e.folds[r]&&e.folds[r].isFolded)t.removeFold(e.folds[r]),e.folds[r]={isFolded:!1},Dt(t,e.ranges[r]);else if(e.folds[r]&&!e.folds[r].isFolded){var a=ip.AceRange;e.folds[r]=t.addFold("...",new a(e.ranges[r].start.row,e.ranges[r].start.column,e.ranges[r].end.row-1,1e4)),e.folds[r].isFolded=!0,Bt(t,e.ranges[r])}})}},{key:"onMount",value:function(){var e=this;if(!window.ace)return void ip.requireAce(function(){e.onMount()});var t=this.options.evalTask;t.enforcedTemplates=t.enforcedTemplates||{},t.enforcedTemplates[this.options.language.id]=this.languageTemplateEditor.getParsedArray(),this.updateCodeRenderer(t),this.updateFoldingMethod(),this.addListener("change",function(){var t=e.options.evalTask;t.enforcedTemplates=t.enforcedTemplates||{},t.enforcedTemplates[e.options.language.id]=e.languageTemplateEditor.getParsedArray(),e.updateCodeRenderer(t)})}}]),t}(Lc.Element),EB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Templates"}},{key:"extraNodeAttributes",value:function(e){e.setStyle({display:"flex",flexDirection:"column"})}},{key:"render",value:function(){if(this.options.evalTask.hasEnforcedTemplates()){this.languageTabs=[];var e=!0,t=!1,n=void 0;try{for(var i,r=Bk.all()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.languageTabs.push(Lc.createElement(wB,{style:{width:"100%",height:"100%"},language:a,evalTask:this.options.evalTask}))}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return[Lc.createElement(jg,null,Lc.createElement(Gg,{ref:"languageSelect",options:Bk.all(),style:{margin:"20px",padding:"5px","background-color":"white"}}),Lc.createElement(Md,{ref:"saveButton",style:{display:"inline-block"},level:Pc.PRIMARY},"Save")),Lc.createElement(Of,{ref:"languageSwitcher",style:{flex:"1",height:"100%",display:"flex"}},this.languageTabs)]}return[Lc.createElement("h2",null,"The task doesn't have any enforced templates, click bellow to create them"),Lc.createElement(Md,{ref:this.refLink("createButton"),label:"Turn task to enforced-template task"})]}},{key:"save",value:function(){var e=this,t={},n=!0,i=!1,r=void 0;try{for(var a,o=this.languageTabs[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.getParsedArray();l.length&&(t[s.options.language.id]=l)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.options.evalTask.enforcedTemplates=t;var u={enforcedTemplatesChanged:!0,enforcedTemplates:JSON.stringify(t)};zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",u).then(function(){e.saveButton.setLevel(Pc.SUCCESS),setTimeout(function(){e.saveButton.setLevel(Pc.PRIMARY)},1500)})}},{key:"getChildTab",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.languageTabs[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.options.language.id===e)return o}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.createButton&&this.createButton.addClickListener(function(){e.options.evalTask.enforcedTemplates={},e.redraw(),e.saveButton.addClickListener(function(){e.save()}),e.languageSelect.addChangeListener(function(){e.languageSwitcher.setActive(e.getChildTab(e.languageSelect.get().id))})}),this.saveButton&&(this.saveButton.addClickListener(function(){e.save()}),this.languageSelect.addChangeListener(function(){e.languageSwitcher.setActive(e.getChildTab(e.languageSelect.get().id))}))}}]),t}(jd),SB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"span"}},{key:"getComputedTime",value:function(){var e,t=this.options.evalTask,n=this.options.language,i=t.programmingLanguageLimits||{},r=this.options.table.options.ref.parent;e=r.timeLimitInput?Ht(r.timeLimitInput.getValue())||0:t.timeLimit;var a,o=this.options.table["timeRatio"+n.id];a=o&&o.wasChanged?parseFloat(o.getValue()):i[n.id]&&i[n.id].timeRatio?i[n.id].timeRatio:n.timeRatio?n.timeRatio:1;var s,l=this.options.table["extraTime"+n.id];return s=l&&l.wasChanged?Ht(l.getValue()):i[n.id]&&i[n.id].extraTime?i[n.id].extraTime:n.extraTime?n.extraTime:0,e*a+s+"ms"}},{key:"render",value:function(){return this.getComputedTime()}}]),t}(Lc.Element),CB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeType",value:function(){return"span"}},{key:"getComputedMemory",value:function(){var e,t=this.options.language,n=this.options.evalTask,i=n.programmingLanguageLimits||{},r=this.options.table.options.ref.parent;e=r.memoryLimitInput?Vt(r.memoryLimitInput.getValue())||0:n.memoryLimit;var a,o=this.options.table["extraMemory"+t.id];return a=o&&o.wasChanged?Vt(o.getValue()):i[t.id]&&i[t.id].extraMemory?i[t.id].extraMemory:t.extraMemory?t.extraMemory:0,e+a+"kb"}},{key:"render",value:function(){return this.getComputedMemory()}}]),t}(Lc.Element),xB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this,t=this.parent.parent,n=t["save"+this.options.entry.id];n.node.checked&&this.setStyle("background-color","#87ACCC"),n.addChangeListener(function(){n.node.checked?e.setStyle("background-color","#87ACCC"):e.setStyle("background-color","")})}}]),t}(mb),TB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getRowClass",value:function(){return xB}},{key:"getEntryKey",value:function(e,t){return t}},{key:"getEntries",value:function(){return Bk.all()}},{key:"getExtraMemory",value:function(e){var t=this.options.evalTask,n=t.programmingLanguageLimits||{};return n[e]&&n[e].extraMemory?[n[e].extraMemory,!0]:[0,!1]}},{key:"getExtraTime",value:function(e){var t=this.options.evalTask,n=t.programmingLanguageLimits||{};return n[e]&&n[e].extraTime?[n[e].extraTime,!0]:[0,!1]}},{key:"getTimeRatio",value:function(e){var t=this.options.evalTask,n=t.programmingLanguageLimits||{};return n[e]&&n[e].timeRatio?[n[e].timeRatio,!0]:[1,!1]}},{key:"setColumns",value:function(){var e=this,n={textAlign:"center"};w(d(t.prototype),"setColumns",this).call(this,[{value:function(t){var n=!1;return(e.getExtraMemory(t.id)[1]||e.getExtraTime(t.id)[1]||e.getTimeRatio(t.id)[1])&&(n=!0),Lc.createElement(Eg,{ref:e.refLink("save"+t.id),checked:n})},headerName:"Save to DB",cellStyle:n,headerStyle:n},{value:function(e){return e.name},headerName:"Language",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(t){var n,i,r=e.getTimeRatio(t.id),a=S(r,2);n=a[0],i=a[1];var o="";i&&(o="rgba(255,190,0,0.8)");var s=Lc.createElement(vg,{ref:e.refLink("timeRatio"+t.id),value:n,style:{"background-color":o}});return s.wasChanged=i,s},headerName:"Time limit ratio",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(t){var n,i,r=e.getExtraTime(t.id),a=S(r,2);n=a[0],i=a[1];var o="";i&&(o="rgba(255,190,0,0.8)");var s=Lc.createElement(vg,{ref:e.refLink("extraTime"+t.id),value:n,style:{"background-color":o}});return s.wasChanged=i,s},headerName:"Extra time",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(t){return Lc.createElement(SB,{ref:e.refLink("computedTime"+t.id),table:e,language:t,evalTask:e.options.evalTask})},headerName:"Computed Time",cellStyle:n,headerStyle:n},{value:function(t){var n,i,r=e.getExtraMemory(t.id),a=S(r,2);n=a[0],i=a[1];var o="";i&&(o="rgba(255,190,0,0.8)");var s=Lc.createElement(vg,{ref:e.refLink("extraMemory"+t.id),value:n,style:{"background-color":o}});return s.wasChanged=i,s},headerName:"Extra memory",sortDescending:!0,cellStyle:n,headerStyle:n},{value:function(t){return Lc.createElement(CB,{ref:e.refLink("computedMemory"+t.id),table:e,language:t,evalTask:e.options.evalTask})},headerName:"Computed Memory",cellStyle:n,headerStyle:n}])}}]),t}(vb),AB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Limits"}},{key:"render",value:function(){var e=this,t=this.options.evalTask;return[Lc.createElement("div",{style:{padding:"20px"}},Lc.createElement(Lb,null,Lc.createElement(Nb,{ref:"timeLimit",label:"Default Time Limit"},Lc.createElement(vg,{ref:"timeLimitInput",value:t.timeLimit})),Lc.createElement(Nb,{ref:"memoryLimit",label:"Default Memory Limit"},Lc.createElement(vg,{ref:"memoryLimitInput",value:t.memoryLimit})))),Lc.createElement(TB,{ref:"limitsTable",evalTask:t}),Lc.createElement("div",{className:"text-center"},Lc.createElement(Md,{ref:"saveLimitsButton",level:Pc.PRIMARY,label:"Save changes",onClick:function(){e.saveChanges()}}),Lc.createElement($d,{ref:"saveStatus"}))]}},{key:"saveChanges",value:function(){var e=this,t=Ht(this.timeLimitInput.getValue()),n=Vt(this.memoryLimitInput.getValue());if(t>=3e4||n>=8388608)return void this.saveStatus.showMessage("Failed, invalid default limits!","red");var i={},r=Bk.all(),a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;if(this.limitsTable["save"+c.id].node.checked){var h=this.limitsTable["timeRatio"+c.id],d=Ht(h.getValue()),p=this.limitsTable["extraTime"+c.id],f=Ht(p.getValue()),g=this.limitsTable["extraMemory"+c.id],m=Vt(g.getValue());if(t*d+f>=3e4||n+m>=8388608)return void this.saveStatus.showMessage("Failed, invalid limits for "+c.name,"red");i[c.id]={},p.wasChanged&&(i[c.id].extraTime=f),g.wasChanged&&(i[c.id].extraMemory=m),h.wasChanged&&(i[c.id].timeRatio=d),0===Object.keys(i[c.id]).length&&delete i[c.id]}}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var v={limitsChanged:!0,timeLimit:t,memoryLimit:n,programmingLanguageLimits:JSON.stringify(i)};zu.postJSON("/task/"+this.options.evalTask.urlName+"/edit/",v).then(function(t){return e.saveStatus.showMessage("Limits changed")},function(t){return e.saveStatus.showMessage(t.message,"red")})}},{key:"onMount",value:function(){var e=this.limitsTable,t=!0,n=!1,i=void 0;try{for(var r,a=Bk.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)!function(){var t=r.value;e["timeRatio"+t.id].addNodeListener("input",function(){e["timeRatio"+t.id].wasChanged=!0,e["timeRatio"+t.id].setStyle("background-color","rgba(255,190,0,0.8"),e["computedTime"+t.id].redraw()}),e["extraTime"+t.id].addNodeListener("input",function(){e["extraTime"+t.id].wasChanged=!0,e["extraTime"+t.id].setStyle("background-color","rgba(255,190,0,0.8"),e["computedTime"+t.id].redraw()}),e["extraMemory"+t.id].addNodeListener("input",function(){e["extraMemory"+t.id].wasChanged=!0,e["extraMemory"+t.id].setStyle("background-color","rgba(255,190,0,0.8"),e["computedMemory"+t.id].redraw()})}()}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.timeLimitInput.addNodeListener("input",function(){var t=!0,n=!1,i=void 0;try{for(var r,a=Bk.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e["computedTime"+o.id].redraw()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}),this.memoryLimitInput.addNodeListener("input",function(){var t=!0,n=!1,i=void 0;try{for(var r,a=Bk.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e["computedMemory"+o.id].redraw()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}})}}]),t}(jd),LB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Re-eval"}},{key:"getCloseName",value:function(){return"Cancel"}},{key:"getTitle",value:function(){return"Are you sure you want to re-evaluate ALL jobs?"}},{key:"getMessage",value:function(){return 0===TL.jobCount?"No jobs to re-evaluate!":1===TL.jobCount?"One job will be re-evaluated":TL.jobCount+" jobs will be re-evaluated"}},{key:"getBody",value:function(){return[this.getMessage(),Lc.createElement("div",null,"Programming Language: ",Lc.createElement(Gg,{options:["-----"].concat(C(Bk.all())),ref:"languageSelect"}))]}},{key:"action",value:function(){var e=this,t={evalTaskId:this.options.evalTask.id,job:"all"},n=this.languageSelect.get();n.id&&(t.programmingLanguageId=n.id),zu.postJSON("/eval/reeval/",t).then(function(t){return e.hide()},function(t){return e.messageArea.showMessage(t.message,"red",4e3)})}}]),t}(Zg),IB=$g(LB),NB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("display","flex")}},{key:"render",value:function(){return[Lc.createElement(Md,{ref:this.refLink("reevalButton"),level:Pc.DEFAULT,style:{margin:"8px",marginTop:"5px"},faIcon:"rotate-left"}),Lc.createElement("div",{style:{display:"inline-block"}},Lc.createElement(zL,{key:this.options.evalJob.id,evalJob:this.options.evalJob}))]}},{key:"onMount",value:function(){var e=this;this.reevalButton.addClickListener(function(){e.options.evalJob.getStatus()===jT.Status.DONE&&zu.postJSON("/eval/reeval/",{evalTaskId:e.options.evalJob.evalTaskId,job:e.options.evalJob.id})})}}]),t}(Lc.Element),OB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return"All "+this.options.jobCount+" submissions have been enqueued successfully."}}]),t}(Qg),RB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getSubmissionSummary",value:function(e){return Lc.createElement(NB,{evalJob:e,key:e.id})}},{key:"fetchEvalJobs",value:function(e){w(d(t.prototype),"fetchEvalJobs",this).call(this,!0)}}]),t}(WL),MB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Submissions"}},{key:"render",value:function(){return[Lc.createElement(IB,{modalOptions:{evalTask:this.options.evalTask},style:{margin:"15px",marginLeft:"8px"},level:Pc.WARNING},"Re-eval all submissions"),Lc.createElement(RB,{filters:{evalTaskId:this.options.evalTask.id}})]}},{key:"onMount",value:function(){var e=this;cp.registerStream("evaljobs"),this.attachListener(TL,"reevalDone",function(t){t.data.evalTaskId===e.options.evalTask.id&&OB.show({jobCount:t.data.jobCount})})}}]),t}(jd),PB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({textAlign:"center",paddingTop:"10px"})}},{key:"getTitle",value:function(){return"Preview"}},{key:"render",value:function(){return Lc.createElement(ZO,{style:{textAlign:"initial"},enableSubrouter:!1,contestTaskId:this.options.evalTask.defaultContestTaskId})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("show",function(){e.redraw()})}}]),t}(jd),DB=(wD=CD=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"activeTab",ED,y(n)),O(n,"tab",SD,y(n)),n}return h(t,e),t}(Ub),ED=R(wD.prototype,"activeTab",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"rgba(51,122,183,1)",borderTop:"1px solid rgba(51,122,183,1) !important",borderLeft:"1px solid rgba(51,122,183,1) !important",borderRight:"1px solid rgba(51,122,183,1) !important",borderTopLeftRadius:"7px",borderTopRightRadius:"7px",backgroundColor:"rgba(51, 122, 183, 0.15)"}}}),SD=R(wD.prototype,"tab",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"1.2em"}}}),wD),BB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitleArea",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.options.style={flex:1,textAlign:"center"}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return Lc.createElement("div",{ref:"titleArea",className:this.styleSheet.nav,style:{display:"flex",borderBottom:"1px solid rgba(51,122,183,1) !important"}},e)}},{key:"getStyleSheet",value:function(){return DB.getInstance()}}]),t}(Gb),_B=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLocations",value:function(){return[["general",sB],["statement",lB],["tests",hB],["editorial",vB],["limits",AB],["templates",EB],["submissions",MB],["testers",mB],["preview",PB]]}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({height:"100%",display:"flex",flexDirection:"column"}),e.addClass(mh.Container.SMALL)}},{key:"getEvalTask",value:function(){return EC.all().find(function(e){return e.urlName===nm.parseURL()[1]})}},{key:"getUrlPrefix",value:function(e){var t="/task/"+this.getEvalTask().urlName+"/edit/";return e&&(t+=e+"/"),t}},{key:"render",value:function(){var e=this.getEvalTask(),t=[],n=!0,i=!1,r=void 0;try{for(var a,o=this.getLocations()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=S(a.value,2),l=s[0],u=s[1];t.push(Lc.createElement(u,{evalTask:e,ref:l+"Panel",tabHref:this.getUrlPrefix(l),style:{height:"100%"}}))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return[Lc.createElement("h2",null,'Task "',e.longName,'" (id=',e.id,")"),Lc.createElement(BB,{style:{flex:"1"}},t)]}},{key:"setURL",value:function(e){if(!this.generalPanel)return void(this.initialUrlParts=e);var t=e[0]||"general";this[t+"Panel"]?this[t+"Panel"].dispatch("show"):nm.changeURL(this.getUrlPrefix())}},{key:"onMount",value:function(){this.setURL(this.initialUrlParts),delete this.initialUrlParts;var e=this.getEvalTask();cp.registerStream("contest-"+e.defaultContestId+"-scores"),cp.registerStream("contest-"+e.defaultContestId+"-announcements"),cp.registerStream("contest-"+e.defaultContestId+"-scoreevents")}}]),t}(Lc.Element),UB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;this.button.addClickListener(function(){e.options.ref.parent.dispatch("changeWorkspace",e.options.workspace)}),this.remove.addClickListener(function(){e.options.ref.parent.dispatch("removeWorkspace",e.options.workspace)})}},{key:"highlight",value:function(){this.options.highlighted=!0,this.button.setLevel(Pc.SUCCESS)}},{key:"unhighlight",value:function(){this.options.highlighted=!1,this.button.setLevel(Pc.INFO)}},{key:"render",value:function(){return[Lc.createElement(Md,{ref:"remove",faIcon:"minus",style:{display:"inline-block","margin-right":"5px"},level:Pc.DANGER}),Lc.createElement(Md,{level:this.options.highlighted?Pc.SUCCESS:Pc.INFO,size:Dc.EXTRA_SMALL,ref:"button",style:{"font-size":"1.4em",display:"inline-block"}},this.options.workspace.name||"Anonymous Workspace")]}}]),t}(Lc.Element),zB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return this.options.checker.name||"No name checker"}},{key:"render",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.options.checker.getWorkspaces()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(Lc.createElement(UB,{ref:"workspace-"+o.id,style:{margin:"20px"},workspace:o}))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return[Lc.createElement("div",{style:{width:"40%",display:"inline-block"},ref:"workspaceListArea"},e,Lc.createElement("div",{style:{"margin-top":"10px"},ref:"addWorkspaceArea"},Lc.createElement(Md,{level:Pc.PRIMARY,ref:"addWorkspaceButton",faIcon:"plus",style:{"margin-left":"20px"}}),Lc.createElement(vg,{placeholder:"id",ref:"newWorkspaceId",style:{"padding-left":"5px","margin-left":"5px"}}))),Lc.createElement("div",{ref:"workspaceArea",style:{width:"55%","margin-left":"5%",height:"400px",display:"inline-block",float:"right"}},Lc.createElement(Of,{ref:"workspaceSwitcher",style:{height:"100%"}},Lc.createElement("div",{ref:"emptyWorkspaceChild"})))]}},{key:"linkWorkspace",value:function(e){var t=this;zu.postJSON("/eval/checker/edit",{addWorkspace:!0,checkerId:this.options.checker.id,workspaceId:e}).then(function(e){return t.redraw()})}},{key:"unlinkWorkspace",value:function(e){var t=this;zu.postJSON("/eval/checker/edit",{removeWorkspace:!0,checkerId:this.options.checker.id,workspaceId:e}).then(function(){t.redraw(),t.workspaceSwitcher.setActive(t.emptyWorkspaceChild)})}},{key:"onMount",value:function(){var e=this;this.workspaceIDEMap=new Map,this.addWorkspaceButton.addClickListener(function(){var t=parseInt(e.newWorkspaceId.getValue());!isNaN(t)&&t&&e.linkWorkspace(t)}),this.addListener("changeWorkspace",function(t){e.workspaceIDEMap.has(t)||(e.workspaceIDEMap.set(t,Lc.createElement(pO,{workspace:t,plugins:VN.CHECKER,key:Math.random()})),e.workspaceSwitcher.appendChild(e.workspaceIDEMap.get(t))),e.workspaceSwitcher.setActive(e.workspaceIDEMap.get(t));var n=!0,i=!1,r=void 0;try{for(var a,o=e.options.checker.getWorkspaces()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s===t?e["workspace-"+s.id].highlight():e["workspace-"+s.id].unhighlight()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}),this.addListener("removeWorkspace",function(t){e.unlinkWorkspace(t.id)})}}]),t}(Ob),WB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"New Checker"}},{key:"getBody",value:function(){return[Lc.createElement("div",{style:{display:"inline-block","margin-right":"10px"}},"Checker Name:"),Lc.createElement(vg,{placeholder:"name",ref:"nameInputArea",style:{"padding-left":"5px"}})]}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:this.getCloseName(),onClick:function(){return e.hide()},style:{"margin-right":"10px"}}),",",this.getActionButton())]}},{key:"action",value:function(){var e=this;zu.postJSON("/eval/checker/create",{checkerName:this.nameInputArea.getValue()}).then(function(){e.hide(),Hu.Global.dispatch("newChecker")})}}]),t}(Zg),HB=$g(WB),VB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Bust Eval Cache"}},{key:"getBody",value:function(){return"Are you sure? This action may take a long time"}},{
key:"action",value:function(){zu.postJSON("/eval/checker/cache_bust/",{})}}]),t}(Zg),GB=$g(VB),jB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=[],t=ZD.all();t.sort(function(e,t){return t.id-e.id});var n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.push(Lc.createElement(zB,{checker:s,ref:"checker"+s.id,style:{margin:"30px"}}))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return[Lc.createElement(HB,{ref:this.refLink("addChecker"),level:Pc.SUCCESS,style:{"margin-left":"30px"}},"New Checker"),Lc.createElement(GB,{ref:this.refLink("cachebustButton"),level:Pc.DANGER,style:{display:"inline-block","margin-left":"20px"}},"Bust Eval Cache"),e]}},{key:"onMount",value:function(){var e=this;this.attachListener(Hu.Global,"newChecker",function(){e.redraw()})}}]),t}(Lc.Element),YB=(xD=AD=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"default",TD,y(n)),n}return h(t,e),t}(Jc),TD=R(xD.prototype,"default",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{padding:"7px",cursor:"pointer",backgroundColor:"#eeeeee",width:"100%",":hover":{backgroundColor:"#dddddd"}}}}}),xD),JB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onDelayedMount",value:function(){w(d(t.prototype),"onDelayedMount",this).call(this),this.getAce().renderer.setOption("showLineNumbers",!1)}}]),t}(ip),qB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.nodes=new Map,this.edges=new Map}},{key:"getNodeString",value:function(e){return e.getLabel()}},{key:"getEdgeString",value:function(e){return e.getSource().getLabel()+" "+e.getTarget().getLabel()+(e.getLabel()?" "+e.getLabel():"")}},{key:"addNode",value:function(e){if(!this.nodes.has(e)){var t=0,n=!0,i=!1,r=void 0;try{for(var a,o=this.nodes.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,u=!1,c=void 0;try{for(var h,d=s[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;t=Math.max(p+1,t)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.nodes.set(e,[t]),0===t?this.graphDataEditor.append(this.getNodeString(e)+"\n"):this.graphDataEditor.insertAtLine(t,"\n"+this.getNodeString(e));var f=!0,g=!1,m=void 0;try{for(var v,y=this.edges.keys()[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value;this.edges.get(b)>=t&&this.edges.set(b,this.edges.get(b)+1)}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}var k=!0,w=!1,E=void 0;try{for(var S,C=this.nodes.keys()[Symbol.iterator]();!(k=(S=C.next()).done);k=!0){var x=S.value;if(x!==e)for(var T=this.nodes.get(x),A=0;A<T.length;A+=1)T[A]>=t&&(T[A]+=1)}}catch(e){w=!0,E=e}finally{try{k||null==C.return||C.return()}finally{if(w)throw E}}this.nodeCountEditor.setValue(this.graph.nodes.length.toString())}}},{key:"addEdge",value:function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var a,o=this.edges.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t=Math.max(t,s+1)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var h,d=this.nodes.values()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value,f=!0,g=!1,m=void 0;try{for(var v,y=p[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value;t=Math.max(b+1,t)}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}this.edges.set(e,t),this.graphDataEditor.append(this.getEdgeString(e)+"\n")}},{key:"deleteNode",value:function(e){if(this.nodes.has(e)){var t=this.nodes.get(e),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!0,u=!1,c=void 0;try{for(var h,d=this.edges.keys()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;this.edges.get(p)>=s&&this.edges.set(p,this.edges.get(p)-1)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}var f=!0,g=!1,m=void 0;try{for(var v,y=this.nodes.keys()[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value;if(b!==e)for(var k=this.nodes.get(b),w=0;w<k.length;w+=1)k[w]>=s&&(k[w]-=1)}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}this.graphDataEditor.removeLine(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this.nodes.delete(e),this.nodeCountEditor.setValue(this.graph.nodes.length.toString())}}},{key:"deleteEdge",value:function(e){if(this.edges.has(e)){var t=this.edges.get(e),n=!0,i=!1,r=void 0;try{for(var a,o=this.edges.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.edges.get(s)>=t&&this.edges.set(s,this.edges.get(s)-1)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var h,d=this.nodes.values()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)for(var p=h.value,f=0;f<p.length;f+=1)p[f]>=t&&(p[f]-=1)}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}this.graphDataEditor.removeLine(t),this.edges.delete(e)}}},{key:"changeNodeLabel",value:function(e){var t=this.nodes.get(e)||[],n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.graphDataEditor.replaceLine(s,this.getNodeString(e)+"\n")}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var h,d=e.getIncidentEdges()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value,f=this.edges.get(p);this.graphDataEditor.replaceLine(f,this.getEdgeString(p)+"\n")}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}},{key:"changeEdgeLabel",value:function(e){var t=this.edges.get(e);t&&this.graphDataEditor.replaceLine(t,this.getEdgeString(e)+"\n")}},{key:"setNewData",value:function(e){var t=this;this.nodes.clear(),this.edges.clear();var n=e.split("\n");this.graph.enterDrawMode();var i,r,a=function(){for(var e=[],i=[],r=[],a=0;a<n.length;a+=1){var o=n[a],s=void 0,l=void 0,u=void 0,c=void 0;try{s=kt(o)}catch(t){"string"==typeof t&&e.push({row:a,column:1,text:t,type:"error"})}if(null!=s)if(l=s.length>=1?s[0]:null,u=s.length>=2?s[1]:null,c=s.length>=3?s[2]:"",1===s.length)-1===i.indexOf(l)&&i.push(l);else if(2===s.length||3===s.length){if(l==u)continue;-1===i.indexOf(l)&&i.push(l),-1===i.indexOf(u)&&i.push(u),r.push({source:l,target:u,cost:c})}else s.length>3&&e.push({row:a,column:1,text:"No more than 4 elements allowed",type:"error"})}return t.graphDataEditor.setAnnotations(e),[i,r]}();a?(i=a[0],r=a[1]):i=r=[],function(e){for(var n=e.clone(),i=0;i<t.graph.edges.length;i+=1){for(var r=t.graph.edges[i],a=r.getSource().getLabel(),o=r.getTarget().getLabel(),s=r.getLabel(),l=!1,u=0;u<n.length;u+=1)if(a==n[u].source&&o==n[u].target&&s===n[u].cost){l=!0,n.splice(u,1);break}l||(t.graph.removeEdge(r),i-=1)}}(r),function(e){for(var n=0;n<t.graph.nodes.length;n+=1){for(var i=t.graph.nodes[n],r=!1,a=0;a<e.length;a+=1)if(i.getLabel()==e[a]){r=!0;break}r||(t.graph.removeNode(i),n-=1)}}(i),function(e){var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=!1,u=!0,c=!1,h=void 0;try{for(var d,p=t.graph.nodes[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){if(s==d.value.getLabel()){l=!0;break}}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}l||t.graph.addNode(Lc.createElement(Sk,{data:{label:s}}))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}(i),function(e){var n=t.graph.edges.clone(),i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){for(var l=o.value,u=!1,c=0;c<n.length;c+=1)if(l.source==n[c].getSource().getLabel()&&l.target==n[c].getTarget().getLabel()&&l.cost==n[c].getLabel()){n.splice(c,1),u=!0;break}if(!u){for(var h=void 0,d=void 0,p=0;p<t.graph.nodes.length;p+=1)t.graph.nodes[p].getLabel()==l.source&&(h=p),t.graph.nodes[p].getLabel()==l.target&&(d=p);t.graph.addEdge(Lc.createElement(Ck,{data:{source:h,target:d},label:l.cost,directed:t.graph.isDirected()}))}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}(r),this.graph.removeListeners(),this.graph.enterForceMode(),this.nodeCountEditor.setValue(this.graph.nodes.length.toString());for(var o=0;o<n.length;o+=1){var s=void 0;try{s=kt(n[o])}catch(e){continue}if(0!==s.length)if(1===s.length){var l=!0,u=!1,c=void 0;try{for(var h,d=this.graph.nodes[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;p.getLabel().toString()==s[0]&&(this.nodes.has(p)||this.nodes.set(p,[]),this.nodes.get(p).push(o))}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}else{var f=!0,g=!1,m=void 0;try{for(var v,y=this.graph.edges[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value;if(s[0]==b.getSource().getLabel()&&(s[1]==b.getTarget().getLabel()&&(3!==s.length||s[2]==b.getLabel())&&!this.edges.has(b))){this.edges.set(b,o);break}}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}}}}},{key:"onMount",value:function(){var e=this;this.nodeCountEditor.setReadOnly(!0),this.nodeCountEditor.setAceOptions({autoScrollEditorIntoView:!1,highlightActiveLine:!1}),this.addListener("changeInput",function(t){switch(e._selfChanged=!0,t.type){case"newNode":e.addNode(t.node);break;case"newEdge":e.addEdge(t.edge);break;case"deleteNode":var n=!0,i=!1,r=void 0;try{for(var a,o=t.node.getIncidentEdges()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.deleteEdge(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}e.deleteNode(t.node);break;case"deleteEdge":e.deleteEdge(t.edge);break;case"changeNodeLabel":e.changeNodeLabel(t.node);break;case"changeEdgeLabel":e.changeEdgeLabel(t.edge)}e._selfChanged=!1}),this._timeout=null,this.graphDataEditor.addAceSessionChangeListener(function(){e._selfChanged||(e.graph.pauseForce(),e._timeout&&clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.setNewData(e.graphDataEditor.getValue()),e.graph.unpauseForce(),e._timeout=null},500))})}},{key:"render",value:function(){return[Lc.createElement("label",null," Node Count: "),Lc.createElement(JB,{ref:"nodeCountEditor",value:"",style:{width:"100%",height:"17px"}}),Lc.createElement("label",null," Graph Data: "),Lc.createElement(JB,{ref:"graphDataEditor",value:"",style:{width:"100%",height:"300px"}})]}}]),t}(jd),XB=(LD=Ze(YB))(ID=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("div",{ref:"Force"},Lc.createElement("h4",null,"Force mode"),Lc.createElement("p",null,"In this mode, there is a gravitation pull that acts on the nodes and keeps them in the center of the drawing area. Also, the nodes exert a force on each other, making the whole graph look and act like real objects in space."),Lc.createElement("p",null,"Ways you can interact with the graph:"),Lc.createElement("ul",null,Lc.createElement("li",null,"Nodes support drag and drop."),Lc.createElement("li",null,"At the end of the drop the node becomes fixed."),Lc.createElement("li",null,"You can fix/unfix a node by simple click."))),Lc.createElement("div",{ref:"Draw"},Lc.createElement("h4",null,"Draw mode"),Lc.createElement("p",null,"This mode allows you to draw new nodes and/or edges."),Lc.createElement("p",null,"Ways you can interact with the graph:"),Lc.createElement("ul",null,Lc.createElement("li",null,"Clicking anywhere on the graph canvas creates a new node."),Lc.createElement("li",null,"Clicking on a node starts the drawing process of a new edge."),Lc.createElement("li",null,"To cancel the new edge, click anywhere on the canvas."),Lc.createElement("li",null,"To finish drawing the edge, click on the desired neighbour."))),Lc.createElement("div",{ref:"Edit"},Lc.createElement("h4",null,"Edit mode"),Lc.createElement("p",null,"This mode allows you to edit nodes' labels and edges' costs."),Lc.createElement("p",null,"Ways you can interact with the graph:"),Lc.createElement("ul",null,Lc.createElement("li",null,"Click on a node label to change it. Now you can start typing in order to edit the label. Click anywhere or press Enter to finish editing."),Lc.createElement("li",null,"Click on an edge to change it's cost. Now you can start typing in order to edit the cost. Click anywhere or press Enter to finish editing."))),Lc.createElement("div",{ref:"Delete"},Lc.createElement("h4",null,"Delete mode"),Lc.createElement("p",null,"This mode allows you to delete nodes and/or edges."),Lc.createElement("p",null,"Ways you can interact with the graph:"),Lc.createElement("ul",null,Lc.createElement("li",null,"Click on a node to delete it"),Lc.createElement("li",null,"Click on an edge to delete it."))),Lc.createElement("div",{ref:"Config",style:{"padding-left":"20px"}},Lc.createElement("div",{style:{"margin-top":"20px"}},Lc.createElement("div",{HTMLtitle:"Set the size of nodes",className:"fa fa-question-circle",style:{"margin-right":"3px"}}," "),Lc.createElement("div",{style:{width:"50%",display:"inline-block"}},"Node radius:"),Lc.createElement(yg,{ref:"nodeSize",min:"3",max:"25",value:"19",style:{display:"inline-block",width:"30%","padding-left":"3px"}})),Lc.createElement("div",{style:{"margin-top":"20px"}},Lc.createElement("div",{HTMLtitle:"How much nodes connected by an edge attract each other",className:"fa fa-question-circle",style:{"margin-right":"3px"}}," "),Lc.createElement("div",{style:{width:"50%",display:"inline-block"}},"Edge ideal length:"),Lc.createElement(yg,{ref:"edgeIdealLength",min:"40",max:"200",value:"140",style:{display:"inline-block",width:"30%","padding-left":"3px"}})),Lc.createElement("div",{style:{"margin-top":"20px"}},Lc.createElement("div",{style:{width:"50%",display:"inline-block"}},"Node background:"),Lc.createElement(Gg,{ref:"nodeFillSelect",options:["white","red","blue","black","purple","orange","green"]})),Lc.createElement("div",{style:{"margin-top":"20px"}},Lc.createElement("div",{style:{width:"50%",display:"inline-block"}},"Node color:"),Lc.createElement(Gg,{ref:"nodeStrokeSelect",selected:"black",options:["white","red","blue","black","purple","orange","green"]})),Lc.createElement("div",{style:{"margin-top":"20px"}},Lc.createElement("div",{style:{width:"50%",display:"inline-block"}},"Edge color:"),Lc.createElement(Gg,{ref:"edgeColorSelect",selected:"black",options:["white","red","blue","black","purple","orange","green"]})),Lc.createElement("div",null,Lc.createElement(Md,{ref:"runCommandButton",level:Pc.INFO,style:{"border-radius":"0"}},"Run Command"),Lc.createElement("div",{ref:"commandsList",style:{width:"8.2em"},className:"".concat(this.styleSheet.default," hidden")},Lc.createElement("div",{ref:"fixAllNodesButton"},"Fix all nodes"),Lc.createElement("div",{ref:"unfixAllNodesButton"},"Unfix all nodes"),Lc.createElement("div",{ref:"treeButton"},"Arrange as tree"))))]}},{key:"showMode",value:function(){this.Force.hide(),this.Draw.hide(),this.Edit.hide(),this.Delete.hide(),this.Config.hide(),this[this.options.viewMode].show()}},{key:"onMount",value:function(){var e=this;this.showMode(),this.addListener("changeLegend",function(t){e.options.viewMode=t,e.showMode()}),this.nodeSize.addNodeListener("change",function(){e.graph.dispatch("changeNodeRadius",parseInt(e.nodeSize.getValue()))}),this.edgeIdealLength.addNodeListener("change",function(){e.graph.dispatch("changeEdgeIdealLength",parseInt(e.edgeIdealLength.getValue()))}),this.nodeFillSelect.addNodeListener("change",function(){e.graph.dispatch("changeNodeFill",e.nodeFillSelect.get())}),this.nodeStrokeSelect.addNodeListener("change",function(){e.graph.dispatch("changeNodeStroke",e.nodeStrokeSelect.get())}),this.edgeColorSelect.addNodeListener("change",function(){e.graph.dispatch("changeEdgeColor",e.edgeColorSelect.get())}),this.runCommandButton.addClickListener(function(){e.commandsList.toggleClass("hidden")}),this.treeButton.addClickListener(function(){e.graph.dispatch("viewTree")}),this.fixAllNodesButton.addClickListener(function(){var t=!0,n=!1,i=void 0;try{for(var r,a=e.graph.nodes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.setFixed(!0)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}),this.unfixAllNodesButton.addClickListener(function(){var t=!0,n=!1,i=void 0;try{for(var r,a=e.graph.nodes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.setFixed(!1)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}e.graph.runForces()})}}]),t}(jd))||ID,KB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.nodeRadius=Sk.prototype.getDefaultOptions().circleAttr.radius,w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"removeListeners",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.nodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;a.removeClickListener(a.click),"Edit"!==this.mode&&"Draw"!==this.mode||a.addClickListener(a._fixNodeCallback)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var o=!0,s=!1,l=void 0;try{for(var u,c=this.edges[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value;h.removeClickListener(h.click)}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}"Draw"===this.mode&&this.parent.removeClickListener(this.parent.click)}},{key:"enterForceMode",value:function(){this.unpauseForce(),this.mode="Force"}},{key:"enterDrawMode",value:function(){var e=this;this.mode="Draw",this.pauseForce();var t=function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=e.nodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.removeClickListener(s.click)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=Lc.createElement(ag.Line,{x1:t.x,x2:t.x,y1:t.y,y2:t.y});l.mount(e.parent,e.node);var u=e.parent.node.getBoundingClientRect(),c=function(e){l.node&&(l.setAttribute("x2",rc.getEventX(e)-u.left),l.setAttribute("y2",rc.getEventY(e)-u.top))};window.addEventListener("mousemove",c);var h=function n(i){var r=!0,a=!1,o=void 0;try{for(var s,u=e.nodes[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var h=s.value;if(h!==t&&(i.target===h.circle.node||i.target===h.label.node)){var d=e.addEdge(Lc.createElement(Ck,{data:{source:e.nodes.indexOf(t),target:e.nodes.indexOf(h)},directed:e.isDirected()}));e.dispatch("changeInput",{type:"newEdge",edge:d});break}}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}e.parent.removeClickListener(n),window.removeEventListener("mousemove",c),l.destroyNode();var p=!0,f=!1,g=void 0;try{for(var m,v=e.nodes[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var y=m.value;y.addClickListener(y.click)}}catch(e){f=!0,g=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw g}}};e.parent.addClickListener(h)};this.parent.click=function(n){if(n.target===e.parent.node){var i=e.parent.node.getBoundingClientRect(),r=e.addNode(Lc.createElement(Sk,{data:{center:{x:rc.getEventX(n)-i.left,y:rc.getEventY(n)-i.top},label:e.getNextLabel()}}));r.removeClickListener(r._fixNodeCallback),r.click=function(){t(r)},r.addClickListener(r.click),e.dispatch("changeInput",{type:"newNode",node:r})}},this.parent.addClickListener(this.parent.click);var n=!0,i=!1,r=void 0;try{for(var a,o=this.nodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var e=a.value;e.removeClickListener(e._fixNodeCallback),e.click=function(){t(e)},e.addClickListener(e.click)}()}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"enterEditMode",value:function(){var e=this;this.mode="Edit",this.pauseForce();var t=!0,n=!1,i=void 0;try{for(var r,a=this.nodes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)!function(){var t=r.value;t.click=function(){var n=t.getLabel();t.setLabel(""),e.dispatch("needTextArea",{coords:t.getCenter(),initialValue:n,target:t}),t.addListener("doneEditing",function(n){var i=!0,r=!1,a=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;if(l!==t&&l.getLabel()==n){n=e.getNextLabel();break}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}t.setLabel(n),e.dispatch("changeInput",{type:"changeNodeLabel",node:t})})},t.addClickListener(t.click),t.removeClickListener(t._fixNodeCallback)}()}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var o=!0,s=!1,l=void 0;try{for(var u,c=this.edges[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)!function(){var t=u.value;t.click=function(n){if(n.stopPropagation(),n.preventDefault(),!t._clicked){t._clicked=!0,setTimeout(function(){t._clicked=!1},20);var i=t.getLabel()||"";t.setLabel(""),e.dispatch("needTextArea",{coords:{x:t.costLabel.getX(),y:t.costLabel.getY()},initialValue:i,target:t}),t.addListener("doneEditing",function(n){t.setLabel(n),e.dispatch("changeInput",{type:"changeEdgeLabel",edge:t})})}},t.addClickListener(t.click)}()}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}}},{key:"enterDeleteMode",value:function(){var e=this;this.mode="Delete",this.pauseForce();var t=!0,n=!1,i=void 0;try{for(var r,a=this.nodes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)!function(){var t=r.value;t.click=function(){e.dispatch("changeInput",{type:"deleteNode",node:t}),e.removeNode(t)},t.addClickListener(t.click)}()}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var o=!0,s=!1,l=void 0;try{for(var u,c=this.edges[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)!function(){var t=u.value;t.click=function(){e.dispatch("changeInput",{type:"deleteEdge",edge:t}),e.removeEdge(t)},t.addClickListener(t.click)}()}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}}},{key:"dispatchInitialGraphData",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.nodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.dispatch("changeInput",{type:"newNode",node:a})}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var o=!0,s=!1,l=void 0;try{for(var u,c=this.edges[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value;this.dispatch("changeInput",{type:"newEdge",edge:h})}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("resize",function(){var t=e.getBox().height,n=e.getBox().width;e.setBox({x:20,y:20,height:e.parent.getHeight()-40,width:e.parent.getWidth()-40}),e.options.gravityCenterXPercentage=.5,e.options.gravityCenterYPercentage=.5,e.options.gravityCenter={x:e.parent.getWidth()/2,y:e.parent.getHeight()/2};var i=!0,r=!1,a=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.setCenter({x:l.getCenter().x*e.getBox().width/n,y:l.getCenter().y*e.getBox().height/t})}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}),this.enterForceMode(),this.addListener("changeViewMode",function(t){switch(e.removeListeners(),t){case"Force":e.enterForceMode();break;case"Draw":e.enterDrawMode();break;case"Edit":e.enterEditMode();break;case"Delete":e.enterDeleteMode()}}),this.addListener("changeDirected",function(t){"directed"===t?e.setDirected(!0):e.setDirected(!1)}),this.addListener("changeIndexType",function(t){e.options.indexType=t,e.populateNodeData();for(var n=0;n<e.nodes.length;n+=1)e.nodes[n].setLabel(e.options.nodes[n].label),e.dispatch("changeInput",{type:"changeNodeLabel",node:e.nodes[n]})}),this.addListener("changeNodeRadius",function(t){t=Math.max(t,3),t=Math.min(t,30),e.setNodeRadius(t)}),this.addListener("changeEdgeIdealLength",function(t){t=Math.max(t,40),e.setIdealEdgeDistance(t)}),this.addListener("changeNodeFill",function(t){e.options.nodeFill=t;var n=!0,i=!1,r=void 0;try{for(var a,o=e.nodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.setInnerColor(t)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}),this.addListener("changeNodeStroke",function(t){e.options.nodeStroke=t;var n=!0,i=!1,r=void 0;try{for(var a,o=e.nodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.setColor(t)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}),this.addListener("changeEdgeColor",function(t){e.options.edgeColor=t;var n=!0,i=!1,r=void 0;try{for(var a,o=e.edges[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.setColor(t)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}),this.addListener("viewTree",function(){var t=e.getDFSCoords(),n=!0,i=!1,r=void 0;try{for(var a,o=e.nodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.setFixed(!0),s.setCenter(t.get(s))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}})}},{key:"getDFSCoords",value:function(){return this.isDirected()?jt(this):Gt(this)}},{key:"setNodeRadius",value:function(e){this.options.nodeRadius=e;var t=!0,n=!1,i=void 0;try{for(var r,a=this.nodes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.setRadius(e)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setIdealEdgeDistance",value:function(e){this.options.idealEdgeDistance=e,this.runForces()}},{key:"getNextLabel",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.nodes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(parseInt(o.getLabel()))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var s=1;"0"===this.getIndexType()&&(s=0);for(var l=s;;l+=1)if(-1===e.indexOf(l))return l}}]),t}(Tk),QB=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;setTimeout(function(){e.resize(window.innerHeight-200,80*window.innerWidth/100-700),e.graph.dispatchInitialGraphData()},0),window.addEventListener("resize",function(){e.resize(window.innerHeight-200,80*window.innerWidth/100-700)}),this.inputPanel.graph=this.graph,this.editorLegend.graph=this.graph,this.toggleDirected.addListener("setIndex",function(t){e.graph.dispatch("changeDirected",t.value.toLocaleLowerCase())}),this.toggleIndexType.addListener("setIndex",function(t){"0-index"===t.value?t.value="0":"1-index"===t.value?t.value="1":"Custom Labels"===t.value&&(t.value="custom"),e.graph.dispatch("changeIndexType",t.value)}),this.toggleViewMode.addListener("setIndex",function(t){e.editorLegend.dispatch("changeLegend",t.value),"Config"===t.value&&(t.value="Force"),e.graph.dispatch("changeViewMode",t.value)}),this.graph.addListener("needTextArea",function(t){e._editing&&e._editTarget.dispatch("doneEditing",e.textArea.getValue()),e._editing=!0,e._editTarget=t.target,e.textArea.setStyle("display","inline"),e.textArea.setStyle("left",t.coords.x-10+"px"),e.textArea.setStyle("top",t.coords.y-10+"px"),e.textArea.setValue(t.initialValue),e.textArea.node.focus(),e.textArea.node.select();var n=function n(){t.target.dispatch("doneEditing",e.textArea.getValue()),e.textArea.setStyle("display","none"),e.textArea.removeNodeListener("keypress",i),window.removeEventListener("click",n),e._editing=!1},i=function(e){13===e.keyCode&&n()};e.textArea.addNodeListener("keypress",i),window.addEventListener("click",n)}),this.textArea.addClickListener(function(e){e.stopPropagation()}),this.graph.addListener("changeInput",function(t){e.inputPanel.dispatch("changeInput",t)}),this.exportToPngButton.addClickListener(function(){e.exportToPng()}),this.exportToMarkupButton.addClickListener(function(){var t=e.graph.getMarkup();e.markupArea.options.isHidden&&(e.markupArea.show(),e.markupArea.options.isHidden=!1),e.markupArea.setValue(t),e.markupArea.node.focus(),e.markupArea.node.select(),e.markupArea.node.scrollTop=0})}},{key:"getDefaultOptions",value:function(){return{nodes:[{name:"0",x:120,y:150},{name:"1",x:350,y:300},{name:"2",x:50,y:50},{name:"3",x:350,y:50},{name:"4",x:50,y:300},{name:"5",x:270,y:150}],edges:[{source:0,target:2},{source:0,target:4},{source:0,target:5},{source:1,target:4},{source:1,target:5},{source:2,target:3},{source:2,target:4},{source:4,target:5}]}}},{key:"resize",value:function(e,t){t=Math.max(t,300),e=Math.max(e,300),e=t=Math.min(e,t),this.widgetBlock.setStyle("width",t+700+"px"),this.graphBlock.setStyle("width",t+"px"),this.graphBlock.setStyle("height",e+"px"),this.svgBlock.setStyle("width",t+"px"),this.svgBlock.setStyle("height",e+"px"),this.svg.setAttribute("width",t+"px"),this.svg.setAttribute("height",e+"px"),this.graph.dispatch("resize")}},{key:"exportToPng",value:function(){var e=this,t=(new XMLSerializer).serializeToString(this.svg.node);t=t.replace("<svg","<svg style='background-color: white;'");var n=window.URL||window.webkitURL||window,i=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=n.createObjectURL(i),a=document.createElement("img");a.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d");t.height=e.svg.getHeight(),t.width=e.svg.getWidth(),i.drawImage(a,0,0),n.revokeObjectURL(r);var o=t.toDataURL("image/png").replace("image/png","image/octet-stream"),s=document.createElement("a");s.setAttribute("download","graph.png"),s.setAttribute("href",o),s.setAttribute("target","_blank"),s.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}))},a.src=r}},{key:"render",value:function(){return[Lc.createElement("div",{ref:"widgetBlock",style:{margin:"0 auto"}},Lc.createElement("div",{style:{width:"320px",display:"inline-block","margin-right":"30px",float:"left"}},Lc.createElement("div",{className:"text-center"},Lc.createElement(Yg,{level:Pc.PRIMARY,ref:"toggleDirected",givenOptions:["Undirected","Directed"]})),Lc.createElement(qB,{ref:"inputPanel",style:{"margin-top":"30px"}})),Lc.createElement("div",{ref:"graphBlock",style:{width:"600px",display:"inline-block"}},Lc.createElement("div",{className:"text-center"},Lc.createElement(Yg,{level:Pc.PRIMARY,ref:"toggleIndexType",givenOptions:["0-index","1-index","Custom Labels"]})),Lc.createElement("div",{ref:"svgBlock",style:{width:"100%",height:"500px",border:"1px solid black","border-radius":"5px","margin-top":"30px",position:"relative"}},Lc.createElement(ag.SVGRoot,{ref:"svg",width:"100%",height:"100%"},Lc.createElement(KB,{ref:"graph",nodes:this.options.nodes,edges:this.options.edges})),Lc.createElement(vg,{ref:"textArea",style:{position:"absolute",display:"none",height:"25px","line-height":"25px",width:"45px"}}))),Lc.createElement("div",{style:{width:"320px",display:"inline-block","margin-left":"30px",float:"right"}},Lc.createElement("div",{className:"text-center"},Lc.createElement(Yg,{level:Pc.PRIMARY,ref:"toggleViewMode",givenOptions:["Force","Draw","Edit","Delete","Config"]})),Lc.createElement(XB,{ref:"editorLegend",viewMode:"Force",style:{border:"1px solid black","border-radius":"5px","margin-top":"30px",padding:"10px","min-height":"400px"}}),Lc.createElement(jg,{style:{marginTop:"5px"}},Lc.createElement(Md,{ref:"exportToPngButton",level:Pc.INFO},"Download as PNG"),Lc.createElement(Md,{ref:"exportToMarkupButton",level:Pc.INFO},"Generate Markup")),Lc.createElement(Vg,{ref:"markupArea",isHidden:!0,className:"hidden",style:{width:"100%",marginTop:"10px",
minHeight:"100px"}})))]}}]),t}(Nc),ZB=Jt(Yt),$B=ZB.right,e_=Math.sqrt(50),t_=Math.sqrt(10),n_=Math.sqrt(2);Zt.prototype=$t.prototype={constructor:Zt,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var i_=$t.prototype;en.prototype=tn.prototype={constructor:en,has:i_.has,add:function(e){return e+="",this["$"+e]=e,this},remove:i_.remove,clear:i_.clear,values:i_.keys,size:i_.size,empty:i_.empty,each:i_.each};var r_=Array.prototype,a_=r_.map,o_=r_.slice,s_="\\s*([+-]?\\d+)\\s*",l_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c_=/^#([0-9a-f]{3})$/,h_=/^#([0-9a-f]{6})$/,d_=new RegExp("^rgb\\("+[s_,s_,s_]+"\\)$"),p_=new RegExp("^rgb\\("+[u_,u_,u_]+"\\)$"),f_=new RegExp("^rgba\\("+[s_,s_,s_,l_]+"\\)$"),g_=new RegExp("^rgba\\("+[u_,u_,u_,l_]+"\\)$"),m_=new RegExp("^hsl\\("+[l_,u_,u_]+"\\)$"),v_=new RegExp("^hsla\\("+[l_,u_,u_,l_]+"\\)$"),y_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nn(an,on,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),nn(hn,cn,rn(an,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),nn(gn,fn,rn(an,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new gn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new gn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new hn(mn(e>=240?e-240:e+120,r,i),mn(e,r,i),mn(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var b_=Math.PI/180,k_=180/Math.PI,w_=.95047,E_=1,S_=1.08883,C_=4/29,x_=6/29,T_=3*x_*x_,A_=x_*x_*x_;nn(bn,yn,rn(an,{brighter:function(e){return new bn(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new bn(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=E_*wn(e),t=w_*wn(t),n=S_*wn(n),new hn(En(3.2404542*t-1.5371385*e-.4985314*n),En(-.969266*t+1.8760108*e+.041556*n),En(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),nn(Tn,xn,rn(an,{brighter:function(e){return new Tn(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Tn(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return vn(this).rgb()}}));var L_=-.14861,I_=1.78277,N_=-.29227,O_=-.90649,R_=1.97294,M_=R_*O_,P_=R_*I_,D_=I_*N_-O_*L_;nn(In,Ln,rn(an,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new In(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new In(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*b_,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new hn(255*(t+n*(L_*i+I_*r)),255*(t+n*(N_*i+O_*r)),255*(t+n*(R_*i)),this.opacity)}}));var B_,__,F_,U_,z_=function e(t){function n(e,t){var n=i((e=cn(e)).r,(t=cn(t)).r),r=i(e.g,t.g),a=i(e.b,t.b),o=Dn(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=a(t),e.opacity=o(t),e+""}}var i=Pn(t);return n.gamma=e,n}(1),W_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H_=new RegExp(W_.source,"g"),V_=180/Math.PI,G_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},j_=qn(Yn,"px, ","px)","deg)"),Y_=qn(Jn,", ",")",")"),J_=Math.SQRT2,q_=2,X_=4,K_=1e-12;$n(Mn);var Q_,Z_=$n(Dn),$_=[0,1],eF={"":pi,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return gi(100*e,t)},r:gi,s:fi,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},tF=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;mi.prototype=vi.prototype,vi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var nF,iF,rF,aF=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];!function(e){nF=bi(e),iF=nF.format,rF=nF.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var oF=new Date,sF=new Date,lF=Ai(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});lF.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ai(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):lF:null};var uF=6e4,cF=6048e5,hF=Ai(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),dF=Ai(function(e){e.setTime(Math.floor(e/uF)*uF)},function(e,t){e.setTime(+e+t*uF)},function(e,t){return(t-e)/uF},function(e){return e.getMinutes()}),pF=Ai(function(e){var t=e.getTimezoneOffset()*uF%36e5;t<0&&(t+=36e5),e.setTime(36e5*Math.floor((+e-t)/36e5)+t)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),fF=Ai(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uF)/864e5},function(e){return e.getDate()-1}),gF=Li(0),mF=Li(1),vF=(Li(2),Li(3),Li(4)),yF=(Li(5),Li(6),Ai(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),bF=Ai(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});bF.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ai(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var kF=(Ai(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*uF)},function(e,t){return(t-e)/uF},function(e){return e.getUTCMinutes()}),Ai(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),Ai(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1})),wF=Ii(0),EF=Ii(1),SF=(Ii(2),Ii(3),Ii(4)),CF=(Ii(5),Ii(6),Ai(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),Ai(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}));CF.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ai(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var xF,TF,AF,LF,IF,NF={"-":"",_:" ",0:"0"},OF=/^\s*\d+/,RF=/^%/,MF=/[\\^$*+?|[\]().{}]/g;!function(e){xF=Mi(e),TF=xF.format,AF=xF.parse,LF=xF.utcFormat,IF=xF.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var PF=(Date.prototype.toISOString||LF("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||IF("%Y-%m-%dT%H:%M:%S.%LZ"),1e3),DF=60*PF,BF=60*DF,_F=24*BF,FF=7*_F,UF=30*_F,zF=365*_F;Yr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Yr("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Yr("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Yr("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Z_(Ln(300,.5,0),Ln(-240,.5,1));Z_(Ln(-100,.75,.35),Ln(80,1.5,.8)),Z_(Ln(260,.75,.35),Ln(80,1.5,.8)),Ln();Jr(Yr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var WF=(Jr(Yr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Jr(Yr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Jr(Yr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),"http://www.w3.org/1999/xhtml"),HF={svg:"http://www.w3.org/2000/svg",xhtml:WF,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},VF=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var GF=document.documentElement;if(!GF.matches){var jF=GF.webkitMatchesSelector||GF.msMatchesSelector||GF.mozMatchesSelector||GF.oMatchesSelector;VF=function(e){return function(){return jF.call(this,e)}}}}var YF=VF;sa.prototype={constructor:sa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var JF="$";Ha.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var qF={},XF=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(qF={mouseenter:"mouseover",mouseleave:"mouseout"})}var KF=[null];Lo.prototype=Io.prototype={constructor:Lo,select:ea,selectAll:ia,filter:ra,data:ha,enter:oa,exit:da,merge:pa,order:fa,sort:ga,call:va,nodes:ya,node:ba,size:ka,empty:wa,each:Ea,attr:Ia,style:Pa,property:Ua,classed:qa,text:Za,html:no,raise:ro,lower:oo,append:so,insert:uo,remove:ho,clone:go,datum:mo,on:Eo,dispatch:Ao};var QF=Math.PI,ZF=2*QF,$F=ZF-1e-6;Do.prototype=Bo.prototype={constructor:Do,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-e,l=i-t,u=a-e,c=o-t,h=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>1e-6)if(Math.abs(c*s-l*u)>1e-6&&r){var d=n-a,p=i-o,f=s*s+l*l,g=d*d+p*p,m=Math.sqrt(f),v=Math.sqrt(h),y=r*Math.tan((QF-Math.acos((f+h-g)/(2*m*v)))/2),b=y/v,k=y/m;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*u)+","+(t+b*c)),this._+="A"+r+","+r+",0,0,"+ +(c*d>u*p)+","+(this._x1=e+k*s)+","+(this._y1=t+k*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,i,r,a){e=+e,t=+t,n=+n;var o=n*Math.cos(i),s=n*Math.sin(i),l=e+o,u=t+s,c=1^a,h=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%ZF+ZF),h>$F?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=QF)+","+c+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},Fo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},qo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jo(this,this._t0,Yo(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Jo(this,Yo(this,n=jo(this,e,t)),n);break;default:Jo(this,this._t0,n=jo(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Xo.prototype=Object.create(qo.prototype)).point=function(e,t){qo.prototype.point.call(this,t,e)},Ko.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};var eU={value:function(){}};Zo.prototype=Qo.prototype={constructor:Zo,on:function(e,t){var n,i=this._,r=$o(e+"",i),a=-1,o=r.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=r[a]).type)i[n]=ts(i[n],e.name,t);else if(null==t)for(n in i)i[n]=ts(i[n],e.name,null);return this}for(;++a<o;)if((n=(e=r[a]).type)&&(n=es(i[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zo(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,n=i.length;a<n;++a)i[a].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};var tU,nU,iU=0,rU=0,aU=0,oU=1e3,sU=0,lU=0,uU=0,cU="object"===("undefined"==typeof performance?"undefined":i(performance))&&performance.now?performance:Date,hU="object"===("undefined"==typeof window?"undefined":i(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};ss.prototype=ls.prototype={constructor:ss,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?as():+n)+(null==t?0:+t),this._next||nU===this||(nU?nU._next=this:tU=this,nU=this),this._call=e,this._time=n,ps()},stop:function(){this._call&&(this._call=null,this._time=1/0,ps())}};var dU=Qo("start","end","interrupt"),pU=[],fU=0,gU=1,mU=2,vU=3,yU=4,bU=5,kU=6,wU=Io.prototype.constructor,EU=0,SU=Io.prototype;dl.prototype=pl.prototype={constructor:dl,select:Zs,selectAll:$s,filter:js,merge:Ys,selection:el,transition:hl,call:SU.call,nodes:SU.nodes,node:SU.node,size:SU.size,empty:SU.empty,each:SU.each,on:Xs,attr:Ms,attrTween:Bs,style:al,styleTween:sl,text:cl,remove:Qs,tween:Cs,delay:Us,duration:Hs,ease:Gs};var CU={time:null,delay:0,duration:250,ease:gl};Io.prototype.interrupt=ws,Io.prototype.transition=vl,kl.prototype={constructor:kl,scale:function(e){return 1===e?this:new kl(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new kl(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var xU=new kl(1,0,0),TU=Object.freeze({__proto__:null,scaleLinear:xi,scaleTime:jr,select:No,get event(){return XF},customEvent:So,line:Ho,area:Vo,zoom:Il,zoomIdentity:xU}),AU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{d:"",fill:"none",stroke:"darkgrey",strokeWidth:1.5,interpolation:"linear"}}},{key:"setOptions",value:function(e){Object.assign(e,this.options.plotOptions),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("d",this.getLineData()),e.setAttribute("clip-path",this.options.chart.clipPath),e}},{key:"getLineData",value:function(){var e=this;return this.linePathGenerator=Ho().x(function(t){return e.options.chart.xAxisOptions.scale(e.options.plotOptions.xCoordinateAlias(t))}).y(function(t){return e.options.chart.yAxisOptions.scale(e.options.plotOptions.yCoordinateAlias(t))}),this.linePathGenerator(this.options.plotOptions.pointsAlias(this.options.data))}},{key:"onMount",value:function(){var e=this;this.options.chart.addZoomListener(function(){e.redraw()})}}]),t}(ag.Path),LU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{center:{x:0,y:0},radius:5,fill:"grey",strokeWidth:.5,stroke:"darkgrey"}}},{key:"redraw",value:function(){this.translate(this.options.xAxisScale(this.options.xCoordinateAlias(this.options.data)),this.options.yAxisScale(this.options.yCoordinateAlias(this.options.data))),w(d(t.prototype),"redraw",this).call(this)}}]),t}(ag.Circle),IU=function(e){return function(t){function n(){return r(this,n),b(this,d(n).apply(this,arguments))}return h(n,t),o(n,[{key:"getNodeAttributes",value:function(){var e=w(d(n.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("clip-path",this.options.chart.clipPath),e}},{key:"getPoints",value:function(){this.points=[],this.pointsData=this.options.plotOptions.pointsAlias(this.options.data);for(var t=0;t<this.pointsData.length;t+=1)this.points[t]=Lc.createElement(e,l({ref:this.refLinkArray("points",t)},this.options.plotOptions,{data:this.pointsData[t],xAxisScale:this.options.chart.xAxisOptions.scale,yAxisScale:this.options.chart.yAxisOptions.scale}));return this.points}},{key:"render",value:function(){return C(this.getPoints())}},{key:"onMount",value:function(){var e=this;this.options.chart.addZoomListener(function(){e.redraw()})}}]),n}(ag.Group)},NU=IU(LU),OU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{gridLineLength:0,axisLineLength:6,gridLineStroke:"rgba(255, 255, 255, .7)",labelPadding:6,labelStrokeWidth:.5,labelFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif"}}},{key:"getLabel",value:function(){var e={text:""+this.options.label,strokeWidth:this.options.labelStrokeWidth};return this.options.orientation===Mc.DOWN?Object.assign(e,{textAnchor:"middle",dy:".71em",y:this.options.labelPadding+this.options.axisLineLength}):this.options.orientation===Mc.LEFT&&Object.assign(e,{textAnchor:"end",dy:".35em",x:-1*(this.options.labelPadding+this.options.axisLineLength)}),Lc.createElement(ag.Text,l({ref:this.refLink("label")},e))}},{key:"getGridLine",value:function(){var e={fill:this.options.gridLineStroke,stroke:this.options.gridLineStroke};if(this.axisPosition!==this.options.scale.range()[0])return this.options.orientation===Mc.DOWN?Object.assign(e,{y2:-1*this.options.chartOptions.height}):this.options.orientation===Mc.LEFT&&Object.assign(e,{x2:this.options.chartOptions.width}),Lc.createElement(ag.Line,l({ref:this.refLink("gridLine")},e))}},{key:"getAxisLine",value:function(){var e={};return this.options.orientation===Mc.DOWN?Object.assign(e,{y2:this.options.axisLineLength}):this.options.orientation===Mc.LEFT&&Object.assign(e,{x2:-1*this.options.axisLineLength}),Lc.createElement(ag.Line,l({ref:this.refLink("axisLine")},e))}},{key:"render",value:function(){return this.axisPosition=this.options.scale(this.options.value),this.options.orientation===Mc.DOWN?this.translate(this.axisPosition,0):this.options.orientation===Mc.LEFT&&this.translate(0,this.axisPosition),[this.getGridLine(),this.getAxisLine(),this.getLabel()]}},{key:"showGridLine",value:function(){this.axisPosition===this.options.scale.range()[0]?this.gridLine.hide():this.gridLine.show()}},{key:"hideGridLine",value:function(){this.gridLine.hide()}}]),t}(ag.Group),RU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{labelFormatFunction:function(e){return e}}}},{key:"getAxisLine",value:function(){var e={};return this.options.orientation===Mc.DOWN?(Object.assign(e,{x2:this.options.chartOptions.width}),this.axisLength=this.options.chartOptions.width):this.options.orientation===Mc.LEFT&&(Object.assign(e,{y2:this.options.chartOptions.height}),this.axisLength=this.options.chartOptions.height),Lc.createElement(ag.Line,l({ref:this.refLink("axisLine")},e))}},{key:"getTicks",value:function(){this.ticks=[],this.tickValues=this.options.scale.ticks(this.options.ticks)
;for(var e=0;e<this.tickValues.length;e+=1){var t=this.tickValues[e];this.ticks[e]=Lc.createElement(OU,{ref:this.refLinkArray("ticks",e),chartOptions:this.options.chartOptions,scale:this.options.scale,orientation:this.options.orientation,value:t,label:this.options.labelFormatFunction(t)})}return this.ticks}},{key:"render",value:function(){return this.options.orientation===Mc.DOWN&&this.translate(0,this.options.chartOptions.height),[].concat(C(this.getTicks()),[this.getAxisLine()])}},{key:"showGridLines",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.ticks[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.showGridLine()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"hideGridLines",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.ticks[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.hideGridLine()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}]),t}(ag.Group),MU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{enableZoom:!0,margin:{top:20,bottom:30,left:50,right:20},domainPadding:[0],xAxisDomain:[0,160],yAxisDomain:[0,100],xAxisScaleType:"linear",yAxisScaleType:"linear",cursorStyle:"move"}}},{key:"normalizePadding",value:function(e){return Array.isArray(e)?1===e.length?[e[0],e[0],e[0],e[0]]:2===e.length?[e[0],e[1],e[0],e[1]]:3===e.length?[e[0],e[1],e[2],e[1]]:4===e.length?e:(error("BasicChart.normalizePadding receives invalid padding array: ",e),null):null}},{key:"getPaddedDomain",value:function(e,t){var n=e[1]-e[0];return[e[0]-t[0]*n,e[1]+t[1]*n]}},{key:"getScaleType",value:function(e){return"linear"===e?xi():"time"===e?jr():void 0}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.chartOptions.width-=this.options.margin.left+this.options.margin.right,this.options.chartOptions.height-=this.options.margin.top+this.options.margin.bottom,this.options.domainPadding=this.normalizePadding(this.options.domainPadding),this.options.xAxisDomain=this.getPaddedDomain(this.options.xAxisDomain,[this.options.domainPadding[3],this.options.domainPadding[1]]),this.options.yAxisDomain=this.getPaddedDomain(this.options.yAxisDomain,[this.options.domainPadding[2],this.options.domainPadding[0]]),this.xAxisOptions={orientation:Mc.DOWN,ticks:8,scale:this.getScaleType(this.options.xAxisScaleType).domain(this.options.xAxisDomain).range([0,this.options.chartOptions.width])},this._initialXScale=this.xAxisOptions.scale.copy(),this.options.xAxisLabelFormatFunction&&(this.xAxisOptions.labelFormatFunction=this.options.xAxisLabelFormatFunction),this.yAxisOptions={orientation:Mc.LEFT,ticks:5,scale:this.getScaleType(this.options.yAxisScaleType).domain(this.options.yAxisDomain).range([this.options.chartOptions.height,0])},this._initialYScale=this.yAxisOptions.scale.copy(),this.options.yAxisLabelFormatFunction&&(this.yAxisOptions.labelFormatFunction=this.options.yAxisLabelFormatFunction)}},{key:"getBackground",value:function(){return Lc.createElement(ag.Group,{ref:this.refLink("background")})}},{key:"getAxes",value:function(){return[Lc.createElement(RU,l({ref:this.refLink("xAxis"),chartOptions:this.options.chartOptions},this.xAxisOptions)),Lc.createElement(RU,l({ref:this.refLink("yAxis"),chartOptions:this.options.chartOptions},this.yAxisOptions))]}},{key:"render",value:function(){var e=Lc.createElement(ag.Rect,{ref:this.refLink("interactiveLayer"),height:this.options.chartOptions.height,width:this.options.chartOptions.width,style:{cursor:this.options.cursorStyle},opacity:0}),n=Lc.createElement(ag.Defs,{ref:"defs"},Lc.createElement(ag.ClipPath,{id:"chartClipPath"+K(this)},Lc.createElement(ag.Rect,{width:this.options.chartOptions.width,height:this.options.chartOptions.height})));return this.clipPath="url(#chartClipPath"+K(this)+")",this.translate(this.options.margin.left,this.options.margin.right),[this.getBackground()].concat(C(this.getAxes()),[e],C(w(d(t.prototype),"render",this).call(this)),[n])}},{key:"redraw",value:function(){var e=this;this.options.children.forEach(function(t){t.options.chart=e}),w(d(t.prototype),"redraw",this).call(this)}},{key:"initZoom",value:function(){var e=this;this.options.applyZoom=!0;var t=No(this.interactiveLayer.node);this.zoomListener=function(){e.options.applyZoom&&(e.xAxisOptions.scale=XF.transform.rescaleX(e._initialXScale),e.yAxisOptions.scale=XF.transform.rescaleY(e._initialYScale),e.redraw(),XF.sourceEvent||(e.interactiveLayer.node.__zoom=XF.transform))},this.zoomBehavior=Il().on("zoom",this.zoomListener),t.call(this.zoomBehavior)}},{key:"disableZoom",value:function(){this.options.applyZoom=!1}},{key:"onMount",value:function(){this.options.enableZoom&&this.initZoom()}},{key:"addZoomListener",value:function(e){this.addListener("zoom",e)}}]),t}(ag.Group),PU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{xAxisScaleType:"time",paddingXOnNoPoints:7776e6,paddingYOnNoPoints:50,zoomScaleExtent:[1,20]})}},{key:"getTimeFormat",value:function(){return function(e){for(var t=new Ap(e),n=[{name:"Seconds",continueSubdivisionOnValue:0,format:"HH:mm:ss"},{name:"Minutes",continueSubdivisionOnValue:0,format:"HH:mm"},{name:"Hours",continueSubdivisionOnValue:0,format:"HH:mm"},{name:"Date",continueSubdivisionOnValue:1,format:"DD/MMM"},{name:"Month",continueSubdivisionOnValue:0,format:"MMM"}],i=0;i<n.length;i+=1){if(t["get"+n[i].name]()!==n[i].continueSubdivisionOnValue)return t.format(n[i].format)}return t.format("YYYY")}}},{key:"getMinMaxDomain",value:function(e,t,n){var i=[t(e[0]),t(e[0])];return e.forEach(function(e){i[0]=Math.min(i[0],t(e)),i[1]=Math.max(i[1],t(e))}),i[0]===i[1]&&(i[0]-=n,i[1]+=n),i}},{key:"defaultXNoPoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.paddingXOnNoPoints;return[+Ap.now()-e,+Ap.now()+e]}},{key:"getXAxisDomain",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.paddingXOnNoPoints;return Array.isArray(e)&&0!==e.length?this.getMinMaxDomain(e,t,n):this.defaultXNoPoints(n)}},{key:"defaultYNoPoints",value:function(e){return[-e,e]}},{key:"getYAxisDomain",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.paddingYOnNoPoints;return Array.isArray(e)&&0!==e.length?this.getMinMaxDomain(e,t,n):this.defaultYNoPoints(n)}},{key:"setOptions",value:function(e){e.xAxisLabelFormatFunction=this.getTimeFormat();var n=e.paddingXOnNoPoints;null==n&&(n=this.getDefaultOptions().paddingXOnNoPoints);var i=e.paddingYOnNoPoints;null==i&&(i=this.getDefaultOptions().paddingYOnNoPoints),e.xAxisDomain=this.getXAxisDomain(e.plotOptions.pointsAlias(e.data),e.plotOptions.xCoordinateAlias,n),e.yAxisDomain=this.getYAxisDomain(e.plotOptions.pointsAlias(e.data),e.plotOptions.yCoordinateAlias,i),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"initZoom",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.options.applyZoom=!0;var n=No(this.interactiveLayer.node);this.zoomListener=function(){if(e.options.applyZoom){var t=XF.transform.x,n=XF.transform.y,i=XF.transform.k;XF.transform.x=Math.min(0,Math.max(t,e.options.chartOptions.width*(1-i))),XF.transform.y=Math.min(0,Math.max(n,e.options.chartOptions.height*(1-i))),e.xAxisOptions.scale=XF.transform.rescaleX(e._initialXScale),e.yAxisOptions.scale=XF.transform.rescaleY(e._initialYScale),e.redraw(),e.interactiveLayer.node.__zoom=XF.transform}},this.zoomBehavior=Il(),t||(this.zoomBehavior=this.zoomBehavior.scaleExtent(this.options.zoomScaleExtent)),this.zoomBehavior=this.zoomBehavior.on("zoom",this.zoomListener),n.call(this.zoomBehavior);var i={k:1.2,x:this.options.chartOptions.width/2*(1-1.2),y:this.options.chartOptions.height/2*(1-1.2)};i.__proto__=xU.__proto__,So({transform:i},this.zoomListener,n)}}]),t}(MU),DU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.chartOptions={height:e.height||500,width:e.width||790},this.plotOptions={pointsAlias:function(e){return e.points},xCoordinateAlias:function(e){return e.x},yCoordinateAlias:function(e){return e.y}},this.data={points:[{x:30,y:60,label:"A"},{x:100,y:55,label:"C"},{x:130,y:55,label:"E"},{x:115,y:20,label:"D"},{x:75,y:70,label:"B"}]}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("height",this.chartOptions.height),e.setAttribute("width",this.chartOptions.width),e}},{key:"render",value:function(){return[Lc.createElement(MU,{chartOptions:Object.assign({},this.chartOptions),xAxisDomain:this.options.xDomain,yAxisDomain:this.options.yDomain},Lc.createElement(AU,{plotOptions:this.plotOptions,data:this.data}),Lc.createElement(NU,{plotOptions:this.plotOptions,data:this.data}))]}}]),t}(ag.SVGRoot),BU=bf(Gd(ag.Circle)),_U=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.center={},this.options.center.x=this.options.data.x/this.getXScale(),this.options.center.y=this.options.data.y/this.getYScale()}},{key:"getXScale",value:function(){var e=this.options.chart.xAxisOptions.scale;return Math.abs(e.domain()[1]-e.domain()[0])/Math.abs(e.range()[1]-e.range()[0])}},{key:"getYScale",value:function(){var e=this.options.chart.yAxisOptions.scale;return Math.abs(e.domain()[1]-e.domain()[0])/Math.abs(e.range()[1]-e.range()[0])}},{key:"formatCoords",value:function(){var e=this.options.data.x,t=this.options.data.y,n=-1;return this.options.widget&&(n=this.options.widget.decimals),e=Nl(e,this.options.chart.xAxisOptions.scale,n),t=Nl(t,this.options.chart.yAxisOptions.scale,n),(this.options.label?this.options.data.label:"")+(this.options.coords?"("+e+","+t+")":"")}},{key:"render",value:function(){return[Lc.createElement(ag.Circle,{ref:"realPoint",radius:"5",fill:this.options.color||"black",parent:this,style:{cursor:"move"},center:this.options.center}),Lc.createElement(ag.Text,{ref:"coords",textAnchor:"left",x:this.options.center.x+4,y:this.options.center.y+10,style:{"-webkit-user-select":"none"},text:this.formatCoords()}),Lc.createElement(ag.Line,{ref:"lineDown",x1:this.options.center.x,y1:this.options.center.y,strokeWidth:1,strokeDasharray:"3,3",stroke:"grey",fill:"grey",x2:this.options.center.x,y2:this.options.chart.yAxisOptions.scale.range()[0]}),Lc.createElement(ag.Line,{ref:"lineLeft",x1:this.options.center.x,y1:this.options.center.y,strokeWidth:1,strokeDasharray:"3,3",stroke:"grey",fill:"grey",x2:this.options.chart.xAxisOptions.scale.range()[0],y2:this.options.center.y}),Lc.createElement(BU,{ref:"point",opacity:"0",fill:"transparent",radius:"15",style:{cursor:"move"},parent:this,stroke:"red",strokeWidth:"2",center:this.options.center,editable:this.options.editable})]}},{key:"onMount",value:function(){var e=this;this.point.addNodeListener("mouseover",function(){e.point.setOpacity(1)}),this.point.addNodeListener("mouseout",function(){e.point.setOpacity(0)}),this.realPoint.addNodeListener("mouseover",function(){e.point.setOpacity(1)}),this.realPoint.addNodeListener("mouseout",function(){e.point.setOpacity(0)}),this.addClickListener(function(t){e.clickFunc(),t.stopPropagation(),t.preventDefault()}),this.options.editable&&(this.dragFunc={onStart:function(){e.dragging=!0,e.prevCoords=e.options.coords},onDrag:function(t,n){e.showCoords(!1),e.dragged=!0,e.options.data.x+=t*e.getXScale(),e.options.data.y-=n*e.getYScale(),e.options.center.x+=t,e.options.center.y-=n,e.hasPopup&&(e.popup.hide(),e.hasPopup=!1),e.redraw()},onEnd:function(){if(e.dragging&&e.dragged){e.options.coords=e.prevCoords;var t=-1;e.options.widget&&e.options.widget.hasOwnProperty("decimals")&&(t=e.options.widget.decimals),e.options.data.x=parseFloat(Nl(e.options.data.x,e.options.chart.xAxisOptions.scale,t)),e.options.data.y=parseFloat(Nl(e.options.data.y,e.options.chart.yAxisOptions.scale,t)),e.redraw(),e.dispatch("dataChanged"),e.hasPopup=!0,e.dragged=!1,setTimeout(function(){e.hasPopup=!1},0)}e.dragging=!1}},this.point.addDragListener(this.dragFunc))}},{key:"redraw",value:function(){this.options.center={x:Ol(this.options.chart.xAxisOptions.scale,this.options.data.x),y:Ol(this.options.chart.yAxisOptions.scale,this.options.data.y)},this.coords&&(this.coords.options.text=this.formatCoords()),w(d(t.prototype),"redraw",this).call(this),this.options.coords||this.options.label||this.node.removeChild(this.coords.node),this.options.OxParallel||this.node.removeChild(this.lineLeft.node),this.options.OyParallel||this.node.removeChild(this.lineDown.node),this.hasPopup&&(this.popup.isInDocument()&&this.popup.setCenter(this.getPopupPosition()),this.isPopupVisible()||this.popup.hide())}},{key:"showCoords",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.coords||(this.options.coords=!0,e&&(this.prevCoords=!0),this.redraw())}},{key:"hideCoords",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.coords&&(this.options.coords=!1,e&&(this.prevCoords=!1),this.redraw())}},{key:"showLabel",value:function(){this.options.label||(this.options.label=!0,this.redraw())}},{key:"hideLabel",value:function(){this.options.label&&(this.options.label=!1,this.redraw())}},{key:"showOxParallel",value:function(){this.options.OxParallel||(this.options.OxParallel=!0,this.redraw())}},{key:"hideOxParallel",value:function(){this.options.OxParallel&&(this.options.OxParallel=!1,this.redraw())}},{key:"showOyParallel",value:function(){this.options.OyParallel||(this.options.OyParallel=!0,this.redraw())}},{key:"hideOyParallel",value:function(){this.options.OyParallel&&(this.options.OyParallel=!1,this.redraw())}},{key:"changeLabelFunc",value:function(){var e=this;this.popup.setTitle(Lc.createElement(vg,{ref:this.refLink("inputLabel"),value:this.options.data.label,style:{width:"60px"}})),this.inputLabel.node.focus(),this.inputLabel.node.select();var t=function t(){e.options.data.label=e.inputLabel.getValue().trim(),e.dispatch("dataChanged"),e.popup.setTitle(e.getPopupTitle()),e.changeLabel.addClickListener(function(t){t.stopPropagation(),e.changeLabelFunc()}),e.coords&&(e.coords.options.text=e.formatCoords(),e.coords.redraw()),rc.supportsEvent("click")?window.removeEventListener("click",t):window.removeEventListener("touchstart",t),e.popup.removeClickListener(t)};this.inputLabel.node.addEventListener("keypress",function(e){13===(e.which||e.keyCode)&&t()}),rc.supportsEvent("click")?window.addEventListener("click",t):window.addEventListener("touchstart",t),this.inputLabel.addClickListener(function(e){e.stopPropagation()}),setTimeout(function(){e.popup.addClickListener(t)},0)}},{key:"clickFunc",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hasPopup?(this.popup&&this.popup.hide(),this.hasPopup=!1):this.dragged||(this.popup=Gw.create(document.body,Object.assign({title:this.getPopupTitle(),children:this.getPopupContent(),transitionTime:300,titleFontSize:"9pt",contentFontSize:"9pt",style:{maxWidth:"270px"}},this.getPopupPosition())),this.seeCoordsButton.addClickListener(function(){e.seeCoordsButton.getValue()?e.showCoords():e.hideCoords()}),this.seeLabelButton.addClickListener(function(){e.seeLabelButton.getValue()?e.showLabel():e.hideLabel()}),this.seeOxButton.addClickListener(function(){e.seeOxButton.getValue()?e.showOxParallel():e.hideOxParallel()}),this.seeOyButton.addClickListener(function(){e.seeOyButton.getValue()?e.showOyParallel():e.hideOyParallel()}),this.changeLabel.addClickListener(function(){e.changeLabelFunc()}),this.hasPopup=!0,t&&(this.changeLabelFunc(),this.inputLabel.node.focus(),this.inputLabel.node.select()))}},{key:"getPopupTitle",value:function(){var e=-1;return this.options.widget&&(e=this.options.widget.decimals||-1),[this.options.data.label+" ("+Nl(this.options.data.x,this.options.chart.xAxisOptions.scale,e)+", "+Nl(this.options.data.y,this.options.chart.yAxisOptions.scale,e)+")",Lc.createElement("div",{ref:this.refLink("changeLabel"),className:"pull-right",style:{marginRight:"4px",marginLeft:"4px"}},Lc.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true",style:{cursor:"pointer"}}))]}},{key:"getPopupContent",value:function(){return[Lc.createElement(Lb,null,Lc.createElement(Nb,{label:"Coordinates",style:{display:"inline",float:"initial"}},Lc.createElement(Eg,{ref:this.refLink("seeCoordsButton"),value:this.options.coords})),Lc.createElement(Nb,{label:"Point Label",style:{display:"inline",float:"initial"}},Lc.createElement(Eg,{ref:this.refLink("seeLabelButton"),value:this.options.label})),Lc.createElement(Nb,{label:"Parallel to Ox",style:{display:"inline",float:"initial"}},Lc.createElement(Eg,{ref:this.refLink("seeOxButton"),value:this.options.OxParallel})),Lc.createElement(Nb,{label:"Parallel to Oy",style:{display:"inline",float:"initial"}},Lc.createElement(Eg,{ref:this.refLink("seeOyButton"),value:this.options.OyParallel})))]}},{key:"getPopupPosition",value:function(){var e=this.point.getBoundingClientRect();return{x:e.left+e.width/2,y:e.bottom-.1*e.height}}},{key:"isPopupVisible",value:function(){var e=this.parent.options.chart.interactiveLayer.getBoundingClientRect(),t=this.getPopupPosition();return e.left<=t.x&&t.x<=e.right&&e.top<=t.y&&t.y<=e.bottom}}]),t}(ag.Group),FU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"redraw",value:function(){var e=this.options.chart.xAxisOptions.scale,n=this.options.chart.yAxisOptions.scale,i=Ml(this.options.data.a,this.options.data.b,this.options.data.c,e.domain(),n.domain());this.options.x1=Ol(e,i[0]),this.options.y1=Ol(n,i[1]),this.options.x2=Ol(e,i[2]),this.options.y2=Ol(n,i[3]),w(d(t.prototype),"redraw",this).call(this)}}]),t}(ag.Line),UU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"redraw",value:function(){var e=this.options.chart.xAxisOptions.scale,n=this.options.chart.yAxisOptions.scale;this.options.x1=Ol(e,this.options.data.x1),this.options.y1=Ol(n,this.options.data.y1),this.options.x2=Ol(e,this.options.data.x2),this.options.y2=Ol(n,this.options.data.y2),w(d(t.prototype),"redraw",this).call(this)}}]),t}(ag.Line),zU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){for(var e=[],t=1;t<this.points.length;t+=1)e.push(Lc.createElement(ag.Line,{x1:this.points[t-1].x,y1:this.points[t-1].y,x2:this.points[t].x,y2:this.points[t].y}));return e.push(Lc.createElement(ag.Line,{x1:this.points[this.points.length-1].x,y1:this.points[this.points.length-1].y,x2:this.points[0].x,y2:this.points[0].y})),e}},{key:"redraw",value:function(){var e=this.options.chart.xAxisOptions.scale,n=this.options.chart.yAxisOptions.scale;this.points=this.points||[],this.points.splice(0,this.points.length);for(var i=0;i<this.options.data.length;i+=1)this.points.push({x:Ol(e,this.options.data[i].x),y:Ol(n,this.options.data[i].y)});w(d(t.prototype),"redraw",this).call(this)}}]),t}(ag.Group),WU=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{fill:"none",stroke:"black"})}},{key:"redraw",value:function(){var e=this.options.chart.xAxisOptions.scale,n=this.options.chart.yAxisOptions.scale;this.options.center.x=Ol(e,this.options.data.x),this.options.center.y=Ol(n,this.options.data.y);var i=Math.abs(n.range()[1]-n.range()[0]),r=Math.abs(n.domain()[1]-n.domain()[0]);this.options.radius=this.options.data.r*i/r,w(d(t.prototype),"redraw",this).call(this)}}]),t}(ag.Circle),HU=YB.getInstance(),VU={points:[{x:30,y:60,label:"A"},{x:100,y:55,label:"C"},{x:130,y:55,label:"E"},{x:115,y:20,label:"D"},{x:75,y:70,label:"B"}],lines:[{a:1,b:1,c:0}],segments:[{x1:5,y1:7,x2:15,y2:20}],circles:[{x:25,y:25,r:15}],polygons:[[{x:25,y:25},{x:40,y:40},{x:40,y:0}]]},GU=[{value:-1,toString:function(){return"Auto"}},{value:0,toString:function(){return"None"}},{value:1,toString:function(){return"One"}},{value:2,toString:function(){return"Two"}},{value:3,toString:function(){return"Three"}},{value:4,toString:function(){return"Four"}},{value:5,toString:function(){return"Five"}},{value:6,toString:function(){return"Six"}}],jU=["point","segment","line","circle","polygon"],YU=[_U,UU,FU,WU,zU],JU=function(){function e(){r(this,e)}return o(e,null,[{key:"c",value:function(e){return Nl(parseFloat(e),this.scale,this.decimals)}},{key:"point",value:function(e){var t=this.c(e.x)+" "+this.c(e.y);return e.label&&(t+=" "+e.label),t+"\n"}},{key:"line",value:function(e){return"Line "+this.c(e.a)+" "+this.c(e.b)+" "+this.c(e.c)+"\n"}},{key:"segment",value:function(e){return"Segment "+this.c(e.x1)+" "+this.c(e.y1)+" "+this.c(e.x2)+" "+this.c(e.y2)+"\n"}},{key:"circle",value:function(e){return"Circle "+this.c(e.x)+" "+this.c(e.y)+" "+this.c(e.r)+"\n"}},{key:"polygon",value:function(e){var t="Polygon\n",n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=this.c(s.x)+" "+this.c(s.y)+"\n"}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t+="...\n"}}]),e}();JU.decimals=-1,JU.scale={domain:function(){return[0,160]}};for(var qU=[],XU=0;XU<jU.length;XU+=1)qU.push(function(e,t){return function(n){function i(){return r(this,i),b(this,d(i).apply(this,arguments))}return h(i,n),o(i,[{key:"getNodeAttributes",value:function(){var e=w(d(i.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("clip-path",this.options.chart.clipPath),e}},{key:"render",value:function(){this[t+"s"]=[];for(var n=0;n<this.options.data[t+"s"].length;n+=1)this[t+"s"][n]=Lc.createElement(e,{ref:this.refLinkArray(t+"s",n),data:this.options.data[t+"s"][n],coords:!1,label:!0,chart:this.options.chart,widget:this.options.widget,editable:this.options.editable});return this[t+"s"]}},{key:"redraw",value:function(){if(this[t+"s"]){var e=!0,n=!1,r=void 0;try{for(var a,o=this[t+"s"][Symbol.iterator]();!(e=(a=o.next()).done);e=!0){a.value.redraw()}}catch(e){n=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}else w(d(i.prototype),"redraw",this).call(this)}},{key:"onMount",value:function(){var e=this;this.options.chart.addZoomListener(function(){e.redraw()})}},{key:"remove",value:function(e){for(var n=[],i=0;i<this[t+"s"].length;i+=1)this[t+"s"][i]!==e&&n.push(this[t+"s"][i]);delete this[t+"s"],this[t+"s"]=n,e.destroyNode()}}]),i}(ag.Group)}(YU[XU],jU[XU]));var KU,QU,ZU,$U,ez,tz,nz,iz,rz,az,oz,sz,lz,uz,cz,hz,dz,pz,fz,gz,mz,vz,yz,bz,kz,wz,Ez,Sz,Cz,xz,Tz,Az,Lz,Iz,Nz,Oz,Rz,Mz,Pz,Dz,Bz,_z,Fz,Uz,zz,Wz,Hz,Vz,Gz,jz,Yz,Jz,qz,Xz,Kz,Qz,Zz,$z,eW,tW,nW,iW,rW,aW,oW,sW,lW,uW,cW,hW,dW,pW,fW,gW,mW,vW,yW,bW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{editable:!1,points:VU.points,lines:VU.lines,segments:VU.segments,circles:VU.circles,polygons:VU.polygons,xDomain:[0,160],yDomain:[0,100],width:320,height:200}}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.chartOptions={width:this.options.width+70,height:this.options.height+50},this.options.data={};var n=!0,i=!1,r=void 0;try{for(var a,o=jU[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.options[s+"s"]=e[s+"s"]||this.options[s+"s"],this.options.data[s+"s"]=this.options[s+"s"]}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"render",value:function(){for(var e=[],t=0;t<jU.length;t+=1){var n=qU[t];e.push(Lc.createElement(n,{editable:this.options.editable,ref:this.refLink(jU[t]+"Plot"),data:this.options.data,widget:this.options.widget}))}return[Lc.createElement(MU,{ref:this.refLink("chart"),cursorStyle:"pointer",chartOptions:Object.assign({},this.chartOptions),xAxisDomain:this.options.xDomain,yAxisDomain:this.options.yDomain},e)]}},{key:"getCoords",value:function(){var e=1/0,t=-1/0,n=1/0,i=-1/0,r=!1,a=function(a,o){r=!0,e=Math.min(e,a),n=Math.min(n,o),t=Math.max(t,a),i=Math.max(i,o)},o=!0,s=!1,l=void 0;try{for(var u,c=this.pointPlot.points[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value;a(h.options.data.x,h.options.data.y)}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}var d=!0,p=!1,f=void 0;try{for(var g,m=this.segmentPlot.segments[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;a(v.options.data.x1,v.options.data.y1),a(v.options.data.x2,v.options.data.y2)}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}var y=!0,b=!1,k=void 0;try{for(var w,E=this.circlePlot.circles[Symbol.iterator]();!(y=(w=E.next()).done);y=!0){var S=w.value;a(S.options.data.x-S.options.data.r,S.options.data.y-S.options.data.r),a(S.options.data.x+S.options.data.r,S.options.data.y+S.options.data.r)}}catch(e){b=!0,k=e}finally{try{y||null==E.return||E.return()}finally{if(b)throw k}}var C=!0,x=!1,T=void 0;try{for(var A,L=this.polygonPlot.polygons[Symbol.iterator]();!(C=(A=L.next()).done);C=!0){var I=A.value,N=!0,O=!1,R=void 0;try{for(var M,P=I.options.data[Symbol.iterator]();!(N=(M=P.next()).done);N=!0){var D=M.value;a(D.x,D.y)}}catch(e){O=!0,R=e}finally{try{N||null==P.return||P.return()}finally{if(O)throw R}}}}catch(e){x=!0,T=e}finally{try{C||null==L.return||L.return()}finally{if(x)throw T}}if(!r)return null;var B=t-e,_=i-n;Math.abs(B)<.001&&Math.abs(_)<=.001?(e-=.1,t+=.1,n-=.1,i+=.1):Math.abs(B)<.001?(e-=.25*_,t+=.25*_):Math.abs(_)<.001&&(n-=.25*B,i+=.25*B),e-=.25*B,t+=.25*B,n-=.25*_,i+=.25*_;var F=this.chart,U=Math.abs(F.xAxisOptions.scale.range()[0]-F.xAxisOptions.scale.range()[1]),z=Math.abs(F.yAxisOptions.scale.range()[0]-F.yAxisOptions.scale.range()[1]);if((t-e)/(i-n)<U/z){B=U/z*(i-n);var W=.5*(e+t);e=W-B/2,t=W+B/2}else{_=z/U*(t-e);var H=.5*(n+i);n=H-_/2,i=H+_/2}return[e,t,n,i]}},{key:"setDomain",value:function(e,t,n,i){var r=this.chart;r.options.xAxisDomain=r.getPaddedDomain([e,t],[r.options.domainPadding[3],r.options.domainPadding[1]]),r.options.yAxisDomain=r.getPaddedDomain([n,i],[r.options.domainPadding[2],r.options.domainPadding[0]]),r.xAxisOptions.scale=xi().domain(r.options.xAxisDomain).range([0,r.options.chartOptions.width]),r.yAxisOptions.scale=xi().domain(r.options.yAxisDomain).range([r.options.chartOptions.height,0]),r._initialXScale=r.xAxisOptions.scale.copy(),r._initialYScale=r.yAxisOptions.scale.copy(),r.redraw(),r.interactiveLayer.node.__zoom=xU}},{key:"onMount",value:function(){var e=this;this.addListener("centerPoints",function(){var t=e.getCoords();t?e.setDomain(t[0],t[1],t[2],t[3]):e.setDomain(0,160,0,100)});for(var t=0;t<jU.length;t+=1)!function(t){e.addListener("add"+jU[t][0].toUpperCase()+jU[t].slice(1,jU[t].length),function(n){var i=YU[t],r=Lc.createElement(i,l({},n,{chart:e.chart,widget:e.options.widget,editable:!0}));e[jU[t]+"Plot"][jU[t]+"s"].push(r),r.mount(e[jU[t]+"Plot"]),n[jU[t]]=r})}(t);this.addListener("resize",function(t,n){e.chartOptions={width:n+70,height:t+50},e.redraw(),e.chart.initZoom(),e.dispatch("centerPoints")}),this.addListener("inputProvided",function(t){var n={};e.dispatch("needPointOptions",n);for(var i=0;i<jU.length;i+=1){for(var r=YU[i],a=jU[i],o=t[a+"s"]||[],s=e[a+"Plot"][a+"s"],l=0;l<Math.min(o.length,s.length);l+=1)s[l].options.data=o[l],s[l].redraw();for(;o.length<s.length;)e[a+"Plot"].remove(s[s.length-1]),s.pop();for(var u=s.length;u<o.length;u+=1){var c=Lc.createElement(r,{data:o[u],chart:e.chart,widget:e.options.widget,editable:e.options.editable});"point"===a&&Object.assign(c.options,n),s.push(c),c.mount(e[a+"Plot"])}}}),this.addListener("updateDomain",function(t){t.xDomain&&(e.options.xDomain=t.xDomain),t.yDomain&&(e.options.yDomain=t.yDomain),e.setDomain(e.options.xDomain[0],e.options.xDomain[1],e.options.yDomain[0],e.options.yDomain[1])})}}]),t}(DU),kW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle("position","relative")}},{key:"render",value:function(){return[Lc.createElement("div",{className:"hidden",ref:"settings",style:{position:"absolute",zIndex:"2016",right:"80px",top:"40px",boxShadow:"0 5px 15px rgba(0,0,0,.5)",backgroundColor:"#fff",padding:"5px",width:"200px"}},Lc.createElement(Lb,null,Lc.createElement(Nb,{label:"Decimals"},Lc.createElement(Gg,{options:GU,ref:"decimalsSelect"})),Lc.createElement(Nb,{label:"Coordinates",inline:!1},Lc.createElement(Eg,{ref:"seeCoords"})),Lc.createElement(Nb,{label:"Point Labels",inline:!1},Lc.createElement(Eg,{ref:"seeLabels"})),Lc.createElement(Nb,{label:"Ox parallels",inline:!1},Lc.createElement(Eg,{ref:"seeOxParallels"})),Lc.createElement(Nb,{label:"Oy parallels",inline:!1},Lc.createElement(Eg,{ref:"seeOyParallels"})))),Lc.createElement(jg,null,Lc.createElement(Md,{size:Dc.SMALL,level:Pc.INFO,label:Lc.T("View All"),faIcon:"eye",ref:"viewAllButton",style:{display:"inline",marginTop:"10px"}}),Lc.createElement(Md,{size:Dc.SMALL,level:Pc.INFO,label:Lc.T("Settings"),faIcon:"bars",ref:"settingsButton",style:{display:"inline",marginTop:"10px"}})),Lc.createElement("div",{style:{height:"500px","overflow-y":"scroll"}},Lc.createElement("h4",null,"Geometry Widget"),Lc.createElement("p",null,"Using this tool, you can easily manipulate a plane and any objects on it, like points, segments, circles, polygons and so on. You can use the export button to generate a mark-up tag that renders a copy of your plane anywhere on our website like in chats, comments or articles. The left-side text panel and the middle graphic panel are kept in sync at all times, so you can input any set of objects to draw them, or draw using the panel and then take the text version on the left."),Lc.createElement("p",null,"Ways you can interact with the widget:"),Lc.createElement("ul",null,Lc.createElement("li",null,"Points support drag and drop."),Lc.createElement("li",null,"You can toggle certain options for all points, or by clicking on a point you can display a menu, for that point's individual settings."),Lc.createElement("li",null,"Any point can be given a label, and it's label and coordinates can be manually changed from the same menu as above.")))]}},{key:"getPointOptions",value:function(){return{coords:this.seeCoords.getValue(),label:this.seeLabels.getValue(),OxParallel:this.seeOxParallels.getValue(),OyParallel:this.seeOyParallels.getValue()}}},{key:"onMount",value:function(){var e=this,t=function t(){e.settings.addClass("hidden"),document.body.removeEventListener("click",t)};this.settingsButton.addClickListener(function(n){e.settings.hasClass("hidden")?(e.settings.removeClass("hidden"),document.body.addEventListener("click",t)):t(),n.stopPropagation()}),this.settings.addClickListener(function(e){e.stopPropagation()}),this.seeCoords.addClickListener(function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=e.options.svg.pointPlot.points[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.seeCoords.getValue()?s.showCoords():s.hideCoords()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}t.stopPropagation()}),this.seeLabels.setValue(!0),this.seeLabels.addClickListener(function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=e.options.svg.pointPlot.points[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.seeLabels.getValue()?s.showLabel():s.hideLabel()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}t.stopPropagation()}),
this.seeOxParallels.addClickListener(function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=e.options.svg.pointPlot.points[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.seeOxParallels.getValue()?s.showOxParallel():s.hideOxParallel()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}t.stopPropagation()}),this.seeOyParallels.addClickListener(function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=e.options.svg.pointPlot.points[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.seeOyParallels.getValue()?s.showOyParallel():s.hideOyParallel()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}t.stopPropagation()}),this.addListener("needPointOptions",function(t){Object.assign(t,e.getPointOptions())}),this.decimalsSelect.addChangeListener(function(){JU.decimals=e.decimalsSelect.get().value,e.options.widget.dispatch("decimalsChange",e.decimalsSelect.get().value)}),this.viewAllButton.addClickListener(function(){e.options.svg.dispatch("centerPoints")})}}]),t}(jd),wW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setNewData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={points:[],segments:[],lines:[],circles:[],polygons:[]};e=e.split("\n");for(var i=0;i<e.length;i+=1)if(e[i]){var r=void 0;try{r=kt(e[i])}catch(e){continue}if(r&&r.length){var a=this.constructor.getPoint(r),o=this.constructor.getSegment(r),s=this.constructor.getLine(r),l=this.constructor.getCircle(r);if(a)n.points.push(a);else if(o)n.segments.push(o);else if(s)n.lines.push(s);else if(l)n.circles.push(l);else if("Polygon"===r[0]){for(var u=i+1,c=[];u<e.length&&"..."!==e[u];){try{var h=this.constructor.getPoint(kt(e[u]));h&&c.push(h)}catch(e){}u+=1}"..."===e[u]&&c.length>=3&&n.polygons.push(c),i=u}}}t&&this.dispatch("inputProvided",n)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.setAceRendererOption("showLineNumbers",!1),this._timeout=null,this.addAceSessionChangeListener(function(){e._selfChanged||(e._timeout&&clearTimeout(e._timeout),e._timeout=setTimeout(function(){e.setNewData(e.getValue()),e._timeout=null},500))}),this.addListener("addObject",function(t,n){e._selfChanged=!0;var i=JU[t](n.options.data),r=e.ace,a=r.session.getLine(0).length;r.gotoLine(0,a),e.insert(i),e._selfChanged=!1}),this.addListener("redraw",function(t){e._selfChanged=!0,e.setValue(Pl(t)),e._selfChanged=!1})}}],[{key:"getPoint",value:function(e){if(2===e.length){var t=parseFloat(e[0]),n=parseFloat(e[1]);if(!isNaN(t)&&!isNaN(n))return{x:t,y:n,label:""}}if(3===e.length&&"Point"===e[0]){var i=parseFloat(e[1]),r=parseFloat(e[2]);if(!isNaN(i)&&!isNaN(r))return{x:i,y:r,label:""}}if(3===e.length){var a=parseFloat(e[0]),o=parseFloat(e[1]);if(!isNaN(a)&&!isNaN(o))return{x:a,y:o,label:e[2]}}return null}},{key:"getSegment",value:function(e){if(4===e.length){var t=parseFloat(e[0]),n=parseFloat(e[1]),i=parseFloat(e[2]),r=parseFloat(e[3]);if(!(isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)))return{x1:t,y1:n,x2:i,y2:r}}if(e.length>=5&&"Segment"===e[0]){var a=parseFloat(e[1]),o=parseFloat(e[2]),s=parseFloat(e[3]),l=parseFloat(e[4]);if(!(isNaN(a)||isNaN(o)||isNaN(s)||isNaN(l)))return{x1:a,y1:o,x2:s,y2:l}}return null}},{key:"getLine",value:function(e){if(3===e.length){var t=parseFloat(e[0]),n=parseFloat(e[1]),i=parseFloat(e[2]);if(!isNaN(t)&&!isNaN(n)&&!isNaN(i))return{a:t,b:n,c:i}}if(e.length>=4&&"Line"===e[0]){var r=parseFloat(e[1]),a=parseFloat(e[2]),o=parseFloat(e[3]);if(!isNaN(r)&&!isNaN(a)&&!isNaN(o))return{a:r,b:a,c:o}}return null}},{key:"getCircle",value:function(e){if(3===e.length){var t=parseFloat(e[0]),n=parseFloat(e[1]),i=parseFloat(e[2]);if(!isNaN(t)&&!isNaN(n)&&!isNaN(i))return{x:t,y:n,r:i}}if(e.length>=4&&"Circle"===e[0]){var r=parseFloat(e[1]),a=parseFloat(e[2]),o=parseFloat(e[3]);if(!isNaN(r)&&!isNaN(a)&&!isNaN(o))return{x:r,y:a,r:o}}return null}}]),t}(ip),EW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("div",{ref:"widgetBlock",style:{margin:"0 auto"}},Lc.createElement("div",{style:{width:"320px",display:"inline-block","margin-right":"30px",float:"left"}},Lc.createElement("label",null," Input: "),Lc.createElement(wW,{ref:this.refLink("textPanel"),value:Pl(VU),style:{width:"100%",height:"300px"}})),Lc.createElement("div",{ref:"svgBlock",style:{width:"600px",height:"500px",display:"inline-block",position:"relative"}},Lc.createElement("div",{style:{position:"absolute",top:"20px",left:"70px"}},Lc.createElement(Md,{ref:"plusButton",level:Pc.INFO,faIcon:"plus",size:Dc.LARGE,style:{"border-radius":"0"}}),Lc.createElement("div",{ref:"commandsList",className:"".concat(HU.default," hidden"),style:{width:"3.1em"}},Lc.createElement("div",{ref:"drawPoint",className:"fa fa-circle",style:{"text-align":"center",height:"40px","line-height":"25px"}}," "),Lc.createElement("div",{ref:"drawSegment",className:"fa fa-minus fa-2x",style:{"text-align":"center"}}," "),Lc.createElement("div",{ref:"drawLine",style:{"text-align":"center"}},"/"),Lc.createElement("div",{ref:"drawCircle",className:"fa fa-circle-o fa-2x",style:{"text-align":"center"}}," "),Lc.createElement("div",{ref:"drawPolygon",className:"fa fa-square-o fa-2x",style:{"text-align":"center"}}," "))),Lc.createElement(bW,l({ref:"svg",textPanel:this.textPanel},this.options,{data:VU,widget:this}))),Lc.createElement("div",{style:{width:"320px",display:"inline-block","margin-left":"30px",float:"right"}},Lc.createElement(kW,{ref:"geometryWidgetLegend",widget:this,editable:!0})))]}},{key:"resize",value:function(e,t){t=Math.max(t,500),e=472.66*t/754,this.widgetBlock.setStyle("width",t+770+"px"),this.svgBlock.setStyle("width",t+"px"),this.svgBlock.setStyle("height",e+"px"),this.svg.setAttribute("width",t+"px"),this.svg.setAttribute("height",e+"px"),this.svg.dispatch("resize",e,t)}},{key:"addDrawListeners",value:function(){var e=this,t=function(){e._isDrawing&&e._forceEndDraw(),e._isDrawing=!0;var t=!0,n=!1,i=void 0;try{for(var r,a=e.svg.pointPlot.points[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.removeClickListener(o.clickCallback),o.point.removeDragListener(o.dragFunc)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}document.body.style.cursor="crosshair",e.svg.chart.disableZoom(),e.svg.chart.interactiveLayer.setStyle("cursor","crosshair")},n=function(t,n){e._isDrawing=!1;var i=!0,r=!1,a=void 0;try{for(var o,s=e.svg.pointPlot.points[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l.addClickListener(l.clickCallback),l.point.addDragListener(l.dragFunc)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}document.body.style.cursor="default",e.svg.chart.initZoom(),e.svg.chart.interactiveLayer.setStyle("cursor","move"),t&&e.textPanel.dispatch("addObject",t,n)},i=this.svg.chart.interactiveLayer,r=function(t){var n=i.node.getBoundingClientRect(),r=e.svg.chart.xAxisOptions.scale.domain(),a=e.svg.chart.yAxisOptions.scale.domain(),o=e.svg.chart.xAxisOptions.scale.range(),s=Math.abs(o[0]-o[1]),l=e.svg.chart.yAxisOptions.scale.range(),u=Math.abs(l[0]-l[1]);return{x:r[0]+(r[1]-r[0])*(rc.getEventX(t)-n.left)/s,y:a[1]+(a[0]-a[1])*(rc.getEventY(t)-n.top)/u,label:""}},a=function(i){i.stopPropagation(),t();var a={data:r(i)};e.geometryWidgetLegend.dispatch("needPointOptions",a);var o=a.coords;a.coords=!0,e.svg.dispatch("addPoint",a);var s=a.point;s.removeClickListener(s.clickCallback),s.point.removeDragListener(s.dragFunc);var l=function(e){s.node&&(s.options.data=r(e),s.redraw())},u=function t(){window.removeEventListener("click",t),o||s.hideCoords(),window.removeEventListener("mousemove",l),s.clickFunc(!0),window.removeEventListener("contextmenu",e._forceEndDraw),n("point",s),s.addListener("dataChanged",function(){e.textPanel.dispatch("redraw",e.getData())})};e._forceEndDraw=function(t){if(window.removeEventListener("click",u),window.removeEventListener("mousemove",l),window.removeEventListener("contextmenu",e._forceEndDraw),e.svg.pointPlot.remove(s),t)return n(),t.preventDefault(),!1},window.addEventListener("click",u),window.addEventListener("mousemove",l),window.addEventListener("contextmenu",e._forceEndDraw)},o=function(a){a.stopPropagation(),t();var o=function t(a){a.stopPropagation();var o=r(a),s={data:{x1:o.x,y1:o.y,x2:o.x,y2:o.y}};e.svg.dispatch("addSegment",s);var l=s.segment;i.removeClickListener(t);var u=function(e){var t=r(e);l.options.data.x2=t.x,l.options.data.y2=t.y,l.redraw()},c=function t(){window.removeEventListener("click",t),window.removeEventListener("mousemove",u),window.removeEventListener("contextmenu",e._forceEndDraw),n("segment",l)};window.removeEventListener("contextmenu",e._forceEndDraw),e._forceEndDraw=function(t){if(window.removeEventListener("click",c),window.removeEventListener("mousemove",u),window.removeEventListener("contextmenu",e._forceEndDraw),e.svg.segmentPlot.remove(l),t)return n(),t.preventDefault(),!1},window.addEventListener("click",c),window.addEventListener("mousemove",u),window.addEventListener("contextmenu",e._forceEndDraw)};i.addClickListener(o),e._forceEndDraw=function(t){if(i.removeClickListener(o),window.removeEventListener("contextmenu",e._forceEndDraw),t)return n(),t.preventDefault(),!1},window.addEventListener("contextmenu",e._forceEndDraw)},s=function(a){a.stopPropagation(),t();var o=function t(a){a.stopPropagation();var o={data:r(a)};o.data.r=0,e.svg.dispatch("addCircle",o);var s=o.circle;i.removeClickListener(t);var l=function(e){var t=r(e);s.options.data.r=Math.sqrt((t.x-s.options.data.x)*(t.x-s.options.data.x)+(t.y-s.options.data.y)*(t.y-s.options.data.y)),s.redraw()},u=function t(){window.removeEventListener("click",t),window.removeEventListener("mousemove",l),window.removeEventListener("contextmenu",e._forceEndDraw),n("circle",s)};window.removeEventListener("contextmenu",e._forceEndDraw),e._forceEndDraw=function(t){if(window.removeEventListener("click",u),window.removeEventListener("mousemove",l),window.removeEventListener("contextmenu",e._forceEndDraw),e.svg.circlePlot.remove(s),t)return n(),t.preventDefault(),!1},window.addEventListener("click",u),window.addEventListener("mousemove",l),window.addEventListener("contextmenu",e._forceEndDraw)};i.addClickListener(o),e._forceEndDraw=function(t){if(i.removeClickListener(o),window.removeEventListener("contextmenu",e._forceEndDraw),t)return n(),t.preventDefault(),!1},window.addEventListener("contextmenu",e._forceEndDraw)},l=function(a){a.stopPropagation(),t();var o=function t(a){a.stopPropagation();var o=r(a),s={data:{a:0,b:1/o.y,c:-1}};e.svg.dispatch("addLine",s);var l=s.line;i.removeClickListener(t);var u=function(e){var t=r(e);l.options.data.a=t.y-o.y,l.options.data.b=o.x-t.x,l.options.data.c=t.x*o.y-t.y*o.x,l.redraw()},c=function t(){window.removeEventListener("click",t),window.removeEventListener("mousemove",u),window.removeEventListener("contextmenu",e._forceEndDraw),n("line",l)};window.removeEventListener("contextmenu",e._forceEndDraw),e._forceEndDraw=function(t){if(window.removeEventListener("click",c),window.removeEventListener("mousemove",u),window.removeEventListener("contextmenu",e._forceEndDraw),e.svg.linePlot.remove(l),t)return n(),t.preventDefault(),!1},window.addEventListener("click",c),window.addEventListener("mousemove",u),window.addEventListener("contextmenu",e._forceEndDraw)};i.addClickListener(o),e._forceEndDraw=function(t){if(i.removeClickListener(o),window.removeEventListener("contextmenu",e._forceEndDraw),t)return n(),t.preventDefault(),!1},window.addEventListener("contextmenu",e._forceEndDraw)},u=function(a){a.stopPropagation(),t();var o=function t(a){a.stopPropagation();var o=r(a),s={data:[{x:o.x,y:o.y},{x:o.x,y:o.y}]};e.svg.dispatch("addPolygon",s);var l=s.polygon;i.removeClickListener(t);var u=function(e){var t=r(e);l.options.data[l.options.data.length-1].x=t.x,l.options.data[l.options.data.length-1].y=t.y,l.redraw()},c=function(e){l.options.data.push(r(e)),l.redraw()},h=function e(t){t.preventDefault(),window.removeEventListener("contextmenu",e),window.removeEventListener("click",c),window.removeEventListener("mousemove",u),l.options.data.pop(),l.redraw(),n("polygon",l)};window.removeEventListener("contextmenu",e._forceEndDraw),window.addEventListener("contextmenu",h),window.addEventListener("click",c),window.addEventListener("mousemove",u),e._forceEndDraw=function(){window.removeEventListener("contextmenu",h),window.removeEventListener("click",c),window.removeEventListener("mousemove",u),e.svg.polygonPlot.remove(l)}};i.addClickListener(o),e._forceEndDraw=function(t){if(i.removeClickListener(o),window.removeEventListener("contextmenu",e._forceEndDraw),t)return n(),t.preventDefault(),!1},window.addEventListener("contextmenu",e._forceEndDraw)};this.drawPoint.addClickListener(a),this.drawSegment.addClickListener(o),this.drawCircle.addClickListener(s),this.drawLine.addClickListener(l),this.drawPolygon.addClickListener(u)}},{key:"getData",value:function(){for(var e={points:[],segments:[],lines:[],circles:[],polygons:[]},t=0;t<jU.length;t+=1){var n=!0,i=!1,r=void 0;try{for(var a,o=this.svg[jU[t]+"Plot"][jU[t]+"s"][Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e[jU[t]+"s"].push(s.options.data)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}return e}},{key:"onMount",value:function(){var e=this;this.resize(window.innerHeight-200,80*window.innerWidth/100-700),window.addEventListener("resize",function(){e.resize(window.innerHeight-200,80*window.innerWidth/100-700)}),JU.scale=this.svg.chart.xAxisOptions.scale,this.geometryWidgetLegend.options.svg=this.svg,this.decimals=-1,this.addListener("decimalsChange",function(t){e.decimals!==t&&(e.decimals=t,e.textPanel.dispatch("redraw",e.getData()),e.svg.pointPlot.redraw())}),this.textPanel.addListener("inputProvided",function(t){e.svg.dispatch("inputProvided",t)}),this.svg.addListener("needPointOptions",function(t){e.geometryWidgetLegend.dispatch("needPointOptions",t)});var t=!0,n=!1,i=void 0;try{for(var r,a=this.svg.pointPlot.points[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.addListener("dataChanged",function(){e.textPanel.dispatch("redraw",e.getData())})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.plusButton.addClickListener(function(){e.commandsList.toggleClass("hidden")}),this.addDrawListeners()}}]),t}(Lc.Element),SW={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1,DIFF_CHANGE:2,DIFF_COMPLEX:-2},CW={gutterBackground:"white",aceTheme:{aceName:"dawn"},yellowBlockColor:"#FFFECC",yellowCurveColor:"#FFFECC",yellowStrokeColor:"#F8F48B",blueBlockColor:"#C1EBFF",blueCurveColor:"#C1EBFF",blueStrokeColor:"#6CBADE",redBlockColor:"#FFC1C2",redCurveColor:"#FFC1C2",redStrokeColor:"#F08D8D",greenBlockColor:"#C7EFCC",greenCurveColor:"#C7EFCC",greenStrokeColor:"#6FC278",strokeWidth:"1px",arrowsColor:"black"},xW={"-1":"red-diff ",1:"green-diff ",2:"blue-diff ","-2":"yellow-diff "},TW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(ag.SVGRoot),AW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(tb,{className:"diffing-tool",ref:"sectionDivider",orientation:Rc.HORIZONTAL,style:{height:"100%"}},Lc.createElement("div",{style:{width:"50%",height:"100%"}},Lc.createElement(ip,{ref:"leftCodeEditor",value:this.options.leftTextValue,readOnly:!this.options.leftEditable,style:{height:"100%"}})),Lc.createElement(jd,{fixed:!0,ref:"diffGutterPanel",style:{display:"inline-block",height:"100%",width:"100px",overflow:"hidden"}},Lc.createElement(TW,{ref:"diffGutter",style:{backgroundColor:CW.gutterBackground,height:"100%",width:"100%"}})),Lc.createElement("div",{style:{width:"50%",height:"100%"}},Lc.createElement(ip,{ref:"rightCodeEditor",value:this.options.rightTextValue,readOnly:!this.options.rightEditable,style:{height:"100%"}}))),Lc.createElement(Uc,null,Lc.createElement(Fc,{selector:".yellow-diff",ref:"yellowDiffStyle",attributes:{"background-color":CW.yellowBlockColor,fill:CW.yellowCurveColor,stroke:CW.yellowStrokeColor,"border-color":CW.yellowStrokeColor+" !important","stroke-width":CW.strokeWidth}}),Lc.createElement(Fc,{selector:".blue-diff",ref:"blueDiffStyle",attributes:{"background-color":CW.blueBlockColor,fill:CW.blueCurveColor,stroke:CW.blueStrokeColor,"border-color":CW.blueStrokeColor+" !important","stroke-width":CW.strokeWidth}}),Lc.createElement(Fc,{selector:".red-diff",ref:"redDiffStyle",attributes:{"background-color":CW.redBlockColor,fill:CW.redCurveColor,stroke:CW.redStrokeColor,"border-color":CW.redStrokeColor+" !important","stroke-width":CW.strokeWidth}}),Lc.createElement(Fc,{selector:".green-diff",ref:"greenDiffStyle",attributes:{"background-color":CW.greenBlockColor,fill:CW.greenCurveColor,stroke:CW.greenStrokeColor,"border-color":CW.greenStrokeColor+" !important","stroke-width":CW.strokeWidth}}),Lc.createElement(Fc,{selector:".acediff-diff.lines",attributes:{position:"absolute","z-index":"3"}}),Lc.createElement(Fc,{selector:".acediff-diff.targetOnly",attributes:{height:"0px !important","z-index":"4",left:"4px !important","border-top":"1px solid","border-bottom":"1px solid",position:"absolute"}}),Lc.createElement(Fc,{selector:".acediff-diff.targetOnly.top",attributes:{top:"-2px","border-top":"0px"}}),Lc.createElement(Fc,{selector:".acediff-diff.targetOnly.bottom",attributes:{"border-bottom":"0px"}}),Lc.createElement(Fc,{selector:".cursor-bar-yellow-diff",attributes:{width:"0px","background-color":"transparent","border-left":"2px solid "+CW.yellowStrokeColor}}),Lc.createElement(Fc,{selector:".cursor-bar-red-diff",attributes:{width:"0px","background-color":"transparent","border-left":"2px solid "+CW.redStrokeColor}}),Lc.createElement(Fc,{selector:".cursor-bar-green-diff",attributes:{width:"0px","background-color":"transparent","border-left":"2px solid "+CW.greenStrokeColor}}),Lc.createElement(Fc,{selector:".cursor-bar-blue-diff",attributes:{width:"0px","background-color":"transparent","border-left":"2px solid "+CW.blueStrokeColor}}),Lc.createElement(Fc,{selector:".diffing-tool .ace-dawn .ace_marker-layer .ace_active-line",attributes:{background:"rgba(36, 87, 121, 0.15) !important","z-index":"7","margin-left":"4px",opacity:"30%"}}))]}},{key:"getDefaultOptions",value:function(){return{leftTextValue:"Welcome to our Diffing Tool!\n\nYou can edit both of these panels and the diff is updated live.\n\nThis block is identical in both sides.\nTherefore it is not highlighted.\n\nThis block has been deleted.\nDeleted blocks appear with color red.\n\nYellow is mostly used for partial identical content.\n\nThe blue color is used for many changes\ninside a block, so the entire block is\nconsidered changed.\n",rightTextValue:"Welcome to our Diffing Tool!\n\nYou can edit both of these panels and the diff is updated live.\n\nThis new block has been inserted.\nInserted blocks appear with color green.\n\nThis block is identical in both sides.\nTherefore it is not highlighted.\n\n\nYellow is used for partial identical text content.\n\nAzure denotes what is written in the left side \n(this block is to exemplify only)\n\nYou can click on the arrows in the central gutter to move changes from one part to the other.\n",leftEditable:!0,rightEditable:!0}}},{key:"setLeftEditable",value:function(e){this.updateOptions({leftEditable:e})}},{key:"setRightEditable",value:function(e){this.updateOptions({rightEditable:e})}},{key:"setLeftText",value:function(e){this.updateOptions({leftTextValue:e})}},{key:"setRightText",value:function(e){this.updateOptions({rightTextValue:e})}},{key:"onMount",value:function(){var e=this;this.leftCodeEditor.setAceTheme(CW.aceTheme),this.rightCodeEditor.setAceTheme(CW.aceTheme),this.rightCodeEditor.setShowGutter(!1),this.leftCodeEditor.markers=[],this.rightCodeEditor.markers=[],this.diffGutterPanel.addNodeListener("mousewheel",function(t){t.preventDefault(),t.stopPropagation(),e.leftCodeEditor.setScrollTop(e.leftCodeEditor.getScrollTop()+t.deltaY),e.rightCodeEditor.setScrollTop(e.rightCodeEditor.getScrollTop()+t.deltaY)});var t=!1;this.leftCodeEditor.whenLoaded(function(){e.rightCodeEditor.whenLoaded(function(){setTimeout(function(){e.makeDiffs(),t=!0})})});var n=function(){t&&e.makeDiffs()};this.leftCodeEditor.addAceSessionEventListener("changeScrollTop",n),this.rightCodeEditor.addAceSessionEventListener("changeScrollTop",n),this.leftCodeEditor.addAceSessionChangeListener(n),this.rightCodeEditor.addAceSessionChangeListener(n),window.addEventListener("resize",n)}},{key:"makeDiffs",value:function(){this.computeDiffs(),this.createLogicalDiffs(),this.deleteVisualDiffs(),this.drawVisualDiffs()}},{key:"computeDiffs",value:function(){var e=new diff_match_patch,t=this.leftCodeEditor.getValue(),n=this.rightCodeEditor.getValue(),i=e.diff_main(t,n);e.diff_cleanupSemantic(i),this.diffs=i}},{key:"createLogicalDiffs",value:function(){var e=this;this.diffBlocks=[],this.diffCurves=[];var t=[],n=0;this.diffs.forEach(function(e){""!==e[1]&&(e[0]===SW.DIFF_EQUAL?t.push({type:SW.DIFF_EQUAL,leftText:e[1],rightText:e[1]}):e[0]===SW.DIFF_INSERT?n===SW.DIFF_DELETE?(t.last().type=SW.DIFF_CHANGE,t.last().rightText+=e[1]):t.push({type:SW.DIFF_INSERT,leftText:"",rightText:e[1]}):e[0]===SW.DIFF_DELETE&&(n===SW.DIFF_INSERT?(t.last().type=SW.DIFF_CHANGE,t.last().leftText+=e[1]):t.push({type:SW.DIFF_DELETE,leftText:e[1],rightText:""})),n=e[0])});var i={leftStartRow:0,leftEndRow:0,rightStartRow:0,rightEndRow:0},r={leftRow:0,rightRow:0,leftColumn:0,rightColumn:0},a=!1,o=0,s=0;t.forEach(function(t){var n,l,u,c,h=t.leftText,d=t.rightText,p=h.split("\n").length-1,f=d.split("\n").length-1,g=h.split("\n")[p].length,m=d.split("\n")[f].length,v=r.leftRow,y=r.rightRow,b=!0;(p||g||f||m)&&(o=t.type,n=r.leftRow+p+(g>0),l=(p>0?g:r.leftColumn+g)+(0!==g),u=r.rightRow+f+(m>0),c=(f>0?m:r.rightColumn+m)+(0!==m),(r.leftColumn||r.rightColumn)&&(b=!1),o!==SW.DIFF_EQUAL&&e.diffBlocks.push([o,r.leftRow,r.leftColumn,n,l,r.rightRow,r.rightColumn,u,c]),r.leftRow+=p,r.leftColumn=l-(0!==g),r.rightRow+=f,r.rightColumn=c-(0!==m),(r.leftColumn||r.rightColumn)&&(b=!1),b&&o!==SW.DIFF_EQUAL&&e.diffCurves.push([o,v,r.leftRow+(0!==r.leftColumn),y,r.rightRow+(0!==r.rightColumn)]),a&&((r.leftRow>i.leftEndRow||r.rightRow>i.rightEndRow)&&o===SW.DIFF_EQUAL||b)?(e.diffCurves.push([SW.DIFF_COMPLEX,i.leftStartRow,i.leftEndRow,i.rightStartRow,i.rightEndRow]),e.diffBlocks.push([SW.DIFF_COMPLEX,i.leftStartRow,0,i.leftEndRow,0,i.rightStartRow,0,i.rightEndRow,0]),s=0,a=!1):a||o===SW.DIFF_EQUAL||b?a&&(s+=1,i.leftEndRow=r.leftRow+(0!==r.leftColumn),i.rightEndRow=r.rightRow+(0!==r.rightColumn)):(a=!0,s=1,i.leftStartRow=v,i.rightStartRow=y,i.leftEndRow=r.leftRow+(0!==r.leftColumn),i.rightEndRow=r.rightRow+(0!==r.rightColumn)))}),a&&(1===s&&o||(o=SW.DIFF_COMPLEX),this.diffCurves.push([o,i.leftStartRow,i.leftEndRow,i.rightStartRow,i.rightEndRow]),this.diffBlocks.push([SW.DIFF_COMPLEX,i.leftStartRow,0,i.leftEndRow,0,i.rightStartRow,0,i.rightEndRow,0]))}},{key:"drawVisualDiffs",value:function(){this.drawCurves(),this.drawBlocks()}},{key:"deleteVisualDiffs",value:function(){this.deleteCurves(),this.deleteBlocks()}},{key:"drawCurves",value:function(){var e=this;this.diffCurves.forEach(function(t){e.drawDiffCurve(t[0],t[1],t[2],t[3],t[4])});for(var t=0;t<this.diffCurves.length;t+=1)this.diffGutter.children[t].setAttribute("class",xW[this.diffCurves[t][0]]);this.diffCurves.forEach(function(t){e.drawArrows(t[0],t[1],t[2],t[3],t[4])})}},{key:"deleteCurves",value:function(){this.diffGutter.eraseAllChildren()}},{key:"drawBlocks",value:function(){var e=this;this.diffBlocks.reverse(),this.diffBlocks.forEach(function(t){e.drawDiffBlock(e.leftCodeEditor,t[0],t[1],t[2],t[3],t[4]),e.drawDiffBlock(e.rightCodeEditor,t[0],t[5],t[6],t[7],t[8])})}},{key:"deleteBlocks",value:function(){var e=this;this.leftCodeEditor.markers.forEach(function(t){e.leftCodeEditor.removeMarker(t)}),this.rightCodeEditor.markers.forEach(function(t){e.rightCodeEditor.removeMarker(t)})}},{key:"drawArrows",value:function(e,t,n,i,r,a,o){var s=this,l=this.leftCodeEditor.getScrollTop(),u=this.rightCodeEditor.getScrollTop(),c=this.leftCodeEditor.getRendererLineHeight(),h=this.rightCodeEditor.getRendererLineHeight(),d=(t*c-l+n*c-l+2)/2,p=this.diffGutter.getWidth()-3,f=(i*h-u+r*h-u+2)/2,g="M 3 "+(d-5)+" l 5 5 l "+-5+" 5m 6 0 l 5 "+-5+" l "+-5+" "+-5,m="M 3 "+(d-5)+" l 16 0 l 0 10 l "+-16+" 0 z",v="M "+p+" "+(f-5)+" l "+-5+" 5 l 5 5m -6 0 l "+-5+" "+-5+" l 5 "+-5,y="M "+p+" "+(f-5)+" l "+-16+" 0 l 0 10 l 16 0 z";this.options.rightEditable&&(void 0!==a&&(a.options.children[0].setAttribute("d",m),a.options.children[1].setAttribute("d",g)),this.diffGutter.appendChild(Lc.createElement(ag.Group,{style:{backgroundColor:"red",cursor:"hand",pointerEvents:"all"}},Lc.createElement(ag.Path,{d:m,style:{stroke:"transparent",fill:"transparent"}}),Lc.createElement(ag.Path,{d:g,style:{stroke:CW.arrowsColor,fill:"none",strokeWidth:"1.5px"}}))),this.diffGutter.children.last().addClickListener(function(){var e=s.leftCodeEditor.getTextRange(t,0,n,0);s.rightCodeEditor.setTextRange(i,0,r,0,e)})),this.options.leftEditable&&(void 0!==o&&(o.options.children[0].setAttribute("d",y),o.options.children[1].setAttribute("d",v)),this.diffGutter.appendChild(Lc.createElement(ag.Group,{style:{backgroundColor:"red",cursor:"hand",pointerEvents:"all"}},Lc.createElement(ag.Path,{d:y,style:{stroke:"transparent",fill:"transparent"}}),Lc.createElement(ag.Path,{d:v,style:{stroke:CW.arrowsColor,fill:"none",strokeWidth:"1.5px"}}))),this.diffGutter.children.last().addClickListener(function(){var e=s.rightCodeEditor.getTextRange(i,0,r,0);s.leftCodeEditor.setTextRange(t,0,n,0,e)}))}},{key:"drawDiffCurve",value:function(e,t,n,i,r,a){var o=this.leftCodeEditor.getScrollTop(),s=this.rightCodeEditor.getScrollTop(),l=this.leftCodeEditor.getRendererLineHeight(),u=this.rightCodeEditor.getRendererLineHeight(),c=t*l-o+.5,h=this.diffGutter.getWidth()+1,d=i*u-s+.5,p=n*l-o+1.5,f=this.diffGutter.getWidth()+1,g=r*u-s+1.5,m=this.computeCurve(-1,c,h,d),v=this.computeCurve(f,g,-1,p),y="L"+h+","+d+" "+f+","+g,b="L-1,"+p+" "+-1+","+c,k=m+" "+y+" "+v+" "+b;if(void 0!==a)return void a.setAttr("d",k);var w=Lc.createElement(ag.Path,{d:k});this.diffGutter.appendChild(w)}},{key:"drawDiffBlock",value:function(e,t,n,i,r,a){r<n&&(r=n);var o="acediff-diff "+xW[t];a&&r===n&&a===i&&(r=n+1,a=i+2,o+=" cursor-bar-"+xW[t]),i||a||(e.markers.push(e.addMarker(n,0,n-1,1,"acediff-diff "+xW[t]+"targetOnly top","fullLine")),e.markers.push(e.addMarker(r,0,r-1,1,"acediff-diff "+xW[t]+"targetOnly bottom","fullLine"))),o+=r>n?"lines":"targetOnly";var s="";r-=1,a-=1,(-2===t||r<n&&-1===a)&&(s+="fullLine"),r<n&&-1===a?e.markers.push(e.addMarker(n,i,r,a,o,s)):-1===a?e.markers.push(e.addMarker(n,i,r+1,a+1,o,s+" text")):e.markers.push(e.addMarker(n,i,r,a,o,s))}},{key:"computeCurve",value:function(e,t,n,i){var r=n-e,a=e+r/2;return"M "+e+" "+t+" C "+a+","+t+" "+a+","+i+" "+n+","+i}}]),t}(Lc.Element),LW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(AW),IW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"beforeRedrawNotLoaded",value:function(){var e=this;require(["DiffMatchPatch"],function(){e.setLoaded()})}}]),t}(db(AW)),NW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({paddingTop:"20px",marginLeft:"5%",width:"90%",height:"100%"})}}]),t}(IW),OW=null,RW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){if(e.children&&e.children.length){var n="",i=!0,r=!1,a=void 0;try{for(var o,s=e.children[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;l instanceof Lc.TextElement?n+=l.getValue():n+=l.toString()}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}e.value=e.value||n}w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getNodeType",value:function(){return"span"}},{key:"updateInnerHTML",value:function(){try{this.node.innerHTML=OW.renderToString(this.options.value)}catch(e){this.node.innerHTML="Latex parse error..."}}},{key:"redraw",value:function(){var e=this;if(OW)return void this.updateInnerHTML();require(["katex"],function(t){OW=t,e.updateInnerHTML()})}}]),t}(Lc.Element),MW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntries",value:function(){return eI.all()}},{key:"setColumns",value:function(){w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return Lc.createElement(Xd,{value:e.getContest().getName(),href:"/contest/"+e.getContest().name})},headerName:"Name"},{value:function(e){return e.totalUsers},headerName:"Participants"},{value:function(e){return e.usersLastMonth},headerName:"Participants this month"},{value:function(e){return e.startDate?Ap(e.startDate).format("DD/MM/YYYY HH:mm"):Lc.createElement(RW,{value:"-\\infty"})},headerName:"Start date"},{value:function(e){return e.endDate?Ap(e.endDate).format("DD/MM/YYYY HH:mm"):Lc.createElement(RW,{value:"\\infty"})},headerName:"End date"},{value:function(e){return Lc.createElement(Xd,{value:"Edit contest",href:"/contest/"+e.getContest().name+"/edit/"})}},{value:function(e){return Lc.createElement(Xd,{value:"Invite Link",href:"/contest/invite/"+e.getCode()+"/"})}}])}}]),t}(vb),PW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Custom contest creation"}},{key:"getBody",value:function(){return[Lc.createElement("strong",null,"! Leave the Start Date and End Date empty for a contest you want open indefinitely"),Lc.createElement(Lb,null,Lc.createElement(Nb,{label:"Contest Name"},Lc.createElement(vg,{ref:"contestNameInput"})),Lc.createElement(Nb,{label:"Start Date"},Lc.createElement(iw,{ref:"startDatePicker"})),Lc.createElement(Nb,{label:"End Date"},Lc.createElement(iw,{ref:"endDatePicker"})),Lc.createElement(Nb,{label:"Contest Duration (hours:minutes or minutes)"},Lc.createElement(vg,{ref:"durationInput",value:"01:00"})))]}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getActionName",value:function(){return"Create"}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this);var e=yf.now().add({minutes:1}),n=3e5-e%3e5;e.add(n,"milliseconds"),this.startDatePicker.setDate(e),e.add({days:1}),this.endDatePicker.setDate(e)}},{key:"action",value:function(){var e=this,t=this.contestNameInput.getValue(),n=this.startDatePicker.getDate(),i=this.endDatePicker.getDate(),r=this.durationInput.getValue();if(r&&(r=r.split(":"),r=r.length>1?36e5*parseFloat(r[0]||0)+6e4*parseFloat(r[1]||0):6e4*parseFloat(r[0]||0)),!r||!t)return void this.messageArea.showMessage("Invalid data given!","red",3e3);if(n&&(n=n.getTime()),i&&(i=i.getTime()),n&&i&&n>=i)return void this.messageArea.showMessage("Invalid data given!","red",3e3);var a={duration:r,contestLongName:t};n&&(a.startTime=n),i&&(a.endTime=i),zu.postJSON("/contest/create_custom_contest/",a).then(function(){e.options.contestManager.table.redraw(),e.hide()},function(t){e.messageArea.showMessage(t.message,"red",3e3)})}}]),t}(Zg),DW=$g(PW),BW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.EXTRA_SMALL)}},{key:"render",value:function(){return[Lc.createElement(DW,{level:Pc.SUCCESS,style:{margin:"30px"},modalOptions:{contestManager:this}},"New Contest"),Lc.createElement(MW,{ref:"table"})]}}]),t}(Lc.Element),_W=function(e){function t(){return r(this,t),
b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"renderRegistrationMessage",value:function(){var e=eI.get(this.options.contestRegistererId),t=this.options.reason||"noregisterer";if(this.options.canRegister){var n=e.getContest().longName;return[Lc.createElement("div",{style:{marginTop:"20px"}},"Contest name: "+n.substr(0,n.length-15)),Lc.createElement("div",{style:{marginTop:"20px"}},"Duration: "+e.getContest().getFormattedDuration()),Lc.createElement("div",{style:{marginTop:"20px"}},"Click the button to go to the contest page. Take care, you can only participate once! The contest will start when you click the button.")]}return"toomany"===t?["The owner of this contest (",Lc.createElement(sE,{userId:e.ownerId}),") has reached his limit of contest registrations this month. Please contact ",Lc.createElement(sE,{userId:e.ownerId})," about this error."]:"participated"===t?"You have already participated in this contest.":USER.isAuthenticated?"Invalid invitation link.":"You need to log-in to continue."}},{key:"render",value:function(){return[Lc.createElement("div",{style:{marginTop:"50px"}},Lc.createElement("div",{style:{fontSize:"2em",padding:"0 15%"}},this.renderRegistrationMessage()),Lc.createElement("div",{style:{textAlign:"center"}},Lc.createElement($d,{ref:"errorArea"}),Lc.createElement(Md,{level:Pc.PRIMARY,size:Dc.LARGE,style:{margin:"20px auto",fontSize:"1.4em"},disabled:!this.options.canRegister,ref:"registerButton"},"Participate")))]}},{key:"onMount",value:function(){var e=this;this.registerButton.addClickListener(function(){zu.postJSON("/contest/register_by_invite/",{contestRegistererId:e.options.contestRegistererId}).then(function(){var t=eI.get(e.options.contestRegistererId).getContest().longName;nm.changeURL(["contest","custom-v-"+t.substr(t.length-12),"tasks"])},function(t){e.registerButton.setLevel(Pc.DANGER),e.errorArea.showMessage(t.message,"red"),setTimeout(function(){e.registerButton.setLevel(Pc.PRIMARY)},2e3)})})}}]),t}(Lc.Element),FW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"renderAnnouncement",value:function(e){var t=e.getDate().format("HH:mm:ss"),n=Lc.createElement("div",null,t," ",Lc.createElement("strong",null,e.getTarget()));return Lc.createElement("div",{style:{padding:"10px",width:"450px",maxWidth:"100%"}},Lc.createElement(ub,{key:e.id,title:n,id:"announcement"+e.id,bodyStyle:{padding:"15px"}},Lc.createElement(sp,{value:e.getMessage()})))}},{key:"render",value:function(){return this.getContest().getAnnouncements().map(this.renderAnnouncement,this)}},{key:"onMount",value:function(){var e=this;this.attachCreateListener(jS,function(t){t.getContest()===e.getContest()&&e.redraw()})}}]),t}(Lc.Element),UW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this,t=[{general:!0,toString:function(){return"General"}}].concat(this.options.contest.getContestTasks());return[Lc.createElement("h4",{className:"text-center"},"New announcement"),Lc.createElement(Nb,{label:"Task name"},Lc.createElement(Gg,{ref:"contestTaskSelect",options:t})),Lc.createElement(Nb,{label:"Message"},Lc.createElement(Vg,{ref:"messageInput"})),Lc.createElement(Nb,{label:" "},Lc.createElement(Md,{level:Pc.PRIMARY,label:Lc.T("Broadcast announcement"),onClick:function(){return e.broadcastAnnouncement()}}))]}},{key:"broadcastAnnouncement",value:function(){var e=this,t=this.contestTaskSelect.get(),n={contestId:this.options.contest.id,message:this.messageInput.getValue()};t.general||(n.contestTaskId=t.id),zu.postJSON("/contest/broadcast_announcement/",n).then(function(){return e.hide()})}}]),t}(Qg),zW={VIEW_ONLY:{toString:function(){return"View only"},permissions:{view:!0}},ANSWER_QUESTIONS:{toString:function(){return"Answer questions"},permissions:{view:!0,"answer-question":!0}},QUESTIONS_AND_ANNOUNCEMENTS:{toString:function(){return"Answer questions & broadcast announcements"},permissions:{view:!0,"answer-question":!0,"broadcast-announcement":!0}},FULL:{toString:function(){return"Full permissions"},permissions:{view:!0,"edit-settings":!0,"edit-tasks":!0,"answer-question":!0,"broadcast-announcement":!0}},CUSTOM:{toString:function(){return"Custom"}}},WW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"removePermission",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.getContest().removePermission(e.userId||e,t,function(){return i&&n.redraw()})}},{key:"addPermission",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.getContest().addPermission(e.userId||e,t,function(){return i&&n.redraw()})}},{key:"togglePermission",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.getContest().getUserPermission(e.userId||e,t)?this.removePermission(e,t,n):this.addPermission(e,t,n)}},{key:"tryMatchPreset",value:function(e){if(this.forceCustomForUsers&&this.forceCustomForUsers.has(e))return zW.CUSTOM;for(var t=0,n=Object.values(zW);t<n.length;t++){var i=n[t];if(i!==zW.CUSTOM){for(var r=i.permissions,a=!0,o=0,s=Object.values(qS.ModeratedAction);o<s.length;o++){var l=s[o];if(this.getContest().getUserPermission(e,l)!==!!r[l]){a=!1;break}}if(a)return i}}return zW.CUSTOM}},{key:"changeUserToPreset",value:function(e,t){var n=this,i=e.userId;if(t===zW.CUSTOM)return this.forceCustomForUsers=this.forceCustomForUsers||new Set,this.forceCustomForUsers.add(i),void this.redraw();this.forceCustomForUsers&&this.forceCustomForUsers.delete(i);for(var r=[],a=0,o=Object.values(qS.ModeratedAction);a<o.length;a++){var s=o[a];!!t.permissions[s]?r.push(this.addPermission(i,s,!1)):r.push(this.removePermission(i,s,!1))}Promise.all(r).then(function(){return n.redraw()})}},{key:"getTableColumns",value:function(){for(var e=this,t=[{value:function(e){return Lc.createElement(sE,{id:e.userId})},headerName:"User"},{value:function(t){return Lc.createElement(Gg,{options:C(Object.values(zW)),selected:e.tryMatchPreset(t.userId),ref:e.refLink("presetSelect"+t.id),onChange:function(){return e.changeUserToPreset(t,e["presetSelect"+t.id].get())}})},headerName:"Preset"}],n=0,i=Object.keys(qS.ModeratedAction);n<i.length;n++)!function(){var r=i[n],a=qS.ModeratedAction[r],o=qS.VerboseModeratedAction[r];t.push({value:function(t){return Lc.createElement(Eg,{checked:e.getContest().getUserPermission(t.userId,a),disabled:a===qS.ModeratedAction.VIEW||e.tryMatchPreset(t.userId)!==zW.CUSTOM,onChange:function(){return e.togglePermission(t.userId,a)}})},headerName:o})}();return t.push({value:function(t){return Lc.createElement(Md,{level:Pc.DANGER,size:Dc.EXTRA_SMALL,faIcon:"minus",onClick:function(){return e.removePermission(t,qS.ModeratedAction.VIEW)}})}}),t}},{key:"getTableEntries",value:function(){return this.getContest().getPermissionGroup(qS.ModeratedAction.VIEW).getMembers()}},{key:"render",value:function(){return[Lc.createElement(vb,{ref:"usersTable",entries:this.getTableEntries(),columns:this.getTableColumns()}),Lc.createElement("h4",{style:{marginTop:"20px"}},"Give access to a new user:"),Lc.createElement(fB,{ref:"userInputField"})]}},{key:"onMount",value:function(){var e=this;this.attachListener(this.userInputField,"user",function(t){e.userInputField.clear(),e.addPermission(t,qS.ModeratedAction.VIEW)})}}]),t}(Lc.Element),HW=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.contest=t,this.options=i,this.element=Lc.createElement("div",{className:"hidden"}),this.element.mount(document.body),this.requestAllLatestTasks().then(function(){return n.render()})}return o(e,[{key:"draw",value:function(){window.currentWidget.addClass("hidden"),this.element.removeClass("hidden")}},{key:"revert",value:function(){window.currentWidget.removeClass("hidden"),this.element.destroyNode()}},{key:"renderTaskArticle",value:function(e){var t=this.options.language||fk.ENGLISH,n=new op(op.GLOBAL,[["TaskExamples",LO(e.getEvalTask())],["RawHTML",Qd],["ServerInputTest",TO]]),i=e.getStatementArticle().getTranslation(t);return Lc.createElement(FC,{article:i,classMap:n})}},{key:"renderTask",value:function(e){var t=e.getEvalTask(),n=this.renderTaskArticle(e);return[Lc.createElement("div",{className:"text-center"},Lc.createElement("h1",null,Lc.T(t.longName))),n]}},{key:"renderTaskWrapped",value:function(e){return Lc.createElement("div",{style:{pageBreakAfter:"always"}},this.renderTask(e))}},{key:"render",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.contest.getContestTasks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(this.renderTaskWrapped(o))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.element.setChildren(e)}},{key:"requestAllLatestTasks",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.contest.getContestTasks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(zu.postJSON("/contest/get_contest_task/",{contestTaskId:o.id}))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return Promise.all(e)}}]),o(e,[{key:"updateOptions",value:function(e){this.options=Object.assign(this.options,e),this.render()}},{key:"exportToPDF",value:function(){var e=this;this.draw(),setTimeout(function(){print(),e.revert()},0)}}]),e}(),VW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){var e=EC.all();return[Lc.createElement(Nb,{label:"Task name"},Lc.createElement(Gg,{options:e,ref:"evalTaskSelect"})),Lc.createElement(Nb,{label:"Source size"},Lc.createElement("div",null,Lc.createElement(yg,{placeholder:"Source size",value:"10240",ref:"sourceSizeInput"}),Lc.createElement("div",{style:{display:"inline-block",marginLeft:"4px"}},"bytes")))]}},{key:"action",value:function(){var e=this;Dl(this.options.contest,{evalTaskId:this.evalTaskSelect.get().id,sourceSizeLimit:this.sourceSizeInput.getValue()},function(){e.hide(),e.options.tasksTable.redraw()},function(t){e.messageArea.showMessage(t.message,"red")})}}]),t}(Zg),GW=$g(VW),jW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultValues",value:function(){var e,t=this.options.contest;if(t.getStartTime()&&t.getEndTime()){var n=new Sp(1e3*(t.getEndTime()-t.getStartTime()));e={days:n.toDays(),hours:n.getHours(),minutes:n.getMinutes()}}return{contestName:t.name,contestLongName:t.longName,startDate:t.getStartTime()?new Ap(1e3*t.getStartTime()):null,durationDays:e.days,durationHours:e.hours,durationMinutes:e.minutes,visible:t.isVisible,rated:t.rated,publicSources:t.publicSources,scoringId:t.scoringId}}},{key:"getBody",value:function(){var e=this.options.contest,n=null,i=e.getChat();return i&&(n=Lc.createElement("label",{style:{marginRight:"7px"}},Lc.createElement(Eg,{ref:"discussionMutedCheckbox",checked:i.getMessageThread().muted}),"Mute discussion")),[].concat(C(w(d(t.prototype),"getBody",this).call(this)),[n])}},{key:"getRequest",value:function(){var e=w(d(t.prototype),"getRequest",this).call(this);return"string"==typeof e?e:(e.contestId=this.options.contest.id,this.options.contest.getChat()&&(e.discussionMuted=this.discussionMutedCheckbox.getValue()),e)}},{key:"getAjaxUrl",value:function(){return"/contest/change_settings/"}},{key:"getErrorMessage",value:function(){return"Error in changing contest settings!!"}},{key:"getTitle",value:function(){return"Edit contest "+this.options.contest.longName}},{key:"getActionName",value:function(){return"Save"}}]),t}(hN),YW=$g(jW),JW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return Lc.createElement("p",null,"Create virtual contest for ",this.options.contest.longName,"?")}},{key:"action",value:function(){var e=this;if(!this.options.contest.hasFinished())return void window.alert("The contest has not finished yet.");var t={contestId:this.options.contest.id};zu.postJSON("/contest/create_virtual_contest/",t).then(function(){return e.hide()})}}]),t}(Zg),qW=$g(JW),XW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){this.contestTasks=this.options.contest.getContestTasks();var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.contestTasks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(Lc.createElement("li",null,o.longName))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return[Lc.createElement("p",null,"Add the following tasks to the archive?"),Lc.createElement("ul",null,e),Lc.createElement(Nb,{label:"Which archive?"},Lc.createElement(Gg,{ref:"archiveSelect",options:qL.all()}))]}},{key:"action",value:function(){var e=this,t={contestId:this.options.contest.id,archiveId:this.archiveSelect.get().id};this.messageArea.showMessage("Adding to archive...","black",null),zu.postJSON("/contest/add_to_archive/",t).then(function(){return e.hide()})}}]),t}(Zg),KW=$g(XW),QW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return Lc.createElement("p",null,"Create discussion for ",this.options.contest.longName,"?")}},{key:"action",value:function(){var e=this,t={contestId:this.options.contest.id};zu.postJSON("/contest/create_discussion/",t).then(function(){return e.hide()})}}]),t}(Zg),ZW=$g(QW),$W=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return Lc.createElement("p",null,"Delete ",this.options.contest.longName,"?")}},{key:"action",value:function(){var e={contestId:this.options.contest.id};zu.postJSON("/contest/delete/",e).then(function(){return window.location.replace("/contests/")})}}]),t}(Zg),eH=$g($W),tH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return Lc.createElement("p",null,"Publish analysis for ",this.options.contest.longName,"?")}},{key:"action",value:function(){var e=this,t={contestId:this.options.contest.id};zu.postJSON("/contest/publish_analysis/",t).then(function(){return e.hide()})}}]),t}(Zg),nH=$g(tH),iH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.options.contest;return t.getAnalysisArticle()?[Lc.createElement(CT,{ref:"solutionEditor",articleId:t.analysisArticleId,style:{height:"600px"}})]:[Lc.createElement("h2",null,"The contest does not have an analysis article, click bellow to create one"),Lc.createElement(Md,{label:"Create analysis article",onClick:function(){e.createAnalysisArticle()}})]}},{key:"createAnalysisArticle",value:function(){var e=this,t={contestId:this.options.contest.id,createAnalysisArticle:!0};zu.postJSON("/contest/create_analysis_article/",t).then(function(t){e.options.contest.analysisArticleId=parseInt(t.analysisArticleId),e.redraw()})}}]),t}(Lc.Element),rH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement(Nb,{label:"Language:"},Lc.createElement(Gg,{options:fk.all(),ref:"languageSelect"}))]}},{key:"getExporterOptions",value:function(){return{language:this.languageSelect.get()}}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.exporter=new HW(this.options.contest,this.getExporterOptions()),this.languageSelect.addNodeListener("change",function(){return e.exporter.updateOptions(e.getExporterOptions())})}},{key:"action",value:function(){this.hide(),this.exporter.updateOptions(this.getExporterOptions()),this.exporter.exportToPDF()}}]),t}(Zg),aH=$g(rH),oH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({height:"100%",display:"flex",flexDirection:"column",width:"1100px",maxWidth:"100%",margin:"0 auto",padding:"0 15px"})}},{key:"render",value:function(){var e=XS.get(this.options.contestId),t=Lc.createElement(OI,{ref:"tasksTable",contest:e}),n=null;!e.virtualContestId&&e.hasFinished()&&(n=Lc.createElement(qW,{label:"Create virtual contest",modalOptions:{contest:e}}));var i=null;e.getChat()||(i=Lc.createElement(ZW,{label:"Create discussion",modalOptions:{contest:e}}));var r=null;e.hasFinished()&&(r=Lc.createElement(nH,{label:"Publish analysis",modalOptions:{contest:e}}));var a=null,o=null;USER.isSuperUser&&(a=Lc.createElement(KW,{label:"Add to archive",modalOptions:{contest:e}}),o=Lc.createElement(aH,{label:"Print",modalOptions:{contest:e}}));var s=null;USER.isSuperUser&&(s=Lc.createElement(jd,{title:"Analysis",style:{height:"100%"}},Lc.createElement(iH,{contest:e,style:{height:"100%"}})));var l=null,u=null;return(USER.isSuperUser||USER.id===e.ownerId)&&(l=Lc.createElement(jd,{title:"Permissions",style:{height:"100%"}},Lc.createElement(WW,{contest:e,style:{height:"100%"}})),e.getDescriptionArticle()&&(u=Lc.createElement(jd,{title:"Description",style:{height:"100%"}},Lc.createElement(CT,{articleId:e.descriptionArticleId})))),[Lc.createElement("h1",null,e.longName),Lc.createElement(jg,{level:Pc.PRIMARY,style:{margin:"10px 0"}},Lc.createElement(Md,{label:"Return to contest page",onClick:function(){return window.location.replace("/contest/"+e.name+"/")}}),Lc.createElement(YW,{label:"Edit contest",modalOptions:{contest:e}}),n,a,r,i,o,Lc.createElement(eH,{label:"Delete contest",level:Pc.DANGER,modalOptions:{contest:e}})),Lc.createElement(Gb,{variableHeightPanels:!0,style:{flex:"1"}},Lc.createElement(jd,{title:"Tasks",active:!0},Lc.createElement(GW,{label:"Add task",level:Pc.PRIMARY,style:{margin:"10px 0"},modalOptions:{contest:e,tasksTable:t}}),t),u,Lc.createElement(jd,{title:"Announcements"},Lc.createElement(Md,{level:Pc.PRIMARY,label:"Broadcast announcement",style:{margin:"5px"},onClick:function(){UW.show({contest:e})}}),Lc.createElement(FW,{contest:e})),Lc.createElement(jd,{title:"Questions",style:{height:"100%"}},Lc.createElement(FO,{contest:e,style:{height:"100%"}})),s,l)]}},{key:"onMount",value:function(){cp.registerStream("contest-"+this.options.contestId+"-announcements"),cp.registerStream("contest-"+this.options.contestId+"-scores"),cp.registerStream("contest-"+this.options.contestId+"-owner");var e=(XS.get(this.options.contestId),{});USER.isSuperUser&&zu.getJSON("/contest/fetch_archives/",e)}}]),t}(jd),sH=(KU=tz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"label",QU,y(n)),O(n,"statisticsPanelContainer",ZU,y(n)),n.cardPanelBodyStyle={padding:"0px"},O(n,"cardPanelRow",$U,y(n)),O(n,"title",ez,y(n)),n}return h(t,e),t}(Jc),QU=R(KU.prototype,"label",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"18px"}}}),ZU=R(KU.prototype,"statisticsPanelContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"300px",maxWidth:"100%",marginTop:"30px"}}}),$U=R(KU.prototype,"cardPanelRow",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between",flex:"1"}}}),ez=R(KU.prototype,"title",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"30px",paddingTop:"15px",fontSize:"26px"}}}),KU),lH=(nz=az=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"questionContainer",iz,y(n)),O(n,"askQuestionButton",rz,y(n)),n}return h(t,e),t}(Jc),iz=R(nz.prototype,"questionContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"920px",maxWidth:"100%",margin:"0 auto",paddingLeft:"10px",paddingRight:"10px"}}}),rz=R(nz.prototype,"askQuestionButton",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"20px",marginLeft:this.themeProperties.CONTEST_QUESTION_CARD_PANEL_BODY_PADDING}}}),nz),uH=(oz=Ze(sH))(sz=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"getInfoLines",value:function(){var e=this.getContest().getStatistics()||{};return[{label:Lc.T("Users Registered"),value:this.getContest().getNumUsers()||"N/A"},{label:Lc.T("Users Online"),value:e.numUsersOnline||"N/A"},{label:Lc.T("Submissions"),value:e.numSubmissions||"N/A"},{label:Lc.T("Example Runs"),value:e.numExampleRuns||"N/A"},{label:Lc.T("Compiles"),value:e.numCompiles||"N/A"},{label:Lc.T("Custom Runs"),value:e.numCustomRuns||"N/A"}].filter(function(e){return"0"!==e.value&&"N/A"!==e.value})}},{key:"getInfo",value:function(e){var t=this,n=this.getContest(),i=[Lc.createElement("div",{className:this.styleSheet.label},Lc.T("Start time"),": ",n.getFormattedStartTime()),Lc.createElement("div",{className:this.styleSheet.label},Lc.T("Duration"),": ",n.getFormattedDuration())];return e&&i.push(this.getRegisterButton()),i.push(Lc.createElement("div",{className:this.styleSheet.statisticsPanelContainer},Lc.createElement(ub,{title:"Contest statistics",bodyStyle:this.styleSheet.cardPanelBodyStyle},Lc.createElement(Xb,{rows:this.getInfoLines(),rowParser:function(e){return Lc.createElement("div",{className:t.styleSheet.cardPanelRow},Lc.createElement("span",null,e.label),Lc.createElement("span",null,e.value))}})))),i}},{key:"getRegisterButton",value:function(){var e=this;if(!this.getContest().hasFinished()){var t=this.getContest().getUser(USER.id);return Lc.createElement(Md,{level:Pc.INFO,label:t?Lc.T("Registered"):Lc.T("Register"),onClick:function(){return e.registerUser()},style:{marginRight:"5px",marginTop:"10px"},disabled:t})}if(!this.getContest().isVirtual()&&this.options.baseContest)return Lc.createElement(fN,{modalOptions:{contest:this.options.baseContest},style:{marginRight:"5px",marginTop:"10px"}})}},{key:"getDescription",value:function(){var e=this.getContest();e.systemGenerated&&(e.description="On CS Academy, a contest takes place every hour.\nThis contest is scheduled on the "+Ap(e.getStartTime()).format("Do of MMMM Y, at HH:mm")+" your local time");var t=this.getContest().getDescriptionArticle();if(t){var n=new op(FC.markupClassMap,[["RawHTML",Qd]]);return Lc.createElement(FC,{style:{marginTop:"1.5em"},article:t,classMap:n})}return Lc.createElement(Qd,{style:{marginTop:"1.5em"},__innerHTML:this.getContest().description})}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.title},Lc.T(this.getContest().getName())),Lc.createElement("div",null,this.getInfo(!0)),this.getDescription()]}},{key:"onMount",value:function(){var e=this,t=["startTime","endTime","description","longName","name","numRegistered","numUsersOnline","numSubmissions","numExampleRuns","numCompiles","numCustomRuns"];this.attachUpdateListener(this.getContest(),function(n){var i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;if(n.data.hasOwnProperty(l)||n.hasOwnProperty(l)){e.redraw();break}}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}})}},{key:"registerUser",value:function(){if(!USER.isAuthenticated)return void aE.show();var e={contestId:this.options.contest.id};zu.postJSON("/contest/register/",e)}}]),t}(Lc.Element))||sz,cH=(lz=cz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"submissionSummary",uz,y(n)),n}return h(t,e),t}(UL),uz=R(lz.prototype,"submissionSummary",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:0}}}),lz),hH=(hz=Ze(cH))(dz=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContest",value:function(){return this.getEvalJob().getContestTask().getContest()}},{key:"getTimeSubmittedLabel",value:function(){return new Sp({seconds:this.getEvalJob().timeSubmitted-this.getContest().getStartTime()}).format("HH:mm:ss")}},{key:"render",value:function(){var e=new _L(this.getEvalJob());return Lc.createElement("div",null,[e.getJobIdWithExternalLink()," (",e.getTimeSubmitted(),") -- ",e.getStatus()])}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addListener("expand",function(){e.options.contestTaskSubmissions.dispatch("expand",e)})}}]),t}(zL))||dz,dH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"jobFilter",value:function(e){return e.contestTaskId===this.options.contestTask.id&&e.userId===USER.id&&!e.onlyExamples}},{key:"getEvalJobs",value:function(){var e=this;return TL.all().filter(function(t){return e.jobFilter(t)}).sort(function(e,t){return t.id-e.id})}},{key:"getSubmissions",value:function(){var e=this,t=this.getEvalJobs();return t.length?t.map(function(t){return Lc.createElement(hH,{evalJob:t,contestTaskSubmissions:e,ref:e.refLink("evalJob"+t.id)})}):Lc.createElement("div",{style:{height:"30px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"16px"}},Lc.createElement("em",null,Lc.T("No submissions for this task")))}},{key:"render",value:function(){return[Lc.createElement(ub,{title:Lc.createElement("span",{style:{fontSize:"16px"}},Lc.T(this.options.contestTask.longName)),size:Dc.LARGE,ref:"cardPanel"},this.getSubmissions())]}},{key:"onMount",value:function(){var e=this;this.attachListener(TL,["create","refresh"],function(t){e.jobFilter(t)&&e.redraw()}),this.addListener("expand",function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=e.getEvalJobs()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var n=a.value,i=e["evalJob"+n.id];t!==i&&(i.options.collapsed||setTimeout(function(){return i.collapse()},250))}()}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}})}}]),t}(Lc.Element),pH=(pz=mz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"className",fz,y(n)),O(n,"sectionContainer",gz,y(n)),n}return h(t,e),t}(Jc),fz=R(pz.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"25px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",flexDirection:"row"}}}),gz=R(pz.prototype,"sectionContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"12.5px",minWidth:"425px",width:"30%"}}}),pz),fH=(vz=Ze(pH))(yz=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.className)}},{key:"getContest",value:function(){return XS.get(this.options.contestId)}},{key:"getContestTasks",value:function(){return this.getContest().getContestTasks()}},{key:"render",value:function(){var e=this;return this.getContestTasks().map(function(t){return Lc.createElement("div",{className:e.styleSheet.sectionContainer},Lc.createElement(dH,{contestId:e.options.contestId,contestTask:t}))})}},{key:"onMount",value:function(){zu.getJSON("/eval/get_eval_jobs/",{contestId:this.options.contestId,userId:USER.id})}}]),t}(Lc.Element))||yz,gH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({lazyRender:!0},e),w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"getEvalTaskIds",value:function(){return this.options.evalTaskIds||[]}},{key:"isLoaded",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.getEvalTaskIds()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;if(!EC.get(a))return!1}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return!0}},{key:"getOverviewPanel",value:function(){if(!this.options.overviewArticleId)return this.options.overview;var e;return this.options.overviewDiscussionId&&(e=Lc.createElement(NT,{chatId:this.options.overviewDiscussionId})),Lc.createElement(jd,{title:Lc.T("Overview")},Lc.createElement(UC,{articleId:this.options.overviewArticleId}),e)}},{key:"getTaskPanels",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.getEvalTaskIds()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=EC.get(o),l=s.solutionArticleId;if(l){var u=void 0;s.discussionId&&(u=Lc.createElement(NT,{chatId:s.discussionId})),e.push(Lc.createElement(jd,{title:s.toString()},Lc.createElement(UC,{articleId:l}),u))}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"fetchEvalTasks",value:function(){var e=this;if(!this.isLoading){this.isLoading=!0;var t={evalTaskIds:this.getEvalTaskIds()};zu.getJSON("/contest/contest_analysis/",t).then(function(){return e.redraw()})}}},{key:"render",value:function(){return this.isLoaded()?Lc.createElement(Gb,{lazyRender:this.options.lazyRender,variableHeightPanels:!0},M([this.getOverviewPanel(),this.getTaskPanels()])):(this.fetchEvalTasks(),Lc.createElement(jd,{title:"Loading"},Lc.createElement("span",{className:"fa fa-spin fa-spinner fa-3x"})))}}]),t}(Lc.Element),mH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this.options.contest.getContestTasks().map(function(e){return e.evalTaskId});return Lc.createElement(gH,{evalTaskIds:e,overviewArticleId:this.options.contest.analysisArticleId,overviewDiscussionId:this.options.contest.analysisDiscussionId})}}]),t}(Lc.Element),vH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement("p",null,Lc.T("The contest analysis has been published."))]}},{key:"action",value:function(){nm.changeURL(this.options.contestPanel.getURLPrefix("analysis")),this.hide()}},{key:"getActionName",value:function(){return Lc.T("Go to analysis")}},{key:"getCloseName",value:function(){return Lc.T("Cancel")}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}}]),t}(Zg),yH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("This contest has finished")}},{key:"getBody",value:function(){var e,t=this.options.contest.getUser(USER.id);if(t){var n=t.rank;e=Lc.createElement("p",null,Lc.T("Your rank:")," ",n,". ",Lc.T("Congratulations!"))}return Lc.createElement("div",null,e,Lc.createElement("p",null,Lc.T("A new hourly contest will start soon!")),Lc.createElement("p",null,Lc.T("What would you like to do?")))}},{key:"getFooter",value:function(){var e=this;return Lc.createElement(jg,{level:Pc.PRIMARY},Lc.createElement(Md,{label:Lc.T("Stay here"),onClick:function(){return e.hide()}}),Lc.createElement(Md,{label:Lc.T("Go to homepage"),onClick:function(){nm.changeURL([]),e.hide()}}),Lc.createElement(Md,{label:Lc.T("Go to next contest"),onClick:function(){nm.changeURL(["contest",e.options.nextContestData.name]),e.hide()}}))}}]),t}(Zg),bH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("This contest has been cancelled")}},{key:"getBody",value:function(){return Lc.createElement("div",null,Lc.createElement("p",null,Lc.T("For an hourly contest to take place, at least one person should be registered before the contest starts.")))}},{key:"getFooter",
value:function(){var e,t=this;return this.options.nextContestName&&(e=Lc.createElement(Md,{label:Lc.T("Go to next contest"),onClick:function(){nm.changeURL(["contest",t.options.nextContestName]),t.hide()}})),Lc.createElement(jg,{level:Pc.PRIMARY},Lc.createElement(Md,{label:Lc.T("Stay here"),onClick:function(){return t.hide()}}),Lc.createElement(Md,{label:Lc.T("Go to homepage"),onClick:function(){nm.changeURL([]),t.hide()}}),e)}}]),t}(Zg),kH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e={textAlign:"center",marginTop:"10px",fontSize:"2em"};return this.options.error?Lc.createElement("div",{style:e},this.options.error.message,Lc.createElement("br",null),"Try refreshing the page."):[iT.renderLoading(),Lc.createElement("div",{style:e},"Contest is loading. Please do not refresh the page.")]}},{key:"onMount",value:function(){var e=this,t=this.options.contest;if(!t.isVirtual()){if(t.hasAnyTask())return void t.dispatch("loadedManually");var n=1e3*(Math.max(t.getStartTime()-yf.now().unix(),0)+5+10*Math.random());this.timerId=setTimeout(function(){t.hasAnyTask()||zu.getJSON("/contest/"+t.name+"/",{}).then(function(){return t.dispatch("loadedManually")},function(t){return e.updateOptions({error:t})}),delete e.timerId},n)}}},{key:"onUnmount",value:function(){this.timerId&&clearTimeout(this.timerId)}}]),t}(Lc.Element),wH=(bz=Cz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.timeout=1e3,O(n,"className",kz,y(n)),n.body={width:"320px",padding:"10px"},O(n,"visible",wz,y(n)),O(n,"buttonGroup",Ez,y(n)),O(n,"textBoxClass",Sz,y(n)),n}return h(t,e),t}(sb),kz=R(bz.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{boxShadow:"none",backgroundColor:$c.Global.getProperty("COLOR_BACKGROUND","#fff"),zIndex:9999,position:"fixed",right:"10px",top:"-100px",opacity:"0",transition:this.timeout/1e3+"s all ease",fontSize:"110%"}}}),wz=R(bz.prototype,"visible",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{top:"39px",opacity:"1"}}}),Ez=R(bz.prototype,"buttonGroup",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{float:"right",marginBottom:"5px",marginRight:"-5px",">*":{padding:"2px 4px"}}}}),Sz=R(bz.prototype,"textBoxClass",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"block",cursor:"pointer",height:"2em",marginBottom:"15px",":hover":{textDecoration:"none"}}}}),bz),EH=(xz=Ze(wH))(Tz=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{level:Pc.WARNING,bodyStyle:this.styleSheet.body})}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),1===this.options.manager.notificationCount&&e.setStyle("boxShadow",$c.Global.getProperty("DARK_BOX_SHADOW")),e.addClass(this.styleSheet.className)}},{key:"show",value:function(){this.addClass(this.styleSheet.visible)}},{key:"hide",value:function(){var e=this;this.removeClass(this.styleSheet.visible),setTimeout(function(){return e.options.manager.deleteNotification(e.options.data)},this.styleSheet.timeout)}},{key:"render",value:function(){this.options.data.link?this.message=Lc.createElement(Xd,{className:this.styleSheet.textBoxClass,href:this.options.data.link,value:this.options.data.message}):this.message=Lc.createElement("div",{className:this.styleSheet.textBoxClass},this.options.data.message);var e=this.options.manager.notificationCount>1?Lc.createElement(Md,{ref:"closeAll"},"Close all("+this.options.manager.notificationCount+")"):null;return[this.message,Lc.createElement(jg,{size:Dc.SMALL,level:Pc.DANGER,className:this.styleSheet.buttonGroup},e,Lc.createElement(Md,{ref:"close"},"Close"))]}},{key:"onMount",value:function(){var e=this;setTimeout(function(){return e.show()},100),this.close.addClickListener(function(){return e.hide()}),this.closeAll&&this.closeAll.addClickListener(function(){return e.options.manager.deleteAll()}),this.options.data.link&&this.message.addClickListener(function(){e.options.data.id&&(window.location.hash=e.options.data.id),e.hide()})}}]),t}(ub))||Tz,SH=function(){function e(t){var n=this;r(this,e),this.notifications=new Map,this.notificationCount=0,this.localStorageMap=GO.getNotificationsLocalStorageMap(t);var i=this.getAllDataFromStorage(),a=!0,o=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=S(l.value,2),h=(c[0],c[1]);this.createNotification(h,!1)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}this.localStorageMap.addChangeListener(function(e){e.newValue||n.deleteNotification(e.oldValue,!1)})}return o(e,[{key:"getAllDataFromStorage",value:function(){return this.localStorageMap.entries().sort(function(e,t){return e[1].timeAdded-t[1].timeAdded})}},{key:"createNotification",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e.timeAdded=Ap.now().unix(),this.localStorageMap.set(e.key,e)),this.notificationCount+=1,this.notifications.set(e.key,EH.create(document.body,{title:e.title,data:e,manager:this}))}},{key:"deleteNotification",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.localStorageMap.delete(e.key),this.notificationCount-=1;var t=this.notifications.get(e.key);this.notifications.delete(e.key),t&&t.destroyNode()}},{key:"deleteAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.notifications.values()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.hide()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}]),e}(),CH=(Az=Ze(lH))(Lz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new sR(n.getContest(),y(n)),n.contestTaskPanelsMap=new Map,n}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{height:"100%"}}}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.getBaseContest().recalculateUsers()}},{key:"getContest",value:function(){return XS.get(this.options.contestId)}},{key:"getBaseContest",value:function(){return this.getContest().getBaseContest()}},{key:"getVirtualContest",value:function(){return this.getContest().virtualContestId||this.getContest().isVirtual()?this.getContest().getVirtualContest():null}},{key:"playbackScoring",value:function(){var e=this,t=QS.all().sort(function(e,t){return e.event.contestTime-t.event.contestTime}),n=function(t){return yf.now().unix()-e.getVirtualContest().getStartTime()>t.contestTime},i=setInterval(function(){for(e.getVirtualContest().hasFinished()&&clearInterval(i);t.length&&n(t[0].event);)cp.applyEvent(t.shift().event)},1e3);QS.addCreateListener(function(e){t.push(e),t.sort(function(e,t){return e.event.contestTime-t.event.contestTime})})}},{key:"setActive",value:function(e){w(d(t.prototype),"setActive",this).call(this,e),this.dispatch("activeElementChanged")}},{key:"switchToTask",value:function(e){this.loadingPage&&(this.loadingPage.destroyNode(),delete this.loadingPage),nm.changeURL(e.getFullURL())}},{key:"getSummaryPanel",value:function(){return Lc.createElement(uH,{contest:this.getContest(),baseContest:this.getBaseContest(),className:mh.Container.MEDIUM})}},{key:"getTasksListPanel",value:function(){return Lc.createElement(EI,{ref:this.refLink("contestTaskList"),contest:this.getContest(),isArchive:!1,className:mh.Container.SMALL})}},{key:"getScoreboardPanel",value:function(){return this.getContest().canShowScoreboard()&&Lc.createElement(pI,{ref:this.refLink("scoreboard"),className:mh.Container.MEDIUM,contest:this.getBaseContest(),virtualContest:this.getVirtualContest(),originalContest:this.getContest()})}},{key:"getChatPanel",value:function(){var e=this.getContest().chatId;return e&&Lc.createElement(QL,{chatId:e,ref:this.refLink("chat"),className:mh.Container.MEDIUM})}},{key:"getSubmissionsPanel",value:function(){return USER.isAuthenticated&&Lc.createElement(fH,{contestId:this.options.contestId,className:mh.Container.MEDIUM})}},{key:"getAnnouncementsPanel",value:function(){return this.announcementsList||(this.announcementsList=Lc.createElement(FW,{ref:this.refLink("announcements"),contest:this.getBaseContest(),style:{display:"flex",alignItems:"center",flexDirection:"column"},className:mh.Container.MEDIUM})),this.announcementsList}},{key:"getAnalysisPanel",value:function(){if(this.getContest().hasFinished()&&this.getContest().isAnalysisPublic)return Lc.createElement(mH,{contest:this.getContest(),className:mh.Container.MEDIUM})}},{key:"getLoadingPanel",value:function(){return Lc.createElement(kH,{ref:this.refLink("loadingPage"),contest:this.getContest()})}},{key:"getContestTaskPanel",value:function(e){return this.contestTaskPanelsMap.has(e.id)||this.contestTaskPanelsMap.set(e.id,Lc.createElement(tR,{contestTaskId:e.id})),this.contestTaskPanelsMap.get(e.id)}},{key:"getSubroutes",value:function(){var e=this;return[new im("summary",function(){return e.getSummaryPanel()}),new im("tasks",function(){return e.getTasksListPanel()},[],"Tasks"),new im("task",function(){return e.getTasksListPanel()},[new qy("%s",function(t){var n=zS.getByContestIdAndUrlName(e.options.contestId,t.args[0]);return n&&e.getContestTaskPanel(n)})]),new im("scoreboard",function(){return e.getScoreboardPanel()},[],"Scoreboard"),new im("chat",function(){return e.getChatPanel()},[],"Chat"),new im("submissions",function(){return e.getSubmissionsPanel()},[],"Submissions"),new im("announcements",function(){return e.getAnnouncementsPanel()},[],"Announcements"),new im("analysis",function(){return e.getAnalysisPanel()},[],"Analysis"),new im("loading",function(){return e.getLoadingPanel()},[],"Loading")]}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getSummaryPanel()},this.getSubroutes()),this.routes}},{key:"setURL",value:function(e){e&&(w(d(t.prototype),"setURL",this).call(this,e),tm.setTitle(this.pageTitle))}},{key:"getURLPrefix",value:function(e){var t="/contest/"+this.getContest().name+"/";return e&&(t+=e+"/"),t}},{key:"updateOnNewTasks",value:function(){this.redraw(),this.navHandler.apply(),this.scoreboard&&this.scoreboard.scoreboardTable.setColumns()}},{key:"processTaskBroadcast",value:function(e){if(this.getContest().id===e.task.contestId&&!this.getContest().loadedManually){if(!this.getContest().hasStarted()&&!e.task.forceTaskOpen)return void setTimeout(function(){cp.applyEvent(e)},1e3);!this.getContest().hasStarted()&&e.task.forceTaskOpen&&(this.getContest().startTime=yf.now().unix()),cp.importState(e.task.state),e.state&&cp.importState(e.state);var t=zS.get(e.task.contestTaskId);this.getContest().addContestTask(t),this.updateOnNewTasks(),"contest"!==e.objectType&&cp.applyEvent({objectType:"contest",objectId:this.getContest().id,type:e.type,data:e.data,task:e.task}),e.task.forceTaskOpen&&this.switchToTask(t)}}},{key:"createUserListener",value:function(){var e=this;this.attachUpdateListener(rk.getCurrentUser(),function(t){"contestTaskBroadcast"===t.type&&e.getContest().getUser(USER.id)&&e.processTaskBroadcast(t)}),this.attachEventListener(this.getContest(),"contestTaskBroadcast",function(t){var n=t.extra||{};Object.assign(t,n),e.processTaskBroadcast(t)})}},{key:"requestScoreboard",value:function(){var e=this,t=this.getContest();zu.getJSON("/contest/scoreboard_state/",{contestId:t.id}).then(function(){if(e._loadedScoreboard=!0,t._loadedScoreboard=!0,e.navHandler.apply(),e.contestTaskList&&e.contestTaskList.refreshBubbles(),t.isVirtual()){var n=!0,i=!1,r=void 0;try{for(var a,o=t.getBaseContest().getUsers()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.resetScore()}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var s=!0,l=!1,u=void 0;try{for(var c,h=t.getUsers()[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){c.value.resetScore()}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}t.getBaseContest().recalculateUsers(),t.hasStarted()?e.playbackScoring():setTimeout(function(){e.redraw(),e.navHandler.apply();var n=t.getBaseContest().getContestTasks()[0];e.switchToTask(n.getVirtualTask()),e.playbackScoring()},1e3*(t.getStartTime()-yf.now().unix()))}})}},{key:"requestChat",value:function(){var e=this;this.getContest().chatId&&bE.fetch(this.getContest().chatId,function(){e.chat&&e.chat.redraw(),e.navHandler.apply()})}},{key:"initializeContestLoading",value:function(){var e=this,t=this.getContest();if(!t.isVirtual()&&!t.hasStarted()){var n=t.getStartTime(),i=yf.now().unix(),r=1e3*(n-i);r<20*Ep.DAY&&setTimeout(function(){t.hasAnyTask()||nm.changeURL(e.getURLPrefix("loading"))},r)}this.attachListener(t,"loadedManually",function(){t.loadedManually=!0,e.updateOnNewTasks(),e.switchToTask(t.getContestTasks()[0])})}},{key:"attachHourlyContestListeners",value:function(){var e=this,t=this.getContest();this.attachEventListener(t,"contestEnd",function(t){e.isInDocument()&&yH.show({contest:e.getContest(),nextContestData:t.nextContestData})}),this.attachDeleteListener(t,function(t){t.reason&&"noRegisteredUsers"===t.reason&&e.isInDocument()&&bH.show({nextContestName:t.nextContestData.name})})}},{key:"attachAnalysisListeners",value:function(){var e=this;this.attachEventListener(this.getContest(),"publishAnalysis",function(){e.isInDocument()&&(e.redraw(),e.navHandler.apply(),vH.show({contestPanel:e}))}),this.addListener("gotoAnalysis",function(){nm.changeURL(e.getURLPrefix("analysis"))})}},{key:"registerStreams",value:function(){cp.registerStream("contest-"+this.getBaseContest().id+"-announcements"),this.getContest().liveResults&&cp.registerStream("contest-"+this.getBaseContest().id+"-scores"),this.getBaseContest().getUser(USER.id)||cp.registerStream("contest-"+this.getBaseContest().id+"-unregistered"),this.getVirtualContest()&&cp.registerStream("contest-"+this.getVirtualContest().id+"-scoreevents"),!this.getContest().isVirtual()&&this.getVirtualContest()&&cp.registerStream("contest-"+this.getVirtualContest().id+"-scores")}},{key:"handleAnnotationsAndQuestionsChanges",value:function(){var e=this,t=this.getContest(),n=GO.getQuestionsLocalStorageMap(t.id),i=GO.getAnnouncementsLocalStorageMap(t.id),r=new SH(t.id),a=function(i){var a=i.getContestTask();if(i.contestId===t.id&&i.isAnswered()&&i.shouldAppear()){var o=i.isAskedByCurrentUser()?'Your question for task "'+a.longName+'" has been answered.':"A user's question for task \""+a.longName+'" has been answered publicly.';r.createNotification({message:o,link:a.getFullURL()+"questions",title:"Question notification",id:"question"+i.id,key:i.id});var s=parseInt(e.getContestTaskPanel(a)&&e.getContestTaskPanel(a).badge&&e.getContestTaskPanel(a).badge.getValue()||0);n.set(a.id,s+1)}},o=function(n){if(n.contestId===t.id){var a=e.getURLPrefix("")+"announcements",o="New announcement: "+n.getTarget(),s="announcement"+n.id;n.isTaskBroadcast()&&(a=e.getURLPrefix("task/"+n.getContestTask().name),o='Task "'+n.getContestTask().longName+'" is now available!',s=null),r.createNotification({message:o,title:n.getTarget(),id:s,key:n.id,link:a});var l=parseInt(e.navHandler.announcementsBadge&&e.navHandler.announcementsBadge.getValue()||0);i.set("counter",l+1)}};this.attachCreateListener(JS,function(e){e.isAskedByCurrentUser()||a(e)}),this.attachListener(this.getContest(),"updateQuestion",a),this.attachCreateListener(jS,o)}},{key:"onMount",value:function(){this.navHandler.apply(),this.requestScoreboard(),this.requestChat(),rk.getCurrentUser()&&this.createUserListener(),this.initializeContestLoading(),this.attachAnalysisListeners(),this.getContest().systemGenerated&&this.attachHourlyContestListeners(),this.registerStreams(),this.getContest().hasFinished()||this.handleAnnotationsAndQuestionsChanges()}},{key:"pageTitle",get:function(){var e=this.getContest().getName(),t=this.getActive().pageTitle;return t&&(e=t+" "+e),e}}]),t}(nm))||Lz,xH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({height:"100%"})}},{key:"importState",value:function(e){w(d(t.prototype),"importState",this).call(this,e),e.contest?this.contestId=e.contest.id:this.archiveId=e.archive.id}},{key:"renderLoaded",value:function(){return this.options.error?this.renderError():this.contestId?Lc.createElement(CH,{contestId:this.contestId,ref:"child"}):Lc.createElement(gR,{archiveId:this.archiveId,ref:"child"})}},{key:"setURL",value:function(e){this.child?this.child.setURL(e):this.urlParts=e}},{key:"dispatchUrlChange",value:function(){var e=this;setTimeout(function(){e.options.error||e.child.setURL(e.urlParts)})}},{key:"onDelayedMount",value:function(){var e=this;this.dispatchUrlChange(),this.addListener("urlExit",function(){e.options.error||e.child.navHandler.reset()}),this.addListener("urlEnter",function(){e.child&&!e.options.error&&e.child.navHandler.apply()})}}]),t}(iT(Lc.Element)),TH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Create private archive"}},{key:"getBody",value:function(){return Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"urlNameFormField",label:"URL name"},Lc.createElement(vg,{ref:"urlNameInput",value:""})),Lc.createElement(Nb,{ref:"longNameFormField",label:"Long name"},Lc.createElement(vg,{ref:"longNameInput",value:""})))}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Md,{level:Pc.PRIMARY,label:"New archive",onClick:function(){return e.createPrivateArchive()}}))]}},{key:"createPrivateArchive",value:function(){var e=this,t=this.urlNameInput.getValue(),n=this.longNameInput.getValue(),i={privateArchiveName:t,privateArchiveLongName:n};zu.postJSON("/contest/create_private_archive/",i).then(function(t){e.hide(),e.options.privateArchiveList.redraw()},function(t){return e.messageArea.showMessage(t.message,"red")})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Zg),AH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getPrivateArchives",value:function(){var e=this.options.privateArchiveList.getPrivateArchives();return e.sort(function(e,t){return t.id-e.id}),e}},{key:"getActionName",value:function(){return"Delete private archive"}},{key:"getBody",value:function(){return Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"typeFormField",label:"Archive"},Lc.createElement(Gg,{ref:"privateArchiveSelect",options:this.getPrivateArchives()})))}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(Md,{level:Pc.DANGER,label:"Delete archive",onClick:function(){return e.deletePrivateArchive()}})]}},{key:"deletePrivateArchive",value:function(){var e=this,t=this.privateArchiveSelect.get(),n={privateArchiveId:t.id};zu.postJSON("/contest/delete_private_archive/",n).then(function(){VT.applyDeleteEvent({type:"delete",objectId:t.id}),e.hide(),e.options.privateArchiveList.redraw()},function(t){return e.messageArea.showMessage(t.message,"red")})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Zg),LH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setColumns",value:function(){var e=[{value:function(e){return Lc.createElement(Xd,{href:"/private-archive/"+e.name,value:e.getName()})},headerName:"Archive",headerStyle:{verticalAlign:"middle"},cellStyle:{verticalAlign:"middle"}}];w(d(t.prototype),"setColumns",this).call(this,e)}}]),t}(vb),IH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.SMALL)}},{key:"getPrivateArchives",value:function(){return VT.all()}},{key:"render",value:function(){var e=this;return this.createPrivateArchiveModal=Lc.createElement(TH,{privateArchiveList:this}),this.deletePrivateArchiveModal=Lc.createElement(AH,{privateArchiveList:this}),[Lc.createElement("div",{className:"pull-right"},Lc.createElement(Md,{level:Pc.PRIMARY,label:"New archive",onClick:function(){return e.createPrivateArchiveModal.show()},style:{margin:"5px"}}),Lc.createElement(Md,{level:Pc.DANGER,label:"Delete archive",onClick:function(){return e.deletePrivateArchiveModal.show()},style:{margin:"5px"}})),Lc.createElement("h3",null,"All private archives:"),Lc.createElement(LH,{entries:this.getPrivateArchives()})]}}]),t}(jd),NH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("margin-top","5px")}},{key:"getDestroyButton",value:function(){return Lc.createElement(Md,{level:Pc.DANGER,size:Dc.EXTRA_SMALL,faIcon:"minus",ref:"destroyButton",style:{marginRight:"5px"}})}},{key:"getUserHandle",value:function(){return Lc.createElement(sE,{userId:this.options.member.userId})}},{key:"render",value:function(){return[this.getDestroyButton(),this.getUserHandle()]}},{key:"onMount",value:function(){var e=this;this.destroyButton.addClickListener(function(){return zu.postJSON("/accounts/change_user_group/",{groupId:e.options.member.groupId,userId:e.options.member.userId,action:"remove"}).then(function(){return e.options.member.delete()})})}}]),t}(Lc.Element),OH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getGroup",value:function(){return RS.get(this.options.groupId)}},{key:"renderUserGroupMember",value:function(e){return Lc.createElement(NH,{member:e})}},{key:"render",value:function(){var e=this;return[this.getGroup().getMembers().map(function(t){return e.renderUserGroupMember(t)}),Lc.createElement(fB,{ref:"addUserField",style:{marginTop:"10px"}})]}},{key:"onMount",value:function(){var e=this;this.addUserField.addListener("user",function(t){return zu.postJSON("/accounts/change_user_group/",{groupId:e.options.groupId,userId:t,action:"add"}).then(function(){return e.addUserField.clear()})}),this.attachListener(PS,["create","delete"],function(t){t.groupId===e.options.groupId&&e.redraw()})}}]),t}(Lc.Element),RH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getPrivateArchive",value:function(){return this.options.privateArchiveWidget.getPrivateArchive()}},{key:"addEvalTask",value:function(e){var t=this,n={privateArchiveId:this.getPrivateArchive().id,evalTaskId:e};zu.postJSON("/contest/private_archive_add_eval_task/",n).then(function(){return t.hide()})}},{key:"createTask",value:function(){var e=this,t=this.urlNameInput.getValue(),n=this.longNameInput.getValue(),i=this.typeSelect.get().id,r=this.timeLimitInput.getValue(),a=1024*this.memoryLimitInput.getValue(),o={urlName:t,longName:n,type:i,timeLimit:r,memoryLimit:a};zu.postJSON("/eval/create_eval_task/",o).then(function(n){e.addEvalTask(n.evalTaskId),window.location.pathname="/task/"+t+"/edit/"},function(t){return e.messageArea.showMessage(t.message,"red")})}}]),t}(JD),MH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getPrivateArchive",value:function(){return this.options.privateArchiveWidget.getPrivateArchive()}},{key:"getActionName",value:function(){return"Remove eval task"}},{key:"getBody",value:function(){return Lc.createElement(Nb,{ref:"typeFormField",label:"Task"},Lc.createElement(Gg,{ref:"taskSelect",options:this.getPrivateArchive().getEvalTasks()}))}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),",",Lc.createElement(Md,{level:Pc.WARNING,label:"Remove task",onClick:function(){return e.removeTask()}}))]}},{key:"removeTask",value:function(){var e=this,t=this.taskSelect.get(),n={privateArchiveId:this.getPrivateArchive().id,evalTaskId:t.id};zu.postJSON("/contest/private_archive_remove_eval_task/",n).then(function(){e.hide(),window.location.reload()},function(t){return e.messageArea.showMessage(t.message,"red")})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Zg),PH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getPrivateArchive",value:function(){return this.options.privateArchiveWidget.getPrivateArchive()}},{key:"renderModal",value:function(e){var t=this;return[Lc.createElement("div",{style:{margin:"0px"}},Lc.createElement("div",null,Lc.createElement("h4",null,"Add eval task")),Lc.createElement("div",{ref:"body"},e),Lc.createElement("div",null,Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(Md,{label:"Close",onClick:function(){return t.hide()}}),Lc.createElement(Md,{level:Pc.PRIMARY,label:"Add task",onClick:function(){return t.addTask()}})))]}},{key:"render",value:function(){return this.isLoaded?this.renderModal(Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"typeFormField",label:"Task"},Lc.createElement(Gg,{ref:"taskSelect",options:this.getEvalTasks()})))):(this.fetchEvalTasks(),this.renderModal(Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"typeFormField",label:"Loading Tasks"}))))}},{key:"getEvalTasks",value:function(){var e=EC.all(),t=this.getPrivateArchive().getEvalTasks(),n=e.filter(function(e){return-1==t.indexOf(e)});return n.sort(function(e,t){return t.id-e.id}),n}},{key:"fetchEvalTasks",value:function(){var e=this;if(!this.isLoading){this.isLoading=!0;var t={};zu.getJSON("/eval/get_available_tasks/",t).then(function(){e.isLoading=!1,e.isLoaded=!0,e.body.options.children=[Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:e.refLink("typeFormField"),label:"Task"},Lc.createElement(Gg,{ref:e.refLink("taskSelect"),options:e.getEvalTasks()})))],e.body.redraw()})}}},{key:"addTask",value:function(){var e=this,t=this.taskSelect.get(),n={privateArchiveId:this.getPrivateArchive().id,evalTaskId:t.id};zu.postJSON("/contest/private_archive_add_eval_task/",n).then(function(){return window.location.reload()},function(t){return e.messageArea.showMessage(t.message,"red")})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}}]),t}(Qg),DH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"modifyIde",value:function(){var e=this,t=new Uu("/contest/submit_private_archive_job/");t.addPreprocessor(function(t){t.data.privateArchiveId=e.options.privateArchiveId}),this.ide.getPlugin("ContestSubmit").setAjaxHandler(t)}},{key:"onDelayedMount",value:function(){var e=this;w(d(t.prototype),"onDelayedMount",this).call(this),this.ide?this.ide.whenLoaded(function(){return e.modifyIde()}):this.addListener("workspaceLoaded",function(){e.ide.whenLoaded(function(){return e.modifyIde()})})}},{key:"getSubURL",value:function(e){var t="/private-archive/"+VT.get(this.options.privateArchiveId).name+"/";return t+="task/"+this.getContestTask().name+"/",e&&(t+=e+"/"),t}}]),t}(tR),BH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getPrivateArchive",value:function(){return this.options.privateArchive}},{key:"getTasks",value:function(){return this.getPrivateArchive().getContestTasks()}},{key:"getHeader",value:function(){}},{key:"getContestTaskBubble",value:function(e){return Lc.createElement(vI,{isArchive:this.options.isArchive,href:"/private-archive/"+this.getPrivateArchive().name+"/task/"+e.name+"/",showTags:this.options.showTags,contestTask:e})}}]),t}(EI),_H=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getGlobalAccessButton",value:function(){return Lc.createElement(Md,{ref:"globalAccessButton",level:Pc.PRIMARY,size:Dc.EXTRA_SMALL,style:{marginRight:"5px"}},"Give access to all problems")}},{key:"render",value:function(){return[this.getDestroyButton(),this.getGlobalAccessButton(),this.getUserHandle()]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.globalAccessButton.addClickListener(function(){return zu.postJSON("/contest/private_archive_give_testing_access/",{userId:e.options.member.userId,privateArchiveId:e.options.privateArchiveId})})}}]),t}(NH),FH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"renderUserGroupMember",value:function(e){return Lc.createElement(_H,{member:e,privateArchiveId:this.options.privateArchiveId})}}]),t}(OH),UH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{fullHeight:!0,children:[]}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e)}},{key:"getPrivateArchive",value:function(){return VT.get(this.options.privateArchiveId)}},{key:"getContestTasks",value:function(){return this.getPrivateArchive().getContestTasks()}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getTasks()},[new im("tasks",function(){return e.getTasks()}),new im("task",function(){return e.getTasks()},[new qy("%s",function(t){var n=e.getContestTasks().find(function(e){return e.name===t.args[0]});return n&&Lc.createElement(DH,{contestTask:n,contestTaskId:n.id,urlPrefix:e.getUrlPrefix("task/"+n.name),privateArchiveId:e.options.privateArchiveId})})]),new im("scoreboard",function(){return e.getScoreboard()}),new im("submissions",function(){return e.getSubmissions()}),new im("permissions",function(){return e.getPermissions()})]),this.routes}},{key:"getTasks",value:function(){var e,t=this;return(USER.isSuperUser||USER.id===this.getPrivateArchive().ownerId)&&(e=[Lc.createElement(jg,{level:Pc.PRIMARY,style:{float:"right"}},Lc.createElement(Md,{label:"Add task",onClick:function(){return PH.show({privateArchiveWidget:t})}}),Lc.createElement(Md,{label:"Remove task",onClick:function(){return MH.show({privateArchiveWidget:t})}}),Lc.createElement(Md,{label:"Create task",onClick:function(){return RH.show({privateArchiveWidget:t})}})),Lc.createElement("div",{style:{clear:"both"}})]),Lc.createElement("div",null,e,Lc.createElement(BH,{privateArchive:this.getPrivateArchive()}))}},{key:"getScoreboard",value:function(){return Lc.createElement(uI,{privateArchive:this.getPrivateArchive()})}},{key:"getSubmissions",value:function(){return Lc.createElement(YL,{privateArchiveId:this.options.privateArchiveId})}},{key:"getPermissions",value:function(){return USER.isSuperUser||USER.id===this.getPrivateArchive().ownerId?Lc.createElement("div",null,Lc.createElement("h3",null,"Here are the users that can edit this private archive: "),Lc.createElement(FH,{groupId:this.getPrivateArchive().ownerGroupId,privateArchiveId:this.getPrivateArchive().id,style:{fontSize:"1.2em"}})):Lc.createElement("div",null)}},{key:"onMount",value:function(){this.isInDocument()&&this.createNavbarElements(),cp.registerStream("private-archive-"+this.getPrivateArchive().id)}},{key:"getUrlPrefix",value:function(e){var t="/private-archive/"+this.getPrivateArchive().name+"/";return e&&(t+=e+"/"),t}},{key:"createNavbarElements",value:function(){var e=[Lc.createElement(Ff,{href:"/private-archives/",
value:Lc.T("All archives")}),Lc.createElement(Ff,{href:this.getUrlPrefix("tasks"),value:Lc.T("Tasks")}),Lc.createElement(Ff,{href:this.getUrlPrefix("scoreboard"),value:Lc.T("Scoreboard")}),Lc.createElement(Ff,{href:this.getUrlPrefix("submissions"),value:Lc.T("Submissions")})];(USER.isSuperUser||USER.id===this.getPrivateArchive().ownerId)&&e.push(Lc.createElement(Ff,{href:this.getUrlPrefix("permissions"),value:Lc.T("Permissions")})),tg.Global.getLeftConditioned().setChildren(e),tg.Global.checkForWrap()}},{key:"destroyNavbarElements",value:function(){tg.Global.getLeftConditioned().setChildren([]),tg.Global.checkForWrap()}}]),t}(nm),zH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("height","100%")}},{key:"render",value:function(){return Lc.createElement(UH,{ref:"privateArchivePanel",privateArchiveId:this.options.privateArchiveId})}},{key:"setURL",value:function(e){this.privateArchivePanel?this.privateArchivePanel.setURL(e):this.initialUrlParts=e}},{key:"onMount",value:function(){var e=this;this.setURL(this.initialUrlParts),this.addListener("urlEnter",function(){e.privateArchivePanel.createNavbarElements()}),this.addListener("urlExit",function(){e.privateArchivePanel.destroyNavbarElements()})}}]),t}(Lc.Element),WH=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.interviewTasks=new Map,n}return h(t,e),o(t,[{key:"getStartTime",value:function(){return this.startTime}},{key:"getDuration",value:function(){return this.getEndTime()?this.getEndTime()-this.getStartTime():yf.now().unix()-this.getStartTime()}},{key:"getEndTime",value:function(){return this.endTime}},{key:"getExpectedDuration",value:function(){return this.duration}},{key:"getExpectedEndTime",value:function(){return this.getStartTime()+this.getExpectedDuration()}},{key:"getDifficulty",value:function(){return Wk.get(this.difficulty)}},{key:"hasEnded",value:function(){return this.getStartTime()+this.getExpectedDuration()<yf.now().unix()}},{key:"addInterviewTask",value:function(e,t){return!this.interviewTasks.has(e.id)&&(this.interviewTasks.set(e.id,e),this.dispatch("addInterviewTask",e),!0)}},{key:"getInterviewTasks",value:function(){return Array.from(this.interviewTasks.values()).sort(function(e,t){return e.id-t.id})}},{key:"getAvailableTask",value:function(){for(var e=this.getInterviewTasks(),t=e.length-1;t>=0;t--){var n=e[t];if(n.getSolvedTime()||n.getLockedTime())return e[t+1]}return e[0]}},{key:"getContestTasks",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.getInterviewTasks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(o.getContestTask())}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"endInterview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Au,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Au;if(this.getEndTime())return void t("Interview already finished");zu.postJSON("/interview/end_interview/",{interviewId:this.id}).then(e,t)}}]),t}(fp),HH=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,"interview",WH)),e.possibleDifficulties=[Wk.EASY,Wk.MEDIUM,Wk.HARD],e.defaultDifficulty=Wk.MEDIUM,e}return h(t,e),t}(mp),VH=new HH,GH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInterview",value:function(){return VH.get(this.interviewId)}},{key:"getContestTask",value:function(){return zS.get(this.contestTaskId)}},{key:"getNextTask",value:function(){for(var e=this.getInterview().getInterviewTasks(),t=0;t<e.length;t+=1)if(e[t]===this)return e[t+1]}},{key:"getReadTime",value:function(){return this.readTime}},{key:"getSolvedTime",value:function(){return this.solvedTime}},{key:"getLockedTime",value:function(){return this.lockedTime}},{key:"canOpen",value:function(){return this.getSolvedTime()||this.isAvailableTask()}},{key:"isAvailableTask",value:function(){return this.getInterview().getAvailableTask()===this}},{key:"isLastTask",value:function(){return null==this.getNextTask()}},{key:"markAsRead",value:function(){this.getReadTime()||zu.postJSON("/interview/edit_interview_task/",{interviewId:this.interviewId,interviewTaskId:this.id,markAsRead:!0})}},{key:"markAsLocked",value:function(){this.getLockedTime()||zu.postJSON("/interview/edit_interview_task/",{interviewId:this.interviewId,interviewTaskId:this.id,markAsLocked:!0})}}]),t}(fp),jH=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,"interviewtask",GH,{dependencies:["interview","contesttask"]})),e.addCreateListener(function(e,t){e.getInterview().addInterviewTask(e,t)}),e}return h(t,e),t}(mp),YH=new jH,JH=(Iz=Bz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.fontColor="rgb(55, 55, 55)",n.height=110,O(n,"className",Nz,y(n)),O(n,"userScore",Oz,y(n)),O(n,"taskDescription",Rz,y(n)),O(n,"taskName",Mz,y(n)),O(n,"originalContest",Pz,y(n)),O(n,"taskDifficulty",Dz,y(n)),n}return h(t,e),t}(Jc),Nz=R(Iz.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{boxShadow:"0px 0px 1px "+this.fontColor,width:"99%",marginLeft:"0.5%",marginRight:"0.5%",height:this.height+"px",fontColor:this.fontColor,display:"inline-block",float:"left",marginTop:"20px",whiteSpace:"nowrap",":hover":{transition:"0.23s",boxShadow:"0px 0px 5px "+this.fontColor}}}}),Oz=R(Iz.prototype,"userScore",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height+"px",lineHeight:this.height+"px",width:"11%",color:this.fontColor,fontSize:"20px",textAlign:"center",display:"inline-block",float:"left"}}}),Rz=R(Iz.prototype,"taskDescription",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height+"px",width:"35%",display:"inline-block",float:"left"}}}),Mz=R(Iz.prototype,"taskName",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height/2+"px",lineHeight:this.height/2+"px",width:"100%",fontSize:"130%",paddingLeft:"15%"}}}),Pz=R(Iz.prototype,"originalContest",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height/2+"px",lineHeight:this.height/2+"px",width:"100%",fontSize:"100%",paddingLeft:"15%"}}}),Dz=R(Iz.prototype,"taskDifficulty",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height+"px",width:"9%",lineHeight:this.height+"px",fontSize:"16px",textAlign:"center",display:"inline-block",float:"left"}}}),Iz),qH=(_z=zz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.tagsHeight=40,O(n,"className",Fz,y(n)),O(n,"header",Uz,y(n)),n}return h(t,e),t}(Jc),Fz=R(_z.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"40px",width:"100%",borderBottom:"2px solid #e4e6e7",color:"#aaa"}}}),Uz=R(_z.prototype,"header",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return{display:"flex","justify-content":"center","align-items":"center",float:"left",width:"18%",height:function(){return e.tagsHeight+"px"},"font-size":"13px","text-align":"center"}}}),_z),XH=(Wz=jz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.bubbleHeight=50,n.baseBubble={height:n.bubbleHeight+"px",width:"100%",color:"#555",borderBottom:"2px solid #e4e6e7",cursor:"pointer"},O(n,"lightBubble",Hz,y(n)),O(n,"darkBubble",Vz,y(n)),O(n,"element",Gz,y(n)),n}return h(t,e),t}(Jc),Hz=R(Wz.prototype,"lightBubble",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign(this.baseBubble,{backgroundColor:"#fff",":hover":{backgroundColor:"#fafafa"}})}}),Vz=R(Wz.prototype,"darkBubble",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign(this.baseBubble,{backgroundColor:"#f4f6f7",":hover":{backgroundColor:"#eff1f2"}})}}),Gz=R(Wz.prototype,"element",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",float:"left",width:"18%",height:this.bubbleHeight+"px",fontSize:"14px",textAlign:"center",color:"#767676"}}}),Wz),KH=(Yz=Kz=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.textColor="#555659",n.headerHeight=60,O(n,"title",Jz,y(n)),O(n,"button",qz,y(n)),O(n,"header",Xz,y(n)),n}return h(t,e),t}(Jc),Jz=R(Yz.prototype,"title",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"left",lineHeight:this.headerHeight+"px",height:this.headerHeight+"px",paddingLeft:"1%",fontSize:"24px",color:this.textColor}}}),qz=R(Yz.prototype,"button",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",float:"right",marginRight:"1%",marginTop:"14px"}}}),Xz=R(Yz.prototype,"header",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.headerHeight+"px",width:"100%"}}}),Yz),QH=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Interview settings"}},{key:"getBody",value:function(){for(var e=[],t=0,n=[30,45,60,90,120];t<n.length;t++)!function(){var i=n[t];e.push({duration:i,toString:function(){return i+" minutes"}})}();var i=e[2];return[Lc.createElement("div",null,Lc.createElement(Lb,{style:{marginTop:"10px"}},Lc.createElement(Nb,{ref:"durationFormField",label:"Duration"},Lc.createElement(Gg,{ref:"durationSelect",options:e,selected:i})),Lc.createElement(Nb,{ref:"difficultyFormField",label:"Difficulty"},Lc.createElement(Gg,{ref:"difficultySelect",options:VH.possibleDifficulties,selected:VH.defaultDifficulty}))))]}},{key:"getActionName",value:function(){return"Create"}},{key:"getActionLevel",value:function(){return Pc.SUCCESS}},{key:"action",value:function(){var e=this,t={durationInMinutes:this.durationSelect.get().duration,difficulty:this.difficultySelect.get().id};zu.postJSON("/interview/create_interview/",t).then(function(e){return window.location.replace("/interview/"+e.interviewId)},function(t){return e.messageArea.showMessage("Error: "+t.message)})}}]),t}(Zg),ZH=$g(QH),$H=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("height","50px"),e.setStyle("width","100%")}},{key:"render",value:function(){var e=VH.all().sort(function(e,t){return t.getStartTime()-e.getStartTime()}),t=0,n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;n.push(Lc.createElement(tV,{interview:l,color:t%2})),t=!t}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return 0===e.length?[Lc.createElement("em",{style:{"font-size":"1.2em","padding-left":"1%"}},"You have not simulated any interviews.")]:[Lc.createElement(eV,null)].concat(n)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),VH.addCreateListener(function(){e.redraw()})}}]),t}(Lc.Element),eV=(Qz=Ze(qH))(Zz=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.className)}},{key:"getTitle",value:function(){return Lc.createElement("div",{className:this.styleSheet.header},"Start Date")}},{key:"getAuthor",value:function(){return Lc.createElement("div",{className:this.styleSheet.header},"Intended duration")}},{key:"getReplies",value:function(){return Lc.createElement("div",{className:this.styleSheet.header},"Actual duration")}},{key:"getViews",value:function(){return Lc.createElement("div",{className:this.styleSheet.header},"Difficulty")}},{key:"getActivity",value:function(){return Lc.createElement("div",{className:this.styleSheet.header},"Review")}},{key:"render",value:function(){return[this.getTitle(),this.getAuthor(),this.getReplies(),this.getViews(),this.getActivity()]}}]),t}(Lc.Element))||Zz,tV=($z=Ze(XH))(eW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.options.color?this.styleSheet.lightBubble:this.styleSheet.darkBubble)}},{key:"getInterview",value:function(){return this.options.interview}},{key:"getStartDate",value:function(){return[Lc.createElement("div",{className:this.styleSheet.element},Lc.createElement(np,{timeStamp:this.getInterview().getStartTime(),style:{color:"#797979"}}))]}},{key:"getFormattedMinutesDuration",value:function(e){var t=e/60;if((t=Math.floor(t))<1)return"< 1 minute";var n=t+" minute";return 1!=t&&(n+="s"),n}},{key:"getIntendedDuration",value:function(){return[Lc.createElement("div",{className:this.styleSheet.element},Lc.createElement("span",{style:{color:"#AAA"}},this.getFormattedMinutesDuration(this.getInterview().getExpectedDuration())))]}},{key:"getActualDuration",value:function(){return[Lc.createElement("div",{className:this.styleSheet.element},Lc.createElement("span",{style:{color:"#AAA"}},this.getFormattedMinutesDuration(this.getInterview().getDuration())))]}},{key:"getDifficulty",value:function(){return[Lc.createElement("div",{className:this.styleSheet.element},Lc.T(this.getInterview().getDifficulty().toString()))]}},{key:"getReview",value:function(){return[Lc.createElement("div",{className:this.styleSheet.element},"N/A")]}},{key:"render",value:function(){return[this.getStartDate(),this.getIntendedDuration(),this.getActualDuration(),this.getDifficulty(),this.getReview()]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(){nm.changeURL(["interview",e.getInterview().id])}),this.getInterview().addListener("updateOrCreate",function(){e.redraw()})}}]),t}(Lc.Element))||eW,nV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTableColumns",value:function(){var e={textAlign:"right",width:"1%",verticalAlign:"middle"};return[{value:function(e){return Lc.createElement(Xd,{href:"/contest/"+e.name,value:e.getName()})},headerName:"Name",headerStyle:{verticalAlign:"middle",width:"70%"},cellStyle:{verticalAlign:"middle"}},{value:function(e){return e.getUser(USER.id).totalScore},headerName:"Your score",headerStyle:{verticalAlign:"middle",textAlign:"right",width:"30%"},cellStyle:e}]}},{key:"getContests",value:function(){var e=this;return XS.all().filter(function(t){return t.systemGenerated&&t.originArchiveId===e.options.interviewArchiveId&&t.hasFinished()&&t.getUser(USER.id)}).sort(function(e,t){return t.getStartTime()-e.getStartTime()})}},{key:"render",value:function(){var e=this.getContests();return e.length?Lc.createElement(vb,{columns:this.getTableColumns(),entries:e}):Lc.createElement("em",{style:{"font-size":"1.2em","padding-left":"1%"}},"You have not participated in any hourly interview contests.")}}]),t}(Lc.Element),iV=(tW=Ze(KH))(nW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("margin-left","8%"),e.setStyle("width","84%")}},{key:"getTitle",value:function(){return[Lc.createElement("div",{className:this.styleSheet.title},"My interviews")]}},{key:"getButton",value:function(){return[Lc.createElement(ZH,{label:"New interview",level:Pc.SUCCESS,className:this.styleSheet.button})]}},{key:"getInterviewList",value:function(){return[Lc.createElement($H,null)]}},{key:"getContestList",value:function(){return Lc.createElement(nV,{interviewArchiveId:this.options.interviewArchiveId})}},{key:"render",value:function(){return[Lc.createElement("div",{style:{float:"left",width:"49%"}},Lc.createElement("div",{className:this.styleSheet.header},this.getTitle(),this.getButton()),this.getInterviewList()),Lc.createElement("div",{style:{float:"right",width:"49%"}},Lc.createElement("div",{className:this.styleSheet.header},Lc.createElement("div",{className:this.styleSheet.title},"Hourly interviews contests")),this.getContestList())]}}]),t}(Lc.Element))||nW,rV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInterview",value:function(){return this.options.interviewTask.getInterview()}},{key:"getCommentsPanel",value:function(){if(this.getInterview().getEndTime())return w(d(t.prototype),"getCommentsPanel",this).call(this)}},{key:"getSolutionPanel",value:function(){if(this.getInterview().getEndTime())return w(d(t.prototype),"getSolutionPanel",this).call(this)}},{key:"getStatisticsPanel",value:function(){if(this.getInterview().getEndTime())return w(d(t.prototype),"getStatisticsPanel",this).call(this)}},{key:"getSubmissionPanel",value:function(){return Lc.createElement(jL,{ref:"submissionsPanel",title:Lc.T("Submissions"),tabHref:this.getSubURL("submissions"),contestTask:this.getContestTask()})}},{key:"modifyIde",value:function(){var e=this,t=new Uu("/interview/submit_interviewjob/");t.addPreprocessor(function(t){t.data.interviewId=e.getInterview().id}),this.ide.getPlugin("ContestSubmit").setAjaxHandler(t)}},{key:"onDelayedMount",value:function(){var e=this;w(d(t.prototype),"onDelayedMount",this).call(this),this.ide?this.ide.whenLoaded(function(){return e.modifyIde()}):this.addListener("workspaceLoaded",function(){e.ide.whenLoaded(function(){return e.modifyIde()})}),this.options.interviewTask.markAsRead(),this.attachUpdateListener(this.getInterview(),function(){e.redraw()})}}]),t}(tR),aV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Skip task"}},{key:"getActionName",value:function(){return"Skip"}},{key:"getBody",value:function(){return Lc.createElement("p",null,"Are you sure you want to skip ",this.options.interviewTask.getContestTask().longName,"? You will not be able to solve this task later.")}},{key:"action",value:function(){this.options.interviewTask.markAsLocked(),this.hide()}}]),t}(Zg),oV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.addClickListener(function(e){e.preventDefault(),e.stopPropagation()})}}]),t}($g(aV)),sV=(iW=Ze(JH))(rW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.contestTask=this.getInterviewTask().getContestTask(),this.options.href=this.options.href||this.getFullTaskUrl()}},{key:"getFullTaskUrl",value:function(){return"/interview/"+this.getInterviewTask().interviewId+"/task/"+this.options.contestTask.name+"/"}},{key:"getInterviewTask",value:function(){return this.options.interviewTask}},{key:"getContestTask",value:function(){return this.options.contestTask}},{key:"getTaskDifficulty",value:function(){var e=Wk.get(this.getContestTask().getDifficulty());return Lc.createElement("div",{className:this.styleSheet.taskDifficulty,style:{color:e.color}},e.toString())}},{key:"getUserScore",value:function(){var e;return this.getInterviewTask().canOpen()?this.getInterviewTask().isAvailableTask()||(e=this.getInterviewTask().getSolvedTime()?function(){return Lc.createElement("span",{className:"fa fa-check fa-lg",style:{color:"green"}})}():function(){return Lc.createElement("span",{className:"fa fa-times fa-lg",style:{color:"red"}})}()):e=function(){return Lc.createElement("span",{className:"fa fa-lock fa-lg",style:{color:"gray"}})}(),Lc.createElement("div",{className:this.styleSheet.userScore},e)}},{key:"getTaskDescription",value:function(){return Lc.createElement("div",{className:this.styleSheet.taskDescription},Lc.createElement("div",{className:this.styleSheet.taskName},Lc.T(this.getContestTask().longName)),Lc.createElement("div",{className:this.styleSheet.originalContest}))}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.addClass(String(this.styleSheet.className)),this.getInterviewTask().canOpen()?e.setStyle("cursor","pointer"):e.setStyle("backgroundColor","lightgray"),e}},{key:"render",value:function(){var e;return this.getInterviewTask().isAvailableTask()&&!this.getInterviewTask().isLastTask()&&(e=Lc.createElement(oV,{style:{marginRight:"5%",marginTop:"20px"},className:"pull-right",label:"Skip",modalOptions:{interviewTask:this.getInterviewTask()}})),[this.getTaskDescription(),this.getUserScore(),this.getTaskDifficulty(),e]}}]),t}(Xd))||rW,lV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInterview",value:function(){return this.options.interview}},{key:"render",value:function(){return this.getInterview().getInterviewTasks().map(function(e){return Lc.createElement(sV,{key:e.id,interviewTask:e})})}},{key:"onMount",value:function(){var e=this;this.attachUpdateListener(this.getInterview(),function(){e.redraw()}),this.attachListener(YH,"updateOrCreate",function(){e.redraw()})}}]),t}(Lc.Element),uV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return Lc.createElement("div",{className:"text-center"},Lc.createElement("h3",null,"Congratulations"),Lc.createElement("p",null,"You can continue training in the ",Lc.createElement(Xd,{href:"/contest/interview-archive/",value:"interview archive"}),"."))}}]),t}(Lc.Element),cV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInterviewTask",value:function(){return this.options.interviewTask}},{key:"getTitle",value:function(){return this.getInterviewTask().getLockedTime()&&!this.getInterviewTask().isLastTask()?"New problem unlocked":"Congratulations"}},{key:"getActionName",value:function(){return this.getInterviewTask().isLastTask()?"End interview":"Next problem"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getCloseName",value:function(){return"Not now"}},{key:"getBody",value:function(){return this.getInterviewTask().isLastTask()?"You finished all the problems!":"You unlocked a new problem."}},{key:"action",value:function(){var e=this,t=this.getInterviewTask();if(t.isLastTask()){var n=function(){e.hide(),nm.changeURL(["interview",t.interviewId,"analysis"])},i=function(t){"string"==typeof t?e.messageArea.showMessage("Error: "+t):e.messageArea.showMessage("Error: "+t.message)};t.getInterview().endInterview(n,i)}else this.hide(),nm.changeURL(["interview",t.interviewId,"task",t.getNextTask().getContestTask().name])}}]),t}(Zg),hV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"End interview"}},{key:"getActionLevel",value:function(){return Pc.WARNING}},{key:"getBody",value:function(){return"Are you sure you want to end your interview?"}},{key:"action",value:function(){var e=this,t=function(){e.hide(),nm.changeURL(["interview",e.options.interview.id,"analysis"])},n=function(t){"string"==typeof t?e.messageArea.showMessage("Error: "+t):e.messageArea.showMessage("Error: "+t.message)};this.options.interview.endInterview(t,n)}}]),t}(Zg),dV=$g(hV),pV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{height:"100%"},children:[]}}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.MEDIUM)}},{key:"getInterview",value:function(){return VH.get(this.options.interviewId)}},{key:"getUrlPrefix",value:function(e){var t="/interview/"+this.options.interviewId+"/";return e&&(t+=e+"/"),t}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.tasksWithShowedModal=new Set,cp.importState(e.state||{})}},{key:"getAnalysis",value:function(){if(this.getInterview().getEndTime())return Lc.createElement(uV,{interview:this.getInterview()})}},{key:"getTasks",value:function(){var e;return this.getInterview().getEndTime()||(e=Lc.createElement("div",{style:{marginRight:"12%"}},Lc.createElement(dV,{modalOptions:{interview:this.getInterview()},label:"End interview",level:Pc.WARNING,className:"pull-right"}))),Lc.createElement("div",null,e,Lc.createElement(lV,{interview:this.getInterview(),style:{marginLeft:"12%",marginRight:"12%"}}))}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getTasks()},[new im("tasks",function(){return e.getTasks()}),new im("task",null,[new qy("%s",function(t){var n=e.getInterview().getInterviewTasks().find(function(e){return e.getContestTask().name===t.args[0]}),i="/interview/"+e.getInterview().id+"/task/"+t.args[0]+"/";return n&&Lc.createElement(rV,{interviewTask:n,customURLPrefix:i,contestTaskId:n.contestTaskId})})]),new im("analysis",function(){return e.getAnalysis()})]),this.routes}},{key:"showModalForTask",value:function(e){if(!this.tasksWithShowedModal.has(e)){this.tasksWithShowedModal.add(e);Lc.createElement(cV,{interviewTask:e}).show()}}},{key:"onMount",value:function(){var e=this;this.createNavbarElements(),this.attachUpdateListener(this.getInterview(),function(){e.createNavbarElements(),e.getInterview().getEndTime()&&e.endInterviewButton&&e.endInterviewButton.hide(),e.redraw()}),this.attachListener(YH,"updateOrCreate",function(t){t.getSolvedTime()?e.showModalForTask(t):t.getLockedTime()&&e.showModalForTask(t)})}},{key:"createNavbarElements",value:function(){if(this.isInDocument()){var e=[];this.getInterview().getEndTime()&&e.push(Lc.createElement(Ff,{href:"/interview/",value:Lc.T("My Interviews")})),e.push(Lc.createElement(Ff,{href:this.getUrlPrefix("tasks"),value:Lc.T("Tasks")})),this.getInterview().getEndTime()&&e.push(Lc.createElement(Ff,{href:this.getUrlPrefix("analysis"),value:Lc.T("Analysis")})),tg.Global.getLeftConditioned().setChildren(e),tg.Global.getRightConditioned().setChildren([this.createTimeCounter()]),tg.Global.checkForWrap()}}},{key:"destroyNavbarElements",value:function(){tg.Global.getLeftConditioned().setChildren([]),tg.Global.getRightConditioned().setChildren([]),tg.Global.checkForWrap()}},{key:"createTimeCounter",value:function(){var e=this,t=Lc.createElement(_f,{value:""}),n=setInterval(function(){var i,r=yf.now();if(e.getInterview().getEndTime()){var a=Ap(e.getInterview().getStartTime());i="Done in "+Ap(e.getInterview().getEndTime()).diffDuration(a).format("H:mm:ss"),clearInterval(n)}else if(e.getInterview().hasEnded()){var o=Ap(e.getInterview().getStartTime()+e.getInterview().getExpectedDuration()),s=r.diffDuration(o),l=s.format("H:mm:ss");i="Extra "+l}else{var u=Ap(e.getInterview().getStartTime()+e.getInterview().getExpectedDuration()),c=r.diffDuration(u),h=c.format("H:mm:ss");i="Ends in "+h}t.updateOptions({value:i})},1e3);return t.addCleanupJob(function(){clearInterval(n)}),t}}]),t}(nm),fV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Utils.fullHeight)}},{key:"setURL",value:function(e){this.interviewPanel?this.interviewPanel.setURL(e):this.initialUrlParts=e}},{key:"render",value:function(){return Lc.createElement(pV,{ref:"interviewPanel",interviewId:this.options.interviewId})}},{key:"onMount",value:function(){var e=this;this.setURL(this.initialUrlParts),this.addListener("urlEnter",function(){e.interviewPanel.createNavbarElements()}),this.addListener("urlExit",function(){e.interviewPanel.destroyNavbarElements()})}}]),t}(Lc.Element),gV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getFormFields",value:function(){return[Lc.createElement(Nb,{ref:"firstNameFormField",label:"First Name"},Lc.createElement(vg,{ref:"firstNameFormInput",placeholder:"John",value:this.options.user.firstName})),Lc.createElement(Nb,{ref:"lastNameFormField",label:"Last Name"},Lc.createElement(vg,{ref:"lastNameFormInput",placeholder:"Smith",value:this.options.user.lastName})),Lc.createElement(Nb,{ref:"userNameFormField",label:"Username"},Lc.createElement(vg,{ref:"userNameFormInput",placeholder:"johnsmith",value:this.options.user.username||""})),Lc.createElement(Nb,{ref:"displayNameFormField",label:"Display name"},Lc.createElement(Gg,{ref:"displayNameSelect",options:["Name","Username"]}))]}},{key:"render",value:function(){return[Lc.createElement("h3",null,Lc.T("General Info")),Lc.createElement("div",null,Lc.createElement(Lb,null,this.getFormFields()),Lc.createElement(Nb,{label:" "},Lc.createElement("div",null,Lc.createElement(Dd,{ref:"saveProfileButton",level:Pc.PRIMARY,statusOptions:["Save changes",{faIcon:"spinner fa-spin",label:" Saving changes..."},"Saved changes","Save failed"]}))))]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.displayNameSelect.set(this.options.user.displayName?"Name":"Username"),this.saveProfileButton.addClickListener(function(){e.saveProfileChanges()})}},{key:"getSaveRequestData",value:function(){return{firstName:this.firstNameFormInput.getValue(),lastName:this.lastNameFormInput.getValue(),userName:this.userNameFormInput.getValue(),displayName:"Name"===this.displayNameSelect.get()}}},{key:"saveProfileChanges",value:function(){var e=this,t=this.getSaveRequestData();this.saveProfileButton.setFaIcon(""),this.firstNameFormField.removeError(),this.lastNameFormField.removeError(),this.userNameFormField.removeError(),this.saveProfileButton.postJSON("/accounts/profile_changed/",t).then(function(e){return rk.applyEvent({objectId:e.user.id,data:e.user})},function(t){t.first_name&&e.firstNameFormField.setError(t.first_name),t.last_name&&e.lastNameFormField.setError(t.last_name),t.username&&e.userNameFormField.setError(t.username)})}}]),t}(jd),mV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("h3",null,Lc.T("Password")),Lc.createElement("div",null,Lc.createElement(Lb,null,Lc.createElement(Nb,{ref:"oldPasswordGroup",label:Lc.T("Current Password")},Lc.createElement(kg,{ref:"oldPasswordInput"})),Lc.createElement(Nb,{ref:"newPasswordGroup",label:Lc.T("New Password")},Lc.createElement(kg,{ref:"newPasswordInput",required:!0})),Lc.createElement(Nb,{ref:"newPasswordGroup2",label:[Lc.T("New Password")," (",Lc.T("again"),")"]},Lc.createElement(kg,{ref:"newPasswordInput2",required:!0}))),Lc.createElement(Nb,{label:" "},Lc.createElement("div",null,Lc.createElement(Dd,{ref:"setPasswordButton",level:Pc.PRIMARY,statusOptions:["Set Password",{faIcon:"spinner fa-spin",label:" Setting Password..."},"Password set","Failed"]}))))]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.options.user.hasPassword||this.oldPasswordGroup.hide(),this.setPasswordButton.addClickListener(function(){e.setPassword()})}},{key:"setPassword",value:function(){var e=this,t=this.oldPasswordInput.getValue(),n=this.newPasswordInput.getValue(),i=this.newPasswordInput2.getValue();if(this.oldPasswordGroup.removeError(),this.newPasswordGroup.removeError(),this.newPasswordGroup2.removeError(),n!=i)return void this.newPasswordGroup2.setError("Passwords don't match.");if(!n)return void this.newPasswordGroup.setError("Password can't be empty.");var r={newPassword:n};t&&(r.oldPassword=t),
this.setPasswordButton.postJSON("/accounts/password_change/",r).then(function(e){return rk.applyEvent({objectId:e.user.id,data:e.user})},function(t){return e.oldPasswordGroup.setError(t.message)})}}]),t}(jd),vV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.options.user.emails.slice();t.sort(function(e,t){return e.verified==t.verified?t.primary-e.primary:t.verified-e.verified});var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)!function(){var t=o.value,i=void 0,r=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c={borderRadius:"10px","margin-left":"5px"},h={"margin-left":"7px"},d=function(){e.makePrimaryEmail(t.email)},p=function(){e.removeEmail(t.email)},f=function(){e.sendConfirmation(t.email)};t.verified?t.primary?i=Lc.createElement(Ed,{level:Pc.PRIMARY,style:c,label:"Primary"}):(r=Lc.createElement(Ed,{level:Pc.SUCCESS,style:c,label:"Verified"}),s=Lc.createElement(Md,{onClick:d,size:Dc.EXTRA_SMALL,level:Pc.PRIMARY,label:"Make Primary",style:h})):(a=Lc.createElement(Ed,{level:Pc.DANGER,style:c,label:"Unverified"}),u=Lc.createElement(Md,{onClick:f,size:Dc.EXTRA_SMALL,label:"Re-send confirmation",style:h})),t.primary||(l=Lc.createElement(Md,{onClick:p,size:Dc.EXTRA_SMALL,level:Pc.DANGER,label:"Remove",style:h})),n.push(Lc.createElement("div",{style:{width:"100%",position:"relative",paddingTop:"4px",paddingBottom:"4px"}},Lc.createElement("strong",null,t.email),i,r,a,Lc.createElement("div",{style:{right:"0",top:"0",position:"absolute"}},s,u,l)))}()}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return[Lc.createElement("h3",null,Lc.T("E-mail Addresses")),Lc.createElement("p",null,Lc.T("The following e-mail addresses are associated with your account:")),n,Lc.createElement("h3",null,Lc.T("Add E-mail Address")),Lc.createElement("div",null,Lc.createElement(Lb,null,Lc.createElement(Nb,{ref:"emailFormField",label:"Email"},Lc.createElement(bg,{ref:"emailFormInput",placeholder:"john.smith@mail.com"})),Lc.createElement(Nb,{label:" "},Lc.createElement("div",null,Lc.createElement(Dd,{ref:"addEmailButton",onClick:function(){e.addEmail()},level:Pc.PRIMARY,statusOptions:["Add Email",{faIcon:"spinner fa-spin",label:" Adding Email..."},"Email added","Failed"]}))))),Lc.createElement("h5",null,Lc.createElement(Nb,{label:Lc.T("Receive email notifications"),inline:!1},Lc.createElement(Eg,{ref:"emailSubscriptionCheckbox",checked:this.options.user.receivesEmailAnnouncements,onClick:function(){e.changeEmailSubscription(e.emailSubscriptionCheckbox.getValue())}})))]}},{key:"addEmail",value:function(){var e=this,t=this.emailFormInput.getValue(),n={email:t};this.emailFormField.removeError(),this.addEmailButton.postJSON("/accounts/email_address_add/",n).then(function(t){e.emailFormInput.setValue(""),rk.applyEvent({objectId:t.user.id,data:t.user})},function(t){return e.emailFormField.setError(t.message)})}},{key:"removeEmail",value:function(e){var t={email:e};confirm("Are you sure you want to remove this email from your account?")&&zu.postJSON("/accounts/email_address_remove/",t).then(function(e){return rk.applyEvent({objectId:e.user.id,data:e.user})})}},{key:"makePrimaryEmail",value:function(e){var t={email:e};zu.postJSON("/accounts/email_address_make_primary/",t).then(function(e){return rk.applyEvent({objectId:e.user.id,data:e.user})})}},{key:"sendConfirmation",value:function(e){zu.postJSON("/accounts/email_address_verification_send/",{email:e})}},{key:"changeEmailSubscription",value:function(e){zu.postJSON("/accounts/profile_changed/",{receivesEmailAnnouncements:e})}}]),t}(jd),yV=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),Jw.getInstance(),Yw.getInstance(),n}return h(t,e),o(t,[{key:"render",value:function(){var e=this,t=[Lc.createElement("h3",null,Lc.T("Add a 3rd Party Account")),Lc.createElement("div",null,Lc.createElement("a",{style:{cursor:"pointer"},onClick:function(){return Yw.connect()}},Lc.createElement("i",{className:"fa fa-google fa-2x"}),Lc.createElement("span",{className:"google-login-text"}," ",Lc.T("Connect Google account")))),Lc.createElement("div",null,Lc.createElement("a",{onClick:function(){Jw.connect()}},Lc.createElement("i",{className:"fa fa-facebook fa-2x"}),Lc.createElement("span",null," ",Lc.T("Connect Facebook account")," ")))];if(this.options.user.social.length){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=this.options.user.social[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)!function(){var t=o.value;n.push(Lc.createElement("div",null,Lc.createElement("label",null,Lc.createElement("img",{src:t.picture,height:"42",width:"42"}),Lc.createElement("a",{href:t.link,target:"_blank"}," ",t.name),Lc.createElement("span",null," ","- "+t.platform)),Lc.createElement("div",{className:"pull-right"},Lc.createElement(Md,{label:"Remove",size:Dc.SMALL,level:Pc.DANGER,style:{"margin-top":"7px"},onClick:function(){e.removeSocialAccount(t.id)}}))))}()}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return[Lc.createElement("h3",null,Lc.T("Social accounts")),Lc.createElement("p",null,Lc.T("You can sign in to your account using any of the following third party accounts:")),Lc.createElement("div",null,n)].concat(t)}return[Lc.createElement("h3",null,Lc.T("Social accounts")),Lc.createElement("p",null,Lc.T("You currently have no social network accounts connected to this account."))].concat(t)}},{key:"removeSocialAccount",value:function(e){zu.postJSON("/accounts/remove_social_account/",{socialAccountId:e}).then(function(e){return rk.applyEvent({objectId:e.user.id,data:e.user})})}}]),t}(jd),bV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({height:"500px"}),e.addClass(mh.Container.SMALL)}},{key:"getUrlPrefix",value:function(e){var t="/accounts/settings/";return e&&(t+=e+"/"),t}},{key:"setURL",value:function(e){this.tabArea?this.showUrlTab(e[0]||"general"):this.initialUrlParts=e}},{key:"showUrlTab",value:function(e){this[e+"Panel"]?this[e+"Panel"].dispatch("show"):this.generalPanel.dispatch("show")}},{key:"getUser",value:function(){return rk.getCurrentUser()}},{key:"getPanels",value:function(){return[Lc.createElement(gV,{title:Lc.T("General Info"),active:!0,user:this.getUser(),ref:"generalPanel",tabHref:this.getUrlPrefix("general")}),Lc.createElement(vV,{title:Lc.T("Email"),user:this.getUser(),ref:"emailPanel",tabHref:this.getUrlPrefix("email")}),Lc.createElement(yV,{title:Lc.T("Social accounts"),user:this.getUser(),ref:"socialPanel",tabHref:this.getUrlPrefix("social")}),Lc.createElement(mV,{title:Lc.T("Security"),user:this.getUser(),ref:"securityPanel",tabHref:this.getUrlPrefix("security")})]}},{key:"render",value:function(){return[Lc.createElement(Gb,{ref:"tabArea",variableHeightPanels:!0},this.getPanels())]}},{key:"onMount",value:function(){this.setURL(this.initialUrlParts),delete this.initialUrlPars}}]),t}(jd),kV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getFormFields",value:function(){var e=USER_CONSTANTS;return[Lc.createElement(Nb,{ref:"firstNameFormField",label:Lc.T("First Name")},Lc.createElement(vg,{ref:"firstNameFormInput",maxLength:e.first_name_max_length||30,placeholder:"John",value:this.options.user.firstName})),Lc.createElement(Nb,{ref:"lastNameFormField",label:Lc.T("Last Name")},Lc.createElement(vg,{ref:"lastNameFormInput",maxLength:e.last_name_max_length||30,placeholder:"Smith",value:this.options.user.lastName})),Lc.createElement(Nb,{ref:"userNameFormField",label:Lc.T("Username")},Lc.createElement(vg,{ref:"userNameFormInput",maxLength:e.username_max_length||30,placeholder:"johnsmith",value:this.options.user.username||""})),Lc.createElement(Nb,{ref:"displayNameFormField",label:Lc.T("Display name")},Lc.createElement(Gg,{ref:"displayNameSelect",options:["Name","Username"]})),Lc.createElement(Nb,{ref:"countryFormField",label:Lc.T("Country")},Lc.createElement(Gg,{ref:"countrySelect",options:tk.allWithNone(),selected:tk.get(USER.countryId)}))]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.userNameFormInput.onInput(function(){e.validateUsername()})}},{key:"validateUsername",value:function(){var e=this.userNameFormInput.getValue(),t=USER_CONSTANTS.username_regexes,n=!1,i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;new RegExp(String.raw(_l(),l.pattern)).test(e)||(this.userNameFormField.setError(l.message),n=!0)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}n?this.saveProfileButton.disable():(this.userNameFormField.removeError(),this.saveProfileButton.enable())}},{key:"getSaveRequestData",value:function(){var e=w(d(t.prototype),"getSaveRequestData",this).call(this);return e.countryId=this.countrySelect.get().id,e}}]),t}(gV),wV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this;if(this.options.user.codeforcesHandle){var t=this.options.user.username!==this.options.user.codeforcesHandle,n=!0,i=!1,r=void 0;try{for(var a,o=USER_CONSTANTS.username_regexes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!new RegExp(String.raw(Bl(),s.pattern)).test(this.options.user.codeforcesHandle)){t=!1;break}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l="pull-right"+(t?"":" hidden");return[Lc.createElement("h3",null,Lc.T("Codeforces account")),Lc.createElement("p",null,Lc.T("The following codeforces account is linked with your account:")),Lc.createElement("div",{style:{"margin-top":"15px"}},Lc.createElement("a",{href:"http://www.codeforces.com/profile/"+this.options.user.codeforcesHandle,target:"_blank"},this.options.user.codeforcesHandle),Lc.createElement(Md,{label:Lc.T("Unlink"),className:"pull-right",size:Dc.EXTRA_SMALL,level:Pc.DANGER,onClick:function(){e.unlinkCodeforces()}}),Lc.createElement(Md,{ref:"importHandleButton",label:Lc.T("Import handle"),className:l,style:{"margin-right":"7px"},size:Dc.EXTRA_SMALL,level:Pc.SUCCESS,onClick:function(){e.importCodeforcesHandle()}}))]}return[Lc.createElement("h3",null,Lc.T("Link Codeforces account")),Lc.createElement("div",null,Lc.createElement(Nb,{ref:"handleGroup",label:Lc.T("Handle")},Lc.createElement(vg,{ref:"handleInput"})),Lc.createElement(Nb,{label:" "},Lc.createElement("div",null,Lc.createElement(Dd,{ref:"getTokenButton",level:Pc.PRIMARY,onClick:function(){e.linkCodeforces()},statusOptions:["Verify user",{faIcon:"spinner fa-spin",label:" Verifying user..."},"User verified","Failed"]}))),Lc.createElement("div",{ref:"sendTokenGroup",style:{"margin-top":"40px"},className:"hidden"},Lc.createElement("p",null,Lc.T("Send us a private message with this token:")),Lc.createElement(Nb,{label:"Token"},Lc.createElement(vg,{ref:"tokenInput",readonly:!0})),Lc.createElement("p",null,Lc.T("Click bellow to open Codeforces (in a new window) to send us this token:")),Lc.createElement(Md,{label:Lc.T("Open Codeforces"),level:Pc.PRIMARY,onClick:function(){window.open("http://codeforces.com/usertalk?other=csacademy","_blank")}})))]}},{key:"linkCodeforces",value:function(){var e=this;this.handleGroup.removeError(),this.sendTokenGroup.hide(),this.getTokenButton.postJSON("/accounts/link_external_account/",{platform:"codeforces",username:this.handleInput.getValue()}).then(function(t){e.tokenInput.setValue(t.token),e.tokenInput.addClickListener(function(){e.tokenInput.node.select()}),e.sendTokenGroup.show(),null!=e.codeforcesTokenTimeout&&clearTimeout(e.codeforcesTokenTimeout),e.codeforcesTokenTimeout=setTimeout(function(){e.sendTokenGroup.hide()},6e5)},function(t){e.handleGroup.setError(t.message)})}},{key:"unlinkCodeforces",value:function(){var e={platform:"codeforces"};zu.postJSON("/accounts/unlink_external_account/",e).then(function(e){rk.applyEvent({objectId:e.user.id,data:e.user})})}},{key:"importCodeforcesHandle",value:function(){var e={platform:"codeforces"};this.options.user.username&&!confirm("Your current username ("+this.options.user.username+") will be available for other users to use. Are you sure you want to change your username?")||zu.postJSON("/accounts/import_external_username/",e).then(function(e){rk.applyEvent({objectId:e.user.id,data:e.user})})}}]),t}(jd),EV=(aW=fW=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.dimensions=26,n.horizontalMargin="1em",n.verticalMargin=12,O(n,"themeSettingsPanel",oW,y(n)),O(n,"themeSettingsContainer",sW,y(n)),O(n,"themeSettingsField",lW,y(n)),O(n,"label",uW,y(n)),O(n,"colorBox",cW,y(n)),O(n,"textInput",hW,y(n)),O(n,"button",dW,y(n)),O(n,"paragraph",pW,y(n)),n}return h(t,e),t}(Jc),oW=R(aW.prototype,"themeSettingsPanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%"}}}),sW=R(aW.prototype,"themeSettingsContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),lW=R(aW.prototype,"themeSettingsField",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0 auto",marginTop:this.verticalMargin,display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"600px"}}}),uW=R(aW.prototype,"label",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"40%",textAlign:"right",lineHeight:this.dimensions,marginRight:this.horizontalMargin,color:"#555"}}}),cW=R(aW.prototype,"colorBox",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.dimensions,width:this.dimensions,marginRight:this.horizontalMargin}}}),hW=R(aW.prototype,"textInput",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.dimensions,marginRight:this.horizontalMargin,flex:1,outline:0,minWidth:"30px",fontSize:"14px"}}}),dW=R(aW.prototype,"button",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.dimensions,padding:"0 10px !important",marginRight:this.horizontalMargin}}}),pW=R(aW.prototype,"paragraph",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"16px",wordBreak:"break-all"}}}),aW),SV=(gW=Ze(EV))(mW=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.themeSettingsField)}},{key:"getDefaultOptions",value:function(){return{textInputStyle:this.options.textInputStyle||{},colorBoxStyle:this.options.colorBoxStyle||{}}}},{key:"getCurrentThemeFieldValue",value:function(){return $c.Global.getProperty(this.options.fieldName)}},{key:"getCustomThemeFieldValue",value:function(){var e=USER.getCustomSetting("theme",{}),t=e[this.options.fieldName];return"function"==typeof t?t():t}},{key:"getDefaultFieldValue",value:function(){var e=FZ[this.options.fieldName];return"function"==typeof e?e():e}},{key:"getInputValue",value:function(){return this.input.getValue()}},{key:"render",value:function(){var e=this;return[Lc.createElement("label",{className:this.styleSheet.label},Lc.createElement("strong",null,this.options.label)),Lc.createElement(vg,{value:this.options.fieldValue,ref:"input",className:this.styleSheet.textInput,style:this.options.textInputStyle}),Lc.createElement("div",{className:this.styleSheet.colorBox,style:this.options.colorBoxStyle}),Lc.createElement(Md,{ref:"changeThemeButton",onClick:function(){return e.applyThemeField()},level:Pc.PRIMARY,className:this.styleSheet.button},"Apply"),Lc.createElement(Md,{ref:"resetThemeButton",onClick:function(){return e.resetThemeField()},level:Pc.PRIMARY,className:this.styleSheet.button},"Reset")]}},{key:"updateStyle",value:function(){}},{key:"updateField",value:function(){this.updateOptions({fieldValue:this.getInputValue()}),this.updateStyle()}},{key:"applyThemeField",value:function(){var e=this.getInputValue();Fl(this.options.fieldName,e),this.updateOptions({fieldValue:e}),this.updateStyle()}},{key:"resetThemeField",value:function(){Fl(this.options.fieldName,null),this.updateOptions({fieldValue:this.getDefaultFieldValue()}),this.updateStyle()}},{key:"onMount",value:function(){var e=this;this.input.onKeyUp(function(){e.updateField()})}}]),t}(Lc.Element))||mW,CV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){var e=this.getCustomThemeFieldValue();return null!=e&&"null"!==e||(e=this.getCurrentThemeFieldValue()),Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{fieldValue:e,colorBoxStyle:{backgroundColor:e,border:"2px solid "+(e&&qe(e,.2)||"black")}})}},{key:"updateStyle",value:function(){this.updateOptions({colorBoxStyle:{backgroundColor:this.options.fieldValue,border:"2px solid "+(fieldValue&&qe(fieldValue,.2)||"black")}})}}]),t}(SV),xV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){var e=this.getCustomThemeFieldValue();return null!=e&&"null"!==e||(e=this.getCurrentThemeFieldValue()),Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{fieldValue:e,textInputStyle:{fontFamily:e}})}},{key:"updateStyle",value:function(){this.updateOptions({textInputStyle:{fontFamily:this.options.fieldValue}})}}]),t}(SV),TV=(vW=Ze(EV))(yW=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.colorFields=[{label:"Primary Color",fieldName:"COLOR_PRIMARY"},{label:"Secondary Color",fieldName:"COLOR_SECONDARY"},{label:"Primary Background Color",fieldName:"COLOR_BACKGROUND_BODY"},{label:"Secondary Background Color",fieldName:"COLOR_BACKGROUND_ALTERNATIVE"}],n.fontFamilyFields=[{label:"Primary Font Family",fieldName:"FONT_FAMILY_DEFAULT"}],n}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.themeSettingsPanel)}},{key:"render",value:function(){var e=this.colorFields.map(function(e,t){return Lc.createElement(CV,{label:e.label,fieldName:e.fieldName})}),t=this.fontFamilyFields.map(function(e,t){return Lc.createElement(xV,{label:e.label,fieldName:e.fieldName})});return[Lc.createElement("h3",null,"Theme"),Lc.createElement("p",{className:this.styleSheet.paragraph},"Color examples:",Lc.createElement("code",null,"#345abc"),",",Lc.createElement("code",null,"#678"),",",Lc.createElement("code",null,"rgb(123,123,123)"),",",Lc.createElement("code",null,"rgba(123,123,123,0.5)"),",",Lc.createElement("code",null,"blue"),",",Lc.createElement("code",null,"aqua"),"."),Lc.createElement("p",{className:this.styleSheet.paragraph},"Font examples:",Lc.createElement("code",null,"monospace"),",",Lc.createElement("code",null,"Arial"),",",Lc.createElement("code",null,"cursive"),",",Lc.createElement("code",null,"Helvetica"),"."),Lc.createElement("p",{className:this.styleSheet.paragraph},"Select your theme:Â ",Lc.createElement(Gg,{options:[{value:"",toString:function(){return"Current theme"}},{value:"1",toString:function(){return"Default"}},{value:"2",toString:function(){return"Dark"}},{value:"3",toString:function(){return"Console"}},{value:"custom",toString:function(){return"Custom"}}],ref:"select"})),Lc.createElement("p",{className:this.styleSheet.paragraph},"Configure custom theme settings:"),Lc.createElement("div",{className:this.styleSheet.themeSettingsContainer},e,t)]}},{key:"onMount",value:function(){var e=this;this.select.addChangeListener(function(){Ul(e.select.get().value)})}}]),t}(jd))||yW,AV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getPanels",value:function(){return[Lc.createElement(kV,{title:Lc.T("General Info"),active:!0,user:this.getUser(),ref:"generalPanel",tabHref:this.getUrlPrefix("general")}),Lc.createElement(vV,{title:Lc.T("Email"),user:this.getUser(),ref:"emailPanel",tabHref:this.getUrlPrefix("email")}),Lc.createElement(wV,{title:Lc.T("External accounts"),user:this.getUser(),ref:"externalPanel",tabHref:this.getUrlPrefix("external")}),Lc.createElement(yV,{title:Lc.T("Social accounts"),user:this.getUser(),ref:"socialPanel",tabHref:this.getUrlPrefix("social")}),Lc.createElement(mV,{title:Lc.T("Security"),user:this.getUser(),ref:"securityPanel",tabHref:this.getUrlPrefix("security")}),Lc.createElement(TV,{title:Lc.T("Theme"),user:this.getUser(),ref:"themePanel",tabHref:this.getUrlPrefix("theme")})]}}]),t}(bV),LV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({textAlign:"center"})}},{key:"render",value:function(){return this.options.confirmSuccess&&location.replace("/accounts/settings/"),[Lc.createElement("div",null,Lc.createElement("h1",null,"Invalid email confirmation link."),Lc.createElement("h3",null,"The email confirmation link is incomplete or has been used already."))]}}]),t}(Lc.Element),IV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({textAlign:"center"})}},{key:"render",value:function(){return this.options.unsubscribeSuccess?Lc.createElement("div",null,Lc.createElement("h1",null,"Email unsubscribed!"),Lc.createElement("h3",null,"You can continue navigating on the website."),Lc.createElement(Xd,{href:"/accounts/settings/",className:Nd.getInstance().DEFAULT,value:"Edit user profile"})):Lc.createElement("div",null,Lc.createElement("h1",null,"Invalid email unsubscribe link."),Lc.createElement("h3",null,"Please try to change the settings from your profile page."))}}]),t}(Lc.Element),NV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this;return USER.isAuthenticated&&(window.location.href="/accounts/settings/"),[Lc.createElement("div",{className:"text-center"},Lc.createElement("h1",null,"Password reset"),Lc.createElement("p",null,"Forgotten your password? Enter your e-mail address below, and we'll send you an e-mail allowing you to reset it.")),Lc.createElement(Nb,{ref:"emailFormField",label:"Email"},Lc.createElement(vg,{ref:"emailInput"})),Lc.createElement(Nb,{label:" "},Lc.createElement("div",null,Lc.createElement(Dd,{ref:"resetPasswordButton",level:Pc.PRIMARY,onClick:function(){return e.sendPasswordReset()},statusOptions:["Send password reset email",{faIcon:"spinner fa-spin",label:" Sending..."},"Email sent","Email failed"]})))]}},{key:"sendPasswordReset",value:function(){var e=this;this.emailFormField.removeError();var t=window.location.href;t.endsWith("/")||(t+="/"),this.resetPasswordButton.postJSON(t,{email:this.emailInput.getValue().trim()}).then(function(){},function(t){return e.emailFormField.setError(t.message)})}}]),t}(Lc.Element),OV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{ratingBands:[{color:"#AA0000",minRating:2900,maxRating:5e3},{color:"#FF3333",minRating:2600,maxRating:2900},{color:"#FF7777",minRating:2400,maxRating:2600},{color:"#FFBB55",minRating:2300,maxRating:2400},{color:"#FFCC88",minRating:2200,maxRating:2300},{color:"#FF88FF",minRating:1900,maxRating:2200},{color:"#AAAAFF",minRating:1600,maxRating:1900},{color:"#77DDBB",minRating:1400,maxRating:1600},{color:"#77FF77",minRating:1200,maxRating:1400},{color:"#CCCCCC",minRating:0,maxRating:1200}],interpolation:"linear"}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("pointer-events","none"),e.setAttribute("clip-path",this.options.chart.clipPath),e}},{key:"getRatingBands",value:function(){var e=this;if(this.ratingBands=[],this.showBandsAsPaths=!0,this.showBandsAsPaths){this.areaPathGenerator=Vo().y0(function(t){return e.options.chart.yAxisOptions.scale(t.minRating)}).y1(function(t){return e.options.chart.yAxisOptions.scale(t.maxRating)}).x(function(e){return e.x});for(var t=0;t<this.options.ratingBands.length;t+=1){var n=this.options.ratingBands[t];this.ratingBands[t]=Lc.createElement(ag.Path,{ref:this.refLinkArray("ratingBands",t),d:this.areaPathGenerator([Object.assign({},n,{x:this.options.chart.xAxisOptions.scale.range()[0]}),Object.assign({},n,{x:this.options.chart.xAxisOptions.scale.range()[1]})]),fill:n.color,stroke:"none"})}}else for(var i=0;i<this.options.ratingBands.length;i+=1){var r=this.options.ratingBands[i];this.ratingBands[i]=Lc.createElement(ag.Rect,{ref:this.refLinkArray("ratingBands",i),x:this.options.chart.xAxisOptions.scale.range()[0],y:this.options.chart.yAxisOptions.scale(r.maxRating),width:this.options.chart.xAxisOptions.scale.range()[1]-this.options.chart.xAxisOptions.scale.range()[0],height:this.options.chart.yAxisOptions.scale(r.minRating)-this.options.chart.yAxisOptions.scale(r.maxRating),fill:r.color,stroke:"none"})}return this.ratingBands}},{key:"render",value:function(){return this.getRatingBands()}}]),t}(ag.Group),RV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{domainPadding:[.4,.25],paddingYOnNoPoints:500,zoomScaleExtent:[1,50]})}},{key:"defaultYNoPoints",value:function(){return[1e3,3e3]}},{key:"getBackground",value:function(){return Lc.createElement(OV,{ref:this.refLink("background"),chart:this})}}]),t}(PU),MV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{fill:"white",radius:5,stroke:"rgba(0, 0, 0, .5)",strokeWidth:1.5,style:{cursor:"pointer"}})}},{key:"getPopupTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.data,t=e.contestName.replace("Codeforces","CF").replace("<br>","\n");return Lc.createElement("a",{href:"http://codeforces.com/contest/"+e.contestId,target:"_blank"},t)}},{key:"getPopupContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.data;return[Lc.createElement("p",null,"Rating: "+e.newRating+" ("+e.ratingChange+")"),Lc.createElement("p",null,"Title: "+e.title),Lc.createElement("a",{href:"http://codeforces.com"+e.contestUrl,target:"_blank"},"Contest rank: "+e.rank)]}},{key:"getPopupPosition",value:function(){var e=this.getBoundingClientRect();return{x:e.left+e.width/2,y:e.bottom-.1*e.height}}},{key:"isPopupVisible",value:function(){var e=this.parent.options.chart.interactiveLayer.getBoundingClientRect(),t=this.getPopupPosition();return e.left<=t.x&&t.x<=e.right&&e.top<=t.y&&t.y<=e.bottom}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(t){if(t.preventDefault(),t.stopPropagation(),e.popup&&e.popup.isInDocument())return void e.popup.hide();e.popup=Gw.create(document.body,Object.assign({title:e.getPopupTitle(),children:e.getPopupContent(),transitionTime:300,titleFontSize:"9pt",contentFontSize:"9pt",style:{minWidth:"180px",maxWidth:"250px"}},e.getPopupPosition()))})}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.popup&&(this.popup.isInDocument()&&this.popup.setCenter(this.getPopupPosition()),this.isPopupVisible()||this.popup.hide())}}]),t}(LU),PV=IU(MV),DV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.chartOptions={height:500,width:970},this.options.data.hasOwnProperty("result")||(this.options.data.result=[]),this.plotOptions={pointsAlias:function(e){return e.result},xCoordinateAlias:function(e){return e.contestTime},yCoordinateAlias:function(e){return e.newRating}},this.linePlotOptions=Object.assign({},this.plotOptions,{stroke:"rgba(0, 0, 0, .5)",strokeWidth:2.5})}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("height",this.chartOptions.height),e.setAttribute("width",this.chartOptions.width),e}},{key:"render",value:function(){return[Lc.createElement(RV,{chartOptions:Object.assign({},this.chartOptions),plotOptions:this.plotOptions,data:this.options.data},Lc.createElement(AU,{plotOptions:this.linePlotOptions,data:this.options.data}),Lc.createElement(PV,{plotOptions:this.plotOptions,data:this.options.data}))]}}]),t}(ag.SVGRoot),BV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{ratingBands:window.RATING_BANDS,interpolation:"linear"}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("pointer-events","none"),e.setAttribute("clip-path",this.options.chart.clipPath),e}},{key:"getRatingBands",value:function(){var e=this;if(this.ratingBands=[],this.showBandsAsPaths=!0,this.showBandsAsPaths){this.areaPathGenerator=Vo().y0(function(t){return e.options.chart.yAxisOptions.scale(t.minRating)}).y1(function(t){return e.options.chart.yAxisOptions.scale(t.maxRating)}).x(function(e){return e.x});for(var t=0;t<this.options.ratingBands.length;t+=1){var n=this.options.ratingBands[t];this.ratingBands[t]=Lc.createElement(ag.Path,{ref:this.refLinkArray("ratingBands",t),d:this.areaPathGenerator([Object.assign({},n,{x:this.options.chart.xAxisOptions.scale.range()[0]}),Object.assign({},n,{x:this.options.chart.xAxisOptions.scale.range()[1]})]),fill:n.color,stroke:"none"})}}else for(var i=0;i<this.options.ratingBands.length;i+=1){var r=this.options.ratingBands[i];this.ratingBands[i]=Lc.createElement(ag.Rect,{ref:this.refLinkArray("ratingBands",i),x:this.options.chart.xAxisOptions.scale.range()[0],y:this.options.chart.yAxisOptions.scale(r.maxRating),width:this.options.chart.xAxisOptions.scale.range()[1]-this.options.chart.xAxisOptions.scale.range()[0],height:this.options.chart.yAxisOptions.scale(r.minRating)-this.options.chart.yAxisOptions.scale(r.maxRating),fill:r.color,stroke:"none"})}return this.ratingBands}},{key:"render",value:function(){return this.getRatingBands()}}]),t}(ag.Group),_V=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{domainPadding:[.4,.25],zoomScaleExtent:[1,20]})}},{key:"getYAxisDomain",value:function(e,t){if(!Array.isArray(e)||0===e.length)return[1450,1750];var n=this.getMinMaxDomain(e,t,200);return[Math.min(n[0],1450),Math.max(n[1],1750)]}},{key:"getBackground",value:function(){return Lc.createElement(BV,{ref:this.refLink("background"),chart:this})}}]),t}(PU),FV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{fill:"white",radius:5,stroke:"rgba(0, 0, 0, .5)",strokeWidth:1.5,style:{cursor:"pointer"}})}},{key:"getPopupTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.data;return Lc.createElement("a",{href:"/contest/"+e.contestURL,target:"_blank"},e.contest)}},{key:"getPopupContent",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.data,n=Math.floor(t.rating)-Math.floor(t.oldRating);e=n<0?{color:"red"}:{color:"green"};var i=Lc.createElement("span",{style:e},(n>0?"+":"")+n);return[Lc.createElement("p",null,"Rating: "+Math.floor(t.rating)," (",i,")"),Lc.createElement("a",{href:"/contest/"+t.contestURL+"/scoreboard",target:"_blank"},"Contest rank: "+t.rank)]}},{
key:"getPopupPosition",value:function(){var e=this.getBoundingClientRect();return{x:e.left+e.width/2,y:e.bottom-.1*e.height}}},{key:"isPopupVisible",value:function(){var e=this.parent.options.chart.interactiveLayer.getBoundingClientRect(),t=this.getPopupPosition();return e.left<=t.x&&t.x<=e.right&&e.top<=t.y&&t.y<=e.bottom}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(t){if(t.preventDefault(),t.stopPropagation(),e.popup&&e.popup.isInDocument())return void e.popup.hide();e.popup=Gw.create(document.body,Object.assign({title:e.getPopupTitle(),children:e.getPopupContent(),transitionTime:300,titleFontSize:"9pt",contentFontSize:"9pt",style:{maxWidth:"270px"}},e.getPopupPosition()))})}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.popup&&(this.popup.isInDocument()&&this.popup.setCenter(this.getPopupPosition()),this.isPopupVisible()||this.popup.hide())}}]),t}(LU),UV=IU(FV),zV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){var n=this;w(d(t.prototype),"setOptions",this).call(this,e),this.chartOptions={height:500,width:970},this.options.data.hasOwnProperty("contestHistory")||(this.options.data.contestHistory=[]),this.plotOptions={pointsAlias:function(e){return e.contestHistory},xCoordinateAlias:function(e){return 1e3*e.contestEndDate},yCoordinateAlias:function(e){return Math.floor(e.rating)}},this.plotOptions.pointsAlias(this.options.data).sort(function(e,t){return n.plotOptions.xCoordinateAlias(e)-n.plotOptions.xCoordinateAlias(t)}),this.linePlotOptions=Object.assign({},this.plotOptions,{stroke:"rgba(0, 0, 0, .5)",strokeWidth:2.5})}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setAttribute("height",this.chartOptions.height),e.setAttribute("width",this.chartOptions.width),e}},{key:"render",value:function(){return[Lc.createElement(_V,{chartOptions:Object.assign({},this.chartOptions),plotOptions:this.plotOptions,data:this.options.data},Lc.createElement(AU,{plotOptions:this.linePlotOptions,data:this.options.data}),Lc.createElement(UV,{plotOptions:this.plotOptions,data:this.options.data}))]}}]),t}(ag.SVGRoot),WV=Lc.Primitive(Ed,"a"),HV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTaskLinks",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=bC.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.userId===this.options.user.id&&o.solved&&e.push(Lc.createElement(WV,{style:{margin:"4px",display:"inline-block"},target:"_blank",href:"/contest/archive/task/"+EC.get(o.evalTaskId).urlName,level:Pc.INFO},EC.get(o.evalTaskId).longName))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getContestLinks",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=VS.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o.userId===this.options.user.id){var s=o.getBaseContest();e.push(Lc.createElement("p",null,Lc.createElement(Xd,{href:"/contest/"+s.name,value:s.longName})))}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"render",value:function(){var e=this;if(this.options.loaded){var t=this.getTaskLinks(),n=this.getContestLinks();return[Lc.createElement("h3",null,Lc.T("Activity")),Lc.createElement("h4",{style:{"margin-left":"35px"}},Lc.T("Algorithms")),Lc.createElement("div",{style:{"margin-bottom":"20px",display:"inline-flex"}},Lc.createElement("div",{style:{width:"40%","margin-left":"50px",display:"inline-block"}},Lc.createElement("span",{style:{"font-size":"1.3em","margin-bottom":"10px"}},Lc.T("Problems solved"),": ",t.length),Lc.createElement("div",{style:{"max-height":"200px","overflow-y":"auto","overflow-x":"none","background-color":"#f3f4f6",padding:"5px","font-size":"1.2em"}},t)),Lc.createElement("div",{style:{width:"40%","margin-left":"20px",display:"inline-block"}},Lc.createElement("span",{style:{"font-size":"1.3em","margin-bottom":"10px"}},Lc.T("Contest history"),": ",n.length),Lc.createElement("div",{style:{"max-height":"200px","overflow-y":"auto","overflow-x":"none","background-color":"#f3f4f6",padding:"5px","font-size":"1.2em"}},n)))]}return this.options.errorInLoading?[Lc.createElement("h3",null,Lc.T("Activity")),Lc.createElement("p",{style:{marginLeft:"50px"}},"Error in loading activity")]:(zu.getJSON("/accounts/user_activity/",{userId:this.options.user.id}).then(function(){return e.updateOptions({loaded:!0})},function(){return e.updateOptions({errorInLoading:!0})}),[Lc.createElement("h3",null,Lc.T("Activity")),Lc.createElement("p",{style:{marginLeft:"50px"}},"Loading...")])}}]),t}(Lc.Element),VV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=[Lc.createElement("p",null,"Username: ",Lc.createElement(sE,{style:{display:"inline"},userId:this.options.user.id}))];if(""!=this.options.user.name&&e.push(Lc.createElement("p",null,"Name: "+this.options.user.name)),this.options.user.globalRatingRank?e.push(Lc.createElement("p",null," ",Lc.createElement(Xd,{href:"/ratings/",value:"Rank: "+this.options.user.globalRatingRank})," ")):e.push(Lc.createElement("p",null,"Rank: N/A")),this.options.user.countryId){var t=this.options.user.getCountry();e.push(Lc.createElement("p",null," Country: ",t.name,Lc.createElement(Lc.Emoji,{style:{paddingLeft:"3px"},title:t.name,value:t.getEmojiName(),height:"1.6em",width:"1.6em"})))}var n=[];return this.options.user.rating&&(e.push(Lc.createElement("p",null,"Rating: "+this.options.user.rating)),n.push(Lc.createElement("h3",null,"Rating")),n.push(Lc.createElement(zV,{ref:"rating",data:this.options.user}))),[Lc.createElement("h3",null,"General Info"),Lc.createElement("div",{style:{marginLeft:"50px"}},e),Lc.createElement(HV,{user:this.options.user,active:!1})].concat(n)}}]),t}(jd),GV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=[];return this.options.user.codeforcesRating.result&&this.options.user.codeforcesRating.result.length>0&&(e.push(Lc.createElement("h4",null,"Rating")),e.push(Lc.createElement(DV,{data:this.options.user.codeforcesRating}))),[Lc.createElement("h3",null,"Codeforces Profile"),Lc.createElement("div",{style:{marginLeft:"50px"}},Lc.createElement("p",null,"Handle: ",Lc.createElement("a",{href:"http://codeforces.com/profile/"+this.options.user.codeforcesHandle,target:"_blank"},this.options.user.codeforcesHandle)))].concat(e)}}]),t}(jd),jV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.SMALL)}},{key:"getSwitcher",value:function(e){return Lc.createElement(Of,{ref:"switcherArea",style:{display:"table"},lazyRender:this.options.lazyRender},e)}},{key:"setUser",value:function(e){this.user=e}},{key:"render",value:function(){return this.setUser(sk.get(this.options.userId)),this.options.children=[Lc.createElement(VV,{title:"Profile",user:this.user,active:!0})],this.user.codeforcesRating&&this.options.children.push(Lc.createElement(GV,{title:"External profiles",user:this.user})),this.options.children}},{key:"getChildrenToRender",value:function(){var e=[];return this.options.userId==USER.id&&(USER.username||e.push(Lc.createElement("h3",null,"You don't have a username set, please edit your profile")),e.push(Lc.createElement("h4",null,"To edit your account settings, please ",Lc.createElement(Xd,{href:"/accounts/settings/general/"},"click here")))),[e,w(d(t.prototype),"getChildrenToRender",this).call(this)]}}]),t}(Gb),YV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Delete workspace"}},{key:"getActionName",value:function(){return"Delete"}},{key:"getBody",value:function(){return Lc.createElement("p",null,"Are you sure you want to delete ",this.options.workspace.name,"?")}},{key:"action",value:function(){var e=this.options.workspace.getBaseRequest();zu.postJSON("/workspace/delete/",e).then(function(){tC.applyDeleteEvent({type:"delete",objectId:e.workspaceId})}),this.hide()}}]),t}(Zg),JV=$g(YV),qV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){var e,t;return this.isEditing?(e=Lc.createElement(vg,{ref:"workspaceNameInput",value:this.options.workspace.name,className:"text-center",style:{width:"80%",marginTop:"-3px",marginBottom:"-3px",display:"inline-table",outline:"none",border:0}}),t=Lc.createElement("span",{ref:"settingsButton",className:"fa fa-floppy-o",style:{cursor:"pointer",margin:"3px"}})):(e=this.options.title||this.options.workspace.name,t=Lc.createElement("span",{ref:"settingsButton",className:"fa fa-pencil",style:{cursor:"pointer",margin:"3px",color:$c.Global.COLOR_BACKGROUND}})),[Lc.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",textTransform:"initial"}},e,t)]}},{key:"getDefaultOptions",value:function(e){return{size:Dc.LARGE}}},{key:"render",value:function(){var e=this,t=[];if(this.options.workspace.getFiles().length>0){var n=!0,i=!1,r=void 0;try{for(var a,o=this.options.workspace.getFiles()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.hasTemporaryId()||t.push(Lc.createElement("p",null,s.name))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}else t.push(Lc.createElement("p",null,"No files"));var l=Lc.createElement("div",null,Lc.createElement("hr",{style:{marginTop:0,marginBottom:"5px"}}),Lc.createElement("div",null,Lc.createElement("h5",{style:{color:"#AAA","white-space":"nowrap",textAlign:"left",paddingLeft:"12px"}},Lc.T("Updated")," ",Lc.createElement(np,{timeStamp:this.options.workspace.getLastUpdate()})),Lc.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"5px 10px"}},Lc.createElement(Md,{level:Pc.PRIMARY,label:Lc.T("Open"),onClick:function(){return nm.changeURL(["workspace",e.options.workspace.id])}}),Lc.createElement(JV,{faIcon:"trash",level:Pc.DANGER,style:{marginLeft:"7px"},modalOptions:{workspace:this.options.workspace}}))));return[Lc.createElement("div",{style:{overflow:"auto",height:"145px"}},t),l]}},{key:"saveChanges",value:function(){var e=this.options.workspace.getBaseRequest();this.workspaceNameInput&&this.workspaceNameInput.getValue()!==this.options.workspace.name&&(e.name=this.workspaceNameInput.getValue(),zu.postJSON("/workspace/edit/",e))}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.options.workspace.addUpdateListener(function(){e.redraw()}),this.attachListener(iC,"updateOrCreate",function(t){t.getWorkspace().id===e.options.workspace.id&&e.redraw()}),this.settingsButton.addClickListener(function(){e.isEditing=!e.isEditing,e.isEditing||e.saveChanges(),e.redraw(),e.isEditing&&(e.workspaceNameInput.node.focus(),e.workspaceNameInput.node.select(),e.workspaceNameInput.addNodeListener("keypress",function(t){13===t.keyCode&&(e.isEditing=!1,e.saveChanges(),e.redraw())}))})}}]),t}(ub),XV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.createElement("div",{style:{height:"26px"}},Lc.createElement(vg,{ref:"workspaceNameInput",placeholder:"Title",className:"text-center",style:{height:"100%",width:"90%",border:"0",outline:"none"}}))}},{key:"render",value:function(){var e=this;return[Lc.createElement("div",{style:{paddingTop:"85px"}},Lc.createElement(Md,{faIcon:"plus",level:Pc.SUCCESS,size:Dc.LARGE,onClick:function(){e.createWorkspace()}}),Lc.createElement("p",null,Lc.T("Create new workspace")))]}},{key:"getDefaultOptions",value:function(e){return{size:Dc.LARGE,headingCentered:!0}}},{key:"createWorkspace",value:function(){zu.postJSON("/workspace/create/",{name:this.workspaceNameInput.getValue()}).then(function(e){return nm.changeURL(["workspace",e.workspaceId])})}}]),t}(ub),KV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass("text-center"),e.setStyle({width:"1200px",maxWidth:"100%",margin:"0 auto",display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center"})}},{key:"render",value:function(){var e={width:"350px",height:"262px",margin:"25px"},t=[],n=tC.getUserWorkspaces().sort(function(e,t){return t.lastModified-e.lastModified});t.push(Lc.createElement(XV,{style:e}));var i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;t.push(Lc.createElement(qV,{key:l.id,workspace:l,style:e}))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return t}},{key:"onMount",value:function(){var e=this;this.attachListener(tC,"create",function(){e.redraw()}),this.attachListener(tC,"delete",function(){e.redraw()})}}]),t}(jd),QV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{fullHeight:!0})}},{key:"getRoutes",value:function(){return this.routes=this.routes||new im(null,KV,[new im("%s",function(e){var t=tC.get(parseInt(e.args[0]));return t&&Lc.createElement(pO,{workspace:t,plugins:VN.GLOBAL})})]),this.routes}}]),t}(nm),ZV=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{height:"100%",width:"100%"}}}},{key:"getWorkspace",value:function(){return this.options.workspace||(this.options.workspace=tC.createVirtualWorkspace()),this.options.workspace}},{key:"render",value:function(){return this.workspaceIDE||Lc.createElement("h1",null,Lc.T("Loading the workspace")," ",Lc.createElement("i",{className:"fa fa-spinner fa-spin"}))}},{key:"setURL",value:function(e){2===e.length&&"fork"===e[0]?this.getCustomRun(e[1]):(this.workspaceIDE=Lc.createElement(pO,{workspace:this.getWorkspace(),plugins:VN.GLOBAL}),this.redraw()),nm.changeURL(["workspace"],!0)}},{key:"getCustomRun",value:function(e){var t=this;zu.postJSON("/eval/get_custom_run/",{urlHash:e}).then(function(e){var n=sN.get(e.customRunId);t.options.workspace.createFile(n.sourceName,n.sourceText),n.stdin&&t.options.workspace.createFile(".stdin",n.stdin),t.workspaceIDE=Lc.createElement(pO,{workspace:t.options.workspace,plugins:VN.GLOBAL}),t.redraw()},function(e){t.workspaceIDE=Lc.createElement("h1",null,"Error: ",e.message),t.redraw()})}}]),t}(Lc.Element),$V=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({height:"100%"})}},{key:"renderLoaded",value:function(){return USER.isAuthenticated?Lc.createElement(QV,{ref:"workspaceManager"}):Lc.createElement(ZV,{ref:"workspaceManager"})}},{key:"setURL",value:function(e){this.workspaceManager?this.workspaceManager.setURL(e):this.initialUrlParts=e}},{key:"onDelayedMount",value:function(){this.setURL(this.initialUrlParts)}}]),t}(iT(Lc.Element)),eG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.name}}]),t}(fp),tG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"registerStreams",value:function(){cp.registerStream("admin-email-manager")}}]),t}(mp),nG=new tG("EmailGateway",eG),iG=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.fields=["name","host","port","useTLS","username"],n}return h(t,e),o(t,[{key:"getBody",value:function(){var e=this.options.gateway||{};return[Lc.createElement(Nb,{label:"Name",ref:"nameField"},Lc.createElement(vg,{value:e.name||"",ref:"nameInput"})),Lc.createElement(Nb,{label:"Host",ref:"hostField"},Lc.createElement(vg,{value:e.host||"",ref:"hostInput"})),Lc.createElement(Nb,{label:"Port",ref:"portField"},Lc.createElement(yg,{value:e.port||"",ref:"portInput"})),Lc.createElement(Nb,{label:"Use TLS",ref:"useTLSField"},Lc.createElement(Eg,{value:e.useTLS||"",ref:"useTLSInput"})),Lc.createElement(Nb,{label:"Username",ref:"usernameField"},Lc.createElement(vg,{value:e.username||"",ref:"usernameInput"})),Lc.createElement(Nb,{label:"Password",ref:"passwordField"},Lc.createElement(kg,{value:e.password||"",ref:"passwordInput"}))]}},{key:"action",value:function(){var e=this,t={action:this.getAjaxAction(),objectType:"gateway",name:this.nameInput.getValue(),host:this.hostInput.getValue(),port:this.portInput.getValue(),useTLS:this.useTLSInput.getValue(),username:this.usernameInput.getValue(),password:this.passwordInput.getValue(),id:this.options.gateway?this.options.gateway.id:null};zu.postJSON("/email/control/",t).then(function(){return e.hide()},function(t){t.fieldName&&(t.message+=" ("+t.fieldName+")"),e.messageArea.showMessage(t.message,"red")})}}]),t}(Zg),rG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"New Email gateway"}},{key:"getActionName",value:function(){return"Add Email gateway"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getAjaxAction",value:function(){return"new"}}]),t}(iG),aG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Edit Email gateway"}},{key:"getActionName",value:function(){return"Save Email gateway"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getAjaxAction",value:function(){return"update"}}]),t}(iG),oG=function(e){function t(e){return r(this,t),b(this,d(t).call(this,e))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement("div",null,this.getActionText())]}},{key:"action",value:function(){var e=this,t={action:this.getAjaxAction(),objectType:"gateway",id:this.options.gateway?this.options.gateway.id:null};zu.postJSON("/email/control/",t).then(function(){return e.hide()},function(t){t.fieldName&&(t.message+=" ("+t.fieldName+")"),e.messageArea.showMessage(t.message,"red")})}},{key:"getActionName",value:function(){return"Confirm!"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}}]),t}(Zg),sG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionText",value:function(){return"Are you sure you want to delete this entry?"}},{key:"getAjaxAction",value:function(){return"delete"}}]),t}(oG),lG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.deleteGatewayButton.addClickListener(function(){Lc.createElement(sG,{gateway:e.options.entry}).show()}),this.editGatewayButton.addClickListener(function(){Lc.createElement(aG,{gateway:e.options.entry}).show()})}}]),t}(mb),uG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getRowClass",value:function(){return lG}},{key:"getEntries",value:function(){return nG.all()}},{key:"setColumns",value:function(e){if(!e||0===e.length){var n={textAlign:"center"},i={textAlign:"center",width:"16%"},r=function(e){return Lc.createElement(Md,{level:Pc.DANGER,ref:"deleteGatewayButton"},"Delete")},a=function(e){return Lc.createElement(Md,{level:Pc.INFO,ref:"editGatewayButton"},"Edit")};e.push({value:function(e){return e.name},headerName:Lc.T("Name"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.host},headerName:Lc.T("Host"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.port},headerName:Lc.T("Port"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.useTLS},headerName:Lc.T("Use TLS"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.username},headerName:Lc.T("Username"),cellStyle:n,headerStyle:i}),e.push({value:r,headerName:"Delete",headerStyle:{width:"10%"}}),e.push({value:a,headerName:"Edit",headerStyle:{width:"10%"}})}w(d(t.prototype),"setColumns",this).call(this,e)}},{key:"onMount",value:function(){var e=this;nG.addUpdateListener(function(){e.redraw()}),nG.addDeleteListener(function(){e.redraw()}),nG.addCreateListener(function(){e.redraw()})}}]),t}(Tb),cG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(uG,null),Lc.createElement(Md,{level:Pc.SUCCESS,ref:"addGatewayButton"},"Add Gateway")]}},{key:"onMount",value:function(){nG.registerStreams(),this.addGatewayButton.addClickListener(function(){Lc.createElement(rG,null).show()})}}]),t}(jd),hG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.name}}]),t}(fp),dG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"registerStreams",value:function(){cp.registerStream("admin-email-manager")}}]),t}(mp),pG=new dG("EmailCampaign",hG),fG=function(e){function t(e){return r(this,t),b(this,d(t).call(this,e))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement("div",null,this.getActionText())]}},{key:"action",value:function(){var e=this,t={action:this.getAjaxAction(),objectType:"campaign",id:this.options.campaign?this.options.campaign.id:null};zu.postJSON("/email/control/",t).then(function(){return e.hide()},function(t){t.fieldName&&(t.message+=" ("+t.fieldName+")"),e.messageArea.showMessage(t.message,"red")})}},{key:"getActionName",value:function(){return"Confirm!"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}}]),t}(Zg),gG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionText",value:function(){return"Are you sure you want to delete this entry?"}},{key:"getAjaxAction",value:function(){return"delete"}}]),t}(fG),mG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionText",value:function(){return"Are you sure you want to clear all status for this entry?"}},{key:"getAjaxAction",value:function(){return"clearStatus"}}]),t}(fG),vG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionText",value:function(){return"Are you sure you want to start sending this email campaign?"}},{key:"getAjaxAction",value:function(){return"start"}}]),t}(fG),yG=function(e){function t(e){return r(this,t),b(this,d(t).call(this,e))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement(Nb,{label:"Receiver id",ref:"receiverIdField"},Lc.createElement(vg,{ref:"receiverIdInput"}))]}},{key:"action",value:function(){var e=this,t={action:"test",objectType:"campaign",receiverId:this.receiverIdInput.getValue(),id:this.options.campaign?this.options.campaign.id:null};zu.postJSON("/email/control/",t).then(function(){return e.hide()},function(t){t.fieldName&&(t.message+=" ("+t.fieldName+")"),e.messageArea.showMessage(t.message,"red")})}},{key:"getTitle",value:function(){return"Campaign send test"}},{key:"getActionName",value:function(){return"Send test emails!"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}}]),t}(Zg),bG=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.fields=["name","fromAddress","gatewayId","isNewsletter"],n}return h(t,e),o(t,[{key:"getBody",value:function(){var e=this.options.campaign||{};return[Lc.createElement(Nb,{label:"Name",ref:"nameField"},Lc.createElement(vg,{value:e.name||"",ref:"nameInput"})),Lc.createElement(Nb,{label:"From address",ref:"fromAddressField"},Lc.createElement(vg,{value:e.fromAddress||"",ref:"fromAddressInput"})),Lc.createElement(Nb,{label:"Gateway",ref:"gatewayIdField"},Lc.createElement(Gg,{ref:"gatewaySelect",options:nG.all(),selected:nG.get(e.gatewayId)})),Lc.createElement(Nb,{label:"Is newsletter",ref:"isNewsletterField"},Lc.createElement(Eg,{value:e.isNewsletter||"",ref:"isNewsletterInput"}))]}},{key:"action",value:function(){var e=this,t={action:this.getAjaxAction(),objectType:"campaign",name:this.nameInput.getValue(),fromAddress:this.fromAddressInput.getValue(),gatewayId:this.gatewaySelect.get().id,isNewsletter:this.isNewsletterInput.getValue(),id:this.options.campaign?this.options.campaign.id:null};zu.postJSON("/email/control/",t).then(function(){return e.hide()},function(t){t.fieldName&&(t.message+=" ("+t.fieldName+")"),e.messageArea.showMessage(t.message,"red")})}}]),t}(Zg),kG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"New Email campaign"}},{key:"getActionName",value:function(){return"Add Email campaign"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getAjaxAction",value:function(){return"new"}}]),t}(bG),wG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Edit Email campaign"}},{key:"getActionName",value:function(){return"Save Email campaign"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getAjaxAction",value:function(){return"update"}}]),t}(bG),EG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.deleteCampaignButton.addClickListener(function(){Lc.createElement(gG,{campaign:e.options.entry}).show()}),this.editCampaignButton.addClickListener(function(){Lc.createElement(wG,{campaign:e.options.entry}).show()}),this.testSendCampaignButton.addClickListener(function(){Lc.createElement(yG,{campaign:e.options.entry}).show()}),this.sendCampaignButton.addClickListener(function(){Lc.createElement(vG,{campaign:e.options.entry}).show()}),this.clearStatusCampaignButton.addClickListener(function(){Lc.createElement(mG,{campaign:e.options.entry}).show()})}}]),t}(mb),SG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getRowClass",value:function(){return EG}},{key:"getEntries",value:function(){return pG.all()}},{key:"setColumns",value:function(e){if(!e||0===e.length){var n={textAlign:"center"},i={textAlign:"center",width:"20%"},r=function(e){return Lc.createElement(Md,{level:Pc.DANGER,ref:"deleteCampaignButton"},"Delete")},a=function(e){return Lc.createElement(Md,{level:Pc.INFO,ref:"editCampaignButton"},"Edit")},o=function(e){return Lc.createElement(Md,{level:Pc.INFO,ref:"testSendCampaignButton"},"Test Send")},s=function(e){return Lc.createElement(Md,{level:Pc.INFO,ref:"sendCampaignButton"},"Send")},l=function(e){return Lc.createElement(Md,{level:Pc.DANGER,ref:"clearStatusCampaignButton"},"Clear Status")};e.push({value:function(e){return e.name},headerName:Lc.T("Name"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.fromAddress},headerName:Lc.T("From Address"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.isNewsletter},headerName:Lc.T("Is Newsletter"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.gatewayId&&nG.get(e.gatewayId).name||"default"},headerName:Lc.T("Gateway"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.emailsRead},headerName:Lc.T("Emails Read"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return e.emailsSent},headerName:Lc.T("Emails Sent"),cellStyle:n,headerStyle:i}),e.push({value:r,headerName:"Delete",headerStyle:{width:"10%"}}),e.push({value:a,headerName:"Edit",headerStyle:{width:"10%"}}),e.push({value:o,headerName:"Test Send",headerStyle:{width:"10%"}}),e.push({value:s,headerName:"Send",headerStyle:{width:"10%"}}),e.push({value:l,headerName:"Clear Status",headerStyle:{width:"10%"}})}w(d(t.prototype),"setColumns",this).call(this,e)}},{key:"onMount",value:function(){var e=this;pG.addUpdateListener(function(){e.redraw()}),pG.addCreateListener(function(){e.redraw()}),pG.addDeleteListener(function(){e.redraw()})}}]),t}(Tb),CG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(SG,null),Lc.createElement(Md,{level:Pc.SUCCESS,ref:"addCampaignButton"},"Add Campaign")]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),nG.registerStreams(),pG.registerStreams(),this.addCampaignButton.addClickListener(function(){Lc.createElement(kG,{campaign:e.options.entry}).show()})}}]),t}(jd),xG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),TG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"registerStreams",value:function(){cp.registerStream("admin-email-manager")}}]),t}(mp),AG=new TG("EmailTemplate",xG),LG=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.fields=["subject","html","campaignId","languageId","gatewayId"],n}return h(t,e),o(t,[{key:"getModalWindowStyle",value:function(){return Object.assign({},w(d(t.prototype),"getModalWindowStyle",this).call(this),{height:"90vh",width:"70vw",display:"flex",flexDirection:"column"})}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.header},this.getHeader()),this.getBody()?Lc.createElement("div",{className:this.styleSheet.body,style:{flex:"1",display:"flex",flexDirection:"column"}},this.getBody()):null,this.getFooter()?Lc.createElement("div",{className:this.styleSheet.footer},this.getFooter()):null]}},{key:"getBody",value:function(){var e=this.options.template||{};return[Lc.createElement(Nb,{label:"Subject",ref:"subjectField",style:{margin:"initial"}},Lc.createElement(vg,{value:e.subject||"",ref:"subjectInput"})),Lc.createElement(Nb,{label:"Campaign",ref:"campaignIdField",style:{margin:"initial"}},Lc.createElement(Gg,{ref:"campaignSelect",options:pG.all(),selected:pG.get(e.campaignId)})),Lc.createElement(Nb,{label:"Language",ref:"languageIdField",style:{margin:"initial"}},Lc.createElement(Gg,{ref:"languageSelect",options:fk.all(),selected:fk.get(e.languageId)})),Lc.createElement(Nb,{label:"Gateway",ref:"gatewayIdField",style:{margin:"initial"}},Lc.createElement(Gg,{ref:"gatewaySelect",options:nG.all(),selected:nG.get(e.gatewayId)})),Lc.createElement(Nb,{label:"Html",ref:"htmlField",inline:!1,style:{margin:"initial"}}),Lc.createElement(tb,{orientation:Rc.HORIZONTAL,style:{width:"100%",flex:"1"}},Lc.createElement("div",{style:{width:"50%",height:"100%",overflow:"hidden"}},Lc.createElement(Vg,{value:e.html||"",ref:"htmlInput",style:{height:"100%",width:"100%",resize:"none"}})),Lc.createElement("div",{style:{width:"50%",height:"100%",overflow:"auto",position:"relative"}},Lc.createElement(jd,{ref:"htmlRenderer",style:{height:"100%",position:"absolute"}})))]}},{key:"action",value:function(){var e=this,t={action:this.getAjaxAction(),objectType:"template",subject:this.subjectInput.getValue(),html:this.htmlInput.getValue(),campaignId:this.campaignSelect.get().id,languageId:this.languageSelect.get().id,gatewayId:this.gatewaySelect.get().id,id:this.options.template?this.options.template.id:null};zu.postJSON("/email/control/",t).then(function(){return e.hide()},function(t){t.fieldName&&(t.message+=" ("+t.fieldName+")"),e.messageArea.showMessage(t.message,"red")})}},{key:"onMount",value:function(){var e=this;this.htmlRenderer.node.innerHTML=this.htmlInput.getValue(),this.htmlInput.addNodeListener("keyup",function(){e.htmlRenderer.node.innerHTML=e.htmlInput.getValue()}),this.htmlInput.addNodeListener("change",function(){e.htmlRenderer.node.innerHTML=e.htmlInput.getValue()})}}]),t}(Zg),IG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}
return h(t,e),o(t,[{key:"getTitle",value:function(){return"New Email template"}},{key:"getActionName",value:function(){return"Add Email template"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getAjaxAction",value:function(){return"new"}}]),t}(LG),NG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Edit Email template"}},{key:"getActionName",value:function(){return"Save Email template"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"getAjaxAction",value:function(){return"update"}}]),t}(LG),OG=function(e){function t(e){return r(this,t),b(this,d(t).call(this,e))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement("div",null,this.getActionText())]}},{key:"action",value:function(){var e=this,t={action:this.getAjaxAction(),objectType:"template",id:this.options.template?this.options.template.id:null};zu.postJSON("/email/control/",t).then(function(){return e.hide()},function(t){t.fieldName&&(t.message+=" ("+t.fieldName+")"),e.messageArea.showMessage(t.message,"red")})}},{key:"getActionName",value:function(){return"Confirm!"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}}]),t}(Zg),RG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionText",value:function(){return"Are you sure you want to delete this entry?"}},{key:"getAjaxAction",value:function(){return"delete"}}]),t}(OG),MG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.deleteTemplateButton.addClickListener(function(){Lc.createElement(RG,{template:e.options.entry}).show()}),this.editTemplateButton.addClickListener(function(){Lc.createElement(NG,{template:e.options.entry}).show()})}}]),t}(mb),PG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getRowClass",value:function(){return MG}},{key:"getEntries",value:function(){return AG.all()}},{key:"setColumns",value:function(e){if(!e||0===e.length){var n={textAlign:"center"},i={textAlign:"center",width:"20%"},r=function(e){return Lc.createElement(Md,{level:Pc.DANGER,ref:"deleteTemplateButton"},"Delete")},a=function(e){return Lc.createElement(Md,{level:Pc.INFO,ref:"editTemplateButton"},"Edit")};e.push({value:function(e){return e.subject},headerName:Lc.T("Subject"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return pG.get(e.campaignId).name},headerName:Lc.T("Campaign"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return fk.get(e.languageId).name},headerName:Lc.T("Language"),cellStyle:n,headerStyle:i}),e.push({value:function(e){return nG.get(e.gatewayId).name},headerName:Lc.T("Gateway"),cellStyle:n,headerStyle:i}),e.push({value:r,headerName:"Delete",headerStyle:{width:"10%"}}),e.push({value:a,headerName:"Edit",headerStyle:{width:"10%"}})}w(d(t.prototype),"setColumns",this).call(this,e)}},{key:"onMount",value:function(){var e=this;AG.addUpdateListener(function(){e.redraw()}),AG.addCreateListener(function(){e.redraw()}),AG.addDeleteListener(function(){e.redraw()})}}]),t}(Tb),DG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(PG,null),Lc.createElement(Md,{level:Pc.SUCCESS,ref:"addTemplateButton"},"Add Template")]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),nG.registerStreams(),pG.registerStreams(),AG.registerStreams(),console.log(AG.all()),this.addTemplateButton.addClickListener(function(){Lc.createElement(IG,{template:e.options.entry}).show()})}}]),t}(jd),BG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.SMALL)}},{key:"getUrlPrefix",value:function(e){var t="/email/manager/";return e&&(t+=e+"/"),t}},{key:"setURL",value:function(e){this.tabArea?this.showUrlTab(e[0]||"campaigns"):this.initialUrlParts=e}},{key:"render",value:function(){return[Lc.createElement(Gb,{ref:"tabArea",variableHeightPanels:!0},Lc.createElement(CG,{ref:"campaignsWidget",tabHref:this.getUrlPrefix("campaigns"),title:"Campaigns",active:!0}),Lc.createElement(DG,{ref:"templatesWidget",tabHref:this.getUrlPrefix("templates"),title:"Templates"}),Lc.createElement(cG,{ref:"gatewaysWidget",tabHref:this.getUrlPrefix("gateways"),title:"Gateways"}))]}},{key:"onMount",value:function(){this.setURL(this.initialUrlParts),delete this.initialUrlPars}},{key:"showUrlTab",value:function(e){this[e+"Widget"]?this[e+"Widget"].dispatch("show"):this.campaignsWidget.dispatch("show")}}]),t}(jd),_G=function(){function e(t,n){r(this,e),this.usedSpace=t,this.fileCount=n}return o(e,[{key:"getUsedSpace",value:function(){return this.usedSpace}},{key:"getFileCount",value:function(){return this.fileCount}}]),e}(),FG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getStorageServer",value:function(){return HG.get(this.storageServerId)}},{key:"getPublicURL",value:function(){var e=this.getStorageServer();return e.domain+e.urlBasePath+this.serverPath}}]),t}(fp),UG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getStorageMeta",value:function(){var e=0,t=this.all(),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){e+=a.value.size}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return new _G(e,t.length)}},{key:"getAllIds",value:function(){var e=this.all(),t=[],n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(s.id)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}}]),t}(mp),zG=new UG("PublicStorageFile",FG),WG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),HG=new mp("StorageServer",WG),VG=function(){function e(){r(this,e)}return o(e,null,[{key:"userFileMaxCount",value:function(){return USER.isAuthenticated?USER.isSuperUser?-1:512:0}},{key:"userUploadMaxCount",value:function(){return USER.isAuthenticated?USER.isSuperUser?-1:16:0}},{key:"userFileMaxSize",value:function(){return USER.isAuthenticated?USER.isSuperUser?-1:134217728:0}},{key:"userTotalMaxSize",value:function(){return USER.isAuthenticated?USER.isSuperUser?1073741824:268435456:0}},{key:"validateFileMaxCount",value:function(t,n){var i=e.userFileMaxCount();return-1==i||t.getFileCount()+n<=i}},{key:"validateUploadMaxCount",value:function(t){var n=e.userUploadMaxCount();return-1==n||t<=n}},{key:"validateFileMaxSize",value:function(t){var n=e.userFileMaxSize();return-1==n||t<=n}},{key:"validateTotalMaxSize",value:function(t,n){var i=e.userTotalMaxSize();return-1==i||t.getUsedSpace()+n<=i}}]),e}(),GG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Delete file"}},{key:"getBody",value:function(){return"Delete "+this.options.file.name+"?"}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Dd,{ref:"deleteFileButton",level:Pc.DANGER,onClick:function(){e.deleteFile()},statusOptions:["Delete file",{faIcon:"spinner fa-spin",label:" deleting file ..."},"Delete file","Failed"]}))]}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}},{key:"deleteFile",value:function(){var e=this,t={ids:[this.options.file.id]};this.deleteFileButton.postJSON("/storage/delete_request/",t).then(function(){return e.hide()},function(t){return e.messageArea.showMessage(t.message,"red")})}}]),t}(Zg),jG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Delete all files"}},{key:"getBody",value:function(){return Lc.createElement(Lc.TextElement,{ref:"text",value:"Delete all files?"})}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Dd,{ref:"deleteAllFilesButton",level:Pc.DANGER,onClick:function(){e.deleteAllFiles()},statusOptions:["Delete all files",{faIcon:"spinner fa-spin",label:" deleting all files ..."},"Delete all files","Failed"]}))]}},{key:"getIds",value:function(){return this.options.files.map(function(e){return e.id})}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}},{key:"deleteAllFiles",value:function(){var e=this,t={ids:this.getIds()};this.deleteAllFilesButton.postJSON("/storage/delete_request/",t).then(function(){return e.hide()},function(t){return e.messageArea.showMessage(t.message,"red")})}}]),t}(Zg),YG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Upload files"}},{key:"getBody",value:function(){return[Lc.createElement("div",null,Lc.createElement(wg,{className:"pull-left",ref:"fileInput",multipleFiles:!0})),Lc.createElement("br",null),Lc.createElement(Ld,{level:Pc.SUCCESS,ref:"progress"},"Progress")]}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Md,{level:Pc.SUCCESS,label:"Upload",onClick:function(){return e.upload()}}))]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.fileInput.addChangeListener(function(){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return console.error("The File APIs are not fully supported in this browser."),!1;e.messageArea.clear(),e.progress.set(0)})}},{key:"upload",value:function(){var e=this,t=this.fileInput.getFiles();if(0==t.length)return void this.messageArea.showMessage("Please select some files!","red");if(!VG.validateUploadMaxCount(t.length))return void this.messageArea.showMessage("You cannot upload more than "+VG.userUploadMaxCount()+" files at once!","red");var n=zG.getStorageMeta();if(!VG.validateFileMaxCount(n,t.length))return void this.messageArea.showMessage("Completion of this request will exceed the maximum number of total files you can store ("+VG.userFileMaxCount()+").","red");for(var i=0,r=new FormData,a=0;a<t.length;++a){if(!VG.validateFileMaxSize(t[a].size))return void this.messageArea.showMessage("File "+t[a].name+" is too big ("+XG.humanFileSize(t[a].size)+" while maximum size per file is "+XG.humanFileSize(VG.userFileMaxSize())+").","red");r.append(t[a].name,t[a]),i+=t[a].size}if(!VG.validateTotalMaxSize(n,i))return void this.messageArea.showMessage("Completion of this request will exceed the maximum total size you can store ("+XG.humanFileSize(VG.userTotalMaxSize())+").","red");var o=zu.post("/storage/upload_request/",{dataType:"json",data:r,cache:!1,processData:!1,contentType:!1});o.then(function(t){return e.hide()},function(t){e.messageArea.showMessage("Error in uploading files: status:"+t.message,"red")}),o.addProgressListener(function(t){e.progressHandling(t)})}},{key:"hide",value:function(){this.messageArea.clear(),this.progress.set(0),w(d(t.prototype),"hide",this).call(this)}},{key:"progressHandling",value:function(e){e.lengthComputable&&this.progress.set(e.loaded/e.total)}}]),t}(Zg),JG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getActionName",value:function(){return"Rename file"}},{key:"getBody",value:function(){return[Lc.createElement(Lc.TextElement,{ref:"text",value:"Choose your new file name:"}),Lc.createElement(vg,{ref:"nameInput",value:this.options.file.name})]}},{key:"getFooter",value:function(){var e=this;return[Lc.createElement($d,{ref:"messageArea"}),Lc.createElement(jg,null,Lc.createElement(Md,{label:"Close",onClick:function(){return e.hide()}}),Lc.createElement(Dd,{ref:"renameFileButton",level:Pc.SUCCESS,onClick:function(){e.renameFile()},statusOptions:["Rename file",{faIcon:"spinner fa-spin",label:" renaming file ..."},"Rename file","Failed"]}))]}},{key:"hide",value:function(){this.messageArea.clear(),w(d(t.prototype),"hide",this).call(this)}},{key:"renameFile",value:function(){var e=this,t={id:this.options.file.id,newName:this.nameInput.getValue()};this.renameFileButton.postJSON("/storage/rename_request/",t).then(function(){return e.hide()},function(t){return e.messageArea.showMessage(t.message,"red")})}}]),t}(Zg),qG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.resetColumnSortingOrder()}},{key:"resetColumnSortingOrder",value:function(){this.columnSortingOrder=[this.columns[4],this.columns[3],this.columns[0],this.columns[2],this.columns[1]]}},{key:"getFileIndex",value:function(e){for(var t=0;t<this.options.files.length;t+=1)if(this.options.files[t].id===e)return t;return-1}},{key:"addFile",value:function(e){this.options.files.push(e),this.redraw()}},{key:"setColumns",value:function(){var e={textAlign:"left",verticalAlign:"middle"},n={textAlign:"left",verticalAlign:"middle"},i=[{value:function(e){return e.name},rawValue:function(e){return e.name},headerName:"Filename",headerStyle:n,cellStyle:e},{value:function(e){return Lc.createElement(Xd,{href:e.getPublicURL(),target:"_blank_",value:e.getPublicURL()})},rawValue:function(e){return e.getPublicURL()},headerName:"URL",headerStyle:n,cellStyle:e},{value:function(e){return XG.humanFileSize(e.size)},rawValue:function(e){return e.size},headerName:"Size",headerStyle:n,cellStyle:e},{value:function(e){return Ap.unix(e.dateModified).locale("en").format("DD/MM/YYYY HH:mm:ss")},rawValue:function(e){return e.dateModified},sortDescending:!0,headerName:"Date modified",headerStyle:n,cellStyle:e},{value:function(e){return Ap.unix(e.dateCreated).locale("en").format("DD/MM/YYYY HH:mm:ss")},rawValue:function(e){return e.dateCreated},sortDescending:!0,headerName:"Date created",headerStyle:n,cellStyle:e},{value:function(e){return Lc.createElement(Md,{level:Pc.SUCCESS,label:"Rename",onClick:function(){return JG.show({file:e})}})},headerName:"Rename",headerStyle:n,cellStyle:e},{value:function(e){return Lc.createElement(Md,{level:Pc.DANGER,label:"Delete",onClick:function(){return GG.show({file:e})}})},headerName:"Delete",headerStyle:n,cellStyle:e}];w(d(t.prototype),"setColumns",this).call(this,i)}},{key:"getEntries",value:function(){return this.sortEntries(this.options.files)}}]),t}(Tb),XG=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),zG.addListener("create",function(e){n.redraw()}),zG.addListener("delete",function(e){n.redraw()}),zG.addListener("updateOrCreate",function(e){n.redraw()}),n}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("margin","20px 10%")}}]),o(t,[{key:"getDefaultOptions",value:function(){return{title:"File manager"}}},{key:"render",value:function(){this.publicFiles=zG.all(),this.table=Lc.createElement(qG,{files:this.publicFiles,parent:this});var e=null,t=Lc.createElement("div",{className:"pull-right"},Lc.createElement(Md,{level:Pc.DANGER,label:"Delete all",onClick:function(){return jG.show({files:zG.all()})},style:{marginTop:"5px",marginBottom:"5px"}}));0==this.publicFiles.length&&(e=Lc.createElement("div",{className:"pull-left"},Lc.createElement("h3",null,"You don't have any files uploaded!")),t=null);var n=Lc.createElement("div",{className:"pull-right"},Lc.createElement(Md,{level:Pc.PRIMARY,label:"Upload files",onClick:function(){return YG.show()},style:{marginTop:"5px",marginBottom:"5px"}}));return[Lc.createElement("div",{className:"pull-left"},Lc.createElement("h4",null,Lc.createElement("strong",null,this.options.title))),e,t,n,this.table]}}],[{key:"humanFileSize",value:function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}}]),t}(jd),KG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this),e.setStyle("margin","20px 10%")}},{key:"getDefaultOptions",value:function(){return{title:"Admin Panel",level:Pc.INFO,style:{margin:"10px"}}}},{key:"render",value:function(){return Lc.createElement("table",{className:"table"},Lc.createElement("tbody",null,Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/manage/icarus/#machines",value:"Icarus"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/manage/icarus/#machine_logging",value:"Machine logging"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/manage/icarus/#website_logging",value:"Website logging"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/analytics",value:"Analytics"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/manage/users",value:"Users"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/manage/charts",value:"Charts"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/email/manager",value:"Email Manager"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/storage/manager",value:"Storage Manager"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/manage/translation",value:"Translation"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/real_ratings",value:"Real ratings"}))),Lc.createElement("tr",null,Lc.createElement("td",null,Lc.createElement(Xd,{href:"/private-archives",value:"Private Archives"})))))}}]),t}(ub),QG=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"logMessage",value:function(e){this.dispatch("logMessage",e)}},{key:"applyEvent",value:function(e){if("MachineInstance-logMessage"===e.type);else if("MachineInstance-cloneStart"===e.type);else if("MachineInstance-cloneStatus"===e.type);else if("MachineInstance-cloneFinish"===e.type);else if("MachineInstance-serviceStatusUpdate"===e.type){if(!e.hasOwnProperty("serviceStatus"))return void console.log("MachineInstance: serviceStatusUpdate event does not contain serviceStatus field!");this.serviceUpdate(e.serviceStatus)}else if("MachineInstance-serviceStatusStart"===e.type){if(!e.hasOwnProperty("serviceStatus"))return void console.log("MachineInstance: serviceStatusStart event does not contain serviceStatus field!");this.serviceStart(e.serviceStatus)}else if("MachineInstance-serviceStatusStop"===e.type){if(!e.hasOwnProperty("serviceStatus"))return void console.log("MachineInstance: serviceStatusStop event does not contain serviceStatus field!");this.serviceStop(e.serviceStatus)}else w(d(t.prototype),"applyEvent",this).call(this,e)}},{key:"serviceStart",value:function(e){this.updateServiceStatus(e),this.services[e.service].current.meta.status=t.statusType.NEW,this.setServiceWarningTimeout(e.service,1.5),this.setServiceDangerTimeout(e.service,3.5),this.clearServiceOfflineTimeout(e.service)}},{key:"serviceUpdate",value:function(e){this.updateServiceStatus(e),this.services[e.service].current.meta.status=t.statusType.ONLINE,this.setServiceWarningTimeout(e.service,1.5),this.setServiceDangerTimeout(e.service,3.5),this.clearServiceOfflineTimeout(e.service)}},{key:"serviceStop",value:function(e){this.updateServiceStatus(e),this.services[e.service].current.meta.status=t.statusType.OFFLINE,this.setServiceOfflineTimeout(e.service,1e3)}},{key:"updateServiceStatus",value:function(e){this.hasOwnProperty("services")||(this.services={}),this.services.hasOwnProperty(e.service)||(this.services[e.service]={}),this.services[e.service].hasOwnProperty("current")||(this.services[e.service].current={}),this.services[e.service].current.hasOwnProperty("meta")||(this.services[e.service].current.meta={}),this.services[e.service].current.data=e}},{key:"clearServiceWarningTimeout",value:function(e){this.services[e].current.meta.warningTimeout&&(clearTimeout(this.services[e].current.meta.warningTimeout),this.services[e].current.meta.warningTimeout=null)}},{key:"clearServiceDangerTimeout",value:function(e){this.services[e].current.meta.dangerTimeout&&(clearTimeout(this.services[e].current.meta.dangerTimeout),this.services[e].current.meta.dangerTimeout=null)}},{key:"clearServiceOfflineTimeout",value:function(e){this.services[e].current.meta.offlineTimeout&&(clearTimeout(this.services[e].current.meta.offlineTimeout),this.services[e].current.meta.offlineTimeout=null)}},{key:"serviceWarning",value:function(e){this.services[e].current.meta.status=t.statusType.WARNING,this.dispatch("MachineInstance-serviceStatusWarning",this.services[e])}},{key:"serviceDanger",value:function(e){this.services[e].current.meta.status=t.statusType.DANGER,this.dispatch("MachineInstance-serviceStatusDanger",this.services[e])}},{key:"serviceOffline",value:function(e){delete this.services[e],this.dispatch("MachineInstance-serviceStatusOffline")}},{key:"setServiceWarningTimeout",value:function(e,t){var n=this;this.services[e].current.meta.warningThreshold=this.services[e].current.data.updateInterval*t,this.clearServiceWarningTimeout(e),this.services[e].current.meta.warningTimeout=setTimeout(function(){n.serviceWarning(e),n.services[e].current.meta.warningTimeout=null},this.services[e].current.meta.warningThreshold)}},{key:"setServiceDangerTimeout",value:function(e,t){var n=this;this.services[e].current.meta.dangerThreshold=this.services[e].current.data.updateInterval*t,this.clearServiceDangerTimeout(e),this.services[e].current.meta.dangerTimeout=setTimeout(function(){n.serviceDanger(e),n.services[e].current.meta.dangerTimeout=null},this.services[e].current.meta.dangerThreshold)}},{key:"setServiceOfflineTimeout",value:function(e,t){var n=this;this.clearServiceWarningTimeout(e),this.clearServiceDangerTimeout(e),this.services[e].current.meta.offlineThreshold=t,this.clearServiceOfflineTimeout(e),this.services[e].current.meta.offlineTimeout=setTimeout(function(){n.serviceOffline(e)},this.services[e].current.meta.offlineThreshold)}}]),t}(fp);QG.statusType={NEW:1,ONLINE:2,OFFLINE:3,WARNING:4,DANGER:5};var ZG,$G,ej,tj,nj,ij,rj,aj,oj,sj,lj,uj,cj,hj,dj,pj,fj,gj,mj,vj,yj,bj,kj,wj,Ej,Sj,Cj,xj,Tj,Aj,Lj,Ij,Nj,Oj,Rj,Mj,Pj,Dj,Bj,_j,Fj,Uj,zj,Wj,Hj,Vj,Gj,jj,Yj,Jj,qj,Xj,Kj,Qj,Zj,$j,eY,tY,nY,iY,rY,aY,oY,sY,lY,uY,cY,hY,dY,pY,fY,gY,mY,vY,yY,bY,kY,wY,EY,SY,CY,xY,TY,AY,LY,IY,NY,OY,RY,MY,PY,DY,BY,_Y,FY,UY,zY,WY,HY,VY,GY,jY,YY,JY,qY,XY,KY,QY,ZY,$Y,eJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){"MachineInstance-serviceStatusUpdate"==e.type?w(d(t.prototype),"applyEvent",this).call(this,e):"MachineInstance-logMessage"==e.type?(this.dispatch("logMessage",e),w(d(t.prototype),"applyEvent",this).call(this,e)):w(d(t.prototype),"applyEvent",this).call(this,e)}},{key:"registerStreams",value:function(){cp.registerStream("machine_status"),cp.registerStream("service_status"),cp.registerStream("machine_log"),cp.registerStream("meta-uranus-linode-a")}}]),t}(mp),tJ=new eJ("MachineInstance",QG),nJ=!1,iJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{closeName:"No",level:Pc.DANGER,actionName:"Yes"})}},{key:"getActionName",value:function(){return"Confirm action"}},{key:"getBody",value:function(){return Lc.createElement(tb,{ref:"divider",orientation:Rc.VERTICAL,style:{height:"100%",width:"100%",overflow:"hidden"}},Lc.createElement("div",null,Lc.createElement(Lc.TextElement,{ref:"text",value:"Are you sure you want to complete this action?"}),Lc.createElement("br",null),Lc.createElement(Lc.TextElement,{ref:"customText",value:this.options.text||""})),Lc.createElement("div",null,Lc.createElement(Nb,{labelWidth:"92%",contentWidth:"3%",contentFirst:!0,label:"I am not high and I am not drunk, please don't bother me for the next 2 minutes!"},Lc.createElement(Eg,{ref:"rememberDecisionCheckbox",style:{display:"inline-block",marginTop:"11px"}}))))}},{key:"action",value:function(){this.rememberDecisionCheckbox.getValue()&&(nJ=!0,setTimeout(function(){nJ=!1},12e4)),this.options.callbackAction(),this.hide()}}],[{key:"start",value:function(e,t){if(nJ)return void t();this.show({callbackAction:t,text:e})}}]),t}(Zg),rJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{closeName:"No",level:Pc.DANGER,actionName:"Confirm destroy"})}},{key:"action",value:function(){this.options.callbackAction(),this.hide()}},{key:"getBody",value:function(){return Lc.createElement("div",null,Lc.createElement(Lc.TextElement,{value:"Are you sure you want to complete this action?"}),Lc.createElement("br",null),Lc.createElement(Lc.TextElement,{value:this.options.text||""}))}}],[{key:"start",value:function(e,t){nJ&&(e+=". I know you are sober, but this is a serious action and you have to be fully aware!"),this.show({callbackAction:t,text:e})}}]),t}(Zg),aJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),e.entry&&(this.machine=e.entry)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);for(var n=[{name:"Boot",commandName:"boot"},{name:"Shutdown",commandName:"shutdown"},{name:"Reboot",commandName:"reboot"},{name:"Clone",commandName:"clone"},{name:"Update",commandName:"update"}],i=0,r=n;i<r.length;i++)!function(){var t=r[i];e["machine"+t.name+"Button"].addClickListener(function(){iJ.start('"'+t.name+'" machine with id '+e.machine.id+" ("+e.machine.label+")",function(){e.sendCommand(t.commandName)})})}();this.machineDestroyButton.addClickListener(function(){rJ.start('"Destroy" machine with id '+e.machine.id+" ("+e.machine.label+")",function(){e.sendCommand("destroy")})}),this.machine.scripts&&this.machine.scripts.length>0&&this.runCustomScriptButton.addClickListener(function(){iJ.start('Run script "'+e.customScriptSelect.get()+'" on machine with id '+e.machine.id,function(){e.sendCommand("script",e.customScriptSelect.get())})}),this.machine.addEventListener("MachineInstance-cloneStart",function(t){e.machine.inCloning=!0,e.options.parent.redraw()}),this.machine.addEventListener("MachineInstance-cloneFinish",function(t){e.machine.inCloning=!1,e.options.parent.redraw()}),this.machine.addEventListener("MachineInstance-logMessage",function(t){e.machineLogsHighlighter.append(t.message)});var a=["updateOrCreate","MachineInstance-cloneStatus","MachineInstance-serviceStatusStart","MachineInstance-serviceStatusUpdate","MachineInstance-serviceStatusWarning","MachineInstance-serviceStatusDanger","MachineInstance-serviceStatusStop","MachineInstance-serviceStatusOffline"];this.attachEventListener(this.machine,a,function(){e.redraw()})}},{key:"redraw",value:function(){return!!w(d(t.prototype),"redraw",this).call(this)&&(this.scriptChoice&&this.setScriptChoice(this.scriptChoice),!0)}},{key:"renderCollapsible",value:function(){var e=this.machine.publicRDNS||"N/A",t=this.machine.publicIPAddress||"N/A",n=this.machine.privateRDNS||"N/A",i=this.machine.privateIPAddress||"N/A";return[Lc.createElement("div",{ref:"machineInfo"},Lc.createElement("p",null,"RAM: ",this.machine.ramSize," MB"),Lc.createElement("p",null,"Disk: ",this.machine.diskSize," MB"),Lc.createElement("p",null,"Linux distribution: ",this.machine.distro),Lc.createElement("p",null,"Public RDNS Name: ",e),Lc.createElement("p",null,"Public IP address: ",t),Lc.createElement("p",null,"Private RDNS Name: ",n),Lc.createElement("p",null,"Private IP address: ",i),Lc.createElement("p",null,"Date created: ",this.machine.dateCreated)),Lc.createElement(ip,{ref:"machineLogsHighlighter",maxLines:30,value:this.machine.logs})]}},{key:"sendCommand",value:function(e,n){t.sendCommand([this.machine.id],e,n)}}],[{key:"sendCommand",value:function(e,t,n){var i={action:t,ids:e};"script"===t&&(i.scriptName=n),zu.postJSON("/manage/control_machine/",i)}}]),t}(Sb),oJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this)}},{key:"getRowClass",value:function(){return aJ}},{key:"renderMachineActions",value:function(e){var t=Lc.createElement("a",{className:"btn btn-info disabled"},"No scripts"),n=!1;e.inCloning&&(n=!0);var i=!1;if((n||e.isProtected)&&(i=!0),e.hasOwnProperty("scripts")&&e.scripts.length>0){e.scripts.map(function(e,t){return Lc.createElement("li",{key:t},Lc.createElement("a",{ref:"scriptChoice-"+e},e))});t=Lc.createElement("div",{className:"btn-group"},Lc.createElement(Md,{ref:"runCustomScriptButton",level:Pc.INFO,label:"Run",disabled:n,parent:this}),Lc.createElement(Gg,{ref:"customScriptSelect",options:e.scripts,style:{width:"auto",height:"30px"},disabled:n,parent:this}))}return[Lc.createElement("div",{className:"btn-toolbar"},Lc.createElement("div",{className:"btn-group btn-group-sm",role:"group"},Lc.createElement(Md,{ref:"machineBootButton",level:Pc.INFO,label:"Boot",disabled:n,parent:this}),Lc.createElement(Md,{ref:"machineShutdownButton",level:Pc.INFO,label:"Shutdown",disabled:n,parent:this}),Lc.createElement(Md,{ref:"machineRebootButton",level:Pc.INFO,label:"Reboot",disabled:n,parent:this}),Lc.createElement(Md,{ref:"machineCloneButton",level:Pc.INFO,label:"Clone",disabled:n,parent:this}),Lc.createElement(Md,{ref:"machineUpdateButton",level:Pc.INFO,label:"Update",disabled:n,parent:this})),t,Lc.createElement(Md,{ref:"machineDestroyButton",className:"pull-right",level:Pc.DANGER,label:"Destroy",disabled:i,parent:this}))]}},{key:"getEntries",value:function(){return this.options.machines||[]}},{key:"setColumns",value:function(){w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return e.id},headerName:"Id"},{value:function(e){return e.label},headerName:"Label"},{value:t.renderMachineStatus,headerName:"Status"},{value:t.renderMachineServices,headerName:"Running services"},{value:this.renderMachineActions,headerName:"Actions"}])}}],[{key:"renderMachineServices",value:function(e){var t=[];if(e.hasOwnProperty("services")&&(t=Object.keys(e.services)),0===t.length)return Lc.createElement("span",{className:"label label-danger"},"No service running");var n=new Set(["service","machineId","timestamp","clientTimestamp"]),i=[],r=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){for(var u=s.value,c=e.services[u].current,h="",d=0,p=Object.keys(c.data);d<p.length;d++){var f=p[d];n.has(f)||(h+=f+": "+c.data[f]+"\n")}h+="timestamp: "+new Date(c.data.timestamp);var g="",m=void 0;c.meta.status==QG.statusType.DANGER?m="danger":c.meta.status==QG.statusType.WARNING?m="warning":c.meta.status==QG.statusType.NEW?(m="primary",g=" (New)"):m=c.meta.status==QG.statusType.OFFLINE?"default":"success",i.push(Lc.createElement("a",{key:u,className:"label label-"+m,title:h},u+g))}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i}},{key:"renderMachineStatus",value:function(e){return e.inCloning?[Lc.createElement("p",null,"Cloning ...")]:[Lc.createElement("p",null,e.status)]}
}]),t}(xb),sJ=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),tJ.addCreateListener(function(e){n.redraw()},!1),tJ.addDeleteListener(function(e,t){n.redraw()}),tJ.registerStreams(),n.machineGroups=new Map,n}return h(t,e),o(t,[{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.addClass("panel-group"),e.setAttribute("role","tablist"),e.setAttribute("aria-multiselectable","true"),e}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this);var n=!0,i=!1,r=void 0;try{for(var a,o=this.machineGroups[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var t=S(a.value,2),n=t[0],i=t[1];e["groupUpdateAll-"+n].addClickListener(function(e){e.preventDefault(),e.stopPropagation(),iJ.start('"Update" all machines from group "'+n+'".',function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=i[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;e.push(s.id)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}aJ.sendCommand(e,"update")})})}()}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"render",value:function(){var e=tJ.all(!0),t=[];this.machineGroups=new Map;var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.machineGroup?(this.machineGroups.has(s.machineGroup)||this.machineGroups.set(s.machineGroup,[]),this.machineGroups.get(s.machineGroup).push(s)):t.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=[],u=!0,c=!1,h=void 0;try{for(var d,p=this.machineGroups[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=S(d.value,2),g=f[0],m=f[1];l.push(this.renderMachineGroup(g,m))}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}return t.length>0&&l.push(this.renderMachineGroup("Other",t)),[l]}},{key:"renderMachineGroup",value:function(e,t){var n={float:"right",marginTop:"-7px"},i=[e,Lc.createElement(Md,{ref:"groupUpdateAll-"+e,style:n,level:Pc.INFO,label:"Update All",parent:this})];return Lc.createElement(Ob,{key:e,title:i,collapsed:!1},Lc.createElement(oJ,{machines:t,parent:this}))}}]),t}(jd),lJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(ap,{ref:"logger",numLines:40,readOnly:!0})]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),Ok.addListener("global_logging",function(t){var n="["+t.levelname+" "+t.asctime+"] ["+t.service.name+"] "+t.message+"\n";t.hasOwnProperty("exc_info")&&(n+="Stack trace:\n"+t.exc_info+"\n"),e.logger.append(n)})}}]),t}(jd),uJ=function(e){function t(e){return r(this,t),b(this,d(t).call(this,e))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(ap,{ref:"logger",numLines:40,readOnly:!0})]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),tJ.registerStreams(),this.attachListener(tJ,"logMessage",function(t){var n="["+t.objectId+"] "+t.message;n.endsWith("\n")||(n+="\n"),e.logger.append(n)})}}]),t}(jd),cJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),hJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){w(d(t.prototype),"applyEvent",this).call(this,e)}},{key:"registerStreams",value:function(){cp.registerStream("uranus-general-control-panel")}}]),t}(mp),dJ=new hJ("GeneralControlPanelData",cJ),pJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){return[Lc.createElement(Nb,{label:"Total machines target:",ref:"totalMachinesTargetField"},Lc.createElement(vg,{value:this.options.defaultTotalTarget,ref:"totalMachinesTargetFieldInput"})),Lc.createElement(Nb,{label:"Running machines target:",ref:"runningMachinesTargetField"},Lc.createElement(vg,{value:this.options.defaultRunningTarget,ref:"runningMachinesTargetInput"}))]}},{key:"action",value:function(){var e=this,t={action:"edit",objectType:"evaluationMachinesWatcherTarget",newTotalTarget:this.totalMachinesTargetFieldInput.getValue(),newRunningTarget:this.runningMachinesTargetInput.getValue()};zu.postJSON("/manage/control_general_control_panel/",t).then(function(t){return e.hide()},function(t){e.messageArea.showMessage("Error setting target values: "+t.message,"red")})}},{key:"getTitle",value:function(){return"Edit evaluation machines target values"}},{key:"getActionName",value:function(){return"Save"}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}}]),t}(Zg),fJ=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.data={evaluationMachinesTotalCount:0,evaluationMachinesTotalTarget:0,evaluationMachinesRunningCount:0,evaluationMachinesRunningTarget:0,evaluationMachinesWatcherIsEnabled:"false"},n}return h(t,e),o(t,[{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),dJ.registerStreams(),dJ.addUpdateListener(function(){e.redraw()}),this.editEvaluationMachinesWatcherParams.addClickListener(function(){Lc.createElement(pJ,{defaultTotalTarget:e.data.evaluationMachinesTotalTarget,defaultRunningTarget:e.data.evaluationMachinesRunningTarget}).show()})}},{key:"getDefaultOptions",value:function(){return{title:"Evaluation Machines Watcher Panel",level:Pc.INFO,style:{margin:"10px"}}}},{key:"setEvaluationMachinesWatcherIsEnabled",value:function(e){zu.postJSON("/manage/control_general_control_panel/",{action:"edit",objectType:"evaluationMachinesWatcherIsEnabled",isEnabled:e})}},{key:"sendDisableEvaluationMachinesWatcher",value:function(){this.setEvaluationMachinesWatcherIsEnabled("FALSE")}},{key:"sendEnableEvaluationMachinesWatcher",value:function(){this.setEvaluationMachinesWatcherIsEnabled("TRUE")}},{key:"render",value:function(){var e=this;this.data=dJ.get(0);var t=null,n=null;return"TRUE"==this.data.evaluationMachinesWatcherIsEnabled.toUpperCase()?(t="Evaluation Machines Watcher is enabled!",n=Lc.createElement(Md,{level:Pc.DANGER,onClick:function(){return e.sendDisableEvaluationMachinesWatcher()},label:"Disable"})):(t="Evaluation Machines Watcher is disabled!",n=Lc.createElement(Md,{level:Pc.DANGER,onClick:function(){return e.sendEnableEvaluationMachinesWatcher()},label:"Enable"})),[Lc.createElement("p",null,"Total:   ",Lc.createElement("span",null,this.data.evaluationMachinesTotalCount),"/",Lc.createElement("span",null,this.data.evaluationMachinesTotalTarget)),Lc.createElement("p",null,"Running: ",Lc.createElement("span",null,this.data.evaluationMachinesRunningCount),"/",Lc.createElement("span",null,this.data.evaluationMachinesRunningTarget)),Lc.createElement(Md,{ref:"editEvaluationMachinesWatcherParams",level:Pc.INFO},"Edit"),Lc.createElement("p",null,Lc.createElement("span",null,t)),n,Lc.createElement("p",null,"Please make sure you understand how Evaluation Machines Watcher works before using this! Also, please fallow the guidelines!")]}}]),t}(ub),gJ=function(e){function t(e){return r(this,t),b(this,d(t).call(this,e))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(fJ,null)]}}]),t}(jd),mJ=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this)),n.maxLength=e,n}return h(t,e),o(t,[{key:"last",value:function(){return this.peekBack()}},{key:"push",value:function(e){this.length+1>this.maxLength&&this.popFront(),w(d(t.prototype),"push",this).call(this,e)}}]),t}(ac),vJ={VALUE:Symbol("Value"),COUNTER:Symbol("Counter"),COUNTER_SUM:Symbol("CounterSum")},yJ=function(){function e(t,n,i){r(this,e),this.values=new mJ(i),this.lastTimestamp=null,this.type=t}return o(e,[{key:"addInterval",value:function(e,t,n){this.lastTimestamp&&e!=this.lastTimestamp&&console.error("Timestamp inconsistency in latest chunk",time.lastTimestamp,e),this.lastTimestamp=t}}]),e}(),bJ=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),n=b(this,d(t).call(this)),n.type=e,n.options=i,n.maxLength=n.options.maxLength||8,n.rawTimestamps=new mJ(n.maxLength),n.rawValues=new mJ(n.maxLength),n.averagers=[];for(var a=0,o=5;a<7;a++,o*=4)n.averagers.push(new yJ(o,n.maxLength));return n}return h(t,e),o(t,[{key:"addInterval",value:function(e,t,n){var i=!0,r=!1,a=void 0;try{for(var o,s=this.averagers[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.addInterval(e,t,n)}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"addValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e=+new Ap(e);var n=this.rawTimestamps.length&&this.rawTimestamps.last();if(n&&n>=e)return void console.error("Invalid new timestamp:",e,this.getLastTimestamp());if(this.rawTimestamps.push(e),this.rawValues.push(t),this.type===vJ.COUNTER_SUM)if(this.rawValues.length>0){var i=this.rawValues.last();i<=t&&(t-=i)}else t=null;n&&null!=t&&this.addInterval(n,e,t),this.dispatch("update",{timestamp:e,value:t,lastTimestamp:n})}},{key:"getValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rawTimestamps.peekFront(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rawTimestamps.last();e=+new Ap(e),t=+new Ap(t);for(var n=[],i=0;i<this.rawValues.length;i++){var r=this.rawTimestamps.get(i);if(e<=r&&r<=t){var a=this.rawValues.get(i);if(this.type===vJ.COUNTER_SUM){if(0===i)continue;var o=this.rawValues.get(i-1);a=a>o?a-o:a}if(this.type===vJ.COUNTER||this.type===vJ.COUNTER_SUM){if(0===i)continue;a=1e3*a/(r-this.rawTimestamps.get(i-1))}n.push({timestamp:r,value:a})}}return n}},{key:"addUpdateListener",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.addListener.apply(this,["update"].concat(t))}}]),t}(Gu),kJ=function(){function e(t){r(this,e),this.machineMap=new Map,this.metricDescriptors=t;var n=!0,i=!1,a=void 0;try{for(var o,s=this.metricDescriptors[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,u=S(l,2),c=u[0];u[1];2===l.length&&function(){var e=c.split(".");l.push(function(t){var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!t.hasOwnProperty(s))return;t=t[s]}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t})}()}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}return o(e,[{key:"getForMachineId",value:function(e){if(this.machineMap.has(e))return this.machineMap.get(e);var t=new Map,n=!0,i=!1,r=void 0;try{for(var a,o=this.metricDescriptors[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=S(a.value,2),l=s[0],u=s[1];t.set(l,new bJ(u,{maxLength:8192}))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return this.machineMap.set(e,t),this.machineMap.get(e)}},{key:"addMetrics",value:function(e){var t=e.meta.machineId,n=e.meta.timestamp,i=this.getForMachineId(t),r=!0,a=!1,o=void 0;try{for(var s,l=this.metricDescriptors[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=S(s.value,3),c=u[0],h=(u[1],u[2]),d=h(e);i.get(c).addValue(n,d)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}}]),e}(),wJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.xAxisOptions.ticks=3}},{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{domainPadding:[.1,.1],margin:{top:0,bottom:30,left:80,right:0}})}}]),t}(PU),EJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.plotOptions={pointsAlias:function(e){var t;return(t=[]).concat.apply(t,C(e))},xCoordinateAlias:function(e){return e.timestamp},yCoordinateAlias:function(e){return e.value}},this.linePlotOptions=Object.assign({},this.plotOptions,{strokeWidth:1.5,stroke:"red",pointsAlias:function(e){return e}})}},{key:"render",value:function(){return[Lc.createElement(wJ,{chartOptions:Object.assign({},this.chartOptions),plotOptions:this.plotOptions,xAxisDomain:this.options.xDomain,yAxisDomain:this.options.yDomain,yAxisLabelFormatFunction:this.options.valueFormatter,data:this.options.data,enableZoom:this.options.enableZoom},Lc.createElement(AU,{plotOptions:this.linePlotOptions,data:this.options.data}))]}}]),t}(DU),SJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{width:"400px",margin:"10px",display:"inline-block"},bodyStyle:{paddingTop:"10px"}}}},{key:"getMachineId",value:function(){return this.options.machineId}},{key:"getMachineLabel",value:function(){var e=tJ.get(this.getMachineId());return e&&e.label||"Machine "+this.getMachineId()}},{key:"getVerboseMetrics",value:function(){return new Map([["cpu.percent","CPU %"],["disk.space.percent","Disk Space %"],["network.counters.bytes_sent","Data sent"],["network.counters.bytes_recv","Data received"],["virtualMemory.percent","VMemory %"]]).get(this.options.metricName)||this.options.metricsName}},{key:"getTitle",value:function(){return this.getMachineLabel()+" -- "+this.getVerboseMetrics()}},{key:"render",value:function(){var e,t=this.options.metrics;return e=this.options.timeframe?t.getValues(Ap.now()-this.options.timeframe,Ap.now()):t.getValues(),[Lc.createElement(EJ,{data:e,width:400,height:350,valueFormatter:function(e){return t.type===vJ.VALUE?e+"%":Ek.memory(e,!0)}})]}},{key:"onMount",value:function(){var e=this;this.attachUpdateListener(this.options.metrics,function(){return e.redraw()})}}]),t}(ub),CJ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.performanceMetricsSummarizer=new kJ([["cpu.percent",vJ.VALUE],["disk.space.percent",vJ.VALUE],["network.counters.bytes_sent",vJ.COUNTER_SUM],["network.counters.bytes_recv",vJ.COUNTER_SUM],["virtualMemory.percent",vJ.VALUE]]),n}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{timeframe:6e4}}},{key:"addPerformanceMetrics",value:function(e){var t=this.performanceMetricsSummarizer.machineMap.size;this.performanceMetricsSummarizer.addMetrics(e),this.performanceMetricsSummarizer.machineMap.size!=t&&this.redraw()}},{key:"render",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.performanceMetricsSummarizer.machineMap.entries()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=S(r.value,2),s=o[0],l=o[1],u=!0,c=!1,h=void 0;try{for(var d,p=l.entries()[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=S(d.value,2),g=f[0],m=f[1];e.push(Lc.createElement(SJ,{machineId:s,metricName:g,metrics:m,timeframe:this.options.timeframe}))}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}e.push(Lc.createElement("hr",null))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return[Lc.createElement(Yg,{level:Pc.PRIMARY,givenOptions:["1m","5m","30m","6h","âˆž"],style:{marginTop:"10px",textAlign:"center"},ref:"timeframeSelect"}),e]}},{key:"onMount",value:function(){var e=this,t=new Map([["1m",6e4],["5m",3e5],["30m",18e5],["6h",216e5],["âˆž",0]]);this.timeframeSelect.addListener("setIndex",function(n){e.updateOptions({timeframe:t.get(n.value)})}),this.attachListener(Ok,"machine-performance-stats",function(t){return e.addPerformanceMetrics(t)})}}]),t}(jd),xJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("margin","20px 10%")}},{key:"getUrlPrefix",value:function(e){var t="/manage/icarus/";return e&&(t+=e+"/"),t}},{key:"render",value:function(){return[Lc.createElement(Gb,{ref:"tabArea",variableHeightPanels:!0},Lc.createElement(sJ,{ref:"machineInstanceWidget",tabHref:this.getUrlPrefix("machines"),title:"Machines",active:!0}),Lc.createElement(uJ,{ref:"machineLoggingWidget",tabHref:this.getUrlPrefix("machine-logging"),title:"Machines Logging"}),Lc.createElement(lJ,{ref:"websiteLoggingWidget",tabHref:this.getUrlPrefix("website-logging"),title:"Website Logging"}),Lc.createElement(gJ,{ref:"generalControlPanelWidget",tabHref:this.getUrlPrefix("general-control-panel"),title:"General Control Panel"}),Lc.createElement(CJ,{tabHref:this.getUrlPrefix("performance-metrics"),title:"Performance metrics"}))]}},{key:"setURL",value:function(e){this.tabArea?this.showUrlTab(e[0]||"machines"):this.initialUrlParts=e}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.setURL(this.initialUrlParts),delete this.initialUrlParts}},{key:"showUrlTab",value:function(e){"machines"===e?this.machineInstanceWidget.dispatch("show"):"machine-logging"===e?this.machineLoggingWidget.dispatch("show"):"website-logging"===e?this.websiteLoggingWidget.dispatch("show"):"general-control-panel"===e&&this.generalControlPanelWidget.dispatch("show")}}]),t}(jd),TJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){"MachineInstance-logMessage"===e.type||w(d(t.prototype),"applyEvent",this).call(this,e)}}]),t}(fp),AJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){"MachineInstance-serviceStatusUpdate"==e.type?w(d(t.prototype),"applyEvent",this).call(this,e):"MachineInstance-logMessage"==e.type?(this.dispatch("logMessage",e),w(d(t.prototype),"applyEvent",this).call(this,e)):w(d(t.prototype),"applyEvent",this).call(this,e)}}]),t}(mp),LJ=new AJ("WSUserData",TJ),IJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),NJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){w(d(t.prototype),"applyEvent",this).call(this,e)}}]),t}(mp),OJ=new NJ("WSConnectionData",IJ),RJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(Ob,{ref:"usersPanel",title:"Users online: "+LJ.all().length},t.renderAllUserData())]}}],[{key:"renderConnectionTitle",value:function(e){var t={margin:"1px"},n={"background-color":"black"};return[Lc.createElement("h3",null,Lc.createElement("span",{className:"label label-primary",style:t},"Id: ",Lc.createElement("span",{className:"badge",style:n},e.id)),Lc.createElement("span",{className:"label label-primary",style:t},"IP: ",Lc.createElement("span",{className:"badge",style:n},e.data.IP)),Lc.createElement("span",{className:"label label-primary",style:t},"Streams: ",Lc.createElement("span",{className:"badge",style:n},e.streams.length)))]}},{key:"renderConnectionStreams",value:function(e){var t=[],n={margin:"0px","background-color":"#953b39"},i=!0,r=!1,a=void 0;try{for(var o,s=e.streams[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;t.push(Lc.createElement("span",{className:"badge",style:n},"#"+l))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return t}},{key:"renderConnectionData",value:function(e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e.connectionIds[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,u=OJ.get(l);n.push(Lc.createElement(ub,{ref:"connectionCardPanel",title:t.renderConnectionTitle(u)},Lc.createElement("h4",null,t.renderConnectionStreams(u))))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}},{key:"renderUserDataTitle",value:function(e){var t={margin:"5px"};return[Lc.createElement("div",null,"User: ",Lc.createElement(sE,{id:e.id}),Lc.createElement("span",{className:"label label-success",style:t},"Websocket connections: ",e.connectionIds.length),Lc.createElement("span",{className:"label label-primary",style:t},"Total Redis streams: ",e.streams.length))]}},{key:"renderUserData",value:function(e){var n={margin:"5px",padding:"0px"};return[Lc.createElement(Ob,{ref:"userPanel",title:t.renderUserDataTitle(e),style:n,collapsed:!0},Lc.createElement("div",null," ",t.renderConnectionData(e)," "))]}},{key:"renderAllUserData",value:function(){var e=[],n=!0,i=!1,r=void 0;try{for(var a,o=LJ.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.push(t.renderUserData(s))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e}}]),t}(Lc.Element),MJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(Ob,{ref:"connectionsPanel",collapsed:!0,title:"Websocket connections: "+OJ.all().length})]}},{key:"onMount",value:function(){cp.registerStream("meta_ws_data")}}]),t}(Lc.Element),PJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),DJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"applyEvent",value:function(e){w(d(t.prototype),"applyEvent",this).call(this,e)}}]),t}(mp),BJ=new DJ("WSStreamData",PJ),_J=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(Ob,{ref:"streamPanel",title:"Streams: "+BJ.all().length},t.renderAllStreamData())]}}],[{key:"renderUserConnections",value:function(e){var t=[],n={margin:"1px"},i={"background-color":"black"},r=!0,a=!1,o=void 0;try{for(var s,l=e.connectionIds[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=OJ.get(u);t.push(Lc.createElement("span",{className:"label label-success",style:n},Lc.createElement("span",{className:"label label-primary",style:n},"Id: ",Lc.createElement("span",{className:"badge",style:i},c.id)),Lc.createElement("span",{className:"label label-primary",style:n},"IP: ",Lc.createElement("span",{className:"badge",style:i},c.data.IP)),Lc.createElement("span",{className:"label label-primary",style:n},"Streams: ",Lc.createElement("span",{className:"badge",style:i},c.streams.length))))}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return t}},{key:"renderUserTitle",value:function(e){var t={margin:"5px"};return[Lc.createElement("div",null,"User: ",Lc.createElement(sE,{id:e.id}),Lc.createElement("span",{className:"label label-success",style:t},"Websocket connections: ",e.connectionIds.length),Lc.createElement("span",{className:"label label-primary",style:t},"Total Redis streams: ",e.streams.length))]}},{key:"renderUserData",value:function(e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e.userIds[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value,u=LJ.get(l);n.push(Lc.createElement(ub,{ref:"userCardPanel",title:t.renderUserTitle(u)},Lc.createElement("h4",null,t.renderUserConnections(u))))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}},{key:"renderStreamDataTitle",value:function(e){var t={margin:"5px","background-color":"#953b39"};return[Lc.createElement("div",null,"Stream: ",Lc.createElement("span",{className:"badge",style:t},"#"+e.id))]}},{key:"renderStreamData",value:function(e){var n={margin:"5px",padding:"0px"};return[Lc.createElement(Ob,{ref:"streamPanel",title:t.renderStreamDataTitle(e),style:n,collapsed:!0},Lc.createElement("div",null," ",t.renderUserData(e)," "))]}},{key:"renderAllStreamData",value:function(){var e=[],n=!0,i=!1,r=void 0;try{for(var a,o=BJ.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.push(t.renderStreamData(s))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return e}}]),t}(Lc.Element),FJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("margin","20px 10%")}},{key:"render",value:function(){return[Lc.createElement(RJ,{ref:"wsUserDataUI"}),Lc.createElement(MJ,{ref:"wsConnectionDataUI"}),Lc.createElement(_J,{ref:"wsStreamDataUI"})]}}]),t}(Lc.Element),UJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{domainPadding:[0,0]})}},{key:"initZoom",value:function(){this.options.enableZoom&&w(d(t.prototype),"initZoom",this).call(this,!0)}}]),t}(PU),zJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.plotOptions={pointsAlias:function(e){var t;return(t=[]).concat.apply(t,C(e))},xCoordinateAlias:function(e){return e.moment},yCoordinateAlias:function(e){return e.index}},this.linePlotOptions=[];for(var n,i=0;i<this.options.timestamps.length;i+=1){var r=this.options.timestamps[i];r.sort(),0===i&&(n=r[0]);for(var a=r[0],o=0;o<r.length;o+=1)r[o]={moment:1e3*(r[o]-a+n),index:o};for(;r.length>5e3;)r=r.filter(function(e,t){return t%3!=2});this.options.timestamps[i]=r,this.linePlotOptions.push(Object.assign({},this.plotOptions,{stroke:Zc.getPersistentColor(i),strokeWidth:1.5,pointsAlias:function(e){return e}}))}}},{key:"render",value:function(){var e=this,t=this.options.timestamps.map(function(t,n){return Lc.createElement(AU,{plotOptions:e.linePlotOptions[n],data:t})});return[Lc.createElement(UJ,{chartOptions:Object.assign({},this.chartOptions),plotOptions:this.plotOptions,xAxisDomain:this.options.xDomain,yAxisDomain:this.options.yDomain,data:this.options.timestamps,enableZoom:this.options.enableZoom},t)]}}]),t}(DU),WJ=(ZG=aj=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.chartContainerPadding=40,O(n,"className",$G,y(n)),O(n,"select",ej,y(n)),O(n,"chartContainer",tj,y(n)),O(n,"defaultMessage",nj,y(n)),O(n,"statisticDataForm",ij,y(n)),O(n,"colorBubble",rj,y(n)),n}return h(t,e),t}(Jc),$G=R(ZG.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"10%",marginRight:"10%"}}}),ej=R(ZG.prototype,"select",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"10px"}}}),tj=R(ZG.prototype,"chartContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"600px",width:"100%",border:"1px solid grey",borderRadius:"10px",padding:this.chartContainerPadding+"px",marginTop:"20px",backgroundImage:"linear-gradient(to top right, #fff 60%, #dfdfdf)",textAlign:"center",justifyContent:"center",display:"flex",flexDirection:"column"}}}),nj=R(ZG.prototype,"defaultMessage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"1.5em"}}}),ij=R(ZG.prototype,"statisticDataForm",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:"10px",textAlign:"initial",justifyContent:"initial"}}}),rj=R(ZG.prototype,"colorBubble",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"20px",width:"20px",borderRadius:"20px"}}}),ZG),HJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("margin-bottom","5px")}},{key:"render",value:function(){var e,t=this;return this.options.value&&(e=Ap(this.options.value)),[Lc.createElement(iw,{date:e,ref:"endDatePicker",style:{display:"inline-block",marginRight:"3px"}}),Lc.createElement(jg,{size:Dc.EXTRA_SMALL,level:Pc.PRIMARY,style:{display:"inline-block"}},Lc.createElement(Md,{faIcon:"times",onClick:function(){return t.options.form.dispatch("removeTimeframe",t)}}),Lc.createElement(Md,{faIcon:"clock-o",onClick:function(){return t.endDatePicker.setDate(Ap.now())}}),Lc.createElement(Md,{faIcon:"level-down",onClick:function(){return t.options.form.dispatch("newTimeframe",t)}}))]}},{key:"getValue",value:function(){return this.endDatePicker.getDate()?this.endDatePicker.getDate().toUnix():this.options.value}},{key:"fetchData",value:function(e,t){var n=this;if(this._cachedData||(this._cachedData=new Map),this._cachedData.has(e))t(this._cachedData.get(e));else{var i=this.endDatePicker.getDate().toUnix(),r=i-e;zu.getJSON("/manage/charts/",{objectType:this.options.objectType,startDate:r,endDate:i}).then(function(i){n._cachedData.set(e,i.timestamps),t(n._cachedData.get(e))})}}},{key:"setColor",value:function(e){this.setStyle("background-color",e)}}]),t}(Lc.Element),VJ=(oj=Ze(WJ))(sj=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.statisticDataForm)}},{key:"setInterval",value:function(e){var t=this;return function(){return t.timeframeLengthInput.setValue((e/1e3).toString())}}},{key:"getTimeframeLength",value:function(){return parseInt(this.timeframeLengthInput.getValue())}},{key:"render",value:function(){var e=this;return[Lc.createElement(Nb,{label:"Interval length"},Lc.createElement(yg,{ref:"timeframeLengthInput",placehoder:"seconds"})),Lc.createElement(Nb,{label:"Presets",style:{marginBottom:"10px"}},Lc.createElement(jg,{level:Pc.PRIMARY,size:Dc.EXTRA_SMALL},Lc.createElement(Md,{onClick:this.setInterval(Ep.HOUR)},"Hour"),Lc.createElement(Md,{onClick:this.setInterval(Ep.DAY)},"Day"),Lc.createElement(Md,{onClick:this.setInterval(Ep.WEEK)},"Week"),Lc.createElement(Md,{onClick:this.setInterval(Ep.MONTH)},"Month"),Lc.createElement(Md,{onClick:this.setInterval(Ep.YEAR)},"Year"))),Lc.createElement("div",{ref:"timeframesArea"}),Lc.createElement(jg,{level:Pc.PRIMARY,size:Dc.EXTRA_SMALL},Lc.createElement(Md,{onClick:function(){return e.addTimeframe()}},"Add timeframe"),Lc.createElement(Md,{onClick:function(){return e.compute()}},"Compute"))]}},{key:"compute",value:function(){for(var e=this,t=this.timeframesArea.children.length,n=this.getTimeframeLength(),i=0,r=new Array(t),a=new Array(t),o=0;o<t;o+=1)!function(o){var s=e.timeframesArea.children[o];s.setColor(Zc.getPersistentColor(o)),s.fetchData(n,function(l){i+=1,r[o]=l,a[o]={startDate:new Ap(s.getValue()-n),endDate:new Ap(s.getValue()),color:Zc.getPersistentColor(o)},i===t&&e.dispatch("data",r,a)})}(o)}},{key:"addTimeframe",value:function(){this.timeframesArea.appendChild(Lc.createElement(HJ,{form:this,objectType:this.options.objectType}))}},{key:"onMount",value:function(){var e=this;this.addListener("removeTimeframe",function(t){e.timeframesArea.eraseChild(t)}),this.addListener("newTimeframe",function(t){e.timeframesArea.insertChild(Lc.createElement(HJ,{value:t.getValue()-e.getTimeframeLength(),form:e,objectType:e.options.objectType}),e.timeframesArea.options.children.indexOf(t)+1)})}}]),t}(Lc.Element))||sj,GJ=(lj=Ze(WJ))(uj=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.className)}},{key:"render",value:function(){var e=this;return[Lc.createElement("div",{ref:"chartArea",className:this.styleSheet.chartContainer},Lc.createElement("em",{className:this.styleSheet.defaultMessage},"No data available"),Lc.createElement("div",null,Lc.createElement(Md,{onClick:function(){return e.loadFull()},level:Pc.PRIMARY},"Load full chart"),Lc.createElement(Md,{onClick:function(){return e.enterCompareMode()},level:Pc.PRIMARY,className:this.styleSheet.select},"Compare timeframes")))]}},{key:"loadFull",value:function(){var e=this;zu.getJSON("/manage/charts/",{objectType:this.options.objectType}).then(function(t){
e.chartArea.setChildren([Lc.createElement("div",null,Lc.createElement(Md,{onClick:function(){return e.redraw()},level:Pc.PRIMARY,style:{float:"left"}},"Back")),Lc.createElement(zJ,{timestamps:[t.timestamps],enableZoom:!0,width:e.chartArea.getWidth()-2*e.styleSheet.chartContainerPadding})])})}},{key:"getTableColumns",value:function(){var e=this,t={textAlign:"center"};return[{value:function(e){return e.startDate.format("DD MMMM YYYY HH:mm")},headerName:"Start date",headerStyle:t,cellStyle:t},{value:function(e){return e.endDate.format("DD MMMM YYYY HH:mm")},headerName:"End date",headerStyle:t,cellStyle:t},{value:function(t){return Lc.createElement("div",{style:{backgroundColor:t.color},className:e.styleSheet.colorBubble})},headerName:"Color",headerStyle:{textAlign:"left"}},{value:function(e){return e.numTimestamps},headerName:"Number",headerStyle:t,cellStyle:t}]}},{key:"enterCompareMode",value:function(){var e=this,t=.7*this.chartArea.getWidth()-2*this.styleSheet.chartContainerPadding;this.chartArea.setChildren([Lc.createElement("div",{style:{height:"100%"}},Lc.createElement("div",{style:{float:"left",width:"30%",height:"100%"}},Lc.createElement(Md,{onClick:function(){return e.redraw()},level:Pc.PRIMARY,style:{float:"left"}},"Back"),Lc.createElement("div",{style:{clear:"both"}}),Lc.createElement(VJ,{ref:this.refLink("dataInput"),objectType:this.options.objectType})),Lc.createElement("div",{style:{float:"right",width:"70%",height:"100%"}},Lc.createElement(Gb,null,Lc.createElement(jd,{title:"Chart",ref:this.refLink("chartContainer")},Lc.createElement(zJ,{timestamps:[],width:t})),Lc.createElement(jd,{title:"Table",ref:this.refLink("tableContainer")},Lc.createElement(vb,{columns:this.getTableColumns(),entries:[]})))))]),this.chartContainer.attachListener(this.dataInput,"data",function(n){e.chartContainer.setChildren([Lc.createElement(zJ,{timestamps:n,width:t,key:Math.random()})])}),this.tableContainer.attachListener(this.dataInput,"data",function(t,n){for(var i=[],r=0;r<t.length;r+=1)i.push(Object.assign({},n[r],{numTimestamps:t[r].length}));e.tableContainer.setChildren([Lc.createElement(vb,{columns:e.getTableColumns(),entries:i,key:Math.random()})])})}}]),t}(Lc.Element))||uj,jJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("h3",null,"Users"),Lc.createElement(GJ,{objectType:"users"}),Lc.createElement("h3",null,"Submissions"),Lc.createElement(GJ,{objectType:"submissions"}),Lc.createElement("h3",null,"Custom runs"),Lc.createElement(GJ,{objectType:"customruns"})]}}]),t}(Lc.Element),YJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"toString",value:function(){return this.name}},{key:"requiresConfirmation",value:function(){return this.promptForConfirmation||0!==this.runOptions.length}}]),t}(fp),JJ=["Waiting","Running","Failed","Successful"],qJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"update",value:function(e){"logMessage"===e.type?(this.logEntries=this.logEntries||{entries:[],progress:{}},this.logEntries.entries.push(e.data)):w(d(t.prototype),"update",this).call(this,e)}},{key:"getVerboseStatus",value:function(){return JJ[this.status]}}]),t}(fp),XJ=new mp("CommandInstance",YJ),KJ=new mp("CommandRun",qJ),QJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){switch(this.options.commandRun.status){case 0:return"In queue..";case 1:return Lc.createElement(Ld,{ref:"progressBar",style:{margin:"0 auto"}});case 2:return Lc.createElement(kf,{icon:"times",style:{color:"red"}});case 3:return Lc.createElement(kf,{icon:"check",style:{color:"green"}})}}},{key:"onMount",value:function(){var e=this;this.attachEventListener(this.options.commandRun,"logProgress",function(t){e.progressBar?e.progressBar.set(t.data.percent||0):e.redraw()}),this.attachEventListener(this.options.commandRun,"updateOrCreate",function(t){e.redraw()})}}]),t}(Lc.Element),ZJ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=[Lc.createElement("h2",null,"Command run #",this.options.commandRun.id),Lc.createElement("h4",null,"Ran by ",Lc.createElement(sE,{userId:this.options.commandRun.userId})),Lc.createElement("h4",null,"Command instance: ",XJ.get(this.options.commandRun.commandInstanceId).name),Lc.createElement("h4",{ref:"statusField"},"Status: ",this.options.commandRun.getVerboseStatus()),Lc.createElement("h4",null,"Logs"),Lc.createElement(ap,{ref:"logger",numLines:40,readOnly:!0})];return this.options.commandRun.status>=2&&(e.push(Lc.createElement("h4",null,"Result:")),e.push(Lc.createElement(ap,{ref:"resultField",numLines:15,readOnly:!0}))),e}},{key:"getFormattedMessage",value:function(e){var t="";return t+="["+Ap(e.timestamp).format("DD/MM/YYYY HH:mm:SS")+"]",t+=" ",t+=e.message,t+="\n"}},{key:"getFormattedResult",value:function(e){return e?JSON.stringify(e):"Success!"}},{key:"onMount",value:function(){var e=this;if(w(d(t.prototype),"onMount",this).call(this),this.options.commandRun.logEntries&&this.options.commandRun.logEntries.entries){var n=!0,i=!1,r=void 0;try{for(var a,o=this.options.commandRun.logEntries.entries[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.logger.append(this.getFormattedMessage(s))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}this.attachEventListener(this.options.commandRun,"logMessage",function(t){e.logger.append(e.getFormattedMessage(t.data))}),this.attachEventListener(this.options.commandRun,"updateOrCreate",function(){e.redraw(),e.options.commandRun.status>=2&&e.resultField.append(e.getFormattedResult(e.options.commandRun.result))}),this.options.commandRun.status>=2&&this.resultField.append(this.getFormattedResult(this.options.commandRun.result))}}]),t}(Qg),$J=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("cursor","pointer"),e.setStyle("text-decoration","underline")}},{key:"render",value:function(){return Lc.T("Details")}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(){ZJ.show({commandRun:e.options.commandRun})})}}]),t}(Lc.Element),eq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){if(0===this.options.commandRun.status)return"-";var e;return e=1===this.options.commandRun.status?Ap.now()/1e3-this.options.commandRun.dateCreated:this.options.commandRun.dateFinished-this.options.commandRun.dateCreated,Ek.truncate(e,2)}},{key:"onMount",value:function(){var e=this;this.intervalId=setInterval(function(){e.options.commandRun.status>=2?(clearInterval(e.intervalId),delete e.intervalId):e.redraw()},700),this.attachEventListener(this.options.commandRun,"updateOrCreate",function(t){e.redraw()})}}]),t}(Lc.Primitive("span")),tq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getEntries",value:function(){return KJ.all().sort(function(e,t){return t.dateCreated-e.dateCreated})}},{key:"setColumns",value:function(){w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return XJ.get(e.commandInstanceId).name},headerName:"Command"},{value:function(e){return Lc.createElement(sE,{userId:e.userId})},headerName:"User"},{value:function(e){return Ap(e.dateCreated).format("DD/MM/YYYY HH:mm")},headerName:"Date"},{value:function(e){return Lc.createElement(eq,{commandRun:e})},headerName:"Duration"},{value:function(e){return Lc.createElement(QJ,{commandRun:e})},headerName:"Status",headerStyle:{textAlign:"center"},cellStyle:{textAlign:"center"}},{value:function(e){return Lc.createElement($J,{commandRun:e})},headerName:"Details"}])}}]),t}(vb),nq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement("span",{ref:"container",style:{position:"relative",overflow:"hidden",cursor:"pointer"}},Lc.createElement(kf,{icon:"question-circle",ref:"span"}))]}},{key:"onMount",value:function(){var e=this;this.span.addNodeListener("mouseover",function(){e.popup=Gw.create(e.container,Object.assign({target:e.span,title:e.options.title,children:e.options.description,transitionTime:300,titleFontSize:"10pt",contentStyle:{padding:"8px",textAlign:"left"},style:{minWidth:"300px",maxWidth:"500px"}}))}),this.span.addNodeListener("mouseout",function(){e.popup&&e.popup.hide()})}}]),t}(Lc.Element),iq=function(){function e(t){r(this,e),Object.assign(this,t)}return o(e,[{key:"toString",value:function(){return this.label}},{key:"getValue",value:function(){return this.key}}]),e}(),rq=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.fieldType={text:1,number:2,checkbox:3,select:4},n}return h(t,e),o(t,[{key:"getInputRef",value:function(){return this.options.shortName+"Input"}},{key:"render",value:function(){var e=null;if(this.options.type===this.fieldType.text&&(e=Lc.createElement(vg,{ref:this.getInputRef(),value:this.options.defaultValue})),this.options.type===this.fieldType.number&&(e=Lc.createElement(yg,{ref:this.getInputRef(),value:this.options.defaultValue})),this.options.type===this.fieldType.checkbox&&(e=Lc.createElement(Eg,{ref:this.getInputRef(),checked:this.options.defaultValue})),this.options.type===this.fieldType.select){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=this.options.choices[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(new iq(s))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}e=Lc.createElement(Gg,{ref:this.getInputRef(),options:t})}return Lc.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row"}},Lc.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"12px"}},this.options.description&&Lc.createElement(nq,{description:this.options.description,title:this.options.shortName})),Lc.createElement("div",{style:{flex:"1"}},Lc.createElement(Nb,{label:this.options.longName},e)))}},{key:"getValue",value:function(){return this.options.type===this.fieldType.select?this[this.getInputRef()].get().getValue():this[this.getInputRef()].getValue()}}]),t}(Lc.Element),aq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return this.options.commandInstance.name}},{key:"getBody",value:function(){var e=[];if(this.options.commandInstance.requiresConfirmation()){this.options.commandInstance.promptForConfirmation&&e.push(Lc.createElement("h4",{style:{color:"red"}},"This command requires a confirmation. Are you sure you want to run this command?"));var t=!0,n=!1,i=void 0;try{for(var r,a=this.options.commandInstance.runOptions[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push(Lc.createElement(rq,l({ref:o.shortName},o)))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}return e}},{key:"getActionName",value:function(){return[Lc.createElement(kf,{icon:"cogs",style:{paddingRight:"7px"}}),"Run"]}},{key:"getActionLevel",value:function(){return Pc.PRIMARY}},{key:"action",value:function(){var e={commandInstanceId:this.options.commandInstance.id,arguments:{}},t=!0,n=!1,i=void 0;try{for(var r,a=this.options.commandInstance.runOptions[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.arguments[o.shortName]=this[o.shortName].getValue()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}e.arguments=JSON.stringify(e.arguments),zl(e,function(){KJ.dispatch("redrawTable")}),this.hide()}}]),t}(Zg),oq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("margin-left","15%"),e.setStyle("margin-right","15%")}},{key:"render",value:function(){return[Lc.createElement("h3",null,"Command manager"),Lc.createElement("div",null,Lc.createElement("h4",null,"Run a command"),Lc.createElement(Gg,{options:XJ.all(),style:{marginLeft:"10px"},ref:"commandSelect"}),Lc.createElement(Md,{level:Pc.PRIMARY,size:Dc.SMALL,ref:"runCommandButton",faIcon:"cogs",style:{marginLeft:"10px"}})),Lc.createElement("div",{ref:"descriptionArea",style:{margin:"10px"}}),Lc.createElement("div",{style:{marginTop:"20px"}},Lc.createElement("h4",null,"Past commands"),Lc.createElement(tq,{ref:"pastCommandsTable"}))]}},{key:"onMount",value:function(){var e=this;cp.registerStream("GlobalCommandRuns");var t=function(){e.pastCommandsTable.redraw()};this.attachCreateListener(KJ,t),this.attachListener(KJ,"redrawTable",t),this.descriptionArea.node.textContent=this.commandSelect.get().description,this.commandSelect.addChangeListener(function(){e.descriptionArea.node.textContent=e.commandSelect.get().description}),this.runCommandButton.addClickListener(function(){var n=e.commandSelect.get();n.requiresConfirmation()?aq.show({commandInstance:n}):zl({commandInstanceId:n.id},t)})}}]),t}(Lc.Element),sq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.saveButton=this.saveButton}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.saveButton.addClickListener(function(){e.saveKey()}),this.entryInput.addChangeListener(function(){e.markChanged()})}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.options.entryInput=this.entryInput}},{key:"markChanged",value:function(){this.setStyle("background-color","lightblue")}},{key:"markUnchanged",value:function(){this.setStyle("background-color","white")}},{key:"saveKey",value:function(){var e=this,t=this.options.entry,n=[{keyId:t.key.id,languageId:t.language.id,newValue:this.entryInput.getValue()}];Wl({editEntries:JSON.stringify(n)},function(){e.markUnchanged()})}},{key:"getEntryInput",value:function(){return this.options.entryInput}}]),t}(mb),lq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.language=e.language}},{key:"getRowClass",value:function(){return sq}},{key:"setColumns",value:function(){var e={textAlign:"right"};w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return e.key.id},headerName:"Key ID",sortDescending:!0,cellStyle:e,headerStyle:e},{value:function(e){return e.key.value},headerName:"Entry value",sortDescending:!0,cellStyle:e,headerStyle:e},{value:function(e){return Lc.createElement("div",{className:"form-group"},Lc.createElement(vg,{ref:"entryInput",value:e.entry?e.entry.value:""}))},headerName:"Key value",sortDescending:!0,cellStyle:e,headerStyle:e},{value:function(e){return Lc.createElement("div",{className:"form-group"},Lc.createElement(Md,{ref:"saveButton",label:"Save",level:Pc.INFO}))},headerName:"Actions",sortDescending:!0}])}},{key:"getEntryKey",value:function(e,t){return t}},{key:"getEntries",value:function(){var e=this.language,t=new Map,n=!0,i=!1,r=void 0;try{for(var a,o=kk.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.getLanguage().id===e.id&&t.set(s.getTranslationKey().id,s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=[],u=!0,c=!1,h=void 0;try{for(var d,p=yk.all()[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;l.push({key:f,entry:t.get(f.id),language:e})}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}return l}}]),t}(vb),uq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.language=fk.get(1)}},{key:"render",value:function(){var e=this.getLanguageOptions();return[Lc.createElement("div",{className:"form-group"},Lc.createElement(Gg,{className:"form-control",options:e,ref:"languageSelect"}),Lc.createElement(lq,{ref:"translationTable",language:this.language})),Lc.createElement("div",{className:"btn-group"},Lc.createElement(Md,{ref:"saveAllButton",label:"Save all",level:Pc.INFO}),Lc.createElement(Md,{className:"pull-left",level:Pc.INFO,label:"Import",ref:"importButton",style:{position:"relative",overflow:"hidden"}},Lc.createElement(wg,{ref:"uploadFile",style:{position:"absolute",top:"0",right:"0",margin:"0",padding:"0",cursor:"pointer",opacity:"0",filter:"alpha(opacity=0)"}})),Lc.createElement(Md,{ref:"exportButton",label:"Export",level:Pc.INFO}))]}},{key:"getLanguageOptions",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=fk.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0)!function(){var t=r.value;e.push({value:t,toString:function(){return t.name}})}()}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.languageSelect.addChangeListener(function(){e.changeLanguage()}),this.saveAllButton.addClickListener(function(){e.saveAll()}),this.importButton.addClickListener(function(){e.importFromFile()}),this.exportButton.addClickListener(function(){e.exportToFile()})}},{key:"changeLanguage",value:function(){this.language=this.languageSelect.get().value,this.redraw()}},{key:"saveAll",value:function(){var e=this,t=[],n=!0,i=!1,r=void 0;try{for(var a,o=this.translationTable.rows[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.options.entryInput.getValue(),u=s.options.entry.key.id,c=s.options.entry.entry,h={};(""!==l||c)&&(c&&l===c.value||(h={keyId:u,newValue:l,languageId:this.language.id},c&&(h.entryId=c.id),t.push(h)))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}Wl({editEntries:JSON.stringify(t)},function(){e.redraw()},function(){e.saveAllButton.disable(),e.saveAllButton.setLevel(Pc.ERROR),e.saveAllButton.setLabel("Failed!"),setTimeout(function(){e.saveAllButton.enable(),e.redraw()},1e3)})}},{key:"importFromFile",value:function(){var e=this;this.uploadFile.node.onchange=function(){var t=new FileReader,n=e.uploadFile.getFile();if(n.size>1e8)return e.fileWarningModal.show(),console.warn("File ",n.name," too large. Skipping upload."),void e.uploadFile.setValue("");t.onprogress=function(){e.importButton.setLevel(Pc.WARNING),e.importButton.setLabel("Uploading..."),e.importButton.disable(),e.saveAllButton.disable();var t=!0,n=!1,i=void 0;try{for(var r,a=e.translationTable.rows[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.options.saveButton.disable()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}},t.onload=function(t){var n=t.currentTarget.result,i=!1,r="";try{var a=JSON.parse(n);if("[object Array]"!==Object.prototype.toString.call(a))i=!0,r="No array found!";else{var o=[],s=!0,l=!1,u=void 0;try{for(var c,h=a[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;if(!d.keyId){i=!0,r="Key id missing!";break}if(""!==d.entryValue){if(!d.entryValue){i=!0,r="Entry value missing!";break}d.entryValue=d.entryValue.trim();var p={keyId:d.keyId,newValue:d.entryValue,languageId:e.language.id};if(d.entryId){p.entryId=d.entryId;var f=kk.get(d.entryId);if(d.entryValue===f.value)continue}o.push(p)}}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}if(!i){Wl({editEntries:JSON.stringify(o)},function(){e.redraw()})}}}catch(e){i=!0,r=e.message}var g;i?(e.importButton.setLevel(Pc.ERROR),e.importButton.setLabel(r),g=2e3):(e.importButton.setLevel(Pc.SUCCESS),e.importButton.setLabel("Successfully uploaded!"),g=700),setTimeout(function(){e.importButton.enable(),e.importButton.setLevel(Pc.INFO),e.importButton.setLabel("Import"),e.saveAllButton.enable();var t=!0,n=!1,i=void 0;try{for(var r,a=e.translationTable.rows[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.options.saveButton.enable()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}},g),e.uploadFile.setValue("")},t.readAsText(n)}}},{key:"exportToFile",value:function(){var e=this.language,t=new Map,n=!0,i=!1,r=void 0;try{for(var a,o=kk.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.getLanguage().id===e.id&&t.set(s.getTranslationKey().id,s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var l=[],u=!0,c=!1,h=void 0;try{for(var d,p=yk.all()[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value,g=t.get(f.id);l.push({keyId:f.id,entryId:g?g.id:"",keyValue:f.value,entryValue:g?g.value:""})}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}var m=new Blob([JSON.stringify(l,null,2)],{type:"text/plain;charset=utf-8"});Xu.saveAs(m,"translations.json")}}]),t}(jd),cq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.deleteButton.addClickListener(function(){e.deleteKey()}),this.renameButton.addClickListener(function(){e.rename()})}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.textInput.hide(),this.renameState=!1,this.options.entry.editable?(this.renameButton.show(),this.deleteButton.show()):(this.renameButton.hide(),this.deleteButton.hide())}},{key:"deleteKey",value:function(){var e=this,t=this.options.entry.key,n=this.options.entry.table,i={editKeys:JSON.stringify({type:"delete",keyId:t.id})};n.changed=!0,this.hide(),Wl(i,function(){e.options.entry.table.changed=!0,yk.applyDeleteEvent({objectId:t.id});var n=!0,i=!1,r=void 0;try{for(var a,o=kk.all()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.translationKeyId==t.id&&kk.applyDeleteEvent({objectId:s.id})}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}})}},{key:"rename",value:function(){var e=this;if(this.renameState){if(this.renameButton.setLabel("Rename"),this.textInput.hide(),""!=this.textInput.getValue()){this.textElement.setValue(this.textInput.getValue());var t=this.textInput.getValue(),n=this.options.entry.key;Wl({editKeys:JSON.stringify({type:"rename",keyId:n.id,newValue:t})},function(){e.options.entry.table.changed=!0,e.options.entry.table.redraw()})}else this.textElement.setValue(this.oldTextElementValue);this.renameState=!1}else this.renameButton.setLabel("Save"),this.textInput.setValue(this.textElement.getValue()),this.oldTextElementValue=this.textElement.getValue(),this.textElement.setValue(""),this.textInput.show(),this.renameState=!0}}]),t}(mb),hq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.editable=!1}},{key:"getRowClass",value:function(){return cq}},{key:"setColumns",value:function(){var e={textAlign:"right"};w(d(t.prototype),"setColumns",this).call(this,[{value:function(e){return e.key.id},headerName:"Key ID",sortDescending:!0,cellStyle:e,headerStyle:e},{value:function(e){return[Lc.createElement(Lc.TextElement,{ref:"textElement",value:e.key.value}),Lc.createElement(vg,{ref:"textInput"})]},headerName:"Entry value",sortDescending:!0,cellStyle:e,headerStyle:e},{value:function(e){return[Lc.createElement("div",{className:"btn-group"},Lc.createElement(Md,{ref:"renameButton",label:"Rename",level:Pc.INFO}),Lc.createElement(Md,{ref:"deleteButton",label:"Delete",level:Pc.DANGER}))]},headerName:"Actions",sortDescending:!0}])}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.changed=!1}},{key:"getEntryKey",value:function(e,t){return t}},{key:"getEntries",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=yk.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;e.push({key:o,table:this,editable:this.editable})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"makeEditable",value:function(){this.editable=!0,this.redraw()}},{key:"makeNoneditable",value:function(){this.editable=!1,this.redraw()}}]),t}(vb),dq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e={display:"inline-block",overflow:"auto",resize:"none",height:"46px",width:"300px","vertical-align":"top"};return[Lc.createElement("label",null,"Enable editing: Â  "),Lc.createElement(Eg,{ref:"editableCheckbox"}),Lc.createElement(hq,{ref:"table"}),Lc.createElement(Vg,{ref:"textArea",className:"form-control",style:e}),Lc.createElement(Md,{label:"Add keys",ref:"saveButton",style:{marginLeft:"20px"},level:Pc.INFO}),Lc.createElement(Lc.TextElement,{ref:"addStatus"})]}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.changed=!1,this.saveButton.addClickListener(function(){e.saveKeys()}),this.editableCheckbox.addClickListener(function(){e.switchEditable()})}},{key:"switchEditable",value:function(){this.editableCheckbox.getValue()?this.table.makeEditable():this.table.makeNoneditable()}},{key:"hasChanged",value:function(){return this.table.changed||this.changed}},{key:"setUnchanged",value:function(){this.table.changed=!1,this.changed=!1}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this)}},{key:"saveKeys",value:function(){var e=this,t=this.textArea.getValue();this.textArea.setValue("");var n={editKeys:JSON.stringify({type:"add",keys:t})};this.saveButton.disable(),this.changed=!0,Wl(n,function(t){e.saveButton.setLabel("Success!"),e.saveButton.setLevel(Pc.SUCCESS),e.textArea.setValue(""),e.changed=!0,e.addStatus.setValue(t.keyInfo.added+" keys added, "+t.keyInfo.alreadyExists+" keys already exists"),setTimeout(function(){e.saveButton.enable(),e.saveButton.setLabel("Add keys"),e.saveButton.setLevel(Pc.INFO),e.addStatus.setValue(""),e.table.redraw()},2e3)},function(){e.saveButton.setLabel("Failed!"),e.saveButton.setLevel(Pc.ERROR),setTimeout(function(){e.saveButton.enable(),e.saveButton.setLabel("Add keys"),e.saveButton.setLevel(Pc.INFO)},700)})}}]),t}(jd),pq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getUrlPrefix",value:function(e){var t="/manage/translation/";return e&&(t+=e+"/"),t}},{key:"render",value:function(){return[Lc.createElement(Gb,{ref:"tabArea",variableHeightPanels:!0},Lc.createElement(dq,{ref:"keyManager",tabHref:this.getUrlPrefix("keys"),title:"Edit keys",active:!0}),Lc.createElement(uq,{ref:"entryManager",tabHref:this.getUrlPrefix("entries"),title:"Edit entries"}))]}},{key:"setURL",value:function(e){this.tabArea?this.showUrlTab(e[0]||"keys"):this.initialUrlParts=e}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.setURL(this.initialUrlParts),delete this.initialUrlParts,this.tabArea.titleArea.addClass("text-center"),this.tabArea.children[1].addClickListener(function(){e.keyManager.hasChanged()&&(e.entryManager.redraw(),e.keyManager.setUnchanged())})}},{key:"showUrlTab",value:function(e){"keys"===e?this.keyManager.dispatch("show"):"entries"===e&&(this.entryManager.dispatch("show"),this.keyManager.hasChanged()&&(this.entryManager.redraw(),this.keyManager.setUnchanged()))}}]),t}(jd),fq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getArticle",value:function(){var e=xS.get(this.articleId);return e&&e.getTranslation()}},{key:"getParent",value:function(){return mq.get(this.parentId)}},{key:"toString",value:function(){return this.getName()}},{key:"getFullURL",value:function(){var e=this.getParent();return e?e.getFullURL()+"/"+this.urlName:this.urlName}},{key:"getName",value:function(){return this.name||this.getArticle().getName()}},{key:"getParentIndex",value:function(){return this.parentIndex||this.id}},{key:"getEntries",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=mq.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.parentId===this.id&&e.push(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e.sort(function(e,t){return e.getParentIndex()-t.getParentIndex()}),e}}]),t}(fp),gq=function(e){function t(){return r(this,t),b(this,d(t).call(this,"DocumentationEntry",fq))}return h(t,e),t}(mp),mq=new gq,vq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Edit documentation entry"}},{key:"getActionName",value:function(){return"Apply"}},{key:"getEntry",value:function(){return this.options.entry}},{key:"getParentInput",value:function(){}},{key:"getAjaxUrl",value:function(){return"/docs/edit_entry/"}},{key:"getAjaxRequest",value:function(){return{entryId:this.getEntry().id,urlName:this.urlNameInput.getValue(),name:this.nameInput.getValue(),articleId:parseInt(this.articleIdInput.getValue())||0,parentIndex:parseInt(this.parentIndexInput.getValue())||0}}},{key:"getBody",value:function(){return[Lc.createElement(Lb,{style:{marginTop:"10px",color:"initial",fontSize:"initial"}},Lc.createElement(Nb,{label:"URL name",style:{fontWeight:"initial"}},Lc.createElement(vg,{ref:"urlNameInput",value:this.getEntry().urlName})),Lc.createElement(Nb,{label:"Name",style:{fontWeight:"initial"}},Lc.createElement(vg,{ref:"nameInput",value:this.getEntry().name})),Lc.createElement(Nb,{label:"Article Id",style:{fontWeight:"initial"}},Lc.createElement(vg,{ref:"articleIdInput",value:this.getEntry().articleId,placeholder:"Enter 0 (or leave blank) to create a new article instead"})),this.getParentInput(),Lc.createElement(Nb,{label:"Parent index",style:{fontWeight:"initial"}},Lc.createElement(vg,{ref:"parentIndexInput",value:this.getEntry().parentIndex})))]}},{key:"check",value:function(e){if(!e.urlName)return"URL name cannot be empty.";if(!e.name)return"Name cannot be empty.";var t=!0,n=!1,i=void 0;try{for(var r,a=mq.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(o!==this.getEntry()){if(o.getName()===e.name)return"Name already exists.";if(o.urlName===e.urlName)return"URL name already exists"}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"action",value:function(){var e=this.getAjaxRequest(),t=this.check(e);t?this.messageArea.showMessage(t,"red"):zu.postJSON(this.getAjaxUrl(),e),this.hide()}}]),t}(Zg),yq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return"Create documentation entry"}},{key:"getActionName",value:function(){return"Create"}},{key:"getEntry",value:function(){return{urlName:"",name:"",articleId:"",parentIndex:"",id:0}}},{key:"getParentInput",value:function(){var e=mq.all();return e.push({toString:function(){return"No Parent"},id:0}),Lc.createElement(Nb,{label:"Parent",style:{fontWeight:"initial"}},Lc.createElement(Gg,{ref:"parentInput",options:e,selected:e[e.length-1],style:{height:"30px"}}))}},{key:"getAjaxUrl",value:function(){return"/docs/create/"}},{key:"getAjaxRequest",value:function(){var e=w(d(t.prototype),"getAjaxRequest",this).call(this);return e.parentId=this.parentInput.get().id,e}}]),t}(vq),bq=$g(yq),kq=(cj=vj=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,{updateOnResize:!0})),O(e,"panel",hj,y(e)),O(e,"navPanel",dj,y(e)),O(e,"article",pj,y(e)),O(e,"articleSwitcher",fj,y(e)),O(e,"navElementDiv",gj,y(e)),O(e,"documentationPanel",mj,y(e)),e}return h(t,e),t}(Jc),hj=R(cj.prototype,"panel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%"}}}),
dj=R(cj.prototype,"navPanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"20%",maxWidth:"20%",height:"100%",display:"inline-block",float:"left",backgroundColor:"#f2f4f9",color:"#252525",overflowX:"auto",overflowY:"auto"}}}),pj=R(cj.prototype,"article",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:"80%",maxWidth:"80%",backgroundColor:"#f2f4f9",minHeight:"100%",maxHeight:"100%",height:"100%",display:"inline-block",overflowX:"hidden",overflowY:"scroll"}}}),fj=R(cj.prototype,"articleSwitcher",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"960px",maxWidth:"100%",textAlign:"justify",paddingTop:"25px",paddingBottom:"30px",minHeight:"100%",marginBottom:"-5px",display:"inline-block",paddingLeft:"5%",paddingRight:"5%",backgroundColor:"#fff",height:"auto !important"}}}),gj=R(cj.prototype,"navElementDiv",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px",paddingLeft:"12px",paddingTop:".75em",paddingBottom:".75em"}}}),mj=R(cj.prototype,"documentationPanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:function(){return window.innerHeight-45+"px"},overflow:"hidden",position:"absolute",minWidth:"100%",maxWidth:"100%",backgroundColor:"#fff"}}}),cj),wq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),this.options.collapsed||(e.setStyle("margin-left","-2px"),e.setStyle("margin-right","2px"))}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(t){t.stopPropagation(),e.options.parent.toggleCollapsed()})}}]),t}(wf),Eq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(kq.getInstance().navElementDiv),this.options.active?(e.setStyle("backgroundColor","#2980b9"),e.setStyle("color","#161616"),e.setStyle("fontWeight","bold")):(e.setStyle("backgroundColor","#f2f4f9"),e.setStyle("color","#161616"))}},{key:"setCollapsed",value:function(e){this.options.collapsed!==e&&(this.options.collapsed=e,this.options.shouldToggle&&(this.collapseIcon.setCollapsed(e),this.dispatch("toggleCollapsed")))}},{key:"toggleCollapsed",value:function(){this.setCollapsed(!this.options.collapsed)}},{key:"setActive",value:function(e){var t=this;if(this.options.active=e,this.redraw(),e){var n=this.options.documentationSwitchDispatcher;n.dispatch(this.options.documentationEntry),n.addListenerOnce(function(e){e!=t.options.documentationEntry&&t.setActive(!1)}),this.dispatch("setActive",e)}}},{key:"render",value:function(){var e;this.options.shouldToggle&&(e=Lc.createElement(wq,{ref:"collapseIcon",collapsed:this.options.collapsed,style:{width:"0.8em"},parent:this}));var t={};return this.options.shouldToggle||(t={"padding-left":"12px"}),[e,Lc.createElement("span",{style:t},Lc.T(this.options.documentationEntry.getName()))]}},{key:"onMount",value:function(){var e=this;this.options.active&&this.setActive(!0),this.addClickListener(function(){e.setActive(!0),e.options.shouldToggle&&e.toggleCollapsed()})}}]),t}(Lc.Element),Sq=new Hu,Cq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("cursor","pointer"),e}},{key:"getDocumentationEntry",value:function(){return this.options.parent.getDocumentationEntry()}},{key:"render",value:function(){return[w(d(t.prototype),"render",this).call(this),Lc.createElement("span",{className:"fa fa-pencil-square-o",ref:"editEntry",style:{cursor:"pointer","margin-right":"10px",float:"right"}})]}},{key:"getDirectOffsets",value:function(){return{top:this.node.offsetTop,left:this.node.offsetLeft,height:this.node.offsetHeight,width:this.node.offsetWidth}}},{key:"getOffset",value:function(e){return this.getDirectOffsets()[e]}},{key:"onMount",value:function(){var e=this;if(w(d(t.prototype),"onMount",this).call(this),this.editEntry.addClickListener(function(){vq.show({entry:e.getDocumentationEntry()})}),!this.options.parent.options.isRoot){var n=0;this.addDragListener({onStart:function(){n=0},onDrag:function(t,i){n+=i,!e.dragged&&Math.abs(n)>30&&(e.dragged=!0,e.setStyle("cursor","move"),e.options.shouldToggle&&e.setCollapsed(!0),e.setStyle("position","absolute"),e.setStyle("border","2px solid red"),e.setStyle("border-radius","3px"),e.setStyle("width",e.node.offsetWidth+20+"px"),e.setStyle("opacity",.85),i=n),e.dragged&&(e.setStyle("left",e.getOffset("left")+t+"px"),e.setStyle("top",e.getOffset("top")+i+"px"),Sq.dispatch("drag",e,e.getOffset("top")))},onEnd:function(){e.dragged&&(e.dragged=!1,Sq.dispatch("drop",e,e.getOffset("top")))}})}}}]),t}(Gd(Eq)),xq=function(e){return function(t){function n(){return r(this,n),b(this,d(n).apply(this,arguments))}return h(n,t),o(n,[{key:"getDefaultOptions",value:function(){return{collapsed:!0}}},{key:"extraNodeAttributes",value:function(e){e.setStyle("cursor","pointer"),e.setStyle("padding-left",((this.options.level||0)>0?12:0)+"px")}},{key:"getDocumentationEntry",value:function(){return this.options.documentationEntry}},{key:"render",value:function(){var t=this,i=this.options.level||0,r=this.options.collapsed&&!this.options.isRoot;this.subEntries=this.subEntries||[];var a=this.getDocumentationEntry().getEntries().map(function(e,r){return Lc.createElement(n,{documentationEntry:e,ref:t.refLinkArray("subEntries",r),level:t.options.isRoot?i:i+1,panel:t.options.panel,documentationSwitchDispatcher:t.options.documentationSwitchDispatcher})});return[Lc.createElement(e,{ref:"titleElement",documentationEntry:this.getDocumentationEntry(),shouldToggle:a.length&&!this.options.isRoot,collapsed:r,parent:this,documentationSwitchDispatcher:this.options.documentationSwitchDispatcher}),Lc.createElement("div",{ref:"subEntryArea",className:r?"hidden":""},a)]}},{key:"showArticle",value:function(){var e=this.getDocumentationEntry();this.options.panel.setArticle(e)}},{key:"onMount",value:function(){var e=this;this.titleElement.addListener("toggleCollapsed",function(){e.subEntryArea.toggleClass("hidden")}),this.attachListener(this.getDocumentationEntry(),"show",function(){e.showArticle(),e.titleElement.setActive(!0)}),this.attachListener(this.getDocumentationEntry(),"setCollapsed",function(t){e.titleElement.setCollapsed(t)}),this.titleElement.addListener("setActive",function(t){t&&e.showArticle()})}}]),n}(Lc.Element)},Tq=xq(Eq),Aq=xq(Cq),Lq=(yj=Ze(kq))(bj=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.documentationSwitchDispatcher=new Hu,e}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.documentationPanel)}},{key:"getDocumentationEntry",value:function(){return mq.get(this.options.documentationEntryId)}},{key:"render",value:function(){var e=this.getDocumentationEntry();return[Lc.createElement(jd,{orientation:Rc.HORIZONTAL,className:this.styleSheet.panel},Lc.createElement(jd,{ref:"navPanel",className:this.styleSheet.navPanel},Lc.createElement(Tq,{documentationEntry:e,isRoot:!0,panel:this,level:0,documentationSwitchDispatcher:this.documentationSwitchDispatcher})),Lc.createElement(jd,{className:this.styleSheet.article},Lc.createElement(zC,{ref:"articleSwitcher",className:this.styleSheet.articleSwitcher,initialArticle:e.getArticle(),lazyRender:!0})))]}},{key:"getBaseUrl",value:function(){return"/docs/"}},{key:"getUrlPrefix",value:function(e){var t=this.getBaseUrl();return e&&(t+=e+"/"),t}},{key:"checkUrl",value:function(e,t){return t.getFullURL()===e.join("/")}},{key:"setURL",value:function(e){if(this.articleSwitcher){var t=!0,n=!1,i=void 0;try{for(var r,a=mq.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(this.checkUrl(e,o))return void this.focusToDocumentationEntry(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}else this.initialUrlParts=e}},{key:"setArticle",value:function(e){this.articleSwitcher.setActive(e.getArticle()),nm.changeURL(this.getUrlPrefix(e.getFullURL()))}},{key:"focusToDocumentationEntry",value:function(e){e.dispatch("show"),this.uncollapsePathTo(e)}},{key:"uncollapsePathTo",value:function(e){for(;e;)e.dispatch("setCollapsed",!1),e=e.getParent()}},{key:"onMount",value:function(){this.setURL(this.initialUrlParts),delete this.initialUrlParts}}]),t}(Lc.Element))||bj,Iq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBaseUrl",value:function(){return"/docs/edit/"}},{key:"getDocumentationEntry",value:function(){var e=mq.get(1);return e.getEntries=function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=mq.all()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.parentId!==this.id&&o.parentId||o.id===this.id||e.push(o)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e.sort(function(e,t){return e.getParentIndex()-t.getParentIndex()}),e},e}},{key:"render",value:function(){var e=this.getDocumentationEntry();return[Lc.createElement(jd,{orientation:Rc.HORIZONTAL,className:this.styleSheet.panel,key:"container"},Lc.createElement(jd,{ref:"navPanel",className:this.styleSheet.navPanel},Lc.createElement("div",{style:{maxHeight:"90%",overflowY:"auto"},key:"navigationContainer"},Lc.createElement(Aq,{ref:"root",documentationEntry:e,isRoot:!0,panel:this,level:0,documentationSwitchDispatcher:this.documentationSwitchDispatcher})),Lc.createElement("div",{style:{position:"absolute",bottom:"5%"}},Lc.createElement(Md,{ref:"trash",faIcon:"trash",disabled:!0,level:Pc.WARNING,size:Dc.EXTRA_LARGE,style:{marginLeft:"50px",padding:"16px 22px"}}),Lc.createElement(bq,{faIcon:"plus",level:Pc.PRIMARY,size:Dc.EXTRA_LARGE,style:{marginLeft:"50px",padding:"16px 22px"}}))),Lc.createElement(jd,{className:this.styleSheet.article},Lc.createElement(zC,{ref:"articleSwitcher",initialArticle:e.getArticle(),lazyRender:!0,showEditButton:!0,className:this.styleSheet.articleSwitcher})))]}},{key:"checkUrl",value:function(e,t){return"edit/"+t.getFullURL()===e.join("/")}},{key:"getNavElement",value:function(e){!function t(n){if(n.getDocumentationEntry()===e)return n;var i=null,r=!0,a=!1,o=void 0;try{for(var s,l=n.subEntries[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i=i||t(u)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i}(this.root)}},{key:"modifyEntry",value:function(e,t,n){var i=[];if(-1===t)i.push({entryId:e.id,parentId:-1}),mq.applyDeleteEvent({objectId:e.id});else if(t){var r=[],a=!0,o=!1,s=void 0;try{for(var l,u=mq.all()[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.parentId===t.id&&c!==e&&r.push(c)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}if(r.sort(function(e,t){return e.parentIndex-t.parentIndex}),e.parentId=t.id,r.length){r[0].parentIndex=1,n===r[0]&&(e.parentIndex=1,r[0].parentIndex=2),i.push({entryId:r[0].id,parentIndex:r[0].parentIndex});for(var h=1;h<r.length;h+=1)r[h].parentIndex=r[h-1].parentIndex+1,r[h]===n&&(e.parentIndex=r[h].parentIndex,r[h].parentIndex+=1),i.push({entryId:r[h].id,parentIndex:r[h].parentIndex});n||(e.parentIndex=r.length+1)}i.push({entryId:e.id,parentId:t.id,parentIndex:e.parentIndex})}else e.parentId=null,e.parentIndex=null,i.push({entryId:e.id,parentId:0,parentIndex:0});zu.postJSON("/docs/change_parents/",{modifiedEntries:JSON.stringify(i)})}},{key:"setTarget",value:function(e,t,n,i){var r=!0,a=!1,o=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u.titleElement.setStyle("border",""),u.titleElement.setStyle("border-top",""),u.titleElement.setStyle("border-bottom","")}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}if(this.trash.setLevel(Pc.WARNING),!e)return void this.trash.setLevel(Pc.DANGER);if("drag"===t)return e.titleElement.setStyle(n,"2px solid red"),[null,null,null];var c,h;if("border"===n){c=e.getDocumentationEntry(),h=null;var d=!0,p=!1,f=void 0;try{for(var g,m=mq.all()[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;v.parentId===c.id&&(null===h||h.parentIndex>v.parentIndex)&&(h=v)}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}}else"border-top"===n?(h=e.getDocumentationEntry(),c=mq.get(h.parentId)):(h=e.getDocumentationEntry(),c=mq.get(h.parentId),h=null);return[c,h]}},{key:"getTrashOffset",value:function(){return Pe(this.trash).top-50}},{key:"redrawAndUncollapse",value:function(e,t){var n=this;this.redraw();!function i(r){if(r.getDocumentationEntry()!==t){if(-1!==e.indexOf(r.getDocumentationEntry())&&r.getDocumentationEntry().parentId){var a=mq.get(r.getDocumentationEntry().parentId),o=n.getNavElement(a);o&&o.titleElement.options.shouldToggle&&o.titleElement.setCollapsed(!1)}var s=!0,l=!1,u=void 0;try{for(var c,h=r.subEntries[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){i(c.value)}}catch(e){l=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw u}}}}(this.root)}},{key:"getVisibleEntries",value:function(e){var t=[];return function n(i){if(i.titleElement!==e&&(t.push(i),!i.titleElement.options.collapsed)){var r=!0,a=!1,o=void 0;try{for(var s,l=i.subEntries[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){n(s.value)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}}(this.root),t}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.attachCreateListener(mq,function(t){e.attachUpdateListener(t,function(){e.focusToDocumentationEntry(t)})},!0),Sq.addListener(function(t,n,i){var r=e.getVisibleEntries(n);if(r.length){var a=function(e){return e.titleElement.getOffset("top")};r.sort(function(e,t){return a(e)-a(t)});var o=n.getDocumentationEntry(),s=null,l=null;if(Math.abs(e.getTrashOffset()-i)<80)s=-1,e.setTarget(null,t,"border",r);else if(a(r[0])>i){var u=e.setTarget(r[0],t,"border-top",r),c=S(u,2);s=c[0],l=c[1]}else if(a(r[r.length-1])+10<i){var h=e.setTarget(r[r.length-1],t,"border-bottom",r),d=S(h,2);s=d[0],l=d[1]}else{var p=!1,f=!0,g=!1,m=void 0;try{for(var v,y=r[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value;if(Math.abs(a(b)-i)<10){var k=e.setTarget(b,t,"border",r),w=S(k,2);s=w[0],l=w[1],p=!0;break}}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}if(!p)for(var E=0;E<r.length;E+=1)if(a(r[E])>i){if(E>0&&i-a(r[E-1])<a(r[E])-i&&r[E].getDocumentationEntry().parentId!==r[E-1].getDocumentationEntry().id){var C=e.setTarget(r[E-1],t,"border-bottom",r),x=S(C,2);s=x[0],l=x[1]}else{var T=e.setTarget(r[E],t,"border-top",r),A=S(T,2);s=A[0],l=A[1]}break}}if("drop"===t){var L=function(t){t&&e.modifyEntry(o,s,l),e.redraw(),e.focusToDocumentationEntry(o)};L(-1===s?window.confirm("Are you sure you want to delete this entry and all it's sub-entries?")?!0:!1:!0)}}})}}]),t}(Lq),Nq=function(e){function t(){var e;return r(this,t),e=b(this,d(t).call(this,"docs",iT(Lq),"Documentation")),e.subroutes=[new qy("edit",iT(Iq),[],"Edit Documentation")],e}return h(t,e),o(t,[{key:"matchesOwnNode",value:function(e){return 0===e.length||"edit"!==e[0]}}]),t}(qy),Oq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return Lc.createElement(ub,{title:"Analytics Panel",level:Pc.PRIMARY,style:{margin:"10px 30%"}},Lc.createElement("div",{style:{padding:"5px"}},"Analytics is not online right now!"))}}]),t}(Lc.Element),Rq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{bodyStyle:{padding:"0"}}}}]),t}(ub),Mq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({fork:!1},w(d(t.prototype),"getDefaultOptions",this).call(this))}},{key:"getProgrammingLanguage",value:function(){return this.options.job.getProgrammingLanguage()}},{key:"getTitle",value:function(){var e=this,t={margin:"0.3em"},n=this.options.forkable?Lc.createElement(Dd,{ref:"forkButton",level:Pc.INFO,size:Dc.SMALL,style:t,statusOptions:[{faIcon:"code-fork",label:Lc.T("Fork")},{faIcon:"spinner fa-spin",label:" creating workspace..."},"Success","Failed"]}):null;return[Lc.createElement("span",{style:t},this.getProgrammingLanguage().toString()),Lc.createElement("span",{style:t},Ek.memory(this.options.job.getSize())),Lc.createElement(Md,{ref:"downloadSourceButton",label:Lc.T("Download"),level:Pc.INFO,size:Dc.SMALL,faIcon:"download",style:t}),Lc.createElement(Md,{label:Lc.T("Copy to clipboard"),faIcon:"files-o",style:t,level:Pc.INFO,size:Dc.SMALL,onClick:function(){return e.sourceCodeHighlighter.copyTextToClipboard()}}),n]}},{key:"render",value:function(){var e={};return this.getProgrammingLanguage()&&(e.aceMode=this.getProgrammingLanguage().aceMode),Lc.createElement(ap,l({ref:"sourceCodeHighlighter"},e,{value:this.options.job.sourceText,maxLines:512}))}},{key:"onMount",value:function(){var e=this;this.downloadSourceButton.addClickListener(function(){var t=new Blob([e.options.job.sourceText],{type:"text/plain;charset=utf-8"}),n=e.getProgrammingLanguage(),i=e.options.name;n&&(i+="."+n.getExtension()),Xu.saveAs(t,i)}),this.options.forkable&&this.forkButton.addClickListener(function(){USER.isAuthenticated?e.forkToWorkspace():window.open("/workspace/fork/"+e.options.job.urlHash,"_blank")})}},{key:"forkToWorkspace",value:function(){this.options.forkable&&this.forkButton.postJSON("/eval/fork_custom_run/",{customRunId:this.options.job.id}).then(function(e){return window.open("/workspace/"+e.workspaceId,"_blank")})}}]),t}(Rq),Pq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Input")}},{key:"render",value:function(){return Lc.createElement(ap,{value:this.options.customRun.stdin,maxLines:32})}}]),t}(Rq),Dq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Output")}},{key:"render",value:function(){return Lc.createElement(ap,{value:this.options.customRun.stdout,maxLines:32})}}]),t}(Rq),Bq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Stderr")}},{key:"render",value:function(){return Lc.createElement(ap,{value:this.options.customRun.stderr,maxLines:32})}}]),t}(Rq),_q=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Compilation")}},{key:"render",value:function(){return Lc.createElement(UT,{customRun:this.options.customRun})}}]),t}(ub),Fq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(mh.Container.SMALL),e.setStyle("marginBottom","20px")}},{key:"render",value:function(){var e,t;this.options.customRun.compileOnly||(e=this.getIOPanel(),t=Lc.createElement(zT,{customRun:this.options.customRun}));var n=[Lc.createElement("div",{style:{margin:"25px 0"}},Lc.createElement(Mq,{job:this.options.customRun,name:this.options.customRun.urlHash,forkable:!0}))];return this.options.customRun.shareOnly||(n=[].concat(C(n),[e,Lc.createElement("div",{style:{margin:"25px 0"}},Lc.createElement(_q,{customRun:this.options.customRun})),t])),n}},{key:"getIOPanel",value:function(){var e;return this.options.customRun.stderr&&(e=Lc.createElement(Bq,{customRun:this.options.customRun})),Lc.createElement("div",{style:{margin:"25px 0"}},Lc.createElement("div",{className:"".concat(mh.FlexContainer.HORIZONTAL)},Lc.createElement(Pq,{customRun:this.options.customRun}),Lc.createElement(Dq,{customRun:this.options.customRun}),e))}}]),t}(jd),Uq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=sN.get(this.options.customRunId);return e&&Lc.createElement(Fq,{customRun:e})}}]),t}(Lc.Element),zq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Results")}},{key:"render",value:function(){return Lc.createElement(PL,{evalJob:this.options.evalJob})}}]),t}(ub),Wq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTitle",value:function(){return Lc.T("Summary")}},{key:"render",value:function(){var e=new _L(this.options.evalJob);return Lc.createElement("div",{style:{padding:10}},e.getSummary())}}]),t}(ub),Hq=(kj=xj=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"submissionPanel",wj,y(n)),O(n,"section",Ej,y(n)),O(n,"flexSection",Sj,y(n)),O(n,"cardPanels",Cj,y(n)),n}return h(t,e),t}(Jc),wj=R(kj.prototype,"submissionPanel",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"20px",width:"1200px",marginLeft:15,marginRight:15,maxWidth:"calc(100% - 30px)"}}}),Ej=R(kj.prototype,"section",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"25px 0"}}}),Sj=R(kj.prototype,"flexSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column"}}}),Cj=R(kj.prototype,"cardPanels",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:25,flex:1}}}),kj),Vq=(Tj=Ze(Hq))(Aj=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.SMALL),e.addClass(this.styleSheet.submissionPanel)}},{key:"render",value:function(){var e=this.styleSheet,t=this.options.evalJob;return[Lc.createElement("div",{className:e.section},Lc.createElement(Mq,{job:t,name:t.id,forkable:!1})),Lc.createElement("div",{className:e.flexSection},Lc.createElement(Wq,{evalJob:t,className:e.cardPanels}),Lc.createElement(_q,{customRun:t,className:e.cardPanels})),Lc.createElement(zq,{evalJob:t,bodyStyle:{padding:"0% 2%"}})]}}]),t}(jd))||Aj,Gq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({display:"flex",justifyContent:"center"})}},{key:"renderNotLoaded",value:function(){var e=iT.renderLoading;return"function"==typeof e&&(e=e()),e}},{key:"renderError",value:function(){var e=iT.renderError;return"function"==typeof e&&(e=e({message:"Could not find submission with id "+this.options.args[0]})),e}},{key:"render",value:function(){var e=this,t=parseInt(this.options.args[0]);if(this.options.notPublic)return this.renderError();var n=TL.get(t);return n?Lc.createElement(Vq,{evalJob:n}):(TL.fetchWithContest(t,function(){return e.redraw()},function(){return e.updateOptions({notPublic:!0})}),this.renderNotLoaded())}}]),t}(Lc.Element),jq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this;return this.options.tokenFail?[Lc.createElement("div",{className:"col-sm-8 col-sm-offset-2 text-center"},Lc.createElement("h1",null,"Invalid password reset link"),Lc.createElement("p",null,"The password reset link is invalid, either because it has already been used or has been copied incorrectly from the email. Please request a ",Lc.createElement(Xd,{href:"/accounts/password_reset/",value:"new password reset"}),"."))]:[Lc.createElement("div",{className:"text-center"},Lc.createElement("h1",null,"Set password")),Lc.createElement(Nb,{ref:"passwordFormField",label:"New password"},Lc.createElement(kg,{ref:"passwordInput"})),Lc.createElement(Nb,{label:" "},Lc.createElement("div",null,Lc.createElement(Dd,{ref:"setPasswordButton",level:Pc.PRIMARY,onClick:function(){return e.setNewPassword()},statusOptions:["Set password",{faIcon:"spinner fa-spin",label:" Setting..."},"Password set","Password failed"]})))]}},{key:"setNewPassword",value:function(){var e=this;this.passwordFormField.removeError(),this.setPasswordButton.postJSON("/accounts/password_change/",{newPassword:this.passwordInput.getValue()}).then(function(){return location.replace("/")},function(t){return e.passwordFormField.setError(t.message)})}}]),t}(Lc.Element),Yq=(Lj=Bj=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"className",Ij,y(n)),O(n,"loginWidget",Nj,y(n)),O(n,"forgotPassword",Oj,y(n)),O(n,"signInButtonContainer",Rj,y(n)),O(n,"signInButton",Mj,y(n)),O(n,"rememberMeContainer",Pj,y(n)),O(n,"input",Dj,y(n)),n}return h(t,e),t}(Kw),Ij=R(Lj.prototype,"className",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"30%",minWidth:"300px",margin:"0 auto"}}}),Nj=R(Lj.prototype,"loginWidget",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:0,width:"auto",height:"auto"}}}),Oj=R(Lj.prototype,"forgotPassword",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"hidden"}}}),Rj=R(Lj.prototype,"signInButtonContainer",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"auto"}}}),Mj=R(Lj.prototype,"signInButton",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:this.themeProperties.COLOR_PRIMARY,color:qe(this.themeProperties.COLOR_PRIMARY,1),minWidth:"initial",paddingLeft:20,paddingRight:20,outline:"none",":hover":{backgroundColor:qe(this.themeProperties.COLOR_PRIMARY,.15),color:qe(this.themeProperties.COLOR_PRIMARY,1),border:0}}}}),Pj=R(Lj.prototype,"rememberMeContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"29px"}}}),Dj=R(Lj.prototype,"input",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"inherit !important",borderBottom:"2px solid "+this.themeProperties.COLOR_PRIMARY,borderRadius:"0 !important",":hover":{borderBottom:"2px solid "+this.themeProperties.COLOR_PRIMARY+" !important"},":focus":{borderBottom:"2px solid "+this.themeProperties.COLOR_PRIMARY+" !important"}}}}),Lj),Jq=(_j=Ze(Yq))(Fj=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.className)}},{key:"getThirdPartyLogin",value:function(){}},{key:"getClearBothArea",value:function(){}},{key:"getRememberMeCheckbox",value:function(){return Lc.createElement("div",{className:this.styleSheet.rememberMeContainer},w(d(t.prototype),"getRememberMeCheckbox",this).call(this))}},{key:"getSignInValue",value:function(){return"Set password"}},{key:"sendLogin",value:function(){var e=this;this.clearErrorMessage();var t=this.passwordInput.getValue();if(t!==this.passwordConfirmInput.getValue())return void this.setErrorMessage({message:"Passwords don't match."});zu.postJSON("/accounts/password_change/",{newPassword:t}).then(function(){return location.href="/"},function(t){return e.setErrorMessage(t)})}},{key:"render",value:function(){return[Lc.createElement("form",{ref:"form"},this.getPasswordInput(),this.getPasswordInput({ref:"passwordConfirmInput",name:"passwordConfirm",placeholder:"Confirm Password"}),this.getSignInButton(),Lc.createElement("div",{style:{clear:"both",height:"20px"}}),this.getErrorArea())]}}]),t}(eE))||Fj,qq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{startOpacity:.65,endOpacity:1,hoverTime:250,displayPercent:!0}}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.opacity=this.options.opacity||this.options.startOpacity}},{key:"getArcPoint",value:function(e,t,n){for(var i=this.options.spacing,r=this.options.center,a=ru(r,pu(e,t,r)),o=0,s=Math.PI/2,l=0;l<20;++l){var u=(o+s)/2;tu(pu(e+(1===n?1:-1)*u,t,r),a)>i/2?s=u:o=u}return pu(e+(1===n?1:-1)*o,t,r)}},{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1===t&&(t=e/2);var n=this.options.startAngle,i=this.options.angleSpan,r=this.options.innerRadius+t,a=this.options.outerRadius+e,o=this.getArcPoint(n,r,1),s=this.getArcPoint(n+i,r,-1),l=this.getArcPoint(n,a,1),u=this.getArcPoint(n+i,a,-1),c=i<=Math.PI?0:1;return"M "+o.x+" "+o.y+" A "+r+" "+r+" 0 "+c+" 1 "+s.x+" "+s.y+"L "+u.x+" "+u.y+" A "+a+" "+a+" 0 "+c+" 0 "+l.x+" "+l.y+"Z"}},{key:"getMiddlePoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1===t&&(t=e/2);var n=this.options.startAngle,i=this.options.angleSpan,r=this.options.innerRadius+t,a=this.options.outerRadius+e;return this.getArcPoint(n+i/2,(r+a)/2,-1)}},{key:"changeRadiusTransition",value:function(e,t){var n=this;return new Lf({func:function(t){n.path.setPath(n.getPath(t*e));var i=n.getMiddlePoint(t*e);n.options.displayPercents&&n.label.setPosition(i.x,i.y)},duration:t})}},{key:"render",value:function(){var e=[Lc.createElement(ag.Path,{ref:"path",d:this.getPath(),fill:this.options.pathFill})];return this.options.displayPercents&&e.push(Lc.createElement(ag.Text,l({ref:"label",text:this.options.label||(100*this.options.percent).toFixed(1)+"%"},this.getMiddlePoint(),{color:"white",fill:"white"}))),e}},{key:"onMount",value:function(){var e=this;this.addNodeListener("mouseenter",function(){e.changeOpacityTransition(e.options.endOpacity,e.options.hoverTime).start(),e.changeRadiusTransition(e.options.hoverExpandRadius,e.options.hoverTime).start(),"function"==typeof e.options.mouseenterCallback&&e.options.mouseenterCallback()}),this.addNodeListener("mouseout",function(){e.changeOpacityTransition(e.options.startOpacity,e.options.hoverTime).start(),e.changeRadiusTransition(0,e.options.hoverTime).start(),"function"==typeof e.options.mouseoutCallback&&e.options.mouseoutCallback()})}}]),t}(ag.Group),Xq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{innerRadius:40,outerRadius:60,hoverExpandRadius:10,startAngle:3*Math.PI/2,spacing:2,sectorExtraOptions:{}}}},{key:"render",value:function(){var e=[],t=0,n=!0,i=!1,r=void 0;try{for(var a,o=this.options.sectors[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){t+=a.value.size}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}var s=this.options.startAngle,u=!0,c=!1,h=void 0;try{for(var d,p=this.options.sectors[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value,g=2*Math.PI*f.size/t;e.push(Lc.createElement(qq,l({startAngle:s,angleSpan:g,innerRadius:this.options.innerRadius,outerRadius:this.options.outerRadius,hoverExpandRadius:this.options.hoverExpandRadius,center:this.options.center,spacing:this.options.spacing,pathFill:f.color,percent:f.size/t},this.options.sectorExtraOptions,f))),s+=g}}catch(e){c=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}return e}}]),t}(ag.Group),Kq=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{width:240,height:240,innerRadius:50,outerRadius:100,hoverExpandRadius:20,sectorExtraOptions:{}}}},{key:"extraNodeAttributes",value:function(e){e.setStyle("height",this.options.height+"px"),e.setStyle("width",this.options.width+"px")}},{key:"render",value:function(){
return[Lc.createElement(Xq,{center:{x:this.options.width/2,y:this.options.height/2},innerRadius:this.options.innerRadius,outerRadius:this.options.outerRadius,hoverExpectedRadius:this.options.hoverExpandRadius,sectorExtraOptions:this.options.sectorExtraOptions,sectors:this.options.sectors})]}}]),t}(ag.SVGRoot),Qq=(Uj=jj=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"miniInstance",zj,y(n)),O(n,"questionnaireResponseWidget",Wj,y(n)),O(n,"responsesLeftSideContainer",Hj,y(n)),O(n,"responsesRightSide",Vj,y(n)),O(n,"rowList",Gj,y(n)),n}return h(t,e),t}(IP),zj=R(Uj.prototype,"miniInstance",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"5px",border:"1px solid #eee",cursor:"pointer"}}}),Wj=R(Uj.prototype,"questionnaireResponseWidget",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-flex",height:"100%",width:"100%",overflow:"hidden",position:"relative"}}}),Hj=R(Uj.prototype,"responsesLeftSideContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",overflow:"auto",width:"150px",borderRight:"1px solid #ddd"}}}),Vj=R(Uj.prototype,"responsesRightSide",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",flex:"1",width:"calc(100% - 150px)",height:"100%",overflow:"auto"}}}),Gj=R(Uj.prototype,"rowList",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxHeight:"200px",overflowY:"auto"}}}),Uj),Zq=(Yj=Ze(Qq))(Jj=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getInstanceResponse",value:function(e){return e.getQuestionResponse(this.options.question.id)}},{key:"isOtherResponse",value:function(e){return this.options.question.type===CR.Type.SINGLE_CHOICE?0===(e.choiceIds||[]).length&&e.text:!!e.text}},{key:"getInstances",value:function(){var e=this;return this.options.instances.filter(function(t){return e.getInstanceResponse(t)})}},{key:"buildChoiceFrequencyMap",value:function(){var e=new Map,t=!0,n=!1,i=void 0;try{for(var r,a=this.getInstances()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,s=this.getInstanceResponse(o),l=!0,u=!1,c=void 0;try{for(var h,d=(s.choiceIds||[])[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;e.set(p,(e.get(p)||0)+1)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}this.isOtherResponse(s)&&e.set(0,(e.get(0)||0)+1)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getQuestionOptions",value:function(){var e=C(this.options.question.getOptions());return this.options.question.otherChoice&&e.push({id:0,answer:"Other"}),e}},{key:"getPieChart",value:function(){for(var e=this.buildChoiceFrequencyMap(),t=this.options.question.getOptions(),n=[],i=0;i<t.length;i+=1)e.get(t[i].id)&&n.push({size:e.get(t[i].id),color:Zc.getPersistentColor(i)});return e.get(0)&&n.push({size:e.get(0),color:Zc.getPersistentColor(t.length)}),Lc.createElement(Kq,{sectors:n})}},{key:"getColorList",value:function(){var e=this,t=this.buildChoiceFrequencyMap();return Lc.createElement(vb,{entries:this.getQuestionOptions(),columns:[{value:function(t){return Lc.createElement(sp,{value:t.answer,className:e.styleSheet.markup})},headerName:Lc.T("Choice")},{value:function(e){return t.get(e.id)||0},headerName:Lc.T("Votes")},{value:function(e,t){return Lc.createElement("div",{style:{height:"20px",width:"20px",backgroundColor:Zc.getPersistentColor(t)}})},headerName:Lc.T("Color")},{value:function(t){return Lc.createElement(Eg,{ref:e.refLink("optionFilter"+t.id)})},headerName:Lc.T("Filter")}]})}},{key:"render",value:function(){var e,t=this.options.question;if(t.type===CR.Type.PLAIN_TEXT)e=Lc.createElement(Xb,{rows:this.getInstances(),className:this.styleSheet.rowList,rowParser:function(e){return[Lc.createElement(sE,{userId:e.userId}),": ",e.getQuestionResponse(t.id).text]}});else{e=[Lc.createElement("div",{style:{display:"inline-block",height:"100%",width:"50%",textAlign:"center",float:"left"}},this.getPieChart()),Lc.createElement("div",{style:{display:"inline-block",height:"100%",width:"50%",float:"right"}},this.getColorList()),Lc.createElement("div",{style:{clear:"both"}})];var n=this.getInstances().filter(function(e){return e.getQuestionResponse(t.id).text});n.length&&(e.push(Lc.createElement("h4",{style:{marginRight:"10px"}},"Other answers:")),e.push(Lc.createElement(Xb,{rows:n,className:this.styleSheet.rowList,rowParser:function(e){return[Lc.createElement(sE,{userId:e.userId}),": ",e.getQuestionResponse(t.id).text]}})))}return Lc.createElement(ub,{level:Pc.PRIMARY,title:t.text,headingCentered:!1,style:{marginBottom:"10px",width:"80%",marginLeft:"10%"}},e)}},{key:"onMount",value:function(){var e=this;if(this.options.question.type!==CR.Type.PLAIN_TEXT){var t=!0,n=!1,i=void 0;try{for(var r,a=this.getQuestionOptions()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){this["optionFilter"+r.value.id].addChangeListener(function(){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=e.getQuestionOptions()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e["optionFilter"+s.id].getValue()&&t.push(s.id)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}e.options.widget.dispatch("updateFilter",e.options.question,t)})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}}}]),t}(Lc.Element))||Jj,$q=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{filters:{}}}},{key:"getQuestionnaire",value:function(){return SR.get(this.options.questionnaireId)}},{key:"respectsFilters",value:function(e){for(var t=this.options.filters||{},n=0,i=Object.keys(t);n<i.length;n++){var r=i[n],a=e.getQuestionResponse(parseInt(r)),o=t[r];if(Array.isArray(o)&&o.length){if(!a)return!1;var s=!1,l=!0,u=!1,c=void 0;try{for(var h,d=(a.choiceIds||[])[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;o.indexOf(p)>=0&&(s=!0)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}if(!s)return!1}}return!0}},{key:"getInstances",value:function(){var e=this;return this.getQuestionnaire().getAllInstances().filter(function(t){return e.respectsFilters(t)})}},{key:"render",value:function(){var e=this,t=this.getInstances();return this.getQuestionnaire().getQuestions().map(function(n){return Lc.createElement(Zq,{question:n,instances:t,widget:e})})}},{key:"onMount",value:function(){var e=this;this.addListener("updateFilter",function(t,n){e.options.filters[t.id]=n,e.redraw(),e.dispatch("updateInstanceList",e.getInstances())})}}]),t}(Lc.Element),eX=function(e){function t(){var e;r(this,t),e=b(this,d(t).apply(this,arguments)),e.instanceMap=new Map;var n=!0,i=!1,a=void 0;try{for(var o,s=e.options.children[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;e.instanceMap.set(l.options.instance.id,l)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return e.instanceMap.has(0)||e.instanceMap.set(0,Lc.createElement("div",null)),e}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign(w(d(t.prototype),"getDefaultOptions",this).call(this),{lazyRender:!0})}}]),o(t,[{key:"switchToInstance",value:function(e){if(!e)return void this.setActive(this.instanceMap.get(0));this.setActive(this.instanceMap.get(e.id))}}]),t}(Of),tX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this;return this.options.instance.getQuestionnaire().getQuestions().map(function(t){return Lc.createElement(NP,{question:t,instance:e.options.instance,editable:!1,style:{paddingBottom:0}})})}}]),t}(Lc.Element),nX=(qj=Ze(Qq))(Xj=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.questionnaireResponseWidget)}},{key:"getQuestionnaire",value:function(){return SR.get(this.options.questionnaireId)}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.instances=this.options.instances||this.getQuestionnaire().getAllInstances()}},{key:"switchToInstance",value:function(e){this.instanceSwitcher.switchToInstance(e);var t=this.getInstances(),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=this["miniInstanceDiv"+s.id];e===s?l.setStyle("background-color",$c.Global.getProperty("COLOR_INFO","#ddd")):l.setStyle("background-color",$c.Global.getProperty("COLOR_DEFAULT","#fff"))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"getInstances",value:function(){return this.options.instances}},{key:"render",value:function(){var e=this,t=this.getInstances(),n=t.map(function(t){return Lc.createElement("div",{onClick:function(){return e.switchToInstance(t)},ref:"miniInstanceDiv"+t.id,className:e.styleSheet.miniInstance},Lc.createElement(sE,{disableClick:!0,userId:t.userId}))}),i=t.map(function(e){return Lc.createElement(tX,{instance:e})});return[Lc.createElement("div",{className:this.styleSheet.responsesLeftSideContainer},n),Lc.createElement(eX,{ref:"instanceSwitcher",className:this.styleSheet.responsesRightSide},i)]}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.switchToInstance(this.getInstances()[0])}}]),t}(Lc.Element))||Xj,iX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(Gb,null,Lc.createElement(jd,{title:Lc.T("Summary"),style:{paddingTop:"10px"}},Lc.createElement($q,{questionnaireId:this.options.questionnaireId,ref:"questionnaireSummary"})),Lc.createElement(jd,{title:Lc.T("Responses")},Lc.createElement(nX,{questionnaireId:this.options.questionnaireId,ref:"questionnaireResponses"})))]}},{key:"onMount",value:function(){var e=this;this.questionnaireSummary.addListener("updateInstanceList",function(t){e.questionnaireResponses.updateOptions({instances:t})})}}]),t}(Lc.Element),rX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{margin:"0 10%"}}}},{key:"setOptions",value:function(e){e.questionnaireId=e.questionnaireId||parseInt(e.args[0])||0,w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"render",value:function(){return this.options.error?iT.renderError(this.options.error):this.options.loaded?Lc.createElement(iX,{questionnaireId:this.options.questionnaireId}):iT.renderLoading()}},{key:"onMount",value:function(){var e=this;zu.getJSON("/questionnaire_all_answers/",{questionnaireId:this.options.questionnaireId}).then(function(){return e.updateOptions({loaded:!0})},function(t){return e.updateOptions({error:t})})}}]),t}(Lc.Element),aX="#185e9c",oX=(Kj=iY=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.timeSectionHeight=180,n.timeSectionDigitsContainerHeight=120,n.primaryColor=aX,O(n,"countdown",Qj,y(n)),O(n,"timeSection",Zj,y(n)),O(n,"timeSectionDigitsContainer",$j,y(n)),O(n,"digitContainer",eY,y(n)),O(n,"digitContainerSeparator",tY,y(n)),O(n,"timeSectionDescription",nY,y(n)),n}return h(t,e),t}(Jc),Qj=R(Kj.prototype,"countdown",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",maxWidth:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",flexDirection:"row"}}}),Zj=R(Kj.prototype,"timeSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}}}),$j=R(Kj.prototype,"timeSectionDigitsContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex"}}}),eY=R(Kj.prototype,"digitContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.timeSectionDigitsContainerHeight,width:75,margin:5,borderRadius:"10px",boxShadow:"0px 0px 5px "+this.primaryColor,background:"linear-gradient(to bottom,"+"".concat(this.primaryColor," 0%, ")+"".concat(this.primaryColor," 49.5%,")+"".concat(qe(this.primaryColor,1)," 49.5%,")+"".concat(qe(this.primaryColor,1)," 50.5%,")+"".concat(qe(this.primaryColor,.15)," 50.5%,")+"".concat(qe(this.primaryColor,.15)," 100%")+")",color:qe(this.primaryColor,1),fontSize:60,display:"flex",justifyContent:"center",alignItems:"center"}}}),tY=R(Kj.prototype,"digitContainerSeparator",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:20,height:this.timeSectionHeight-this.timeSectionDigitsContainerHeight,display:"flex",justifyContent:"center",alignItems:"center",textShadow:"0px 0px 5px "+this.primaryColor,fontSize:40,paddingBottom:60,color:this.primaryColor}}}),nY=R(Kj.prototype,"timeSectionDescription",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.timeSectionHeight-this.timeSectionDigitsContainerHeight,marginLeft:10,marginRight:10,fontSize:22,textTransform:"uppercase",display:"flex",alignItems:"center",color:this.primaryColor}}}),Kj),sX=(rY=Ze(oX))(aY=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{hasDays:!0,hasHours:!0,hasMinutes:!0,hasSeconds:!0}}},{key:"extraNodeAttributes",value:function(e){e.addClass(this.styleSheet.countdown)}},{key:"getTimeLeft",value:function(){var e=yf.now(),t=this.options.endTime;return t=t||e,t.diffDuration(e)}},{key:"renderTimeSection",value:function(e,t,n){if(""===e)return null;var i,r=this.styleSheet;return n&&(i=Lc.createElement("div",{className:r.digitContainerSeparator},":")),[Lc.createElement("div",{className:r.timeSection},Lc.createElement("div",{className:r.timeSectionDigitsContainer},e.split("").map(function(e){return Lc.createElement("div",{className:r.digitContainer},e)})),Lc.createElement("div",{className:r.timeSectionDescription},t)),i]}},{key:"formatTimeUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return 0===e&&t?"":e<10?"0"+String(e):String(e)}},{key:"hasEnded",value:function(){return 0===this.getTimeLeft().valueOf()}},{key:"render",value:function(){if(this.hasEnded())return null;var e=this.getTimeLeft();return[this.options.hasDays?this.renderTimeSection(this.formatTimeUnit(e.toDays(),!0),"Days",this.options.hasHours||this.options.hasMinutes||this.options.hasSeconds):"",this.options.hasHours?this.renderTimeSection(this.formatTimeUnit(e.getHours()),"Hours",this.options.hasMinutes||this.options.hasSeconds):"",this.options.hasMinutes?this.renderTimeSection(this.formatTimeUnit(e.getMinutes()),"Minutes",this.options.hasSeconds):"",this.options.hasSeconds?this.renderTimeSection(this.formatTimeUnit(e.getSeconds()),"Seconds"):""]}},{key:"onMount",value:function(){var e=this;this.intervalId=setInterval(function(){e.redraw(),e.hasEnded()&&e.onUnmount()},1e3)}},{key:"onUnmount",value:function(){clearInterval(this.intervalId)}}]),t}(Lc.Element))||aY,lX=(oY=lY=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.primaryColor=aX,O(n,"countdownDescription",sY,y(n)),n}return h(t,e),t}(Jc),sY=R(oY.prototype,"countdownDescription",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:this.primaryColor,fontSize:25,padding:"15px 0"}}}),oY),uX=(uY=Ze(lX))(cY=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"checkEndTimeChange",value:function(e){null!=e&&this.endTime&&this.endTime.isSame(e)||(this.endTime=e,this.redraw())}},{key:"updateEndTime",value:function(){var e=this.options.contest;e.getStartTime()&&!e.hasStarted()?this.checkEndTimeChange(Ap(e.getStartTime())):e.getEndTime()&&!e.hasFinished()?this.checkEndTimeChange(Ap(e.getEndTime())):this.checkEndTimeChange(null),this.redraw()}},{key:"getCountdownTopDescription",value:function(){var e,t=this.options.contest;return e=t.hasStarted()?t.hasStarted()&&!t.hasFinished()?"Contest ends in":"Contest has ended, congratulations everyone!":"Contest starts in",Lc.createElement("div",{className:this.styleSheet.countdownDescription},e)}},{key:"getCountdownBottomDescription",value:function(){var e=this.options.contest;return e.hasStarted()?null:[Lc.createElement("div",{className:this.styleSheet.countdownDescription},e.getFormattedStartTime()),Lc.createElement("div",{className:this.styleSheet.countdownDescription},"The first task will open automatically when the contest starts.")]}},{key:"render",value:function(){return[this.getCountdownTopDescription(),Lc.createElement(sX,{endTime:this.endTime}),this.getCountdownBottomDescription()]}},{key:"onMount",value:function(){var e=this;this.updateEndTime(),this.intervalId=setInterval(function(){return e.updateEndTime()},1e3)}},{key:"onUnmount",value:function(){clearInterval(this.intervalId)}}]),t}(Lc.Element))||cY,cX=(hY=gY=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"digitContainer",dY,y(n)),O(n,"digitContainerSeparator",pY,y(n)),O(n,"timeSectionDescription",fY,y(n)),n}return h(t,e),o(t,[{key:"getResizePercent",value:function(){return window.innerWidth>850?.8:window.innerWidth>600?.75:window.innerWidth>500?.6:.45}}]),t}(oX),dY=R(hY.prototype,"digitContainer",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.getResizePercent()*this.timeSectionDigitsContainerHeight,width:75*this.getResizePercent(),fontSize:60*this.getResizePercent()}}}),pY=R(hY.prototype,"digitContainerSeparator",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:20*this.getResizePercent(),height:this.getResizePercent()*(this.timeSectionHeight-this.timeSectionDigitsContainerHeight),fontSize:40*this.getResizePercent(),paddingBottom:60*this.getResizePercent()}}}),fY=R(hY.prototype,"timeSectionDescription",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.getResizePercent()*(this.timeSectionHeight-this.timeSectionDigitsContainerHeight),fontSize:22*this.getResizePercent()}}}),hY),hX=(mY=Ze(cX))(vY=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(sX))||vY,dX=(yY=kY=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"countdownDescription",bY,y(n)),n}return h(t,e),o(t,[{key:"getResizePercent",value:function(){return window.innerWidth>850?.8:window.innerWidth>600?.75:.6}}]),t}(lX),bY=R(yY.prototype,"countdownDescription",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:25*this.getResizePercent(),padding:5*this.getResizePercent()+"px 0"}}}),yY),pX=(wY=Ze(dX))(EY=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[this.getCountdownTopDescription(),Lc.createElement(hX,{endTime:this.endTime}),this.getCountdownBottomDescription()]}}]),t}(uX))||EY,fX=(SY=NY=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"loginWidget",CY,y(n)),O(n,"forgotPassword",xY,y(n)),O(n,"signInButtonContainer",TY,y(n)),O(n,"signInButton",AY,y(n)),O(n,"rememberMeContainer",LY,y(n)),O(n,"input",IY,y(n)),n}return h(t,e),t}(Kw),CY=R(SY.prototype,"loginWidget",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:0,width:"auto",height:"auto"}}}),xY=R(SY.prototype,"forgotPassword",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"hidden"}}}),TY=R(SY.prototype,"signInButtonContainer",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"auto"}}}),AY=R(SY.prototype,"signInButton",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#185e9c",color:qe("#185e9c",1),minWidth:"initial",paddingLeft:20,paddingRight:20,outline:"none",":hover":{backgroundColor:qe("#185e9c",.15),color:qe("#185e9c",1),border:0}}}}),LY=R(SY.prototype,"rememberMeContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"29px"}}}),IY=R(SY.prototype,"input",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"inherit !important",borderBottom:"2px solid #185e9c",borderRadius:"0 !important",":hover":{borderBottom:"2px solid #185e9c !important"},":focus":{borderBottom:"2px solid #185e9c !important"}}}}),SY),gX=(OY=Ze(fX))(RY=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getThirdPartyLogin",value:function(){}},{key:"getClearBothArea",value:function(){}},{key:"getRememberMeCheckbox",value:function(){return Lc.createElement("div",{className:this.styleSheet.rememberMeContainer},w(d(t.prototype),"getRememberMeCheckbox",this).call(this))}}]),t}(eE))||RY,mX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getSignInValue",value:function(){return"Request password reset"}},{key:"sendLogin",value:function(){var e=this;this.clearErrorMessage();var t={email:this.emailInput.getValue()};zu.postJSON("/ieee_password_reset_request/",t).then(function(){return e.setErrorMessage({message:"An email was sent to all members of your team."},!1)},function(t){return e.setErrorMessage(t)})}},{key:"render",value:function(){return[Lc.createElement("form",{ref:"form"},this.getEmailInput("envelope"),this.getSignInButton(),Lc.createElement("div",{style:{clear:"both",height:"20px"}}),this.getErrorArea())]}}]),t}(gX),vX=(MY=QY=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"ieeeXtreme11ContestSummary",PY,y(n)),O(n,"logoSectionContainer",DY,y(n)),O(n,"sectionContainer",BY,y(n)),O(n,"logoContainer",_Y,y(n)),O(n,"image",FY,y(n)),O(n,"countdown",UY,y(n)),O(n,"sectionTitleContainer",zY,y(n)),O(n,"sectionTitle",WY,y(n)),O(n,"sponsorsAndPartners",HY,y(n)),O(n,"sponsorContainer",VY,y(n)),O(n,"sponsorImageContainer",GY,y(n)),O(n,"sponsorImage",jY,y(n)),O(n,"sponsorName",YY,y(n)),O(n,"textSection",JY,y(n)),O(n,"sponsorsAndPartnersLogosContainer",qY,y(n)),n.loginContainer={width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around"},O(n,"infoLinesContainer",XY,y(n)),O(n,"infoLine",KY,y(n)),n}return h(t,e),t}(Jc),PY=R(MY.prototype,"ieeeXtreme11ContestSummary",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:1200,margin:"0 auto",maxWidth:"100%"}}}),DY=R(MY.prototype,"logoSectionContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:rc.isMobileDevice()||window.innerWidth<1125?"column":"row"}}}),BY=R(MY.prototype,"sectionContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:rc.isMobileDevice()||window.innerWidth<850?"column":"row"}}}),_Y=R(MY.prototype,"logoContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center"}}}),FY=R(MY.prototype,"image",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:rc.isMobileDevice()?"100%":450}}}),UY=R(MY.prototype,"countdown",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:rc.isMobileDevice()?"100%":670}}}),zY=R(MY.prototype,"sectionTitleContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",marginTop:30}}}),WY=R(MY.prototype,"sectionTitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{lineHeight:30,paddingBottom:20,textAlign:"center",fontSize:25,borderBottom:"2px solid #185e9c",display:"flex",justifyContent:"center",color:"#FF8D3A",marginTop:rc.isMobileDevice()?0:30,marginBottom:20}}}),HY=R(MY.prototype,"sponsorsAndPartners",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}}}),VY=R(MY.prototype,"sponsorContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:200,color:"inherit",cursor:"pointer",width:"40%",display:"flex",flexDirection:"column",justifyContent:"space-between"}}}),GY=R(MY.prototype,"sponsorImageContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flex:1}}}),jY=R(MY.prototype,"sponsorImage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:120,display:"flex"}}}),YY=R(MY.prototype,"sponsorName",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",paddingTop:10,flex:1,textAlign:"center",fontSize:17,maxHeight:50,letterSpacing:.5}}}),JY=R(MY.prototype,"textSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:17,textAlign:"justify",lineHeight:22,letterSpacing:.5,display:"flex",flexDirection:"column",flex:1,paddingLeft:30,paddingRight:30}}}),qY=R(MY.prototype,"sponsorsAndPartnersLogosContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center"}}}),XY=R(MY.prototype,"infoLinesContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexWrap:"wrap",flexDirection:"row",width:"100%",justifyContent:"center"}}}),KY=R(MY.prototype,"infoLine",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"50%",textAlign:"center",color:"#185e9c",fontSize:15,fontWeight:700}}}),MY),yX=(ZY=Ze(vX))($Y=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.ieeeXtreme11ContestSummary)}},{key:"getRegisterButton",value:function(){return null}},{key:"renderInfoLines",value:function(){var e=this,t=this.getContest().getStatistics()||{},n=[{label:Lc.T("Teams Registered"),value:this.getContest().getNumUsers()||"N/A"},{label:Lc.T("Users Online"),value:t.numUsersOnline||"N/A"},{label:Lc.T("Submissions"),value:t.numSubmissions||"N/A"},{label:Lc.T("Compiles"),value:t.numCompiles||"N/A"},{label:Lc.T("Example Runs"),value:t.numExampleRuns||"N/A"},{label:Lc.T("Custom Runs"),value:t.numCustomRuns||"N/A"}].filter(function(e){return"0"!==e.value&&"N/A"!==e.value});return Lc.createElement("div",{className:this.styleSheet.infoLinesContainer},n.map(function(t){return Lc.createElement("div",{className:e.styleSheet.infoLine},t.label," - ",t.value)}))}},{key:"getSectionTitle",value:function(e){return[Lc.createElement("div",{className:this.styleSheet.sectionTitleContainer},Lc.createElement("div",{className:this.styleSheet.sectionTitle},e))]}},{key:"getSponsor",value:function(e,t,n){return[Lc.createElement(Xd,{className:this.styleSheet.sponsorContainer,href:n,newTab:!0},Lc.createElement("div",{className:this.styleSheet.sponsorImageContainer},Lc.createElement(Kd,{src:t,className:this.styleSheet.sponsorImage})),Lc.createElement("div",{className:this.styleSheet.sponsorName},e))]}},{key:"getUnauthenticated",value:function(){return USER.isAuthenticated?null:Lc.createElement("div",{className:this.styleSheet.sectionContainer,style:{alignItems:"flex-start"}},Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Sign in"),Lc.createElement("p",null,"You must login using your team account from the official email to continue to IEEEXtreme 11.0:"),Lc.createElement("div",{className:this.styleSheet.loginContainer},Lc.createElement(gX,null))),Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Forgot password?"),Lc.createElement("p",null,"Enter your email address below, and an email with further instructions on how to reset your password will be sent to all members of your team:"),Lc.createElement("div",{className:this.styleSheet.loginContainer},Lc.createElement(mX,null))))}},{key:"getAboutIEEEXtreme",value:function(){return[Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("IEEEXtreme"),Lc.createElement("p",null,"IEEEXtreme is a global challenge in which teams of IEEE Student members â€“ advised and proctored by an IEEE member, and often supported by an IEEE Student Branch â€“ compete in a 24-hour time span against each other to solve a set of programming problems."),Lc.createElement("p",null,"See the full IEEEXtreme 11.0 rules ",Lc.createElement(Xd,{href:"http://ieeextreme.org/rules/",newTab:!0},"here"),"."))]}},{key:"getPlatformHelp",value:function(){return[Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Programming Environment"),Lc.createElement("p",null,"You can find out more about the CS Academy environment from the ",Lc.createElement(Xd,{href:"/about",newTab:!0}," about page"),"."),Lc.createElement("p",null,"To familiarize yourself with the platform, and try to solve some problems with the past IEEEXtreme competitions, please access the ",Lc.createElement(Xd,{href:"/ieeextreme-practice/",newTab:!0},"the practice community"),"."))]}},{key:"getPartners",value:function(){return[Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartners},this.getSectionTitle("Partners"),Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartnersLogosContainer},this.getSponsor("CS Academy","https://publicmedia1.csacademy.com/public/1507825790-2709659969.png","https://csacademy.com/"),this.getSponsor("IEEE Women in Engineering (WIE)","https://publicmedia1.csacademy.com/public/1507825773-4126646961.png","http://wie.ieee.org/"))),Lc.createElement("div",{style:{paddingBottom:50}})]}},{key:"getSponsors",value:function(){return[Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartners},this.getSectionTitle("Sponsors"),Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartnersLogosContainer},this.getSponsor("Digi-Key","https://publicmedia1.csacademy.com/public/1507825798-3658821305.png","https://www.digikey.com/"),this.getSponsor("Das Keyboard","https://publicmedia1.csacademy.com/public/1507825798-1062166350.png","https://www.daskeyboard.com/"),this.getSponsor("SyncFusion","https://publicmedia1.csacademy.com/public/1507825798-1786594109.png","https://www.syncfusion.com/?utm_source=Code_Camps_User_Groups&utm_medium=listing&utm_campaign=ieeextremeoct17")))]}},{key:"getLogo",value:function(){return Lc.createElement("div",{className:"".concat(this.styleSheet.logoContainer," ").concat(this.styleSheet.textSection)},Lc.createElement(Kd,{src:"/static/svg/XtremeLogo.svg",className:this.styleSheet.image}),this.renderInfoLines())}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.logoSectionContainer
},this.getLogo(),Lc.createElement(pX,{contest:this.getContest(),className:"".concat(this.styleSheet.countdown," ").concat(this.styleSheet.textSection)})),this.getUnauthenticated(),Lc.createElement("div",{className:this.styleSheet.sectionContainer,style:{alignItems:"flex-start"}},this.getAboutIEEEXtreme(),this.getPlatformHelp()),Lc.createElement("div",{className:this.styleSheet.sectionContainer},this.getPartners(),this.getSponsors()),Lc.createElement("div",{className:this.styleSheet.sectionContainer},Lc.createElement("div",{style:{marginTop:30}},Lc.createElement("hr",null),Lc.createElement("h4",null,"For any technical issues, please send an email to contact@csacademy.com"),Lc.createElement("h4",null,"Please try to provide as many details as possible for your problem (OS, browser, steps to reproduce, etc)."),Lc.createElement("h4",null,"Have a great contest experience!"))),Lc.createElement("div",{style:{height:50,width:"100%"}})]}}]),t}(uH))||$Y,bX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getRatingColor",value:function(){return 3===this.options.contestTeam.ieeeTeamType?qe("#FF8D3A",.3):qe("#185e9c",.3)}}]),t}(sE),kX={OFFICIAL:1,LATE_REGISTRATION:2,PROCTOR:3,HIGH_SCHOOL:4},wX={R1:"(R1) Northeastern US",R2:"(R2) Eastern US",R3:"(R3) Southern US",R4:"(R4) Central US",R5:"(R5) Southwestern US",R6:"(R6) Western US",R7:"(R7) Canada",R8:"(R8) Africa, Europe, Middle East",R9:"(R9) Latin America",R0:"(R10) Asia and Pacific"},EX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=[["Teams",new Set([kX.OFFICIAL,kX.LATE_REGISTRATION])],["Proctor",new Set([kX.PROCTOR])],["High School",new Set([kX.HIGH_SCHOOL])]].map(function(e){var t=S(e,2),n=t[0],i=t[1];return{toString:function(){return n},typeSet:i}}),t=[];t.push({toString:function(){return"All regions"},region:""});for(var n in wX)!function(e){t.push({toString:function(){return wX[e]},region:e})}(n);return[Lc.createElement(Gg,{ref:"filterUsers",style:{height:"2.2em",marginLeft:"10px"},options:e,selected:e[0]}),Lc.createElement(Gg,{ref:"filterCountry",style:{height:"2.2em",marginLeft:"10px"},options:this.options.contest.getCountries()}),Lc.createElement(Gg,{ref:"filterRegion",style:{height:"2.2em",marginLeft:"10px"},options:t}),Lc.createElement(vg,{ref:"findTeamInput",style:{height:"2.03em",marginLeft:"10px",verticalAlign:"middle"},placeholder:"Find team..."})]}},{key:"getFilter",value:function(){var e=this;return this.options.findUser=this.findTeamInput.getValue(),this.options.countryIdFilter=this.filterCountry.get().id,this.options.regionIdFilter=this.filterRegion.get().region,function(t){var n=e.options.findUser.trim().toLowerCase(),i=sk.get(t.userId),r=e.filterUsers.get().typeSet,a=t.ieeeTeamType;return!!r.has(a)&&(!!i&&((""===n||-1!=(i.name||"").toLowerCase().indexOf(n)||-1!=(i.username||"").toLowerCase().indexOf(n))&&((!e.options.countryIdFilter||i.countryId===e.options.countryIdFilter)&&(!e.options.regionIdFilter||t.region===e.options.regionIdFilter))))}}},{key:"onMount",value:function(){var e=this;this.filterUsers.addChangeListener(function(){e.updateFilter()}),this.filterCountry.addChangeListener(function(){e.updateFilter()}),this.filterRegion.addChangeListener(function(){e.updateFilter()}),this.findTeamInput.addNodeListener("keyup",function(){e.updateFilter()}),this.updateFilter();var t=new Nu({throttle:300}),n=t.wrap(function(){return e.filterCountry.updateOptions({options:e.options.contest.getCountries()})});this.attachListener(this.options.contest,"contestUserUpdate",n)}}]),t}(dI),SX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getUniversityAndRegionColumns",value:function(){var e={textAlign:"left",margin:"auto",verticalAlign:"middle"};return[{value:function(e){return e.university||"-"},rawValue:function(e){return e.university||"-"},headerName:"University",sortDescending:!0,headerStyle:e,cellStyle:e},{value:function(e){return e.region&&wX[e.region]||"-"},rawValue:function(e){return e.region&&wX[e.region]||"-"},headerName:"Region",sortDescending:!0,headerStyle:e,cellStyle:e}]}},{key:"getUserColumn",value:function(){var e={textAlign:"left",margin:"auto",verticalAlign:"middle"};return[{value:function(e){var t=Lc.createElement(bX,{userId:e.userId,contestTeam:e,showCountry:!0,noPopup:!0});return e.getContest().isVirtual()?Lc.createElement("span",null,t," virtual ",e.getContestStartTime()<yf.now().unix()&&yf.now().unix()<e.getContestEndTime()?new Sp(1e3*(yf.now().unix()-e.getContestStartTime())).format("HH:mm"):""):t},rawValue:function(e){return e.getPublicUser().username||"publicuser-"+e.userId},headerName:"Team",sortDescending:!0,headerStyle:e,cellStyle:e}]}},{key:"getColumns",value:function(){var e={textAlign:"right",width:"1%",verticalAlign:"middle"},t={textAlign:"left",margin:"auto",verticalAlign:"middle"},n=[{value:function(e,t){return t+1},headerName:"#",sortDescending:!1,headerStyle:{verticalAlign:"middle"},cellStyle:e}].concat(C(this.getUserColumn()),C(this.getUniversityAndRegionColumns()));return this.options.contest.hasStarted()&&n.push({value:function(e){return e.totalScore},rawValue:function(e){return e.totalScore},headerName:"Total Score",sortDescending:!0,headerStyle:t,cellStyle:t}),n}}]),t}(rI),CX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"cacheEntries",value:function(){var e=this.filterEntries(this.getRawEntries());qS.calculateRanks(e),this.cachedEntries=this.sortEntries(e),this.dispatch("update")}}]),t}(oI),xX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"shouldShowTaskColumns",value:function(){return this.options.showFullScoreboard}},{key:"getEntriesManager",value:function(){return this.entriesManager||(this.entriesManager=new CX(this.options.contest,this.options.virtualContest,this.getComparator())),this.entriesManager}},{key:"renderContestUserAndContestTaskCell",value:function(e,t){var n=this;if(!e.scores)return"-";var i=e.scores[t.id];if(this.options.virtualContest){var r=t.getVirtualTask();i=i||e.scores[r.id]}if(!i)return"-";var a,o,s=i.score||0;if(a=t.hasPartialScore()?Lc.createElement("span",null,Ek.truncate(s*t.pointsWorth,2)):1==s?Lc.createElement("span",{className:"fa fa-check fa-lg",style:{color:"green"}}):Lc.createElement("span",{className:"fa fa-times fa-lg",style:{color:"red"}}),t.hasPenalty()){var l=Ap(e.getContestStartTime()),u=Ap(i.scoreTime),c=u.diffDuration(l);(t.hasPartialScore()||1==s)&&(o=Lc.createElement("div",{style:{fontSize:"0.8em",color:"grey"}},c.format("HH:mm")))}return Lc.createElement("div",{onClick:function(){return n.showSubmissions(e,t)}},[a,o])}},{key:"getColumns",value:function(){var e=w(d(t.prototype),"getColumns",this).call(this);return e.splice.apply(e,[1,1].concat(C(this.getUserColumn()))),this.options.showFullScoreboard||e.splice.apply(e,[3,0].concat(C(this.getUniversityAndRegionColumns()))),e}}]),t}(lI);xX.prototype.getUniversityAndRegionColumns=SX.prototype.getUniversityAndRegionColumns,xX.prototype.getUserColumn=SX.prototype.getUserColumn;var TX,AX,LX,IX,NX,OX,RX,MX,PX,DX,BX,_X,FX,UX,zX,WX,HX,VX,GX,jX,YX,JX,qX,XX,KX,QX,ZX,$X,eK,tK,nK,iK,rK,aK,oK,sK,lK,uK,cK,hK,dK,pK,fK,gK,mK,vK,yK,bK,kK,wK,EK,SK,CK,xK,TK,AK,LK,IK,NK,OK,RK,MK,PK,DK,BK,_K,FK,UK,zK,WK,HK,VK,GK,jK,YK,JK,qK,XK,KK,QK,ZK,$K,eQ,tQ,nQ,iQ,rQ,aQ,oQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContestUsersFilter",value:function(){return Lc.createElement(EX,{ref:"contestUsersFilter",contest:this.options.contest})}},{key:"getContestUsersTableClass",value:function(){return SX}},{key:"getScoreboardTableClass",value:function(){return xX}},{key:"toggleScoreboard",value:function(){this.showFullScoreboard=!this.showFullScoreboard,this.showFullScoreboardButton.setLabel("Show scores on tasks"),this.showFullScoreboard&&this.showFullScoreboardButton.setLabel("Show region & university"),this.scoreboardTable.updateOptions({showFullScoreboard:this.showFullScoreboard})}},{key:"getScoreboardActionableArea",value:function(){var e,n=this;return this.options.contest.hasStarted()&&(e=Lc.createElement(Md,{ref:"showFullScoreboardButton",onClick:function(){return n.toggleScoreboard()},label:"Show scores on tasks",style:{marginLeft:"10px",height:"2.2em",paddingTop:0,paddingBottom:0},level:Pc.PRIMARY,size:Dc.SMALL})),[w(d(t.prototype),"getScoreboardActionableArea",this).call(this),e]}}]),t}(pI),sQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=w(d(t.prototype),"render",this).call(this),n={maxWidth:"360px",marginBottom:"-10px"};return[Lc.createElement("div",{style:{textAlign:"center"}},Lc.createElement("img",{style:n,src:"/static/svg/XtremeLogo.svg"})),e]}}]),t}(YO),lQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContestTaskSummaryPanelClass",value:function(){return sQ}}]),t}(tR),uQ=function(e){return e=Math.ceil(100*parseFloat(e)),e%100==0?parseInt(e/100):e%10==0?parseFloat(e/100).toFixed(1):parseFloat(e/100).toFixed(2)},cQ=(TX=_X=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.height=100,O(n,"className",AX,y(n)),O(n,"timeAdded",LX,y(n)),O(n,"averageScore",IX,y(n)),O(n,"attemptsCount",NX,y(n)),O(n,"taskDescription",OX,y(n)),O(n,"taskName",RX,y(n)),O(n,"pointsWorth",MX,y(n)),O(n,"attempted",PX,y(n)),O(n,"average",DX,y(n)),O(n,"userScore",BX,y(n)),n}return h(t,e),t}(mI),AX=R(TX.prototype,"className",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"row"}}}),LX=R(TX.prototype,"timeAdded",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#999",fontSize:"14px",lineHeight:this.height/2,textAlign:"left"}}}),IX=R(TX.prototype,"averageScore",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{lineHeight:this.height/2,fontSize:"30px",marginTop:"15px",marginBottom:"-15px"}}}),NX=R(TX.prototype,"attemptsCount",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{lineHeight:this.height/2}}}),OX=R(TX.prototype,"taskDescription",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",paddingLeft:"5%",overflow:"hidden",position:"relative"}}}),RX=R(TX.prototype,"taskName",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"left",paddingLeft:0,marginBottom:"-10px",marginTop:"10px"}}}),MX=R(TX.prototype,"pointsWorth",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:"94px",fontSize:"20px",fontWeight:"bold",color:"black",display:Hl(672)}}}),PX=R(TX.prototype,"attempted",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:Hl(772),minWidth:"100px"}}}),DX=R(TX.prototype,"average",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:Hl(872),minWidth:"90px"}}}),BX=R(TX.prototype,"userScore",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:"100px"}}}),TX),hQ=(FX=Ze(cQ))(UX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return Object.assign({},w(d(t.prototype),"getDefaultOptions",this).call(this),{circleStrokeWidth:4,circlePadding:4})}},{key:"getTaskDescriptionSection",value:function(){var e,t=this,n=this.getContestTask().getBroadcastDelay();e=n>0?"added after "+Ek.duration(n,{hours:!0,minutes:!0,lastSeparator:" and "}):"added at contest start";var i,r=yf.now().diffDuration(this.getContestTask().getTimeAvailable());return n>0&&r.toMinutes()<10&&(i=Lc.createElement(Ed,{label:"NEW !",level:Pc.DANGER,style:{position:"absolute",left:"-28px",top:"14px",padding:"0 30px",transform:"rotate(-45deg)",pointerEvents:"none",userSelect:"none"}}),setTimeout(function(){return t.redraw()},6e5-r.toMilliseconds()+2e3)),Lc.createElement("div",{className:this.styleSheet.taskDescription},i,Lc.createElement("div",{className:this.styleSheet.taskName},Lc.T(this.getContestTask().longName)),Lc.createElement("div",{className:this.styleSheet.timeAdded},e))}},{key:"getPointsWorthSection",value:function(){var e=uQ(this.getContestTask().pointsWorth);return Lc.createElement("div",{className:this.styleSheet.pointsWorth,ref:"pointsWorth"},e)}},{key:"getCircleArgs",value:function(){return Object.assign({},w(d(t.prototype),"getCircleArgs",this).call(this),{radius:(.8*this.styleSheet.height-this.options.circleStrokeWidth)/2-this.options.circlePadding,stroke:this.getScoreColor(this.getContestTask().getContest().getUser(USER.id).scores[this.getContestTask().id].score)})}},{key:"getSVGContent",value:function(e,t,n,i){var r,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"black";return n&&(r=this.getCircleArc(i)),[r,Lc.createElement(ag.Text,{x:this.styleSheet.height/2,y:this.styleSheet.height/2-9,text:e,fontSize:"16",fill:a}),Lc.createElement(ag.Text,{x:this.styleSheet.height/2,y:this.styleSheet.height/2+9,text:t,fontSize:"10",fill:a})]}},{key:"getUserScoreSection",value:function(){var e,t=this.getContestTask(),n=t.getContest().getUser(USER.id);if(n&&n.scores&&n.scores[t.id]){var i=n.scores[t.id].score,r=uQ(i*this.getContestTask().pointsWorth),a=uQ(100*i)+"%";e=Lc.createElement(ag.SVGRoot,{height:this.styleSheet.height,width:this.styleSheet.height},this.getSVGContent(r+"p",a,!0,i,this.getScoreColor(i)))}return Lc.createElement("div",{className:this.styleSheet.userScore},e)}},{key:"getAttemptedSection",value:function(){var e,t=this.getContestTask().getContest().getUsers().filter(function(e){return e.ieeeTeamType<=2}).length;if(this.getContestTask().getContest()._loadedScoreboard){var n=this.attemptsCount/t,i=uQ(n?100*n:0)+"%",r=this.attemptsCount?1==this.attemptsCount?"1 team":this.attemptsCount+" teams":"no attempts";e=Lc.createElement(ag.SVGRoot,{height:this.styleSheet.height,width:this.styleSheet.height},this.getSVGContent(i,r,!1,0))}return Lc.createElement("div",{className:this.styleSheet.attempted,ref:"attempted"},e)}},{key:"redraw",value:function(){var e=this;this.redrawThrottler||(this.redrawThrottler=new Nu({throttle:1e3}),this.redrawThrottled=this.redrawThrottler.wrap(function(){return w(d(t.prototype),"redraw",e).call(e)})),this.redrawThrottled()}},{key:"getAverageSection",value:function(){var e;if(this.getContestTask().getContest()._loadedScoreboard){var t=this.attemptsCount?this.averageScore+"p":"-",n=this.averageScore/this.getContestTask().pointsWorth,i=uQ(100*n)+"%";e=Lc.createElement(ag.SVGRoot,{height:this.styleSheet.height,width:this.styleSheet.height},this.getSVGContent(t,i,!1,0))}return Lc.createElement("div",{className:this.styleSheet.average,ref:"averageScore"},e)}},{key:"computeStatistics",value:function(){var e=0,t=0,n=this.getContestTask(),i=n.getContest().getUsers().filter(function(e){return e.ieeeTeamType<=2}),r=!0,a=!1,o=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u.scores&&u.scores[n.id]&&(e+=1,t+=u.scores[n.id].score)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}this.attemptsCount=e,this.averageScore=uQ(e?t/e*this.getContestTask().pointsWorth:0)}},{key:"render",value:function(){return this.computeStatistics(),[this.getTaskDescriptionSection(),this.getUserScoreSection(),this.getPointsWorthSection(),this.getAttemptedSection(),this.getAverageSection()]}},{key:"getScoreColor",value:function(e){return Qc.interpolate("#e2722d","#185f9c",e)}}]),t}(vI))||UX,dQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,null,[{key:"getTimeAdded",value:function(e,t){return e.getBroadcastDelay()}},{key:"getAverageScore",value:function(e,t){var n=0,i=0,r=e.getContest().getUsers().filter(function(e){return e.ieeeTeamType<=2}),a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.scores&&c.scores[e.id]&&(n+=1,i+=c.scores[e.id].score)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i/n}},{key:"getPointsWorth",value:function(e,t){return e.pointsWorth}},{key:"getTried",value:function(e,t){var n=e.getContest().getUsers().filter(function(e){return e.ieeeTeamType<=2}),i=0,r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u.scores&&u.scores[e.id]&&(i+=1)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return i}}]),t}(yI),pQ=(zX=XX=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"className",WX,y(n)),O(n,"timeAdded",HX,y(n)),O(n,"taskDescription",VX,y(n)),O(n,"userScore",GX,y(n)),O(n,"pointsWorth",jX,y(n)),O(n,"attempted",YX,y(n)),O(n,"averageScore",JX,y(n)),O(n,"taskName",qX,y(n)),n}return h(t,e),t}(kI),WX=R(zX.prototype,"className",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",textAlign:"left"}}}),HX=R(zX.prototype,"timeAdded",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:this.height,lineHeight:this.height+"px",minWidth:"34%",color:"rgb(55,55,55)",fontSize:"14px"}}}),VX=R(zX.prototype,"taskDescription",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",flexDirection:"row"}}}),GX=R(zX.prototype,"userScore",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:"100px"}}}),jX=R(zX.prototype,"pointsWorth",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:"94px",display:Hl(672)}}}),YX=R(zX.prototype,"attempted",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:"100px",display:Hl(872)}}}),JX=R(zX.prototype,"averageScore",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:"90px",display:Hl(772)}}}),qX=R(zX.prototype,"taskName",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"-10px"}}}),zX),fQ=(KX=Ze(pQ))(QX=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"createSortableHeaders",value:function(){this.NameSort=bI(this,dQ.getName),this.ScoreSort=bI(this,dQ.getScore,this.NameSort.cmp),this.AttemptedSort=bI(this,dQ.getTried,this.NameSort.cmp),this.PointsWorthSort=bI(this,dQ.getPointsWorth,this.NameSort.cmp),this.TimeAddedSort=bI(this,dQ.getTimeAdded,this.NameSort.cmp),this.AverageScoreSort=bI(this,dQ.getAverageScore,this.NameSort.cmp)}},{key:"render",value:function(){var e;this.headers=[];var t=Lc.createElement(this.NameSort,{name:Lc.T("Task"),className:this.styleSheet.taskName,style:{marginRight:"2px",display:"inline-block"}}),n=Lc.createElement(this.TimeAddedSort,{name:Lc.T("Time added"),state:-1}),i=Lc.createElement(this.ScoreSort,{name:Lc.T("Your score"),className:this.styleSheet.userScore}),r=Lc.createElement(this.PointsWorthSort,{ref:"pointsWorth",name:Lc.T("Points worth"),className:this.styleSheet.pointsWorth}),a=Lc.createElement(this.AttemptedSort,{ref:"attempted",name:Lc.T("Teams tried"),className:this.styleSheet.attempted}),o=Lc.createElement(this.AverageScoreSort,{ref:"averageScore",name:Lc.T("Average score"),className:this.styleSheet.averageScore});return(e=this.headers).push.apply(e,[t,i,n,a,o]),[Lc.createElement("div",{className:this.styleSheet.className},Lc.createElement("div",{className:this.styleSheet.taskDescription},t,"|",n),i,r,a,o)]}}]),t}(wI))||QX,gQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{style:{textAlign:"center"}}}},{key:"render",value:function(){var e,t=this.options.contest.getNextTaskTimestamp(),n=function(e){return e<=9?"0"+e:e};if(t){var i=1e3*(t-yf.now().unix());if(i>=-3e4){i<0&&(i=0);var r=new Sp(i),a=n(r.getHours())+":"+n(r.getMinutes())+":"+n(r.getSeconds()),o="Next task will be added in ".concat(a);e=Lc.createElement("h3",null,o)}}return e}},{key:"onMount",value:function(){var e=this;this.interval=setInterval(function(){return e.redraw()},1e3)}},{key:"onUnmount",value:function(){clearInterval(this.interval)}}]),t}(Lc.Element),mQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getHeader",value:function(){return Lc.createElement(fQ,{ref:"header",isArchive:this.options.isArchive,contest:this.getContest()})}},{key:"getContestTaskBubble",value:function(e){return Lc.createElement(hQ,{key:e.id,isArchive:this.options.isArchive,contestTask:e})}},{key:"handleResize",value:function(){window.innerWidth>1106&&this.setStyle("margin",null),window.innerWidth<=1106&&this.setStyle("margin","0")}},{key:"render",value:function(){return[Lc.createElement(gQ,{contest:this.getContest()})].concat(C(w(d(t.prototype),"render",this).call(this)))}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.handleResize(),window.addEventListener("resize",function(){return e.handleResize()})}}]),t}(EI),vQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"officialOrLateRegistration",value:function(e){return e.ieeeTeamType===kX.OFFICIAL||e.ieeeTeamType===kX.LATE_REGISTRATION}},{key:"getRankText",value:function(){var e=this;if(this.options.loadedScoreboard){var t=this.getContest(),n=this.getContestUser(),i=t.getBaseContest().getUsers();this.officialOrLateRegistration(n)&&(i=i.filter(function(t){return e.officialOrLateRegistration(t)}));var r=1,a=!0,o=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;WS.compare(n,c)>0&&(r+=1)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return"Rank "+r+" / "+i.length}}}]),t}(iR),yQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTasksDropdownElements",value:function(){return[]}},{key:"createRankInfo",value:function(){var e=Lc.createElement(vQ,{contest:this.contest,loadedScoreboard:this.contestPanel._loadedScoreboard});return this.contestPanel.attachListener(e,"update",function(){return tg.Global.checkForWrap()}),Lc.createElement(_f,{value:e,key:"rank"})}},{key:"getLeftChildren",value:function(){var e=w(d(t.prototype),"getLeftChildren",this).call(this);return e.push(this.createHelp()),e.push(this.createPhotos()),e}},{key:"createHelp",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("help"),key:"help",value:Lc.T("Help")})}},{key:"createPhotos",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("photos"),key:"photos",value:Lc.T("Photos")})}}]),t}(cR),bQ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new yQ(n.getContest(),y(n)),n}return h(t,e),o(t,[{key:"getURLPrefix",value:function(e){var t="/"+this.getContest().name+"/";return e&&(t+=e+"/"),t}}]),o(t,[{key:"getSummaryPanel",value:function(){return Lc.createElement(yX,{contest:this.getContest()})}},{key:"getScoreboardPanel",value:function(){return this.getContest().canShowScoreboard()&&Lc.createElement(oQ,{ref:this.refLink("scoreboard"),contest:this.getBaseContest(),virtualContest:this.getVirtualContest(),originalContest:this.getContest()})}},{key:"getTasksListPanel",value:function(){return Lc.createElement(mQ,{ref:this.refLink("contestTaskList"),contest:this.getContest(),isArchive:!1,className:mh.Container.SMALL})}},{key:"getContestTaskPanel",value:function(e){return Lc.createElement(lQ,{contestTaskId:e.id})}},{key:"getHelpPage",value:function(){return Lc.createElement(UC,{articleId:1417})}},{key:"getPhotosPage",value:function(){return Lc.createElement(UC,{articleId:1418})}},{key:"getSubroutes",value:function(){var e=this,n=w(d(t.prototype),"getSubroutes",this).call(this);return n.push(new im("help",function(){return e.getHelpPage()},[],"Help")),n.push(new im("photos",function(){return e.getPhotosPage()},[],"Photos")),n}}]),t}(CH),kQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLeftChildren",value:function(){return[Lc.createElement(Ff,{href:this.getURLPrefix("summary"),key:"summary",value:Lc.T("Summary")}),this.createPhotos()]}},{key:"getRightChildren",value:function(){return[]}},{key:"createPhotos",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("photos"),key:"photos",value:Lc.T("Photos")})}}]),t}(yQ),wQ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new kQ(n.getContest(),y(n)),n}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"getURLPrefix",value:function(e){var t="/"+this.getContest().name+"/";return e&&(t+=e+"/"),t}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getSummaryPanel()},this.getSubroutes()),this.routes}},{key:"getDefaultOptions",value:function(){return{style:{height:"100%"}}}},{key:"getSummaryPanel",value:function(){return Lc.createElement(yX,{contest:this.getContest()})}},{key:"getPhotosPage",value:function(){return Lc.createElement(UC,{articleId:1418})}},{key:"getSubroutes",value:function(){var e=this;return[new im("summary",function(){return e.getSummaryPanel()}),new im("photos",function(){return e.getPhotosPage()},[],"Photos")]}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.navHandler.apply()}}]),t}(nm),EQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"renderUnauthenticated",value:function(){return Lc.createElement(wQ,{ref:"child",contest:XS.get(this.contestId)})}},{key:"dispatchUrlChange",value:function(){var e=this;setTimeout(function(){e.options.error||e.child.setURL(e.urlParts)})}},{key:"renderLoaded",value:function(){return USER.isAuthenticated?this.options.error?this.renderError():Lc.createElement(bQ,{contestId:this.contestId,ref:"child"}):this.renderUnauthenticated()}}]),t}(xH),SQ="https://publicmedia1.csacademy.com/public/1539332480-711642356.png",CQ=(ZX=aK=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"loginWidget",$X,y(n)),O(n,"forgotPassword",eK,y(n)),O(n,"signInButtonContainer",tK,y(n)),O(n,"signInButton",nK,y(n)),O(n,"rememberMeContainer",iK,y(n)),O(n,"input",rK,y(n)),n}return h(t,e),t}(Kw),$X=R(ZX.prototype,"loginWidget",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:0,width:"auto",height:"auto"}}}),eK=R(ZX.prototype,"forgotPassword",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"hidden"}}}),tK=R(ZX.prototype,"signInButtonContainer",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"auto"}}}),nK=R(ZX.prototype,"signInButton",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#185e9c",color:qe("#185e9c",1),minWidth:"initial",paddingLeft:20,paddingRight:20,outline:"none",":hover":{backgroundColor:qe("#185e9c",.15),color:qe("#185e9c",1),border:0}}}}),iK=R(ZX.prototype,"rememberMeContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"29px"}}}),rK=R(ZX.prototype,"input",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"inherit !important",borderBottom:"2px solid #185e9c",borderRadius:"0 !important",":hover":{borderBottom:"2px solid #185e9c !important"},":focus":{borderBottom:"2px solid #185e9c !important"}}}}),ZX),xQ=(oK=Ze(CQ))(sK=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getThirdPartyLogin",value:function(){}},{key:"getClearBothArea",value:function(){}},{key:"getRememberMeCheckbox",value:function(){return Lc.createElement("div",{className:this.styleSheet.rememberMeContainer},w(d(t.prototype),"getRememberMeCheckbox",this).call(this))}}]),t}(eE))||sK,TQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getSignInValue",value:function(){return"Request password reset"}},{key:"sendLogin",value:function(){var e=this;this.clearErrorMessage();var t={email:this.emailInput.getValue()};zu.postJSON("/ieee_password_reset_request/",t).then(function(){return e.setErrorMessage({message:"An email was sent to all members of your team."},!1)},function(t){return e.setErrorMessage(t)})}},{key:"render",value:function(){return[Lc.createElement("form",{ref:"form"},this.getEmailInput("envelope"),this.getSignInButton(),Lc.createElement("div",{style:{clear:"both",height:"20px"}}),this.getErrorArea())]}}]),t}(xQ),AQ=(lK=TK=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"ieeeXtreme12ContestSummary",uK,y(n)),O(n,"logoSectionContainer",cK,y(n)),O(n,"sectionContainer",hK,y(n)),O(n,"logoContainer",dK,y(n)),O(n,"image",pK,y(n)),O(n,"countdown",fK,y(n)),O(n,"sectionTitleContainer",gK,y(n)),O(n,"sectionTitle",mK,y(n)),O(n,"sponsorsAndPartners",vK,y(n)),O(n,"sponsorContainer",yK,y(n)),O(n,"sponsorImageContainer",bK,y(n)),O(n,"sponsorImage",kK,y(n)),O(n,"sponsorName",wK,y(n)),O(n,"textSection",EK,y(n)),O(n,"sponsorsAndPartnersLogosContainer",SK,y(n)),n.loginContainer={width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around"},O(n,"infoLinesContainer",CK,y(n)),O(n,"infoLine",xK,y(n)),n}return h(t,e),t}(Jc),uK=R(lK.prototype,"ieeeXtreme12ContestSummary",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:1200,margin:"0 auto",maxWidth:"100%"}}}),cK=R(lK.prototype,"logoSectionContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:rc.isMobileDevice()||window.innerWidth<1125?"column":"row"}}}),hK=R(lK.prototype,"sectionContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:rc.isMobileDevice()||window.innerWidth<850?"column":"row"}}}),dK=R(lK.prototype,"logoContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center"}}}),pK=R(lK.prototype,"image",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:rc.isMobileDevice()?"100%":450}}}),fK=R(lK.prototype,"countdown",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:rc.isMobileDevice()?"100%":670}}}),gK=R(lK.prototype,"sectionTitleContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",marginTop:30}}}),mK=R(lK.prototype,"sectionTitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{lineHeight:30,paddingBottom:20,textAlign:"center",fontSize:25,borderBottom:"2px solid #185e9c",display:"flex",justifyContent:"center",color:"#FF8D3A",marginTop:rc.isMobileDevice()?0:30,marginBottom:20}}}),vK=R(lK.prototype,"sponsorsAndPartners",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}}
}),yK=R(lK.prototype,"sponsorContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:200,color:"inherit",cursor:"pointer",width:"40%",display:"flex",flexDirection:"column",justifyContent:"space-between"}}}),bK=R(lK.prototype,"sponsorImageContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flex:1}}}),kK=R(lK.prototype,"sponsorImage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:120,display:"flex"}}}),wK=R(lK.prototype,"sponsorName",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",paddingTop:10,flex:1,textAlign:"center",fontSize:17,maxHeight:50,letterSpacing:.5}}}),EK=R(lK.prototype,"textSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:17,textAlign:"justify",lineHeight:22,letterSpacing:.5,display:"flex",flexDirection:"column",flex:1,paddingLeft:30,paddingRight:30}}}),SK=R(lK.prototype,"sponsorsAndPartnersLogosContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center"}}}),CK=R(lK.prototype,"infoLinesContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexWrap:"wrap",flexDirection:"row",width:"100%",justifyContent:"center"}}}),xK=R(lK.prototype,"infoLine",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"50%",textAlign:"center",color:"#185e9c",fontSize:15,fontWeight:700}}}),lK),LQ=(AK=Ze(AQ))(LK=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.ieeeXtreme12ContestSummary)}},{key:"getRegisterButton",value:function(){return null}},{key:"renderInfoLines",value:function(){var e=this,t=this.getContest().getStatistics()||{},n=[{label:Lc.T("Teams Registered"),value:this.getContest().getNumUsers()||"N/A"},{label:Lc.T("Users Online"),value:t.numUsersOnline||"N/A"},{label:Lc.T("Submissions"),value:t.numSubmissions||"N/A"},{label:Lc.T("Compiles"),value:t.numCompiles||"N/A"},{label:Lc.T("Example Runs"),value:t.numExampleRuns||"N/A"},{label:Lc.T("Custom Runs"),value:t.numCustomRuns||"N/A"}].filter(function(e){return"0"!==e.value&&"N/A"!==e.value});return Lc.createElement("div",{className:this.styleSheet.infoLinesContainer},n.map(function(t){return Lc.createElement("div",{className:e.styleSheet.infoLine},t.label," - ",t.value)}))}},{key:"getSectionTitle",value:function(e){return[Lc.createElement("div",{className:this.styleSheet.sectionTitleContainer},Lc.createElement("div",{className:this.styleSheet.sectionTitle},e))]}},{key:"getSponsor",value:function(e,t,n){return[Lc.createElement(Xd,{className:this.styleSheet.sponsorContainer,href:n,newTab:!0},Lc.createElement("div",{className:this.styleSheet.sponsorImageContainer},Lc.createElement(Kd,{src:t,className:this.styleSheet.sponsorImage})),Lc.createElement("div",{className:this.styleSheet.sponsorName},e))]}},{key:"getUnauthenticated",value:function(){return USER.isAuthenticated?null:Lc.createElement("div",{className:this.styleSheet.sectionContainer,style:{alignItems:"flex-start"}},Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Sign in"),Lc.createElement("p",null,"You must login using your team account from the official email to continue to IEEEXtreme 12.0:"),Lc.createElement("div",{className:this.styleSheet.loginContainer},Lc.createElement(xQ,null))),Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Forgot password?"),Lc.createElement("p",null,"Enter your email address below, and an email with further instructions on how to reset your password will be sent to all members of your team:"),Lc.createElement("div",{className:this.styleSheet.loginContainer},Lc.createElement(TQ,null))))}},{key:"getAboutIEEEXtreme",value:function(){return[Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("IEEEXtreme"),Lc.createElement("p",null,Lc.createElement(Xd,{href:"https://ieeextreme.org/",newTab:!0},"IEEEXtreme")," is a global challenge in which teams of IEEE Student members â€“ advised and proctored by an IEEE member, and often supported by an IEEE Student Branch â€“ compete in a 24-hour time span against each other to solve a set of programming problems."),Lc.createElement("p",null,"See the full IEEEXtreme 12.0 rules ",Lc.createElement(Xd,{href:"https://ieeextreme.org/rules/",newTab:!0},"here"),"."))]}},{key:"getPlatformHelp",value:function(){return[Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Programming Environment"),Lc.createElement("p",null,"You can find out more about the CS Academy environment from the ",Lc.createElement(Xd,{href:"/about",newTab:!0}," about page"),"."),Lc.createElement("p",null,"To familiarize yourself with the platform, and try to solve some problems with the past IEEEXtreme competitions, please access the ",Lc.createElement(Xd,{href:"/ieeextreme-practice/",newTab:!0},"the practice community"),"."))]}},{key:"getPartners",value:function(){return[Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartners},this.getSectionTitle("Partners"),Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartnersLogosContainer},this.getSponsor("CS Academy","https://publicmedia1.csacademy.com/public/1507825790-2709659969.png","https://csacademy.com/"))),Lc.createElement("div",{style:{paddingBottom:50}})]}},{key:"getSponsors",value:function(){return[Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartners},this.getSectionTitle("Sponsors"),Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartnersLogosContainer},this.getSponsor("Digi-Key","https://publicmedia1.csacademy.com/public/1507825798-3658821305.png","https://www.digikey.com/"),this.getSponsor("Oâ€™Reilly","https://publicmedia1.csacademy.com/public/1539360542-201526386.svg","https://www.oreilly.com/"),this.getSponsor("SyncFusion","https://publicmedia1.csacademy.com/public/1507825798-1786594109.png","https://www.syncfusion.com/?utm_source=Code_Camps_User_Groups&utm_medium=listing&utm_campaign=ieeextremeoct17")))]}},{key:"getLogo",value:function(){return Lc.createElement("div",{className:"".concat(this.styleSheet.logoContainer," ").concat(this.styleSheet.textSection)},Lc.createElement(Xd,{href:"https://ieeextreme.org",newTab:!0},Lc.createElement(Kd,{src:SQ,className:this.styleSheet.image})),this.renderInfoLines())}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.logoSectionContainer},this.getLogo(),Lc.createElement(pX,{contest:this.getContest(),className:"".concat(this.styleSheet.countdown," ").concat(this.styleSheet.textSection)})),this.getUnauthenticated(),Lc.createElement("div",{className:this.styleSheet.sectionContainer,style:{alignItems:"flex-start"}},this.getAboutIEEEXtreme(),this.getPlatformHelp()),Lc.createElement("div",{className:this.styleSheet.sectionContainer},this.getPartners(),this.getSponsors()),Lc.createElement("div",{className:this.styleSheet.sectionContainer},Lc.createElement("div",{style:{marginTop:30}},Lc.createElement("hr",null),Lc.createElement("h4",null,"For any technical issues, please send an email to contact@csacademy.com"),Lc.createElement("h4",null,"Please try to provide as many details as possible for your problem (OS, browser, steps to reproduce, etc)."),Lc.createElement("h4",null,"Have a great contest experience!"))),Lc.createElement("div",{style:{height:50,width:"100%"}})]}}]),t}(uH))||LK,IQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=w(d(t.prototype),"render",this).call(this),n={maxWidth:"360px",marginBottom:"-10px"};return[Lc.createElement("div",{style:{textAlign:"center"}},Lc.createElement("img",{style:n,src:SQ})),e]}}]),t}(YO),NQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContestTaskSummaryPanelClass",value:function(){return IQ}}]),t}(tR),OQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"officialOrLateRegistration",value:function(e){return e.ieeeTeamType===kX.OFFICIAL||e.ieeeTeamType===kX.LATE_REGISTRATION}},{key:"getRankText",value:function(){var e=this;if(this.options.loadedScoreboard){var t=this.getContest(),n=this.getContestUser(),i=t.getBaseContest().getUsers();this.officialOrLateRegistration(n)&&(i=i.filter(function(t){return e.officialOrLateRegistration(t)}));var r=1,a=!0,o=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;WS.compare(n,c)>0&&(r+=1)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return"Rank "+r+" / "+i.length}}}]),t}(iR),RQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTasksDropdownElements",value:function(){return[]}},{key:"createRankInfo",value:function(){var e=Lc.createElement(OQ,{contest:this.contest,loadedScoreboard:this.contestPanel._loadedScoreboard});return this.contestPanel.attachListener(e,"update",function(){return tg.Global.checkForWrap()}),Lc.createElement(_f,{value:e,key:"rank"})}},{key:"getLeftChildren",value:function(){return w(d(t.prototype),"getLeftChildren",this).call(this)}},{key:"createHelp",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("help"),key:"help",value:Lc.T("Help")})}},{key:"createPhotos",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("photos"),key:"photos",value:Lc.T("Photos")})}}]),t}(cR),MQ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new RQ(n.getContest(),y(n)),n}return h(t,e),o(t,[{key:"getURLPrefix",value:function(e){var t="/"+this.getContest().name+"/";return e&&(t+=e+"/"),t}}]),o(t,[{key:"getSummaryPanel",value:function(){return Lc.createElement(LQ,{contest:this.getContest()})}},{key:"getScoreboardPanel",value:function(){return this.getContest().canShowScoreboard()&&Lc.createElement(oQ,{ref:this.refLink("scoreboard"),contest:this.getBaseContest(),virtualContest:this.getVirtualContest(),originalContest:this.getContest()})}},{key:"getTasksListPanel",value:function(){return Lc.createElement(mQ,{ref:this.refLink("contestTaskList"),contest:this.getContest(),isArchive:!1,className:mh.Container.SMALL})}},{key:"getContestTaskPanel",value:function(e){return Lc.createElement(NQ,{contestTaskId:e.id})}},{key:"getHelpPage",value:function(){return Lc.createElement(UC,{articleId:1417})}},{key:"getPhotosPage",value:function(){return Lc.createElement(UC,{articleId:1418})}},{key:"getSubroutes",value:function(){return w(d(t.prototype),"getSubroutes",this).call(this)}}]),t}(CH),PQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLeftChildren",value:function(){return[Lc.createElement(Ff,{href:this.getURLPrefix("summary"),key:"summary",value:Lc.T("Summary")})]}},{key:"getRightChildren",value:function(){return[]}},{key:"createPhotos",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("photos"),key:"photos",value:Lc.T("Photos")})}}]),t}(RQ),DQ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new PQ(n.getContest(),y(n)),n}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"getURLPrefix",value:function(e){var t="/"+this.getContest().name+"/";return e&&(t+=e+"/"),t}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getSummaryPanel()},this.getSubroutes()),this.routes}},{key:"getDefaultOptions",value:function(){return{style:{height:"100%"}}}},{key:"getSummaryPanel",value:function(){return Lc.createElement(LQ,{contest:this.getContest()})}},{key:"getPhotosPage",value:function(){return Lc.createElement(UC,{articleId:1418})}},{key:"getSubroutes",value:function(){var e=this;return[new im("summary",function(){return e.getSummaryPanel()})]}},{key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.navHandler.apply()}}]),t}(nm),BQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"renderUnauthenticated",value:function(){return Lc.createElement(DQ,{ref:"child",contest:XS.get(this.contestId)})}},{key:"dispatchUrlChange",value:function(){var e=this;setTimeout(function(){e.options.error||e.child.setURL(e.urlParts)})}},{key:"renderLoaded",value:function(){return USER.isAuthenticated?this.options.error?this.renderError():Lc.createElement(MQ,{contestId:this.contestId,ref:"child"}):this.renderUnauthenticated()}}]),t}(xH),_Q="https://publicmedia1.csacademy.com/public/1570016799-3145839958.png",FQ=(IK=BK=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"loginWidget",NK,y(n)),O(n,"forgotPassword",OK,y(n)),O(n,"signInButtonContainer",RK,y(n)),O(n,"signInButton",MK,y(n)),O(n,"rememberMeContainer",PK,y(n)),O(n,"input",DK,y(n)),n}return h(t,e),t}(Kw),NK=R(IK.prototype,"loginWidget",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:0,width:"auto",height:"auto"}}}),OK=R(IK.prototype,"forgotPassword",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"hidden"}}}),RK=R(IK.prototype,"signInButtonContainer",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"auto"}}}),MK=R(IK.prototype,"signInButton",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#185e9c",color:qe("#185e9c",1),minWidth:"initial",paddingLeft:20,paddingRight:20,outline:"none",":hover":{backgroundColor:qe("#185e9c",.15),color:qe("#185e9c",1),border:0}}}}),PK=R(IK.prototype,"rememberMeContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"29px"}}}),DK=R(IK.prototype,"input",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"inherit !important",borderBottom:"2px solid #185e9c",borderRadius:"0 !important",":hover":{borderBottom:"2px solid #185e9c !important"},":focus":{borderBottom:"2px solid #185e9c !important"}}}}),IK),UQ=(_K=Ze(FQ))(FK=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getThirdPartyLogin",value:function(){}},{key:"getClearBothArea",value:function(){}},{key:"getRememberMeCheckbox",value:function(){return Lc.createElement("div",{className:this.styleSheet.rememberMeContainer},w(d(t.prototype),"getRememberMeCheckbox",this).call(this))}}]),t}(eE))||FK,zQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getSignInValue",value:function(){return"Sign in with IEEE Account"}},{key:"sendLogin",value:function(){window.location=location.origin+"/ieee/login-with-ieee/"}},{key:"render",value:function(){return[Lc.createElement("form",{ref:"form"},this.getSignInButton())]}}]),t}(UQ),WQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getSignInValue",value:function(){return"Request password reset"}},{key:"sendLogin",value:function(){var e=this;this.clearErrorMessage();var t={email:this.emailInput.getValue()};zu.postJSON("/ieee_password_reset_request/",t).then(function(){return e.setErrorMessage({message:"An email was sent to all members of your team."},!1)},function(t){return e.setErrorMessage(t)})}},{key:"render",value:function(){return[Lc.createElement("form",{ref:"form"},this.getEmailInput("envelope"),this.getSignInButton(),Lc.createElement("div",{style:{clear:"both",height:"20px"}}),this.getErrorArea())]}}]),t}(UQ),HQ=(UK=iQ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"ieeeXtreme13ContestSummary",zK,y(n)),O(n,"logoSectionContainer",WK,y(n)),O(n,"sectionContainer",HK,y(n)),O(n,"logoContainer",VK,y(n)),O(n,"image",GK,y(n)),O(n,"countdown",jK,y(n)),O(n,"sectionTitleContainer",YK,y(n)),O(n,"sectionTitle",JK,y(n)),O(n,"sponsorsAndPartners",qK,y(n)),O(n,"sponsorContainer",XK,y(n)),O(n,"sponsorImageContainer",KK,y(n)),O(n,"sponsorImage",QK,y(n)),O(n,"sponsorName",ZK,y(n)),O(n,"textSection",$K,y(n)),O(n,"sponsorsAndPartnersLogosContainer",eQ,y(n)),n.loginContainer={width:"100%",display:"flex",flexDirection:"row",justifyContent:"center"},O(n,"infoLinesContainer",tQ,y(n)),O(n,"infoLine",nQ,y(n)),n}return h(t,e),t}(Jc),zK=R(UK.prototype,"ieeeXtreme13ContestSummary",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:1200,margin:"0 auto",maxWidth:"100%"}}}),WK=R(UK.prototype,"logoSectionContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:rc.isMobileDevice()||window.innerWidth<1125?"column":"row"}}}),HK=R(UK.prototype,"sectionContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:rc.isMobileDevice()||window.innerWidth<850?"column":"row"}}}),VK=R(UK.prototype,"logoContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center"}}}),GK=R(UK.prototype,"image",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:rc.isMobileDevice()?"100%":450}}}),jK=R(UK.prototype,"countdown",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minWidth:rc.isMobileDevice()?"100%":670}}}),YK=R(UK.prototype,"sectionTitleContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",marginTop:30}}}),JK=R(UK.prototype,"sectionTitle",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{lineHeight:30,paddingBottom:20,textAlign:"center",fontSize:25,borderBottom:"2px solid #185e9c",display:"flex",justifyContent:"center",color:"#FF8D3A",marginTop:rc.isMobileDevice()?0:30,marginBottom:20}}}),qK=R(UK.prototype,"sponsorsAndPartners",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}}}),XK=R(UK.prototype,"sponsorContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:200,color:"inherit",cursor:"pointer",width:"40%",display:"flex",flexDirection:"column",justifyContent:"space-between"}}}),KK=R(UK.prototype,"sponsorImageContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flex:1}}}),QK=R(UK.prototype,"sponsorImage",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:120,display:"flex"}}}),ZK=R(UK.prototype,"sponsorName",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",paddingTop:10,flex:1,textAlign:"center",fontSize:17,maxHeight:50,letterSpacing:.5}}}),$K=R(UK.prototype,"textSection",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:17,textAlign:"justify",lineHeight:22,letterSpacing:.5,display:"flex",flexDirection:"column",flex:1,paddingLeft:30,paddingRight:30}}}),eQ=R(UK.prototype,"sponsorsAndPartnersLogosContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center"}}}),tQ=R(UK.prototype,"infoLinesContainer",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexWrap:"wrap",flexDirection:"row",width:"100%",justifyContent:"center"}}}),nQ=R(UK.prototype,"infoLine",[Vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"50%",textAlign:"center",color:"#185e9c",fontSize:15,fontWeight:700}}}),UK),VQ=(rQ=Ze(HQ))(aQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(this.styleSheet.ieeeXtreme13ContestSummary)}},{key:"getRegisterButton",value:function(){return null}},{key:"renderInfoLines",value:function(){var e=this,t=this.getContest().getStatistics()||{},n=[{label:Lc.T("Teams Registered"),value:this.getContest().getNumUsers()||"N/A"},{label:Lc.T("Users Online"),value:t.numUsersOnline||"N/A"},{label:Lc.T("Submissions"),value:t.numSubmissions||"N/A"},{label:Lc.T("Compiles"),value:t.numCompiles||"N/A"},{label:Lc.T("Example Runs"),value:t.numExampleRuns||"N/A"},{label:Lc.T("Custom Runs"),value:t.numCustomRuns||"N/A"}].filter(function(e){return"0"!==e.value&&"N/A"!==e.value});return Lc.createElement("div",{className:this.styleSheet.infoLinesContainer},n.map(function(t){return Lc.createElement("div",{className:e.styleSheet.infoLine},t.label," - ",t.value)}))}},{key:"getSectionTitle",value:function(e){return[Lc.createElement("div",{className:this.styleSheet.sectionTitleContainer},Lc.createElement("div",{className:this.styleSheet.sectionTitle},e))]}},{key:"getSponsor",value:function(e,t,n){return[Lc.createElement(Xd,{className:this.styleSheet.sponsorContainer,href:n,newTab:!0},Lc.createElement("div",{className:this.styleSheet.sponsorImageContainer},Lc.createElement(Kd,{src:t,className:this.styleSheet.sponsorImage})),Lc.createElement("div",{className:this.styleSheet.sponsorName},e))]}},{key:"getUnauthenticated",value:function(){return USER.isAuthenticated?null:Lc.createElement("div",{className:this.styleSheet.sectionContainer,style:{alignItems:"flex-start"}},Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Sign in with IEEE Account"),Lc.createElement("p",null,"Login using your IEEE member account to continue to IEEEXtreme 13.0:"),Lc.createElement("div",{className:this.styleSheet.loginWidget},Lc.createElement(zQ,null))),Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Sign in"),Lc.createElement("p",null,"Login using your team account from the official email to continue to IEEEXtreme 13.0:"),Lc.createElement("div",{className:this.styleSheet.loginContainer},Lc.createElement(UQ,null))),Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Forgot password?"),Lc.createElement("p",null,"Enter your email address below, and an email with further instructions on how to reset your password will be sent to all members of your team:"),Lc.createElement("div",{className:this.styleSheet.loginContainer},Lc.createElement(WQ,null))))}},{key:"getAboutIEEEXtreme",value:function(){return[Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("IEEEXtreme"),Lc.createElement("p",null,Lc.createElement(Xd,{href:"https://ieeextreme.org/",newTab:!0},"IEEEXtreme")," is a global challenge in which teams of IEEE Student members â€“ advised and proctored by an IEEE member, and often supported by an IEEE Student Branch â€“ compete in a 24-hour time span against each other to solve a set of programming problems."),Lc.createElement("p",null,"See the full IEEEXtreme 13.0 rules ",Lc.createElement(Xd,{href:"https://ieeextreme.org/rules/",newTab:!0},"here"),"."))]}},{key:"getPlatformHelp",value:function(){return[Lc.createElement("div",{className:this.styleSheet.textSection},this.getSectionTitle("Programming Environment"),Lc.createElement("p",null,"You can find out more about the CS Academy environment from the ",Lc.createElement(Xd,{href:"/about",newTab:!0}," about page"),"."),Lc.createElement("p",null,"To familiarize yourself with the platform, and try to solve some problems with the past IEEEXtreme competitions, please access the ",Lc.createElement(Xd,{href:"/ieeextreme-practice/",newTab:!0},"the practice community"),"."))]}},{key:"getPartners",value:function(){return[Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartners},this.getSectionTitle("Partners"),Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartnersLogosContainer},this.getSponsor("CS Academy","https://publicmedia1.csacademy.com/public/1507825790-2709659969.png","https://csacademy.com/"),this.getSponsor("IEEE Women in Engineering (WIE)","https://publicmedia1.csacademy.com/public/1507825773-4126646961.png","http://wie.ieee.org/"),this.getSponsor("IEEE Xplore","https://publicmedia1.csacademy.com/public/1570031113-4247972891.png","https://ieeexplore.ieee.org/"))),Lc.createElement("div",{style:{paddingBottom:50}})]}},{key:"getSponsors",value:function(){return[Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartners},this.getSectionTitle("Sponsors"),Lc.createElement("div",{className:this.styleSheet.sponsorsAndPartnersLogosContainer},this.getSponsor("Digi-Key","https://publicmedia1.csacademy.com/public/1507825798-3658821305.png","https://www.digikey.com/"),this.getSponsor("Oâ€™Reilly","https://publicmedia1.csacademy.com/public/1539360542-201526386.svg","https://www.oreilly.com/"),this.getSponsor("SyncFusion","https://publicmedia1.csacademy.com/public/1507825798-1786594109.png","https://www.syncfusion.com/?utm_source=Code_Camps_User_Groups&utm_medium=listing&utm_campaign=ieeextremeoct17")))]}},{key:"getLogo",value:function(){return Lc.createElement("div",{className:"".concat(this.styleSheet.logoContainer," ").concat(this.styleSheet.textSection)},Lc.createElement(Xd,{href:"https://ieeextreme.org",newTab:!0},Lc.createElement(Kd,{src:_Q,className:this.styleSheet.image})),this.renderInfoLines())}},{key:"render",value:function(){return[Lc.createElement("div",{className:this.styleSheet.logoSectionContainer},this.getLogo(),Lc.createElement(pX,{contest:this.getContest(),className:"".concat(this.styleSheet.countdown," ").concat(this.styleSheet.textSection)})),this.getUnauthenticated(),Lc.createElement("div",{className:this.styleSheet.sectionContainer,style:{alignItems:"flex-start"}},this.getAboutIEEEXtreme(),this.getPlatformHelp()),Lc.createElement("div",{className:this.styleSheet.sectionContainer},this.getPartners(),this.getSponsors()),Lc.createElement("div",{className:this.styleSheet.sectionContainer},Lc.createElement("div",{style:{marginTop:30}},Lc.createElement("hr",null),Lc.createElement("h4",null,"For any technical issues, please send an email to contact@csacademy.com"),Lc.createElement("h4",null,"Please try to provide as many details as possible for your problem (OS, browser, steps to reproduce, etc)."),Lc.createElement("h4",null,"Have a great contest experience!"))),Lc.createElement("div",{style:{height:50,width:"100%"}})]}}]),t}(uH))||aQ,GQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=w(d(t.prototype),"render",this).call(this),n={maxWidth:"360px",marginBottom:"-10px"};return[Lc.createElement("div",{style:{textAlign:"center"}},Lc.createElement("img",{style:n,src:_Q})),e]}}]),t}(YO),jQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getContestTaskSummaryPanelClass",value:function(){return GQ}}]),t}(tR),YQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"officialOrLateRegistration",value:function(e){return e.ieeeTeamType===kX.OFFICIAL||e.ieeeTeamType===kX.LATE_REGISTRATION}},{key:"getRankText",value:function(){var e=this;if(this.options.loadedScoreboard){var t=this.getContest(),n=this.getContestUser(),i=t.getBaseContest().getUsers();this.officialOrLateRegistration(n)&&(i=i.filter(function(t){return e.officialOrLateRegistration(t)}));var r=1,a=!0,o=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;WS.compare(n,c)>0&&(r+=1)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return"Rank "+r+" / "+i.length}}}]),t}(iR),JQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getTasksDropdownElements",value:function(){return[]}},{key:"createRankInfo",value:function(){var e=Lc.createElement(YQ,{contest:this.contest,loadedScoreboard:this.contestPanel._loadedScoreboard});return this.contestPanel.attachListener(e,"update",function(){return tg.Global.checkForWrap()}),Lc.createElement(_f,{value:e,key:"rank"})}},{key:"getLeftChildren",value:function(){return w(d(t.prototype),"getLeftChildren",this).call(this)}},{key:"createHelp",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("help"),key:"help",value:Lc.T("Help")})}},{key:"createPhotos",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("photos"),key:"photos",value:Lc.T("Photos")})}}]),t}(cR),qQ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new JQ(n.getContest(),y(n)),n}return h(t,e),o(t,[{key:"getURLPrefix",value:function(e){var t="/"+this.getContest().name+"/";return e&&(t+=e+"/"),t}}]),o(t,[{key:"getSummaryPanel",value:function(){return Lc.createElement(VQ,{contest:this.getContest()})}},{key:"getScoreboardPanel",value:function(){return this.getContest().canShowScoreboard()&&Lc.createElement(oQ,{ref:this.refLink("scoreboard"),contest:this.getBaseContest(),virtualContest:this.getVirtualContest(),originalContest:this.getContest()})}},{key:"getTasksListPanel",value:function(){return Lc.createElement(mQ,{ref:this.refLink("contestTaskList"),contest:this.getContest(),isArchive:!1,className:mh.Container.SMALL})}},{key:"getContestTaskPanel",value:function(e){return Lc.createElement(jQ,{contestTaskId:e.id})}},{key:"getHelpPage",value:function(){return Lc.createElement(UC,{articleId:1417})}},{key:"getPhotosPage",value:function(){return Lc.createElement(UC,{articleId:1418})}},{key:"getSubroutes",value:function(){return w(d(t.prototype),"getSubroutes",this).call(this)}}]),t}(CH),XQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLeftChildren",value:function(){return[Lc.createElement(Ff,{href:this.getURLPrefix("summary"),key:"summary",value:Lc.T("Summary")})]}},{key:"getRightChildren",value:function(){return[]}},{key:"createPhotos",value:function(){return Lc.createElement(Ff,{href:this.getURLPrefix("photos"),key:"photos",value:Lc.T("Photos")})}}]),t}(JQ),KQ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new XQ(n.getContest(),y(n)),n}return h(t,e),o(t,[{key:"getContest",value:function(){return this.options.contest}},{key:"getURLPrefix",value:function(e){var t="/"+this.getContest().name+"/";return e&&(t+=e+"/"),t}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getSummaryPanel()},this.getSubroutes()),this.routes}},{key:"getDefaultOptions",value:function(){return{style:{height:"100%"}}}},{key:"getSummaryPanel",value:function(){return Lc.createElement(VQ,{contest:this.getContest()})}},{key:"getPhotosPage",value:function(){return Lc.createElement(UC,{articleId:1418})}},{key:"getSubroutes",value:function(){var e=this;return[new im("summary",function(){return e.getSummaryPanel()})]}},{
key:"onMount",value:function(){w(d(t.prototype),"onMount",this).call(this),this.navHandler.apply()}}]),t}(nm),QQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"renderUnauthenticated",value:function(){return Lc.createElement(KQ,{ref:"child",contest:XS.get(this.contestId)})}},{key:"dispatchUrlChange",value:function(){var e=this;setTimeout(function(){e.options.error||e.child.setURL(e.urlParts)})}},{key:"renderLoaded",value:function(){return USER.isAuthenticated?this.options.error?this.renderError():Lc.createElement(qQ,{contestId:this.contestId,ref:"child"}):this.renderUnauthenticated()}}]),t}(xH),ZQ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getRegisterButton",value:function(){return null}},{key:"getNeedLoginMessage",value:function(){if(!USER.isAuthenticated)return Lc.createElement("h4",null,"You need to be authenticated to submit a solution, please login.")}},{key:"getDescription",value:function(){return Lc.createElement("div",{style:{marginTop:"20px"}},Lc.createElement("h3",null,"Welcome to the practice community for IEEEXtreme!"),Lc.createElement("h4",null,"Please familiarize yourself with the contest interface."),this.getNeedLoginMessage(),Lc.createElement("h4",null,"You can read more about the environment your sources will he evaluated with ",Lc.createElement(Xd,{href:"/about/environment",newTab:!0},"here")),Lc.createElement("h4",null,"We recommend you also try the ",Lc.createElement(Xd,{value:"CS Academy archive",href:"/contest/archive/",newTab:!0})," of problems where you will find some easier, and also not so easy tasks."))}},{key:"render",value:function(){return[Lc.createElement(Kd,{src:"/static/svg/XtremeLogo_practice_community.svg"}),this.getDescription()]}}]),t}(uH),$Q=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getLeftChildren",value:function(){return[Lc.createElement(Ff,{href:this.getURLPrefix(),value:Lc.T("Summary")})].concat(C(w(d(t.prototype),"getLeftChildren",this).call(this)))}}]),t}(hR),eZ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),n.navHandler=new $Q(n.getArchive(),y(n)),n}return h(t,e),o(t,[{key:"getURLPrefix",value:function(e){var t="/"+this.getArchive().name+"/";return e&&(t+=e+"/"),t}}]),o(t,[{key:"getSummaryPanel",value:function(){return Lc.createElement(ZQ,{contest:this.getArchive()})}},{key:"getTasks",value:function(){return Lc.createElement(LI,{contest:this.getArchive(),isArchive:!0})}},{key:"getRoutes",value:function(){var e=this;return this.routes=this.routes||new im(null,function(){return e.getSummaryPanel()},[new im("tasks",function(){return e.getTasks()}),new im("task",function(){return e.getTasks()},[new qy("%s",function(t){var n=zS.getByContestIdAndUrlName(e.getArchive().baseContestId,t.args[0]);return n&&Lc.createElement(tR,{contestTaskId:n.id})})]),new im("scoreboard",function(){return e.getScoreboard()}),new im("submissions",function(){return e.getSubmissions()}),new im("chat",function(){return e.getChat()})]),this.routes}}]),t}(gR),tZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getAjaxUrl",value:function(){return"/ieeextreme-practice/"}},{key:"renderLoaded",value:function(){return Lc.createElement(eZ,{archiveId:this.archiveId,ref:"child"})}}]),t}(xH),nZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getSignInValue",value:function(){return"Set password"}},{key:"sendLogin",value:function(){var e=this;this.clearErrorMessage();var t=this.passwordInput.getValue();if(t!==this.passwordConfirmInput.getValue())return void this.setErrorMessage({message:"Passwords don't match."});zu.postJSON("/accounts/password_change/",{newPassword:t}).then(function(){return e.setErrorMessage({message:"Successfully set the new password"},!1)},function(t){return e.setErrorMessage(t)})}},{key:"render",value:function(){return[Lc.createElement("form",{ref:"form"},this.getPasswordInput(),this.getPasswordInput({ref:"passwordConfirmInput",name:"passwordConfirm",placeholder:"Confirm Password"}),this.getSignInButton(),Lc.createElement("div",{style:{clear:"both",height:"20px"}}),this.getErrorArea())]}}]),t}(gX),iZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getPasswordResetArea",value:function(){var e="Enter a new password:",t=null;return this.options.error?e=this.options.error.message:t=Lc.createElement("div",{className:this.styleSheet.loginContainer,style:{width:500}},Lc.createElement(nZ,null)),[Lc.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},Lc.createElement("div",{className:this.styleSheet.textSection},Lc.createElement("p",null,Lc.createElement(Qd,{innerHTML:e}))),t)]}},{key:"getLogo",value:function(){return[]}},{key:"renderLoaded",value:function(){return[this.getLogo(),this.getSectionTitle("Password reset"),this.getPasswordResetArea()]}},{key:"onDelayedMount",value:function(){}}]),t}(iT(yX)),rZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.addClass(mh.Container.EXTRA_SMALL)}},{key:"render",value:function(){return iT.renderError(aN.PAGE_NOT_FOUND)}}]),t}(Lc.Element),aZ=function(e){function t(){return r(this,t),b(this,d(t).call(this,[],rZ,[],"Page not found"))}return h(t,e),o(t,[{key:"matches",value:function(e){return{args:[],urlParts:e}}},{key:"matchesOwnNode",value:function(){return!0}}]),t}(im),oZ=new im(null,iT(BP),[new qy("about",mx,[],"About CS Academy"),new im("problem-setting",GP),new im("lessons",iT(KP),[],"Lessons"),new im(["lesson","%s"],iT(ZP)),new im("ratings",iT(wR),[],"Ratings Leaderboard"),new im("real_ratings",iT(wR)),new im("reputations",iT(wR)),new im(["code","%s"],iT(Uq),[],"CS Academy - Code"),new im(["submission","%s"],Gq,[],"CS Academy - Submission"),new FT,new VD,new im(["eval","global"],iT(VL)),new im(["eval","manager"],XD),new im(["eval","checkers"],iT(jB)),new qy(["task","%s","edit"],iT(_B)),new im(["article","manager"],kT),new im(["article","%s","edit"],iT(CT)),new im("app",null,[new im("graph_editor",QB,[],"Graph Editor"),new im("diffing_tool",NW),new im("geometry_widget",EW,[],"Geometry Widget")]),new im("contests",iT(kN),[],"Contests"),new im("contest",null,[new im("manager",iT(BW)),new im(["invite","%s"],iT(_W)),new im(["%s","edit"],iT(oH)),new qy("%s",xH)]),new im("private-archives",iT(IH)),new im("private-archive",null,[new qy("%s",iT(zH))]),new im("interview",iT(iV),[new qy("%s",iT(fV))]),new im("accounts",null,[new qy("settings",iT(AV)),new im("workspace_settings",iT(YI)),new im(["email_address_verify","%s"],iT(LV)),new im(["email_unsubscribe","%s"],iT(IV)),new im("password_reset",NV,[new im("%s",iT(jq))]),new im(["activate","%s"],Jq)]),new im(["user","%s"],iT(jV)),new im(["userid","%s"],iT(jV)),new qy("messages",Ux),new qy("workspace",$V),new qy(["email","manager"],iT(BG)),new im(["baseconfig","command","manager"],iT(oq)),new im("manage",iT(KG),[new qy("icarus",iT(xJ)),new im("users",iT(FJ)),new im("charts",jJ,[],"Statistics"),new qy("translation",iT(pq)),new qy("storage",iT(XG))]),new Nq,new qy("ieeextreme11",EQ),new qy("ieeextreme12",BQ),new qy("ieeextreme13",QQ),new qy("ieeextreme-practice",tZ),new im(["ieee_password_reset","%s"],iZ),new im(["questionnaire","%s","answers"],rX),new im("analytics",Oq),new aZ]),sZ=function(e){function t(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultConfig,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{audio:!0,video:!0};return r(this,t),i=b(this,d(t).apply(this,arguments)),i.user=e,i.input=o,i.config=a,i.channel=new n(i.user.id),i.channel.addListener("candidate",function(e){i.handleIceCandidate(e)}),i.channel.addListener("description",function(e){i.handleDescription(e)}),i.channel.addListener("connectionClosed",function(){i.stopStream(!1)}),i.channel.listenForCall(function(e){i.requestCallConfirmation(e,function(){i.createPeerConnection(),i.channel.establishConnection(),i.addListener("receivedDescription",function(){i.captureUserMedia(!1)})},function(){i.channel.refuseConnection()})}),i}return h(t,e),o(t,[{key:"setInput",value:function(e){this.input=e}},{key:"getInput",value:function(){return this.input}},{key:"setConfig",value:function(e){this.config=e}},{key:"getConfig",value:function(){return this.config}},{key:"requestCallConfirmation",value:function(e,t,n){confirm("Connect to call from user with id "+e+"?")?t():n()}},{key:"sendCandidate",value:function(e){this.channel.sendMessage({candidate:e})}},{key:"sendDescription",value:function(e){this.channel.sendMessage({description:e})}},{key:"createPeerConnection",value:function(){var e=this,t=Vl();try{this.peerConnection=new t(this.getConfig())}catch(e){this.peerConnection=new t({})}this.peerConnection.onicecandidate=function(t){t&&t.candidate&&e.sendCandidate(t.candidate)},this.peerConnection.onaddstream=function(t){e.setRemoteStream(t.stream),e.dispatch("remoteStreamReady")}}},{key:"captureUserMedia",value:function(e){var t=this;navigator.getUserMedia(this.getInput(),function(n){t.setLocalStream(n);var i=function(e){if(t.peerConnection.setLocalDescription(e),t.sendDescription(e),t._localDescriptionReady=!0,t._iceCandidates){var n=!0,i=!1,r=void 0;try{for(var a,o=t._iceCandidates[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.handleIceCandidate(s)}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}};e?t.peerConnection.createOffer().then(i):t.peerConnection.createAnswer().then(i)},function(e){throw Error(e.toString())})}},{key:"handleIceCandidate",value:function(e){this._localDescriptionReady?(console.log("Processing candidate",JSON.stringify(e)),this.peerConnection.addIceCandidate(new RTCIceCandidate(e))):(this._iceCandidates||(this._iceCandidates=[]),this._iceCandidates.push(e))}},{key:"handleDescription",value:function(e){this.peerConnection.setRemoteDescription(new RTCSessionDescription(e)),this.dispatch("receivedDescription")}},{key:"startStream",value:function(e){var t=this;if(this.user.id===e)throw Error("You can't stream to yourself, wtf?!");if(this.peerConnection)throw Error("User already streaming!");this.channel.connect(e,function(){t.createPeerConnection(),t.captureUserMedia(!0)},function(e){t.dispatch("rejected",e)})}},{key:"stopStream",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!0,n=!1,i=void 0;try{for(var r,a=this.getLocalStream().getTracks()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.stop()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.peerConnection.close(),delete this.peerConnection,e&&this.channel.killConnection(),this.remoteStream&&(delete this.remoteStream,this._remoteStreamURL&&delete this._remoteStreamURL),this.localStream&&(delete this.localStream,this._localStreamURL&&delete this._localStreamURL),this.dispatch("connectionClosed")}},{key:"setRemoteStream",value:function(e){this.remoteStream=e}},{key:"getRemoteStream",value:function(){return this.remoteStream}},{key:"getRemoteStreamURL",value:function(){return this._remoteStreamURL||(this._remoteStreamURL=window.URL.createObjectURL(this.getRemoteStream())),this._remoteStreamURL}},{key:"setLocalStream",value:function(e){this.localStream=e,this.peerConnection.addStream(this.getLocalStream()),this.dispatch("localStreamReady")}},{key:"getLocalStream",value:function(){return this.localStream}},{key:"getLocalStreamURL",value:function(){return this._localStreamURL||(this._localStreamURL=window.URL.createObjectURL(this.getLocalStream())),this._localStreamURL}}]),t}(Gu);sZ.defaultConfig={iceServers:[{url:"stun:stun.l.google.com:19302"}]};var lZ,uZ,cZ,hZ,dZ,pZ,fZ,gZ,mZ,vZ,yZ,bZ,kZ,wZ,EZ,SZ,CZ,xZ,TZ,AZ,LZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getStreamName",value:function(){return"call-"+this.sourceId+"-"+this.targetId+"-"+this.id}}]),t}(fp),IZ=new mp("multimediacall",LZ),NZ=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).apply(this,arguments)),n.userId=e,n}return h(t,e),o(t,[{key:"getListenStreamName",value:function(){return"user-"+this.userId+"-events"}},{key:"connect",value:function(e,t,n){var i=this;zu.getJSON("/multimedia/initiate_call/",{targetUserId:e}).then(function(e){cp.importState({multimediacall:[e.multimediaCall]}),i.setCurrentCall(IZ.get(e.multimediaCall.id)),i.callUser(t,n)})}},{key:"listenForCall",value:function(e){var t=this;Ok.addListener(this.getListenStreamName(),function(n){n.pendingCall&&(cp.importState({multimediacall:[n.pendingCall]}),t._pendingConnection=IZ.get(n.pendingCall.id),e(n.senderId))})}},{key:"callUser",value:function(e,t){var n=this;zu.postJSON("/multimedia/call_user/",{callId:this.call.id}).then(function(i){return n.addWSListener(e,t)},t)}},{key:"setCurrentCall",value:function(e){this.call=e}},{key:"getStreamName",value:function(){return this.call.getStreamName()}},{key:"addWSListener",value:function(e,t){var n=this;Ok.addListener(this.getStreamName(),function(i){i.senderId!==USER.id&&(i.connectionStatus?"accepted"===i.connectionStatus?e():t("Call Rejected"):i.candidate?n.dispatch("candidate",i.candidate):i.description?n.dispatch("description",i.description):i.connectionClosed&&n.dispatch("connectionClosed"))})}},{key:"sendMessage",value:function(e){return zu.postJSON("/multimedia/broadcast_to_stream/",{callId:this.call.id,data:JSON.stringify(e)})}},{key:"signalConnectionStatus",value:function(e){return zu.postJSON("/multimedia/connection_status/",{callId:this._pendingConnection.id,connectionStatus:e})}},{key:"establishConnection",value:function(){this.setCurrentCall(this._pendingConnection),this.addWSListener(Au,Au),this.signalConnectionStatus("accepted"),delete this._pendingConnection}},{key:"refuseConnection",value:function(){this.signalConnectionStatus("refused"),delete this._pendingConnection}},{key:"killConnection",value:function(){zu.postJSON("/multimedia/close_connection/",{callId:this.call.id})}}]),t}(Gu),OZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"linkToParent",value:function(e){this.chatWidget=e}},{key:"getChatbox",value:function(){return this.chatWidget.chatInput}}]),t}(Qu),RZ=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.getChatbox()?(e.chatWidget.getPlugin("EnterToSendPlugin")&&(e.chatWidget.removePlugin("EnterToSendPlugin"),e._enterToSend=!0),e.getChatbox().addNodeListener("keydown",function(t){39!==t.keyCode&&37!==t.keyCode||setTimeout(function(){e.handleChange()},0),t.shiftKey||t.ctrlKey||("Enter"!==t.key&&13!==t.keyCode||!e.duringAutocomplete&&e._enterToSend&&(e.chatWidget.sendMessage(),t.preventDefault()),pB.handleKeydownEvent(y(e),t))}),e.getChatbox().addNodeListener("input",function(){e.handleChange()}),e.getChatbox().addClickListener(function(){setTimeout(function(){e.handleChange()},0)}),e.addListener("autocomplete",function(t){pB.handleAutocomplete(y(e),t,e.getChatbox())}),e.getChatbox().addListener("messageSent",function(){e.duringAutocomplete=!1,e.dispatch("autocomplete",[])}),e):b(e)}return h(t,e),o(t,[{key:"autocompleteUser",value:function(e){this.getChatbox().node.focus();var t=this.getCaretPosition(),n=this.getChatbox().getValue(),i=this.getLastAtPosition(t),r='<User id="'+e+'" /> ';n=n.substring(0,i+1)+r+n.substring(t),this.getChatbox().setValue(n),this.setCaretPosition(i+1+r.length),this.dispatch("autocomplete",[])}},{key:"handleChange",value:function(){var e=this,t=this.getCaretPosition(),n=this.getLastAtPosition(t);if(-1===n)this.dispatch("autocomplete",[]);else{var i=this.getChatbox().getValue().substring(n+1,t);dB.loadUsersForPrefix(i,function(t){e.dispatch("autocomplete",t)})}}},{key:"getCaretPosition",value:function(){var e=this.getChatbox().node;if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd)return e.selectionEnd;var t=document.selection.createRange();if(t&&t.parentElement()==e){var n=e.value.length,i=e.value.replace(/\r\n/g,"\n"),r=e.createTextRange();r.moveToBookmark(t.getBookmark());var a=e.createTextRange();if(a.collapse(!1),r.compareEndPoints("StartToEnd",a)>-1)return n;var o=-r.moveEnd("character",-n);return o+=i.slice(0,o).split("\n").length-1}return null}},{key:"setCaretPosition",value:function(e){var t=this.getChatbox().node;if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else t.focus(),t.selectionStart&&t.setSelectionRange(e,e)}},{key:"getLastAtPosition",value:function(e){var t=this.getChatbox().getValue();arguments.length<1&&(e=t.length);for(var n=e-1;n>=0&&64!==t.charCodeAt(n);){var i=t[n];if("."!==i&&"_"!==i&&!i.match(/\d/)&&!i.match(/\w/)){n=-1;break}n-=1}return n}}]),t}(OZ),MZ=function(e){function t(){var e;return r(this,t),e=b(this,d(t).apply(this,arguments)),e.getChatbox()?(e.callback=function(t){t.shiftKey||t.ctrlKey||"Enter"!==t.key&&13!==t.keyCode||(e.chatWidget.sendMessage(),t.preventDefault())},e.getChatbox().addNodeListener("keydown",e.callback),e):b(e)}return h(t,e),o(t,[{key:"remove",value:function(){this.getChatbox().removeNodeListener("keydown",this.callback)}}]),t}(OZ),PZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getRoutes",value:function(){return this.options.routes}},{key:"getBeforeContainer",value:function(){return null}},{key:"getRouterOptions",value:function(){return{style:{height:"100%"}}}},{key:"getRouter",value:function(){return Lc.createElement(nm,l({routes:this.getRoutes(),ref:"router"},this.getRouterOptions()))}},{key:"getContainer",value:function(){return Lc.createElement(nw,null,this.getRouter())}},{key:"getAfterContainer",value:function(){return null}},{key:"render",value:function(){return[this.getBeforeContainer(),this.getContainer(),this.getAfterContainer()]}},{key:"onMount",value:function(){this.router&&this.router.addListener("change",function(){document.body.click(),Hu.Global.dispatch("closeAllModals")})}}],[{key:"init",value:function(){return Xd.prototype.onMount=Gl,self.appInstance=this.create(document.body)}}]),t}(Lc.Element),DZ=(lZ=We({selector:"body"}),uZ=We({selector:".hidden"}),cZ=We({selector:"*"}),hZ=We({selector:"a"}),dZ=We({selector:"hr"}),pZ=We({selector:"code, pre"}),fZ=We({selector:"code"}),gZ=We({selector:"pre"}),mZ=We({selector:"pre code"}),vZ=AZ=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"body",yZ,y(n)),O(n,"hidden",bZ,y(n)),O(n,"everything",kZ,y(n)),O(n,"a",wZ,y(n)),O(n,"hr",EZ,y(n)),O(n,"codeAndPre",SZ,y(n)),O(n,"code",CZ,y(n)),O(n,"pre",xZ,y(n)),O(n,"preInCode",TZ,y(n)),n}return h(t,e),t}(Jc),yZ=R(vZ.prototype,"body",[lZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:0,fontSize:this.themeProperties.FONT_SIZE_DEFAULT,fontFamily:this.themeProperties.FONT_FAMILY_DEFAULT}}}),bZ=R(vZ.prototype,"hidden",[uZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"none !important"}}}),kZ=R(vZ.prototype,"everything",[cZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{boxSizing:"border-box"}}}),wZ=R(vZ.prototype,"a",[hZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textDecoration:"none",color:this.themeProperties.COLOR_LINK}}}),EZ=R(vZ.prototype,"hr",[dZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:0,marginTop:"20px",marginBottom:"20px",border:0,borderTop:"1px solid #eee",boxSizing:"content-box"}}}),SZ=R(vZ.prototype,"codeAndPre",[pZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontFamily:this.themeProperties.FONT_FAMILY_MONOSPACE}}}),CZ=R(vZ.prototype,"code",[fZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"2px 4px",fontSize:"90%",color:"#345 !important",backgroundColor:"#f8f2f4 !important",borderRadius:this.themeProperties.BUTTON_BORDER_RADIUS}}}),xZ=R(vZ.prototype,"pre",[gZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"auto",display:"block",padding:this.themeProperties.BUTTON_BORDER_RADIUS,margin:"0 0 10px",fontSize:"13px",lineHeight:"1.42857143",color:"#333",wordBreak:"break-all",wordWrap:"break-word",backgroundColor:"#f5f5f5",border:"1px solid #ccc"}}}),TZ=R(vZ.prototype,"preInCode",[mZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:0,fontSize:"inherit",color:"inherit",whiteSpace:"pre-wrap",backgroundColor:"transparent",borderRadius:0}}}),vZ),BZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,null,[{key:"init",value:function(){return this.loadPublicState(),this.addAjaxProcessors(),this.registerWebsocketStreams(),this.initializeViewportMeta(),this.configureTheme(),this.initializeGlobalStyle(),w(d(t),"init",this).call(this)}},{key:"loadPublicState",value:function(){cp.importState(self.PUBLIC_STATE||{})}},{key:"addAjaxProcessors",value:function(){zu.addPreprocessor(function(e){e.disableCredentials||(e.credentials=e.credentials||"include",e.headers.set("X-CSRFToken",q("csrftoken")))}),zu.addPostprocessor(function(e,t){e.state&&!t.options.disableStateImport&&cp.importState(e.state)}),zu.addPostprocessor(function(e,t){var n=t.getResponseHeaders(),i=n.get("date");if(i){var r=new Ap(i).add(600);yf.set(r,!0)}}),zu.addPostprocessor(function(e){if(e.error)throw e.error}),zu.addErrorPostprocessor(function(e){return aN.wrapError(e)}),zu.errorHandler=function(e){return aN.showErrorAlert(e)}}},{key:"registerWebsocketStreams",value:function(){cp.registerStream=function(e){Ok.addListener(e,cp.applyEventWrapper)},cp.registerStream("global-events"),self.USER&&self.USER.id&&cp.registerStream("user-"+self.USER.id+"-events")}},{key:"initializeViewportMeta",value:function(){return this.viewportMeta=Zd.create(document.head)}},{key:"configureTheme",value:function(){}},{key:"initializeGlobalStyle",value:function(){DZ.initialize()}}]),t}(PZ);BZ.MIN_VIEWPORT_META_WIDTH=375,$c.setProperties({COLOR_PRIMARY:"#202e3e",FONT_MONOSPACE:"'Source Code Pro', 'Monaco', 'Consolas', monospace",CSA_PLAYER_COLOR_FOCUSED:"#9bc",CSA_PLAYER_COLOR_UNFOCUSED:"#555",CARD_PANEL_TEXT_TRANSFORM:"initial",CONTEST_QUESTION_CARD_PANEL_WIDTH:450,CONTEST_QUESTION_CARD_PANEL_MIN_WIDTH:350,CONTEST_QUESTION_CARD_PANEL_PADDING:10,CONTEST_QUESTION_CARD_PANEL_BODY_PADDING:15,CONTEST_QUESTION_CARD_PANEL_LINE_HEIGHT:18,CONTEST_QUESTION_CONTAINER:920,MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP:10,MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE:25,MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP:0,MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE:0,NAV_MANAGER_BOX_SHADOW_NAVBAR:"0px 1px 0px rgb(0, 0, 0)",COLOR_COMPILE:"#3DB7C6",COLOR_RUN:"#3D7FC6",COLOR_SUBMIT:"#CC4949",COLOR_WORKSPACE:"#34435b"});var _Z={1:{COLOR_PRIMARY:"#202e3e",COLOR_SECONDARY:"#358ba4",COLOR_BACKGROUND_BODY:"#f8f8f8",COLOR_BACKGROUND_ALTERNATIVE:"#eee",FONT_FAMILY_DEFAULT:"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif"},2:{COLOR_PRIMARY:"#202",COLOR_SECONDARY:"#358ba4",COLOR_BACKGROUND_BODY:"#493349",COLOR_BACKGROUND_ALTERNATIVE:"#392339",FONT_FAMILY_DEFAULT:"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif"},3:{COLOR_PRIMARY:"#000",COLOR_SECONDARY:"#070",COLOR_BACKGROUND_BODY:"#222",COLOR_BACKGROUND_ALTERNATIVE:"#392339",FONT_FAMILY_DEFAULT:"monospace"},custom:{}},FZ=Object.assign({},$c.Global.properties);USER.isAuthenticated&&(jl(),rk.getCurrentUser().addListener("updateCustomSetting",function(e){(e.key.startsWith("theme:")&&"set"===e.origin||"themeId"===e.key)&&jl()})),tm.setDefaultTitle("CS Academy"),yf.setPageLoadTime(window.SERVER_PAGE_LOAD),zu.addPreprocessor(ce),BZ.addAjaxProcessors(),DZ.initialize(),$c.register(Gb,Ub),CT.DiffWidgetClass=IW,Xd.prototype.onMount=Gl,ip.requireAce=function(e){dt("/static/js/ext/ace/ace.js",function(){ip.AceRange=window.ace.require("ace/range").Range,e&&e()})},hc.prototype.getElement=function(e){return{tag:"CodeSnippet",value:e}},iT.renderLoading=function(){return Lc.createElement("div",{style:{textAlign:"center"}},Lc.createElement(gx,{size:250,style:{marginTop:"100px"}}))},iT.renderError=function(e){return Lc.createElement("div",{style:{textAlign:"center"}},Lc.createElement(fx,{size:250,style:{marginTop:"100px"}}),Lc.createElement("h3",null,"Error: ",e.message))},dS.defaultPlugins=[MZ,RZ],IT.defaultPlugins=[RZ];var UZ=ag.Element.prototype.setOptions;ag.Element.prototype.setOptions=function(e){if("function"==typeof this.getDefaultOptions){var t=this.getDefaultOptions(e)||{},n=e.ref;e=j({},t,e),n&&(e.ref=n)}UZ.call(this,e)},setTimeout(function(){return ip.requireAce(function(){})},250),USER.isSuperUser&&require(["ICEAdapter"],function(){window.userMediaStreamer=new sZ(USER,NZ),Hu.Global.dispatch("userListeningForCalls")});var zZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return[Lc.createElement(nT,{ref:"navManager"}),Lc.createElement(nw,null,Lc.createElement(nm,{routes:oZ,ref:"router",style:{height:"100%"}}))]}},{key:"onMount",value:function(){var e=this;Hu.Global.addListener("externalURLChange",function(){e.navManager.leftSidePanel.visible&&e.navManager.toggleLeftSidePanel()}),this.router.addListener("change",function(){document.body.click(),Hu.Global.dispatch("closeAllModals"),rw.clearBodyPopups()}),this.navManager.initGlobalRouterListener(),Hu.Global.dispatch("initNavManagerDone"),this.addClickListener(function(){return rw.clearBodyPopups()})}}]),t}(Lc.Element),WZ=zZ,HZ=Zd.create(document.head,{minDeviceWidth:450}),VZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){var e=w(d(t.prototype),"getDefaultOptions",this).call(this);return e.backgroundColor="#F7F2CB",e.arrowColor="#F7F2CB",e.arrowDirection=Mc.DOWN,e.className=(e.className||"")+" hidden",e}},{key:"setContent",value:function(e){this.contentArea.options.children=e,this.contentArea.redraw()}},{key:"getPopupData",value:function(){return{panel:this.parentNode,content:this.options.children,center:{x:this.options.x,y:this.options.y}}}},{key:"setPopupData",value:function(e){this.setContent(e.content),this.setCenter(e.center)}},{key:"show",value:function(){this.hasClass("hidden")&&this.removeClass("hidden")}},{key:"hide",value:function(){this.hasClass("hidden")||this.addClass("hidden")}},{key:"showPopupTransition",value:function(e,t,n){var i,r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];i="function"==typeof t?t():t;var l=new Nf;l.dependsOn=a;var u=new If({func:function(t){t.content=r.options.children,t.center={x:r.options.x,y:r.options.y},r.options.style?t.opacity=r.options.style.opacity||1:t.opacity=1,r.setContent(e),r.setCenter(i,!0),r.setStyle("opacity",0),r.show()},reverseFunc:function(e){r.setContent(e.content),r.setCenter(e.center,!0),r.setStyle("opacity",e.opacity),r.hide()},context:{}});l.push(u,!1);var c=new Lf({func:function(e){r.setStyle("opacity",e)},duration:n/2,dependsOn:[u],inMovie:s});return l.push(c,!1),l.push(new Lf({func:function(e){},duration:n/2,inMovie:s}),!1),l.setStartTime(o),l}},{key:"hidePopupTransition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=new Nf;a.dependsOn=n;var o=new Lf({func:function(e){t.setStyle("opacity",1-e)},duration:e,dependsOn:[],inMovie:r});return a.push(o,!1),a.push(new If({func:function(){t.hide()},reverseFunc:function(){t.show()},dependsOn:[o]}),!1),a.setStartTime(i),a}}]),t}(rw),GZ=function(e){function t(e){var n;return r(this,t),n=b(this,d(t).call(this,e)),n.stack=[{content:n.options.content,title:n.options.title}],n}return h(t,e),o(t,[{key:"getTitleAreaContent",value:function(){return[Lc.createElement(Md,{ref:"backButton",className:"pull-left",style:{border:"none",backgroundColor:"transparent",fontSize:"18pt",color:"#888888",padding:"2px",marginTop:"-12px",marginLeft:"-15px",marginRight:"-15px"},label:"<"})].concat(C(w(d(t.prototype),"getTitleAreaContent",this).call(this)))}},{key:"getContent",value:function(){return[Lc.createElement(jd,{ref:"titleArea",style:{backgroundColor:"#F3F3F3",paddingLeft:"20px",fontSize:this.options.titleFontSize,fontWeight:"bold",paddingTop:"6px",paddingBottom:"6px",textAlign:"center",borderBottom:"1px solid #BEBEBE"}},this.getTitleAreaContent()),Lc.createElement(sp,{value:this.options.content,style:{padding:"8px"}})]}},{key:"pushDefinition",value:function(e){this.stack.push(e),this.setStyle("left","0px"),this.setStyle("top","0px"),this.options.content=e.content,this.options.title=e.title,this.redraw(),this.bindInsideParent(),this.stack.length>1&&this.backButton.removeClass("hidden")}},{key:"popDefinition",value:function(){this.stack.pop(),this.setStyle("left","0px"),this.setStyle("top","0px"),this.options.content=this.stack[this.stack.length-1].content,this.options.title=this.stack[this.stack.length-1].title,this.redraw(),this.bindInsideParent(),1===this.stack.length&&this.backButton.addClass("hidden")}},{key:"recalculatePosition",value:function(){for(var e=this.options.definition.node,t=e.offsetWidth/2,n=e.offsetHeight;e!==this.parentNode&&"relative"!==e.style.position;)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;this.setCenter({x:t,y:n})}},{key:"onMount",value:function(){var e=this;w(d(t.prototype),"onMount",this).call(this),this.backButton.addClickListener(function(t){t.stopPropagation(),e.popDefinition(),e.backButton.node.blur()});var n=this.backButton.options.style.color;this.backButton.node.addEventListener("mouseover",function(){e.backButton.setStyle("color","#0082AD")}),this.backButton.node.addEventListener("mouseout",function(){e.backButton.setStyle("color",n)}),this.stack.length>1?this.backButton.removeClass("hidden"):this.backButton.addClass("hidden")}}]),t}(Gw),jZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e),this.options.term=this.options.term||this.options.value,this.options.term&&(this.options.definition=Mk.getDefinition(this.options.term.trim())),0==this.options.children.length&&(this.options.children=[this.options.value||this.options.term])}},{key:"getNodeType",value:function(){return"span"}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("position","relative"),e}},{key:"render",value:function(){return[Lc.createElement("span",{ref:"termDefinition",style:{fontWeight:"bold",color:"#0082AD",cursor:"pointer"}},this.options.children)]}},{key:"onMount",value:function(){var e=this;this.addClickListener(function(t){t.stopPropagation();for(var n=e,i=!1;n;)n instanceof GZ&&(i=!0),n=n.parent;var r=e.options.definition.title,a=e.options.definition.definition;if(i)e.constructor.Popup.pushDefinition({title:r,content:a});else{if(e.constructor.activeDefinition===e)return e.constructor.Popup.hide(),e.constructor.Popup=null,void(e.constructor.activeDefinition=null);e.constructor.Popup&&e.constructor.Popup.isInDocument()&&e.constructor.Popup.hide(),e.constructor.Popup=GZ.create(e,{target:e.termDefinition,definition:e,title:r,content:a,width:"300px"})}e.constructor.activeDefinition=e})}}]),t
}(Lc.Element),YZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAtributes",value:function(e){e.setStyle("border","none"),e.setStyle("overflow","hidden")}},{key:"setOptions",value:function(e){e=Object.assign({width:"150",height:"20",scrolling:"no",frameborder:"0",allowTransparency:"true",src:"",showFaces:"true",share:"true",layout:"button"},e),e.href||(e.href=window.location.href);var n=e.href,i="https://www.facebook.com/plugins/like.php?href=";i+=n,i+="&width="+e.width+"&layout="+e.layout+"&action=like&show_faces="+e.showFaces+"&share="+e.share+"&height="+e.height+"&appId",e.src=i,w(d(t.prototype),"setOptions",this).call(this,e)}}]),t}(Lc.Primitive("iframe")),JZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){return e.title||(e.title=document.title),e.href||(e.href=window.location.href),e.title="https://twitter.com/intent/tweet?text="+e.title,e}},{key:"extraNodeAttributes",value:function(e){e.addClass("twitter-share-button")}},{key:"onMount",value:function(){window.twttr||(window.twttr=function(e,t,n){var i,r=e.getElementsByTagName(t)[0],a=window.twttr||{};return e.getElementById(n)?a:(i=e.createElement(t),i.id=n,i.src="https://platform.twitter.com/widgets.js",r.parentNode.insertBefore(i,r),a._e=[],a.ready=function(e){a._e.push(e)},a)}(document,"script","twitter-wjs"))}},{key:"render",value:function(){return[Lc.createElement(Xd,{className:"twitter-share-button",href:this.options.title,value:"Tweet"}),Lc.createElement("link",{rel:"canonical",href:this.options.href})]}}]),t}(Lc.Element),qZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){e.href||(e.href=window.location.href),e.href="http://vk.com/share.php?url="+e.href,e.target="_blank",w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"render",value:function(){return console.log("VK should work too"),[Lc.createElement(Md,{size:Dc.SMALL,style:{padding:"0.7px",fontSize:"11.5px",paddingLeft:"3px",paddingRight:"3px",marginTop:"-12.5px",marginLeft:"9px",backgroundColor:"#597BA5",color:"white"},label:"Share",faIcon:"vk"})]}}]),t}(Xd),XZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){return this.options.href||(this.options.href=window.location.href),this.options.title||(this.options.title=document.title),[Lc.createElement(YZ,{href:this.options.href,style:{display:"inline-block"}}),Lc.createElement(JZ,{title:this.options.title,href:this.options.href,style:{display:"inline-block"}}),Lc.createElement(qZ,{href:this.options.href,style:{display:"inline-block"}})]}}]),t}(Lc.Element);Yl(Array,"erase",function(e){return this.splice(this.indexOf(e),1)}),Yl(Array,"insert",function(e,t){return this.splice(e,0,t)}),Yl(Array,"last",function(){return this[this.length-1]}),Yl(Array,"clone",function(){return this.slice()});var KZ=function(){function e(){r(this,e)}return o(e,null,[{key:"addCommandProcessor",value:function(e,t){this.GLOBAL.addListener(e,t)}},{key:"processCommand",value:function(e){var t=e;this.GLOBAL.dispatch(t,null)}}]),e}();KZ.GLOBAL=new Gu,KZ.addCommandProcessor("reloadPage",function(e){location.reload()}),Ok.Global.addListener("serverCommand",function(e){console.log("Processing server command ",e),KZ.processCommand(e)});var QZ=function(e){function t(e){var n;r(this,t),n=b(this,d(t).call(this,{func:function(e){var t=Math.floor(e*(n.nodeFrames.length-1)),i=n.nodeFrames[t];if(i!==n.nodeFrames.length-1){var r=n.nodeFrames[t+1],a=1-(e*(n.nodeFrames.length-1)-t),o=!0,s=!1,l=void 0;try{for(var u,c=n.graph.nodes[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var h=u.value,d=i.get(h),p=void 0;p=r?r.get(h):d,h.setCenter({x:a*d.x+(1-a)*p.x,y:a*d.y+(1-a)*p.y})}}catch(e){s=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}i=n.edgeFrames[t],r=n.edgeFrames[t+1],a=1-(e*(n.edgeFrames.length-1)-t);var f=!0,g=!1,m=void 0;try{for(var v,y=n.graph.edges[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value,k=i.get(b).curveArcRadius,w=void 0;w=r?r.get(b).curveArcRadius:k,b.setCurveArcRadius(a*k+(1-a)*w),b.update()}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}}},startTime:e.startTime,duration:e.duration})),n.points=new Map;for(var i=0;i<e.graph.nodes.length;i+=1)n.points.set(e.graph.nodes[i],e.graph.nodes[i].getCenter());n.lines=new Map;for(var a=0;a<e.graph.edges.length;a+=1)n.lines.set(e.graph.edges[a],{curveArcRadius:e.graph.edges[a].getCurveArcRadius()});return n.graph=e.graph,n.fps=e.fps||60,n.realFps=e.realFps||10,n.nodeFrames=[],n.edgeFrames=[],n.auxiliaryTransitions=[],n}return h(t,e),o(t,[{key:"setDuration",value:function(e){this.duration=e}},{key:"generateNewFrame",value:function(){var e=this,t=this.graph;if(0===this.nodeFrames.length)return this.nodeFrames.push(new Map(this.points)),void this.edgeFrames.push(new Map(this.lines));for(var n=new xk({points:this.graph.nodes.map(function(t){return e.points.get(t)}),edges:t.options.edges.map(function(e){return{first:e.source,second:e.target}}),gravityCenter:t.getGravityCenter()}),i=n.calculateVectors(1),r=0;r<t.nodes.length;r+=1){var a=t.nodes[r],o={x:i[r].x+i[r].dx,y:i[r].y+i[r].dy};a.isFixed()||(this.points.delete(a),this.points.set(a,o))}if(t.options.supportsBending)for(var s=this.getBendingDelta(),l=0;l<t.edges.length;l+=1){var u=t.edges[l],c=this.lines.get(u).curveArcRadius;u.options.supportsBending&&this.lines.set(u,{curveArcRadius:c+s[l]})}var h=1e3*this.nodeFrames.length/this.realFps;this.runAuxiliaryTransitions(h),this.nodeFrames.push(new Map(this.points)),this.edgeFrames.push(new Map(this.lines))}},{key:"getBendingDelta",value:function(){for(var e=new Array(this.graph.edges.length),t=0;t<this.graph.edges.length;t+=1){var n=this.graph.edges[t];if(!n.options.supportsBending)return void(e[t]=0);for(var i=this.points.get(n.getSource()),r=this.points.get(n.getTarget()),a=ru(i,r),o=null,s=0;s<this.graph.nodes.length;s+=1)if(this.graph.nodes[s]!==n.getSource()&&this.graph.nodes[s]!==n.getTarget()){var l=this.points.get(this.graph.nodes[s]),u=iu(l,a);tu(l,a)<=this.graph.nodes[s].getRadius()+10&&nu(u,i,r)&&(null===o||this.graph.nodes[s].getRadius()>o.getRadius())&&(o=this.graph.nodes[s])}var c=this.lines.get(n).curveArcRadius,h=void 0;h=null!==o?0===c?2.5*o.getRadius()*(eu(this.points.get(o),a)>0?-1:1):2.5*o.getRadius()*(c<0?-1:1):0,e[t]=(h-c)/5}return e}},{key:"forceFinish",value:function(){for(var e=1+Math.ceil(this.duration*this.realFps/1e3);this.nodeFrames.length<e;)this.generateNewFrame();return this}},{key:"runAuxiliaryTransitions",value:function(e){for(var t=0;t<this.auxiliaryTransitions.length;t+=1){var n=this.auxiliaryTransitions[t];e<n.startTime||n.isStopped()||n.nextStep(e)}}},{key:"moveNodeTransition",value:function(e){var t=this;return new Lf({func:function(n,i){t.points.set(i.node,{x:(1-n)*i.coords.x+n*e.newCoords.x,y:(1-n)*i.coords.y+n*e.newCoords.y})},context:{coords:this.points.get(e.node),node:e.node},duration:e.duration,startTime:e.startTime,dependsOn:e.dependsOn})}},{key:"addTransition",value:function(e){this.auxiliaryTransitions.push(e)}}]),t}(Lf),ZZ=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setColumns",value:function(){var e={textAlign:"left",verticalAlign:"middle"},n={textAlign:"left",verticalAlign:"middle",width:"20%"},i={textAlign:"left",verticalAlign:"middle",width:"30%"},r={textAlign:"left",verticalAlign:"middle",width:"50%"},a=[{value:function(e){return e.name},headerName:"Language",headerStyle:n,cellStyle:e},{value:function(e){return e.compiler},headerName:"Compiler",headerStyle:i,cellStyle:e},{value:function(e){return e.comment?Lc.createElement(sp,{value:e.comment}):null},headerName:"Comment",headerStyle:r,cellStyle:e}];w(d(t.prototype),"setColumns",this).call(this,a)}},{key:"getEntries",value:function(){return Bk.all()}}]),t}(vb),$Z=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getArticle",value:function(){return xS.get(this.options.articleId)}},{key:"render",value:function(){var e=this,t=this.getArticle();return t?[Lc.createElement(EE,{value:t.markup,style:{height:"100%"},showButtons:!1})]:(xS.fetch(this.options.articleId,function(){setTimeout(function(){e.redraw()},100)}),[])}}]),t}(Lc.Element),e$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setColumns",value:function(){w(d(t.prototype),"setColumns",this).call(this,(this.options.columns||[]).map(function(e){return{headerName:e.headerName||e.header,value:function(t){return Lc.createElement(sp,{value:t[e.fieldName]||t[e.field]||""})},headerStyle:e.headerStyle||{},cellStyle:e.cellStyle||{}}}))}},{key:"getEntries",value:function(){return this.options.rows||this.options.entries}}]),t}(vb),t$={NOT_STARTED:1,LOADING:2,LOADED:3,ERROR:4},n$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{height:270,width:480}}},{key:"getPlayer",value:function(){return this.player}},{key:"initializeYoutube",value:function(){if(this.player=new this.constructor.youtubeAPI.Player(this.node,{height:this.options.height,width:this.options.width,videoId:this.options.videoId}),this._delayedListeners){var e=!0,t=!1,n=void 0;try{for(var i,r=this._delayedListeners[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a,o=i.value;(a=this.getPlayer()).addEventListener.apply(a,C(o))}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}delete this._delayedListeners}}},{key:"onMount",value:function(){var e=this;this.constructor.onYoutubeLoaded(function(){return e.initializeYoutube()})}},{key:"onUnmount",value:function(){this.getPlayer()&&this.getPlayer().destroy()}}],[{key:"ensureYoutubeAPI",value:function(){var e=this;this.YOUTUBE_API_STATE===t$.NOT_STARTED&&(dt("https://www.youtube.com/iframe_api",Au),this.YOUTUBE_API_STATE=t$.LOADING,self.onYouTubeIframeAPIReady=function(){e.YOUTUBE_API_STATE=t$.LOADED,e.youtubeAPI=YT;var t=!0,n=!1,i=void 0;try{for(var r,a=e._registeredCallbacks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){(0,r.value)()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}delete e._registeredCallbacks})}},{key:"registerDelayedCallback",value:function(e){this._registeredCallbacks||(this._registeredCallbacks=[],this.ensureYoutubeAPI()),this._registeredCallbacks.push(e)}},{key:"onYoutubeLoaded",value:function(e){if(this.YOUTUBE_API_STATE===t$.LOADED)return void e();if(this.YOUTUBE_API_STATE===t$.ERROR)throw Error("The Youtube API could not be reached.");this.registerDelayedCallback(e)}}]),t}(Lc.Element);n$.PLAYER_EVENTS=["onReady","onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError","onApiChange"],n$.YOUTUBE_API_STATE=t$.NOT_STARTED;var i$=!0,r$=!1,a$=void 0;try{for(var o$,s$=n$.PLAYER_EVENTS[Symbol.iterator]();!(i$=(o$=s$.next()).done);i$=!0)!function(){var e=o$.value;n$.prototype["add"+e.substring(2)+"Listener"]=function(t){var n=this.getPlayer();if(n)n.addEventListener(e,t);else{this._delayedListeners=this._delayedListeners||[];for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];this._delayedListeners.push([e,t].concat(r))}}}()}catch(e){r$=!0,a$=e}finally{try{i$||null==s$.return||s$.return()}finally{if(r$)throw a$}}var l$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{format:"HH:mm",value:0}}},{key:"render",value:function(){return new Ap(this.options.value).format(this.options.format)}}]),t}(Lc.Element);op.addClass("LocalizedTime",l$),op.addClass("Definition",jZ),op.addClass("Graph",Ak),op.addClass("User",sE),op.addClass("Submission",HL),op.addClass("Emoji",Lc.Emoji),op.addClass("Latex",RW),op.addClass("Geometry",bW),op.addClass("Table",e$),op.addClass("PLTable",ZZ),op.addClass("DemoMarkupEditor",$Z),op.addClass("EvalTasksSolutionsWidget",gH),op.addClass("QuestionnaireButton",DP),op.addClass("YoutubeVideo",n$);var u$,c$,h$,d$,p$,f$,g$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle({width:"100%",height:"100%",position:"relative",display:"inline-block"})}}]),t}(Lc.Element),m$=(u$=d$=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=b(this,(e=d(t)).call.apply(e,[this].concat(a))),O(n,"DEFAULT",c$,y(n)),O(n,"body",h$,y(n)),n}return h(t,e),t}(sb),c$=R(u$.prototype,"DEFAULT",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundColor:"#DBDBDB",color:"white"}}}),h$=R(u$.prototype,"body",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:0,height:"100%",width:"100%",position:"relative",overflow:"hidden"}}}),u$),v$=(p$=Ze(m$))(f$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setOptions",value:function(e){return e=Object.assign({color:"#DBDBDB"},e),w(d(t.prototype),"setOptions",this).call(this,e),this.focused=!1,e}},{key:"extraNodeAttributes",value:function(e){w(d(t.prototype),"extraNodeAttributes",this).call(this,e),e.setStyle({marginBottom:"20px",display:"flex",flexDirection:"column",height:this.options.height+"px",width:this.options.width+"px"})}},{key:"render",value:function(){return Lc.createElement(ag.SVGRoot,{ref:"svg",width:"100%",height:"100%"},this.options.children)}},{key:"getChildrenToRender",value:function(){return[this.options.nonSVGChildren,w(d(t.prototype),"getChildrenToRender",this).call(this)]}},{key:"setColor",value:function(e){this.options.color=e,this.node&&(this.panelTitle.setStyle("background-color",e),this.setStyle("border-color",e))}},{key:"toggleFocus",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new Nf;r.dependsOn=n;var a=new If({func:function(){t.focused=!t.focused},reverseFunc:function(){t.focused=!t.focused}});r.push(a,!1);var o=this.focused?"#DBDBDB":"#87ACCC";return r.push(new Lf({func:function(e,n){t.setColor(Qc.interpolate(n.color,o,e))},context:{color:this.options.color},duration:e,dependsOn:[a]}),!1),r.setStartTime(i),r}}]),t}(ub))||f$,y$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{speedFactor:1,fullPlayer:!0,speedInterpolationArray:[{x:0,y:.5},{x:.25,y:.75},{x:.5,y:1},{x:.75,y:2},{x:1,y:4}]}}},{key:"setOptions",value:function(e){if(this.getDefaultOptions){var n=this.getDefaultOptions();w(d(t.prototype),"setOptions",this).call(this,Object.assign(n,e))}else w(d(t.prototype),"setOptions",this).call(this,e)}},{key:"redraw",value:function(){this.pause(),w(d(t.prototype),"redraw",this).call(this),this.movie&&delete this.movie}},{key:"render",value:function(){var e={style:{margin:"0 5px",borderRadius:"4px"}},t=[Lc.createElement(Ld,{ref:"progressBar",active:"true",value:"0",disableTransition:!0,style:{height:"9px","margin-bottom":"10px",cursor:"pointer"}}),Lc.createElement(Md,{ref:"playButton",level:"default",size:Dc.SMALL,style:e.style,faIcon:"play"}),Lc.createElement(Md,{ref:"pauseButton",level:"default",className:"hidden",size:Dc.SMALL,style:e.style,faIcon:"pause"}),Lc.createElement(Md,{ref:"repeatButton",level:"default",className:"hidden",size:Dc.SMALL,style:e.style,faIcon:"repeat"})];return!0===this.options.fullPlayer&&(t.push(Lc.createElement(Md,{ref:"plusButton",level:"default",className:"pull-right",size:Dc.SMALL,style:e.style,faIcon:"plus-circle"})),t.push(Lc.createElement(Jd,{ref:"speedBar",className:"pull-right",width:100,barWidth:5,value:"0.5",style:{margin:"0 8px"}})),t.push(Lc.createElement(Md,{ref:"minusButton",level:"default",className:"pull-right",size:Dc.SMALL,style:e.style,faIcon:"minus-circle"}))),t}},{key:"setSpeedFactor",value:function(e){this.options.speedFactor=e,this.movie&&this.movie.setSpeedFactor(e)}},{key:"pause",value:function(){this.options.paused=!0,this.movie&&this.movie.pause(),this.pauseButton&&this.pauseButton.hide(),this.playButton&&this.playButton.show()}},{key:"play",value:function(){this.options.paused=!1,this.movie?this.movie.resume():(this.buildMovie(),this.movie.setSpeedFactor(this.options.speedFactor),this.movie.startAtPercent(0)),this.playButton.hide(),this.pauseButton.show()}},{key:"repeat",value:function(){this.movie.startAtPercent(0),this.repeatButton.hide(),this.pauseButton.show()}},{key:"setProgressValue",value:function(e){this.progressBar.set(e),1===e&&(this.playButton.hide(),this.pauseButton.hide(),this.repeatButton.show())}},{key:"onMount",value:function(){var e=this;this.options.fullPlayer&&(this.speedBar.addListener("change",function(t){e.setSpeedFactor(Cu(e.options.speedInterpolationArray,t))}),this.minusButton.addClickListener(function(){for(var t=e.options.speedInterpolationArray[0].x,n=0;n<e.options.speedInterpolationArray.length;n+=1){var i=e.options.speedInterpolationArray[n];i.y<e.options.speedFactor&&(t=i.x)}e.speedBar.setValue(t)}),this.plusButton.addClickListener(function(){for(var t=e.options.speedInterpolationArray.last().x,n=e.options.speedInterpolationArray.length-1;n>=0;n-=1){var i=e.options.speedInterpolationArray[n];i.y>e.options.speedFactor&&(t=i.x)}e.speedBar.setValue(t)})),this.playButton.addClickListener(function(){e.play()}),this.progressBar.addClickListener(function(t){e.movie||(e.buildMovie(),e.options.paused=!1),e.repeatButton.hide(),e.options.paused?(e.playButton.show(),e.pauseButton.hide()):(e.playButton.hide(),e.pauseButton.show());var n=(rc.getEventX(t)-Pe(e.progressBar).left)/e.progressBar.getWidth();e.movie.startAtPercent(n)}),this.pauseButton.addClickListener(function(){e.pause()}),this.repeatButton.addClickListener(function(){e.repeat()})}},{key:"focusTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new Nf;r.dependsOn=n,Array.isArray(e)||(e=[e]);for(var a=0;a<this.panels.length;a+=1){var o=this.panels[a];o.focused&&-1===e.indexOf(o)&&r.add(o.toggleFocus(t),!1)}for(var s=0;s<e.length;s+=1){var l=e[s];l.focused||r.add(l.toggleFocus(t),!1)}return r.setStartTime(i),r}},{key:"delayTransition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Lf({func:function(){},duration:e,startTime:n,dependsOn:t})}}]),t}(Lc.Element),b$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{cellWidth:40,cellHeight:25,lineLength:25,fill:"white",color:"black",strokeWidth:1.5,textStrokeWidth:1,fontSize:15}}},{key:"getLineCoords",value:function(){var e=this.options.orientation,t=this.options.coords.x,n=this.options.coords.y,i=this.options.cellWidth,r=this.options.cellHeight,a=this.options.lineLength;return{x1:function(){return"right"===e?t+i:"left"===e?t:t+i/2}(),y1:function(){return"down"===e?n+r:"up"===e?n:n+r/2}(),x2:function(){return"right"===e?t+i+a:"left"===e?t-a:t+i/2}(),y2:function(){return"down"===e?n+r+a:"up"===e?n-a:n+r/2}()}}},{key:"getCoords",value:function(){return this.options.coords}},{key:"setCoords",value:function(e){if(this.options.coords=e,this.rect.setX(e.x),this.rect.setY(e.y),this.label.setPosition(e.x+this.options.cellWidth/2,e.y+this.options.cellHeight/2),this.options.hasLine){var t=this.getLineCoords();this.line.setLine(t.x1,t.y1,t.x2,t.y2)}var n=this.getClipPathRect();this.clipPathRect.setX(n.x),this.clipPathRect.setY(n.y),this.clipPathRect.setHeight(n.height),this.clipPathRect.setWidth(n.width)}},{key:"getLabel",value:function(){return this.options.label}},{key:"setLabel",value:function(e){this.options.label=e,this.label.setText(this.options.label)}},{key:"hideLineTransition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new If({func:function(){t.toggleLine(!0),t.line.setAttribute("opacity",1)},reverseFunc:function(){t.toggleLine(!1)}}),a=new Lf({func:function(e,n){t.line&&t.line.setAttribute("opacity",n.opacity*(1-e))},context:{opacity:1},duration:e,dependsOn:[r]}),o=new If({func:function(){t.toggleLine(!1)},reverseFunc:function(){t.toggleLine(!0),t.line.setAttribute("opacity",1)},startTime:e,dependsOn:[r,a]}),s=new Nf;return s.dependsOn=n,s.push(r,!1),s.push(a,!1),s.push(o,!1),s.setStartTime(i),s}},{key:"showLineTransition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new If({func:function(e){e.addedLine=!t.line,t.toggleLine(!0)},reverseFunc:function(e){e.addedLine&&t.toggleLine(!1)},context:{}}),a=new Lf({func:function(e,n){t.line&&t.line.setAttribute("opacity",n.opacity+(1-n.opacity)*e)},context:{opacity:0},duration:e,dependsOn:[r]}),o=new Nf;return o.dependsOn=n,o.push(r,!1),o.push(a,!1),o.setStartTime(i),o}},{key:"showTransition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Lf({func:function(e,n){t.setAttribute("opacity",n.opacity+(1-n.opacity)*e)},context:{opacity:0},duration:e,startTime:i,dependsOn:n})}},{key:"hideTransition",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Lf({func:function(e,n){t.setAttribute("opacity",n.opacity*(1-e))},context:{opacity:1},duration:e,startTime:i,dependsOn:n})}},{key:"toggleLine",value:function(e){if(e!==this.options.hasLine)if(this.options.hasLine=e,this.options.hasLine){var t=this.getLineCoords();this.appendChild(Lc.createElement(ag.Line,{ref:this.refLink("line"),x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stroke:this.options.color,strokeWidth:this.options.strokeWidth}))}else this.eraseChild(this.line),delete this.line}},{key:"render",value:function(){if(this.options.children=[],this.options.children.push(Lc.createElement(ag.Group,{ref:"cellGroup",clipPath:"url(#visualListElementClipPath"+K(this)+")"},Lc.createElement(ag.Rect,{ref:this.refLink("rect"),x:this.options.coords.x,y:this.options.coords.y,width:this.options.cellWidth,height:this.options.cellHeight,fill:this.options.fill,stroke:this.options.color,strokeWidth:this.options.strokeWidth}),Lc.createElement(ag.Text,{ref:this.refLink("label"),x:this.options.coords.x+this.options.cellWidth/2,y:this.options.coords.y+this.options.cellHeight/2,text:this.options.label,fill:this.options.color,stroke:this.options.color,strokeWidth:this.options.textStrokeWidth,fontSize:this.options.fontSize,textAnchor:"middle",dy:"0.35em"}),Lc.createElement(ag.Defs,{ref:this.refLink("defs")},Lc.createElement(ag.ClipPath,{id:"visualListElementClipPath"+K(this)},Lc.createElement(ag.Rect,l({ref:this.refLink("clipPathRect")},this.getClipPathRect())))))),this.options.hasLine){var e=this.getLineCoords();this.options.children.push(Lc.createElement(ag.Line,{ref:this.refLink("line"),x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:this.options.color,strokeWidth:this.options.strokeWidth}))}return this.options.children}},{key:"getClipPathRect",value:function(){var e=this.options.strokeWidth,t=this.options.cellWidth,n=this.options.cellHeight;return{x:this.options.coords.x-e/2,y:this.options.coords.y-e/2,width:t+e,height:n+e}}},{key:"getColor",value:function(){return this.options.color}},{key:"setColor",value:function(e){this.options.color=e,this.rect.setAttribute("stroke",e),this.label.setColor(e)}},{key:"setFill",value:function(e){this.rect.setAttribute("fill",e)}},{key:"moveTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Lf({func:function(t,i){n.setCoords({x:e.x*t+i.coords.x*(1-t),y:e.y*t+i.coords.y*(1-t)})},context:{coords:this.options.coords},duration:t,startTime:r,dependsOn:i})}},{key:"slideNewValueTransition",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=new Nf;s.dependsOn=r;var l,u,c,h,d=this.options.cellWidth,p=this.options.cellHeight,f=this.options.coords.x,g=this.options.coords.y;"up"===t?(l=f+d/2,u=g+3*p/2,c=f+d/2,h=g-3*p/2):"down"===t?(l=f+d/2,u=g-p/2,c=f+d/2,h=g+3*p/2):"left"===t?(l=f+3*d/2,u=g+p/2,c=f-d/2,h=g+p/2):"right"===t&&(l=f-d/2,u=g+p/2,c=config.x+3*config.VisualListCell_width/2,h=config.y+config.VisualListCell_height/2);var m=Lc.createElement(ag.Text,{x:l,y:u,text:e,fill:this.options.color,stroke:this.options.color,strokeWidth:this.options.textStrokeWidth,fontSize:this.options.fontSize,textAnchor:"middle",dy:"0.35em"}),v=new If({func:function(){i.cellGroup.appendChild(m),m.setPosition(l,u)},reverseFunc:function(){i.cellGroup.eraseChild(m,!o)}});s.push(v,!1);var y=s.getLength(),b=m.moveTransition({x:this.label.getX(),y:this.label.getY()},n,[v],y);s.add(b,!1);var k=this.label.moveTransition({x:c,y:h},n,[v],y);s.add(k,!1);var w=this.label.getX(),E=this.label.getY(),S=this.label.getText();return s.push(new If({func:function(){i.setLabel(e),i.label.setPosition(w,E),i.cellGroup.eraseChild(m,!o)},reverseFunc:function(){i.setLabel(S),i.cellGroup.appendChild(m)},dependsOn:[b,k]}),!1),s.setStartTime(a),s}}]),t}(ag.Group),k$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{orientation:"right",batchSpacing:12,box:{x:0,y:0,width:400,height:400},elementOptions:b$.prototype.getDefaultOptions()}}},{key:"render",value:function(){var e=[];if(this.options.labels)for(var t=this.getBatchCapacity(),n=0;n<this.options.labels.length;n+=1)e.push(Lc.createElement(b$,l({coords:this.getCellCoords(n),label:this.options.labels[n],orientation:this.options.orientation,hasLine:n%t!=t-1&&n!==this.options.labels.length-1},this.options.elementOptions)));return this.options.children=[],this.options.children.push(Lc.createElement(ag.Defs,{ref:"defs"},Lc.createElement(ag.ClipPath,{id:"visualListClipPath"+K(this)},Lc.createElement(ag.Rect,l({ref:this.refLink("clipPathRect")},this.getClipPathRect()))))),this.options.clipPath="url(#visualListClipPath"+K(this)+")",this.options.children.push(Lc.createElement(ag.Group,{ref:"elementsGroup"},e)),this.options.children}},{key:"getCell",value:function(e){for(var t=0;t<this.elements.length;t+=1){var n=this.elements[t];if(n.getLabel()===e)return n}}},{key:"setBox",value:function(e){this.options.box=e;var t=this.getClipPathRect();if(this.clipPathRect.setX(t.x),this.clipPathRect.setY(t.y),this.clipPathRect.setWidth(t.width),this.clipPathRect.setHeight(t.height),this.options.labels)for(var n=this.getBatchCapacity(),i=0;i<this.elements.length;i+=1){var r=this.elements[i];r.setCoords(this.getCellCoords(i)),r.toggleLine(i%n!=n-1&&i!==this.elements.length-1)}}},{key:"setLabels",value:function(e){for(var t=[],n=this.getBatchCapacity(),i=0;i<e.length;i+=1)t.push(Lc.createElement(b$,l({coords:this.getCellCoords(i),label:e[i],orientation:this.options.orientation,hasLine:i%n!=n-1&&i!==e.length-1},this.options.elementOptions)));for(;this.elementsGroup.options.children.length>0;)this.elementsGroup.eraseChildAtIndex(0,!0);this.elementsGroup.options.children=t,this.elementsGroup.redraw()}},{key:"getBatchCapacity",value:function(){var e,t;return"left"===this.options.orientation||"right"===this.options.orientation?(e=this.options.box.width,t=this.options.elementOptions.cellWidth):(e=this.options.box.height,t=this.options.elementOptions.cellHeight),e<t&&console.log("ERROR: Tried to create a visual list with batchLength < cellLength"),Math.floor((e-t)/(t+this.options.elementOptions.lineLength))+1}},{key:"getCellCoords",value:function(e){var t=this.getBatchCapacity(),n=this.options.box.x,i=this.options.box.y,r=this.options.orientation,a=this.options.batchSpacing,o=this.options.elementOptions.cellWidth,s=this.options.elementOptions.cellHeight,l=this.options.elementOptions.lineLength;return"right"===r?{x:n+(o+l)*(e%t),y:i+(s+a)*Math.floor(e/t)}:"left"===r?{x:n-(o+l)*(e%t)-o,y:i+(s+a)*Math.floor(e/t)}:"down"===r?{x:n+(o+a)*Math.floor(e/t),y:i+(s+l)*(e%t)}:"up"===r?{x:n+(o+a)*Math.floor(e/t),y:i-(s+l)*(e%t)-s}:void console.log("ERROR: Wrong visual list orientation.")}},{key:"getClipPathRect",value:function(){var e=this.getBatchCapacity(),t=this.options.box.x,n=this.options.box.y,i=this.options.box.width,r=this.options.box.height,a=this.options.orientation,o=this.options.elementOptions.strokeWidth,s=this.options.elementOptions.cellWidth,l=this.options.elementOptions.cellHeight,u=this.options.elementOptions.lineLength;return"right"===a?{x:t-o/2,y:n-o/2,width:(e-1)*(s+u)+s+o,height:r+o}:"left"===a?{x:t-((e-1)*(s+u)+s)-o,y:n-o,width:(e-1)*(s+u)+s+2*o,height:r+2*o}:"down"===a?{x:t-o,y:n-o,width:i+2*o,height:(e-1)*(l+u)+l+2*o}:"up"===a?{x:t-o,y:n-((e-1)*(l+u)+l)-o,width:i+2*o,height:(e-1)*(l+u)+l+2*o}:void console.log("VisualList.config.VisualList_orientation is not valid: "+a)}},{key:"getNextDummyCoords",value:function(e){var t=this.getBatchCapacity(),n=this.options.box.x,i=this.options.box.y,r=this.options.orientation,a=this.options.batchSpacing,o=this.options.elementOptions.cellWidth,s=this.options.elementOptions.cellHeight,l=this.options.elementOptions.lineLength;return"up"==r?{x:n+(o+a)*e,y:i-s-l}:"down"==r?{x:n+(o+a)*e,y:i+(s+l)*t}:"left"==r?{x:n-o-l,y:i+(s+a)*e}:"right"==r?{x:n+(o+l)*t,y:i+(s+a)*e}:void console.log("ERROR: Wrong visual list orientation.")}},{key:"getPrevDummyCoords",value:function(e){var t=this.getBatchCapacity(),n=this.options.box.x,i=this.options.box.y,r=this.options.orientation,a=this.options.batchSpacing,o=this.options.elementOptions.cellWidth,s=this.options.elementOptions.cellHeight,l=this.options.elementOptions.lineLength;return"up"==r?{x:n+(o+a)*e,y:i+(s+l)*t}:"down"==r?{x:n+(o+a)*e,y:i-s-l}:"left"==r?{x:n+(o+l)*t,y:i+(s+a)*e}:"right"==r?{x:n-o-l,y:i+(s+a)*e}:void console.log("ERROR: Wrong visual list orientation.")}},{key:"insertTransition",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=new Nf;s.dependsOn=r;var u=this.getBatchCapacity(),c=this.elements;e=Math.max(e,0),e=Math.min(e,c.length);var h=[];if(e!==c.length&&e%u!=0&&this.options.elementOptions.lineLength){var d=.25*n,p=c[e-1].hideLineTransition(d);s.push(p,!1),h=[p]}if(e!==c.length){for(var f=.25*n,g=[],m=e+1;m<=c.length;m+=1)m%u==0&&g.push(Lc.createElement(b$,{coords:this.getPrevDummyCoords(m/u),label:c[m-1].getLabel(),orientation:this.options.orientation,hasLine:m!==c.length}));var v=new If({func:function(){for(var t=0,n=e+1;n<=c.length;n+=1)if(n%u==0){var r=g[t];t+=1,i.appendChild(r),r.setCoords(i.getPrevDummyCoords(n/u))}},reverseFunc:function(){for(var e=0;e<g.length;e+=1){var t=g[e];i.eraseChild(t,!o)}},dependsOn:h});s.push(v,!1);var y=new Nf;y.dependsOn=[v];for(var b=e;b<c.length;b+=1)b%u==u-1?y.add(c[b].moveTransition(this.getNextDummyCoords((b+1)/u-1),f),!1):y.add(c[b].moveTransition(this.getCellCoords(b+1),f),!1);for(var k=0,w=e+1;w<=c.length;w+=1)if(w%u==0){var E=g[k];y.add(E.moveTransition(this.getCellCoords(w),f),!1),k+=1}s.push(y,!1);var S=new If({func:function(){for(var t=0,n=e+1;n<=c.length;n+=1)if(n%u==0){var r=c[n-1],a=g[t];r.setCoords(i.getCellCoords(n)),n!==c.length&&u>1&&r.toggleLine(!0),i.eraseChild(a,!o),t+=1}},reverseFunc:function(){
for(var t=0,n=e+1;n<=c.length;n+=1)if(n%u==0){var r=c[n-1],a=g[t];a&&(r.toggleLine(!1),i.appendChild(a)),t+=1}},dependsOn:[y]});s.push(S,!1),h=[S]}var C=.25*n,x=Lc.createElement(b$,l({coords:this.getCellCoords(e),label:t,orientation:this.options.orientation,hasLine:!1},this.options.elementOptions)),T=new If({func:function(){i.elementsGroup.insertChild(x,e),x.setAttribute("opacity",0)},reverseFunc:function(){x.setAttribute("opacity",1),i.elementsGroup.eraseChild(x,!o)},dependsOn:h});s.push(T,!1);var A=x.showTransition(C,[T]);if(s.push(A,!1),this.options.elementOptions.lineLength){var L=.25*n,I=s.getLength();e%u!=u-1&&e!==c.length&&s.add(x.showLineTransition(L,[A],I),!1),e%u!=0&&s.add(c[e-1].showLineTransition(L,[A],I),!1)}return s.setStartTime(a),s}},{key:"deleteTransition",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=new Nf;o.dependsOn=i;var s=this.getBatchCapacity(),u=this.elements;if(!(e<0||e>=u.length)){var c=[];if(this.options.elementOptions.lineLength){var h=.25*t,d=o.getLength();if(e%s!=0){var p=u[e-1].hideLineTransition(h,[],d);o.add(p,!1);var f=new If({func:function(){u[e-1].toggleLine(!1)},reverseFunc:function(){u[e-1].toggleLine(!0)},dependsOn:[p],startTime:d+h+1});o.add(f,!1),c=[f]}if(e%s!=s-1&&e!==u.length-1){var g=u[e].hideLineTransition(h,c,d);o.add(g,!1);var m=new If({func:function(){u[e].toggleLine(!1)},reverseFunc:function(){u[e].toggleLine(!0)},dependsOn:[g],startTime:d+h+1});o.add(m,!1),c=[m]}}var v=.25*t,y=u[e],b=y.hideTransition(v,c);o.push(b);var k=new If({func:function(){n.elementsGroup.eraseChild(y,!a)},reverseFunc:function(){n.elementsGroup.insertChild(y,e)},dependsOn:[b]});if(o.push(k,!1),e!==u.length-1){for(var w=.25*t,E=[],S=e;S+1<u.length;S+=1)if(S%s==s-1){var C=Lc.createElement(b$,l({coords:this.getNextDummyCoords((S+1)/s-1),label:u[S+1].getLabel(),orientation:this.options.orientation,hasLine:!1},this.options.elementOptions));E.push(C)}var x=new If({func:function(){for(var t=0,i=e;i<u.length;i+=1)if(i%s==s-1){var r=E[t];if(!r)return;n.appendChild(r),r.setCoords(n.getNextDummyCoords((i+1)/s-1)),t+=1}},reverseFunc:function(){for(var e=0;e<E.length;e+=1){var t=E[e];if(!t)return;n.eraseChild(t,!a)}},dependsOn:[k]});o.push(x,!1);var T=new If({func:function(){for(var t=e;t+1<u.length;t+=1)if((t+1)%s==s-1){var n=u[t];n.toggleLine(!0)}},reverseFunc:function(){for(var t=e+1;t+1<u.length;t+=1)if((t+1)%s==s-1){var n=u[t];n.toggleLine(!1)}},dependsOn:[k,x]});o.push(T,!1);var A=new Nf;A.dependsOn=[k,x,T];for(var L=e+1;L<u.length;L+=1)L%s==0?A.add(u[L].moveTransition(this.getPrevDummyCoords(L/s),w),!1):A.add(u[L].moveTransition(u[L-1].getCoords(),w),!1);for(var I=0,N=e;N+1<u.length;N+=1)if(N%s==s-1){var O=E[I];A.add(O.moveTransition(u[N].getCoords(),w),!1),I+=1}o.push(A,!1);var R=new If({func:function(){for(var t=0,i=e;i<u.length;i+=1)if(i%s==s-1){var r=u[i],o=E[t];r.setCoords(o.getCoords()),n.eraseChild(o,!a),t+=1}},reverseFunc:function(){for(var e=0;e<E.length;e+=1){var t=E[e];n.appendChild(t)}},dependsOn:[A]});o.push(R,!1),c=[R]}if(e!==u.length-1&&e%s!=0){var M=.25*t;o.push(u[e-1].showLineTransition(M,c),!1)}return o.setStartTime(r),o}}},{key:"changeValueTransition",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return this.elements[e].slideNewValueTransition(t,n,i,r,a,o)}},{key:"elements",get:function(){return this.elementsGroup.children}}]),t}(ag.Group),w$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"pushTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return this.insertTransition(this.elements.length,e,t,n,i,r)}},{key:"popTransition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.deleteTransition(0,e,t,n,i)}},{key:"getPushQueuePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCellCoords(this.elements.length-1);return{x:n.x+e,y:n.y+t}}},{key:"getPopQueuePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCellCoords(0);return{x:n.x+e,y:n.y+t}}}]),t}(k$),E$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{x:0,y:0,length:10}}},{key:"setOptions",value:function(e){w(d(t.prototype),"setOptions",this).call(this,e);var n=.6*this.options.length,i=.3*this.options.length,r=.1*this.options.length,a=.4*this.options.length,o=.05*this.options.length,s=this.options.x+o,l=this.options.y-r/2;this.options.points=[{x:s,y:l},{x:s+n,y:l},{x:s+n,y:l-(a-r)/2},{x:s+n+i,y:l+r/2},{x:s+n,y:l+r+(a-r)/2},{x:s+n,y:l+r},{x:s,y:l+r}]}},{key:"setCoords",value:function(e,t){this.options.x=e,this.options.y=t,this.setOptions(this.options),this.redraw()}}]),t}(ag.Polygon),S$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{box:{x:0,y:0,width:1e3,height:1e3},visualListOptions:k$.prototype.getDefaultOptions()}}},{key:"render",value:function(){this.options.children=[];var e=this.options.visualListOptions.elementOptions;this.options.children.push(Lc.createElement(ag.Text,{ref:"mainLabel",text:this.options.mainLabel,fontSize:e.fontSize,fill:e.color,stroke:e.color,strokeWidth:e.textStrokeWidth,x:this.options.box.x+e.cellWidth/2,y:this.options.box.y+e.cellHeight/2}));var t={x:this.options.box.x+e.cellWidth,y:this.options.box.y+e.cellHeight/2,length:e.lineLength};return this.options.children.push(Lc.createElement(E$,l({ref:"arrow"},t))),this.options.visualListOptions.box={x:this.options.box.x+1.5*e.cellWidth+e.lineLength,y:this.options.box.y,width:this.options.box.width-1.5*e.cellWidth-e.lineLength,height:this.options.box.height},this.options.children.push(Lc.createElement(k$,l({ref:"visualList",labels:this.options.labels},this.options.visualListOptions))),this.options.children}},{key:"getDesiredHeight",value:function(){var e=this.visualList.elements.last();return void 0===e?0:e.options.coords.y+e.options.cellHeight-this.options.box.y}},{key:"getCell",value:function(e){return this.visualList.getCell(e)}},{key:"setBox",value:function(e){var t=this.options.visualListOptions.elementOptions;this.options.box=e,this.mainLabel.setPosition(this.options.box.x+t.cellWidth/2,this.options.box.y+t.cellHeight/2),this.arrow.setCoords(this.options.box.x+t.cellWidth,this.options.box.y+t.cellHeight/2),this.visualList.setBox({x:this.options.box.x+1.5*t.cellWidth+t.lineLength,y:this.options.box.y,width:this.options.box.width-1.5*t.cellWidth-t.lineLength,height:this.options.box.height})}}]),t}(ag.Group),C$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{box:{x:0,y:0,width:1e3,height:1e3},listSpacing:20,directed:!1,indexType:"0",visibleLists:"all",listOptions:S$.prototype.getDefaultOptions()}}},{key:"getNodeLabel",value:function(e){return"0"===this.options.indexType?e:"1"===this.options.indexType?e+1:this.nodes[e].label||"N/A"}},{key:"getAdjacentLabels",value:function(e){for(var t=[],n=0;n<this.options.edges.length;n+=1){var i=this.options.edges[n];i.source===e?t.push(this.getNodeLabel(i.target)):i.target!==e||!0!=!i.directed||this.options.directed||t.push(this.getNodeLabel(i.source))}return t}},{key:"render",value:function(){this.lists=[];for(var e=0;e<this.options.nodes.length;e+=1){var t=j({},this.options.listOptions);j(t.box,this.options.box),this.lists.push(Lc.createElement(S$,l({mainLabel:this.getNodeLabel(e),labels:this.getAdjacentLabels(e)},t)))}this.options.children=[];for(var n=0;n<this.lists.length;n+=1){var i=this.lists[n];this.options.children.push(i)}return this.options.children}},{key:"setVisibleLists",value:function(e){for(var t=this.options.children.length-1;t>=0;t-=1){var n=this.options.children[t];this.eraseChild(n,!1)}if(this.options.visibleLists=e,"all"===this.options.visibleLists)for(var i=0;i<this.lists.length;i+=1){var r=this.lists[i];this.insertChild(r,i)}else if(Array.isArray(this.options.visibleLists))for(var a=0;a<this.options.visibleLists.length;a+=1){var o=this.lists[this.options.visibleLists[a]];this.insertChild(o,a)}else if(Number.isInteger(this.options.visibleLists)){var s=this.lists[this.options.visibleLists];this.insertChild(s,0)}this.recomputeListHeights()}},{key:"getVisibleLists",value:function(){return this.options.visibleLists}},{key:"recomputeListHeights",value:function(){for(var e=0,t=0;t<this.options.children.length;t+=1){var n=this.options.children[t];n.setBox({x:this.options.box.x,y:this.options.box.y+e,width:this.options.box.width,height:this.options.box.height});var i=n.getDesiredHeight();n.options.box.height=i,e+=this.options.listSpacing+i}}},{key:"getCell",value:function(e,t){return this.lists[e].getCell(t)}},{key:"getPopupPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.getCell(e,t).getCoords();return{x:r.x+n,y:r.y+i}}},{key:"redraw",value:function(){w(d(t.prototype),"redraw",this).call(this),this.setVisibleLists(this.options.visibleLists)}}]),t}(ag.Group),x$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{width:1e3,height:1e3,marginLeft:20,marginTop:40,directed:!1}}},{key:"getNodeAttributes",value:function(){var e=w(d(t.prototype),"getNodeAttributes",this).call(this);return e.setStyle("height",this.options.height+"px"),e.setStyle("width",this.options.width+"px"),e}},{key:"render",value:function(){return[Lc.createElement(C$,l({ref:"adjacencyLists"},this.options,{box:{x:this.options.marginLeft,y:this.options.marginTop,width:this.options.width-this.options.marginLeft,height:this.options.height-this.options.marginTop}}))]}}]),t}(ag.SVGRoot),T$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return j({},w(d(t.prototype),"getDefaultOptions",this).call(this),{indexFontSize:14,elementOptions:{lineLength:0}})}},{key:"render",value:function(){var e=w(d(t.prototype),"render",this).call(this);this.indices=[];for(var n=this.options.indexFontSize,i=this.options.elementOptions.cellHeight,r=this.options.elementOptions.cellWidth,a=this.options.elementOptions.color,o=this.options.elementOptions.textStrokeWidth,s=0;s<this.options.labels.length;s+=1){var l=this.getCellCoords(s),u=l.x+r/2,c=l.y+i+n;this.indices.push(Lc.createElement(ag.Text,{text:s,x:u,y:c,fill:a,stroke:a,strokeWidth:o,fontSize:n,textAnchor:"middle",dy:"0.35em"}))}return e.concat(this.indices)}},{key:"decrementValueTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=parseInt(this.elements[e].getLabel())-1;return this.changeValueTransition(e,a,"up",t,n,r,i)}},{key:"getPopupPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.elements[e].getCoords();return{x:i.x+t,y:i.y+n}}},{key:"hideTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=new Nf;return a.dependsOn=n,a.add(this.elements[e].changeOpacityTransition(0,t,[],0,r),!1),a.add(this.indices[e].changeOpacityTransition(0,t,[],0,r),!1),a.setStartTime(i),a}},{key:"moveElementTransition",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Lf({func:function(n,r){var a=i.options.indexFontSize,o=i.options.elementOptions.cellHeight,s=i.options.elementOptions.cellWidth,l={x:r.coords.x*(1-n)+t.x*n,y:r.coords.y*(1-n)+t.y*n};i.elements[e].setCoords(l),i.indices[e].setAttribute("x",l.x+s/2),i.indices[e].setAttribute("y",l.y+o+a)},context:{coords:this.elements[e].getCoords()},dependsOn:r,startTime:a,duration:n})}}]),t}(k$),A$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getDefaultOptions",value:function(){return{orientation:"up",batchSpacing:12,box:{x:0,y:0,width:400,height:400},elementOptions:Object.assign(b$.prototype.getDefaultOptions(),{lineLength:0,cellHeight:25,cellWidth:40,fontSize:15})}}},{key:"getPopupPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCellCoords(this.elements.length-1);return{x:n.x+e,y:n.y+t}}},{key:"pushTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return this.insertTransition(this.elements.length,e,t,n,i,r)}},{key:"popTransition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.deleteTransition(this.elements.length-1,e,t,n,i)}}]),t}(k$),L$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBlogEntry",value:function(){return IS.get(this.blogEntryId)}},{key:"render",value:function(){var e=Lc.createElement(FC,{ref:"articleRenderer",article:this.getBlogEntry().getArticle(),liveLanguage:!0});this.getBlogEntry().getDiscussion();return[e,void 0]}}]),t}(jd),I$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),t}(fp),N$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"registerStreams",value:function(){cp.registerStream("admin-email-manager")}}]),t}(mp),O$=new N$("EmailStatus",I$),R$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"setSourceObject",value:function(e){this.node.srcObject=e}},{key:"resetSourceObject",value:function(){this.node.srcObject=null}},{key:"getSourceObject",value:function(){return this.node.srcObject}}]),t}(Lc.Primitive("video"));R$.domAttributesMap=Re(Lc.Element.domAttributesMap,[["autoplay"],["srcObject"]]);var M$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"getBody",value:function(){if(this.rejected)return[Lc.createElement(sE,{userId:this.options.userId})," rejected your call!"];if(this.options.answered){var e=this.options.userId,t=USER.id;if(this.options.proactive){var n=[t,e];e=n[0],t=n[1]}return[Lc.createElement(P$,{proactive:this.options.proactive,callerId:e,calleeId:t,style:{margin:"20px auto"},ref:"callWidget"})]}return[Lc.createElement(sE,{userId:this.options.userId})," is calling you!"]}},{key:"disableHide",value:function(){var e=this;this.oldHide=this.hide,this.hide=function(){},window.userMediaStreamer.addListener("connectionClosed",function(){e.oldHide()})}},{key:"getFooter",value:function(){var e=this;return this.options.answered?[]:[Lc.createElement(jg,null,Lc.createElement(Md,{label:"Reject",level:Pc.DANGER,onClick:function(){e.dispatch("reject"),e.hide()}}),Lc.createElement(Md,{label:"Answer",level:Pc.SUCCESS,onClick:function(){e.options.answered=!0,e.redraw(),e.show(),e.dispatch("accept"),e.disableHide()}}))]}},{key:"onMount",value:function(){var e=this;this.options.proactive?(this.disableHide(),this.callWidget.addListener("rejected",function(){e.rejected=!0,e.redraw(),e.show(),setTimeout(function(){e.oldHide()},1400)})):Ok.addListener("user-"+USER.id+"-events",function(t){!t.connectionStatus||t.senderId!==USER.id||e.options.answered||e.rejected||e.hide()})}}]),t}(Zg),P$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"extraNodeAttributes",value:function(e){e.setStyle("position","relative"),e.setStyle("height",this.options.height+"px"),e.setStyle("width",this.options.width+"px")}},{key:"setOptions",value:function(e){if(w(d(t.prototype),"setOptions",this).call(this,e),this.options.calleeId=this.options.calleeId||this.options.calledId,this.options.callerId=parseInt(this.options.callerId),this.options.calleeId=parseInt(this.options.calleeId),isNaN(this.options.callerId)||isNaN(this.options.calleeId))throw Error("Improperly instantiated CallWidget, needs 'callerId' and 'calleeId' set in options!");this.options.hasOwnProperty("enableAudio")||(this.options.enableAudio=!0),this.options.hasOwnProperty("proactive")||(this.options.proactive=!0),this.options.height=this.options.height||200,this.options.width=this.options.width||200,this.options.localToRemoteRatio=this.options.localToRemoteRatio||.29}},{key:"render",value:function(){return[Lc.createElement(R$,{autoplay:!0,ref:"remoteVideo",height:this.options.height+"px",width:this.options.width+"px",style:{position:"absolute",backgroundColor:"black"}}),Lc.createElement(R$,{height:this.options.height*this.options.localToRemoteRatio+"px",width:this.options.width*this.options.localToRemoteRatio+"px",autoplay:!0,ref:"localVideo",style:{bottom:"0",right:"0",position:"absolute",backgroundColor:"#333"}}),Lc.createElement("div",{ref:"hangUp",className:"fa fa-phone fa-lg fa-3x",style:{bottom:"30px",left:this.options.width/2-40+"px",position:"absolute",borderRadius:"100px",backgroundColor:"red",color:"white",padding:"10px",cursor:"pointer",transform:"rotate(135deg)","-ms-transform":"rotate(135deg)","-webkit-transform":"rotate(135deg)"}})]}},{key:"getInput",value:function(){return{audio:this.options.enableAudio,video:!0}}},{key:"onMount",value:function(){var e=this;if(!USER.isSuperUser||this.options.callerId!==USER.id&&this.options.calleeId!==USER.id)throw Error("What are you trying to do?!");window.userMediaStreamer.setInput(this.getInput()),this.attachListener(window.userMediaStreamer,"localStreamReady",function(){e.localVideo.setSourceObject(window.userMediaStreamer.getLocalStream()),e.hangUp.addClickListener(function(){window.userMediaStreamer.stopStream()})}),this.attachListener(window.userMediaStreamer,"remoteStreamReady",function(){e.remoteVideo.setSourceObject(window.userMediaStreamer.getRemoteStream())}),this.options.proactive&&(window.userMediaStreamer.startStream(this.options.calleeId),this.attachListener(window.userMediaStreamer,"rejected",function(t){e.dispatch("rejected",t)}))}}]),t}(Lc.Element);window.userMediaStreamer?Jl():Hu.Global.addListener("userListeningForCalls",function(){Jl()}),Hu.Global.addListener("startedCall",function(e){M$.show({userId:e,answered:!0,proactive:!0})});var D$=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"audio/webm";return r(this,t),e=b(this,d(t).call(this)),e.mimeType=n,e.recordings=[],e.mediaSource=new MediaSource,e.mediaSource.addEventListener("sourceopen",function(t){e.sourceBuffer=e.mediaSource.addSourceBuffer(e.mimeType),e.onSourceOpen(t),e.dispatch("sourceopen",t)}),e}return h(t,e),o(t,[{key:"startRecording",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.mediaRecorder){if("recording"===this.mediaRecorder.state)throw Error("The media recorder already running!");delete this.mediaRecorder,delete this.stream}if(!MediaRecorder.isTypeSupported(this.mimeType))throw Error(this.mimeType+" is not supported");navigator.mediaDevices.getUserMedia({audio:t.audio||!1,video:t.video||!1}).then(function(n){e.stream=n,e.mediaRecorder=new MediaRecorder(e.stream,Object.assign({mimeType:e.mimeType},t)),e.mediaRecorder.ondataavailable=function(t){t.data&&t.data.size>0&&e.recordings.push(t.data)},e.mediaRecorder.start(10),e.dispatch("startRecording",n)}).catch(function(e){throw Error("navigator.getUserMedia error: "+e.toString())})}},{key:"stopRecording",value:function(){this.mediaRecorder.stop(),delete this.mediaRecorder}},{key:"getRecording",value:function(){return new Blob(this.recordings,{type:this.mimeType})}},{key:"clearRecording",value:function(){this.recordings=[]}},{key:"onSourceOpen",value:function(e){}},{key:"getSourceBuffer",value:function(){return this.sourceBuffer}}]),t}(Gu),B$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"render",value:function(){var e=this;return[Lc.createElement(wg,{ref:"imageInput",fileTypes:".jpg,.jpeg,.png"}),Lc.createElement(yg,{ref:"imageQualityInput",value:"0.7",min:"0",max:"1",step:"0.1",placeholder:"quality"}),Lc.createElement(Md,{label:"Upload",onClick:function(){return e.uploadImage()}}),Lc.createElement("div",{ref:"finalURL"}),Lc.createElement("div",{ref:"preview"}),Lc.createElement("img",{ref:"compressedImage"})]}},{key:"onMount",value:function(){var e=this;this.imageInput.addChangeListener(function(){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return console.error("The File APIs are not fully supported in this browser."),!1;e.finalURL.eraseAllChildren(),e.processImage()})}},{key:"uploadImage",value:function(){var e=this;if(this.imageURI){for(var t=this.imageURI.split(","),n=S(t,2),i=n[0],r=n[1],a=i.split(":")[1].split(";")[0],o=new Uint8Array(r.length),s=0;s<r.length;s+=1)o[s]=r.charCodeAt(s);var l=new Blob([o],{type:a});if(l.size>1e6)return void console.log("Image too large! Aborting upload");var u=new FormData;u.append("image",l),zu.post("/storage/upload_image/",{dataType:"json",data:u,processData:!1,contentType:!1}).then(function(t){return e.finalURL.appendChild(Lc.createElement("a",{href:t.imageURL},"Successfully uploaded. Click to view."))})}}},{key:"processImage",value:function(){for(var e=this;this.preview.node.firstChild;)this.preview.node.removeChild(this.preview.node.firstChild);this.imageURI=null;var t=this.imageInput.getFile();if(t){if("image/png"!==t.type&&"image/jpeg"!==t.type)return alert("File "+t.name+" is not an valid image but a "+t.type),!1;var n=new FileReader;n.readAsArrayBuffer(t),n.onload=function(t){var n=new Blob([t.target.result]);window.URL=window.URL||window.webkitURL;var i=window.URL.createObjectURL(n),r=new Image;r.src=i,r.onload=function(){var t=e.resizeImage(r),n=document.createElement("input");n.type="hidden",n.name="image",n.value=t,console.log("resized size",6*t.toString().length/8/1024,"kb"),e.compressedImage.node.src=t,e.imageURI=t}},this.imageInput.value=""}}},{key:"resizeImage",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),i=e.width,r=e.height,a=e;if(i>r){if(i>400){if(i>1600){i/=2,r/=2;var o=document.createElement("canvas"),s=o.getContext("2d");o.width=i,o.height=r,s.drawImage(a,0,0,i,r),a=o}r=Math.round(400*r/i),i=400}}else if(r>400){if(r>1600){i/=2,r/=2;var l=document.createElement("canvas"),u=l.getContext("2d");l.width=i,l.height=r,u.drawImage(a,0,0,i,r),a=l}i=Math.round(400*i/r),r=400}t.width=i,t.height=r,n.drawImage(a,0,0,i,r),this.preview.node.appendChild(t);var c=this.imageQualityInput.getValue()||.7;return t.toDataURL("image/jpeg",c)}}]),t}(Lc.Element),_$=function(e){function t(){return r(this,t),b(this,d(t).apply(this,arguments))}return h(t,e),o(t,[{key:"openTaskWorkspace",value:function(e){var t=e.getWorkspace(this.options.userId);t.ide||(t.ide=Lc.createElement(pO,{workspace:t,plugins:VN.GLOBAL}),this.taskWorkspaceSwitcher.appendChild(t.ide)),this.taskWorkspaceSwitcher.setActive(t.ide)}},{key:"render",value:function(){var e=this,t=XS.get(this.options.contestId),n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t.getContestTasks()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)!function(){var t=o.value,i=t.getEvalTask();n.push(Lc.createElement(Md,{label:i.longName,level:Pc.INFO,onClick:function(){return e.openTaskWorkspace(i)}}))}()}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return[Lc.createElement("div",{ref:"taskButtons"},n),Lc.createElement(Of,{ref:"taskWorkspaceSwitcher",style:{height:"700px"}})]}},{key:"onMount",value:function(){Ok.addListener("globalWorkspaceEdit",function(e){console.log("A workspace was edited: ",e)});var e=!0,t=!1,n=void 0;try{for(var i,r=tC.all()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;cp.registerStream(a.streamName())}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}]),t}(Lc.Element);e.ABOUT_ARTICLES=Hk,e.ALGORITHMS_ARCHIVE_ID=1,e.ALL_COUNTRIES_PLACEHOLDER=Qb,e.AbstractUsernameAutocomplete=dB,e.Accordion=ib,e.AccordionStyle=Qy,e.AccountSettingsPanel=AV,e.AceKeyboardHandler=Uk,e.AceTheme=Fk,e.ActionModal=Zg,e.ActionModalButton=$g,e.ActionStatus=_c,e.AddMethod=Yl,e.AdjacencyLists=C$,e.AdjacencyListsSVG=x$,e.AdminContestQuestionPanel=FO,e.AdminContestTasksTable=OI,e.AdminDocumentationPanel=Iq,e.AdminPanel=KG,e.Ajax=zu,e.AjaxButton=Dd,e.AjaxFetchMixin=bp,e.AjaxHandler=Fu,e.AnalysisModal=vH,e.AnalyticsPanel=Oq,e.AnnouncementBroadcastModal=UW,e.AnonymousWorkspaceManager=ZV,e.AppClass=WZ,e.ApproximationBadge=xO,e.ArchivePanel=gR,e.Article=ES,e.ArticleEditStore=TS,e.ArticleEditor=CT,e.ArticleManager=kT,e.ArticleRenderer=FC,e.ArticleStore=xS,e.ArticleSwitcher=zC,e.ArticleTabArea=ix,e.ArticleTranslationManager=wT,e.AskQuestionButton=WO,e.AskTaskQuestionButton=HO,e.AsyncCommentThread=NT,e.AutocompleteWindow=pB,e.AxisTick=OU,e.Badge=xd,e.BadgeStyle=Cd,e.BasePointPlot=NU,e.BaseStore=gp,e.BaseTabAreaStyle=_b,e.BasicAxis=RU,e.BasicChart=MU,e.BasicLevelSizeStyleSheet=vh,e.BasicLevelStyleSheet=yh,e.BasicOrientedElement=Pf,e.BasicTabTitle=Hb,e.BlockCodeModifier=hc,e.BlogEntry=L$,e.BlogEntryEditModal=OT,e.BlogEntryPreview=MT,e.BlogEntryStore=IS,e.BlogEntryView=PT,e.BlogRoute=FT,e.Button=Md,e.ButtonGroup=jg,e.ButtonGroupStyle=Od,e.ButtonStyle=Nd,e.COLORS_BY_NAME=Kc,e.CSAAboutPage=mx,e.CSAApp=zZ,e.CSAAtomLogo=dx,e.CSAForceLayout=xk,e.CSAForceTransition=QZ,e.CSAGeometryWidget=EW,e.CSAGeometryWidgetSVG=bW,e.CSALoadingLogo=gx,e.CSALogo=fx,e.CSALogoSwarm=px,e.CSAPlayer=y$,e.CSAPlayerContainer=g$,e.CSAStyle=YP,e.CSAUserRatingChart=_V,e.CSAUserRatingSVG=zV,e.CallModifier=Lu,e.CallThrottler=Nu,e.CallWidget=P$,e.CardPanel=ub,e.CardPanelHeaderStyle=lb,e.CardPanelStyle=sb,e.ChartSVG=DU,e.ChatMarkupRenderer=wk,e.ChatMessageScrollSection=hS,e.ChatPlugin=OZ,e.ChatWidget=dS,e.CheckboxInput=Eg,e.CheckerManager=jB,e.ClassNameSet=Tc,e.CleanupJobs=Yu,e.CodeforcesUserRatingSVG=DV,e.CollapsiblePanel=Ob,e.CollapsibleTable=xb,e.CollapsibleTableInterface=ft,e.CollapsibleTableRow=Sb,e.Color=Qc,e.ColorGenerator=Zc,e.CommandInstance=YJ,e.CommandInstanceStore=XJ,e.CommandManager=oq,e.CommandRun=qJ,e.CommandRunStore=KJ,e.CommentVotingWidget=ZE,e.CommentVotingWidgetWithThumbs=$E,e.CommentWidget=IT,e.CompilationCardPanel=_q,e.CompilationStatusPanel=UT,e.Contest=qS,e.ContestAnalysis=mH,e.ContestAnnouncement=GS,e.ContestAnnouncementList=FW,e.ContestAnnouncementStore=jS,e.ContestEditPanel=oH,e.ContestEventStore=QS,e.ContestInvitePage=_W,e.ContestList=kN,e.ContestManager=BW,e.ContestPanel=CH,e.ContestQuestion=YS,e.ContestQuestionList=OO,e.ContestQuestionStore=JS,e.ContestRegisterer=ZL,e.ContestRegistererStore=eI,e.ContestScoring=Vk,e.ContestScoringStore=Gk,e.ContestStore=XS,e.ContestTask=FS,e.ContestTaskButton=eR,e.ContestTaskList=EI,e.ContestTaskListWithFilters=LI,e.ContestTaskModal=$O,e.ContestTaskPanel=ZO,e.ContestTaskQuestionList=RO,e.ContestTaskStore=zS,e.ContestTaskSummaryPanel=YO,e.ContestUser=WS,e.ContestUserStore=VS,e.ContestUsersFilter=dI,e.ContestUsersTable=rI,e.Country=Kb,e.CountryStore=tk,e.CountryUsersFilter=dR,e.CreateContestButton=dN,e.CreateContestModal=hN,e.CreateEvalTaskModal=JD,e.CreateForumThreadButton=OD,e.CreateNodeAttributesMap=Re,e.CustomRun=oN,e.CustomRunStore=sN,e.CustomRunWidget=Uq,e.DAY_IN_MILLISECONDS=864e5,e.Date=vf,e.DefaultState=hp,e.DefaultTabAreaStyle=Fb,e.Definition=jZ,e.DelayedBlogEntryList=BT,e.DelayedBlogEntryView=_T,e.DelayedCollapsiblePanel=Rb,e.DelayedCollapsibleTableRow=Cb,e.DelayedContestTaskPanel=tR,e.DelayedDiffWidget=IW,e.DelayedElement=db,e.DelayedForumPanel=WD,e.DelayedForumThreadPanel=HD,e.DelayedQuestionnaireAnswersPanel=rX,e.DelayedQuestionnairePanel=MP,e.DeleteAllFilesModal=jG,e.DeleteFileModal=GG,e.Deque=ac,e.Device=rc,e.DiffWidget=AW,e.DiffWidgetApp=NW,e.Difficulty=Wk,e.DifficultyObject=zk,e.Direction=Mc,e.Dispatchable=Gu,e.Dispatcher=Hu,e.DispatchersSymbol=Vu,e.DividerBar=eb,e.DocumentationPanel=Lq,e.DoubleClickable=bf,e.Draggable=Gd,e.DraggablePointWithCoords=_U,e.DropdownListStyle=YB,e.Duration=Sp,e.DynamicStyleElement=Wc,e.EPS=1e-6,e.EditableMessage=lS,e.EmailCampaign=hG,e.EmailCampaignStore=pG,e.EmailCampaignWidget=CG,e.EmailConfirmed=LV,e.EmailGateway=eG;e.EmailGatewayStore=nG,e.EmailGatewayWidget=cG,e.EmailInput=bg,e.EmailManager=BG,e.EmailStatus=I$,e.EmailStatusStore=O$,e.EmailTemplate=xG,e.EmailTemplateStore=AG,e.EmailUnsubscribe=IV,e.EnforcedTemplateBadge=SO,e.EnforcedTemplateStyle=PN,e.EnterToSendPlugin=MZ,e.EntriesManager=Pb,e.ErrorHandlers=aN,e.ErrorMessage=nN,e.ErrorMessageStore=rN,e.ErrorModal=em,e.EvalJob=jT,e.EvalJobResultsTable=PL,e.EvalJobStore=TL,e.EvalJobUIHandler=_L,e.EvalTask=kC,e.EvalTaskManager=XD,e.EvalTaskStatisticsWidget=kO,e.EvalTaskStore=EC,e.EvalTasksSolutionsWidget=gH,e.EvaluationMachinesWatcherPanel=fJ,e.EventDispatcherSymbol=pp,e.ExclusiveClassSet=qc,e.ExecutionStatusPanel=zT,e.FACollapseIcon=wf,e.FAIcon=kf,e.FASortIcon=Ef,e.FRONT_PAGE_CHAT_ID=2,e.FacebookManager=Jw,e.FacebookShare=YZ,e.FileCodeEditor=ZI,e.FileInput=wg,e.FileSaver=Xu,e.FixedURLAjaxHandler=Uu,e.FlatTabArea=Jb,e.FlatTabAreaHorizontalOverflowStyle=Wb,e.FlatTabAreaStyle=zb,e.FlatTabTitle=jb,e.FlatTabTitleArea=Yb,e.FloatingWindow=Xg,e.Form=Lb,e.FormField=Nb,e.FormGroup=Ib,e.Formatter=Ek,e.ForumPanel=zD,e.ForumRoute=VD,e.ForumStore=CC,e.ForumThreadBubble=FD,e.ForumThreadHeader=BD,e.ForumThreadList=UD,e.ForumThreadPanel=DD,e.ForumThreadPreview=_D,e.ForumThreadStore=TC,e.FrontPagePanel=BP,e.FullScreenable=Af,e.GeneralControlPanelData=cJ,e.GeneralControlPanelDataStore=dJ,e.GeneralControlPanelWidget=gJ,e.GenericErrorView=rZ,e.GenericObjectStore=mp,e.GeometryCircle=WU,e.GeometryLine=FU,e.GeometryPolygon=zU,e.GeometrySegment=UU,e.GlobalRatings=wR,e.GlobalState=cp,e.GlobalStyle=mh,e.GoogleManager=Yw,e.Graph=Tk,e.GraphEdge=Ck,e.GraphEditor=QB,e.GraphNode=Sk,e.GraphSVG=Ak,e.GroupChatMessage=uS,e.GroupChatStore=bE,e.GroupChatWidget=pS,e.HeaderModifier=dc,e.HorizontalOverflow=Bb,e.HorizontalOverflowStyle=Db,e.HorizontalSlideBar=Jd,e.INTERVIEWS_ARCHIVE_ID=3,e.Icarus=xJ,e.IconMessagesList=Dx,e.IconableInterface=bd,e.Image=Kd,e.ImageUpload=B$,e.InfiniteScrollable=tp,e.InlineCodeModifier=bc,e.InlineLatexModifier=wc,e.Input=gg,e.InputFileEditor=QI,e.InputStyle=pg,e.InteractiveBadge=EO,e.InteractiveTaskLog=LL,e.Interview=WH,e.InterviewApp=iV,e.InterviewPanel=pV,e.InterviewPanelWrapper=fV,e.InterviewStore=VH,e.InterviewTask=GH,e.InterviewTaskStore=YH,e.KeyframeElement=Hc,e.Label=Ed,e.LabelStyle=wd,e.Language=fk,e.Latex=RW,e.LeftSideNavIcon=Hf,e.Lesson=AC,e.LessonList=KP,e.LessonPanel=ZP,e.LessonSection=IC,e.LessonSectionStore=NC,e.LessonStore=LC,e.Level=Pc,e.LinePlot=AU,e.Link=Xd,e.LinkModifier=Ec,e.LocalStorageMap=tc,e.Login=rE,e.LoginModal=aE,e.LoginWidget=eE,e.Logout=oE,e.MAX_AUTO_UNIX_TIME=xp,e.MachineInstance=QG,e.MachineInstanceStore=tJ,e.MachineInstanceWidget=sJ,
e.MachineLoggingWidget=uJ,e.MarkupClassMap=op,e.MarkupEditor=EE,e.MarkupEditorModal=XE,e.MarkupModifier=Sc,e.MarkupParser=Cc,e.MarkupRenderer=sp,e.MergeWidget=LW,e.MessageInstance=hE,e.MessageInstanceStore=fE,e.MessageThread=dE,e.MessageThreadStore=gE,e.MessagesList=Px,e.MessagesPanel=Ux,e.MetaContestUsersTable=hI,e.MinRanking=bR,e.MiniMessage=Rx,e.MinimalistTabAreaStyle=Ub,e.Modal=Qg,e.Modifier=If,e.MultiMap=Ou,e.MultimediaCall=LZ,e.MultimediaCallStore=IZ,e.NOOP_FUNCTION=Au,e.NavAnchoredNotifications=zf,e.NavCarouselStyle=eg,e.NavElement=_f,e.NavGlobalChat=bS,e.NavIcon=Wf,e.NavLinkElement=Ff,e.NavManager=tg,e.NavSection=Uf,e.NavStyle=jf,e.NewBlogEntryModal=RT,e.NodeAttributes=Ac,e.NotificationsList=Sx,e.NumberInput=yg,e.ObjectStore=yp,e.Orientation=Rc,e.OutputOnlyBadge=CO,e.PageNotFoundRoute=aZ,e.Panel=jd,e.ParagraphModifier=mc,e.PasswordInput=kg,e.PasswordReset=NV,e.PasswordResetFromKey=jq,e.PlayerCardPanel=v$,e.PlayerPopup=VZ,e.Plugin=Qu,e.PluginTypes=VN,e.Pluginable=Zu,e.PointPlot=IU,e.PointPlotElement=LU,e.PreviewMarkupButton=sS,e.PrivateArchive=HT,e.PrivateArchiveList=IH,e.PrivateArchivePanel=UH,e.PrivateArchivePanelWrapper=zH,e.PrivateArchiveStore=VT,e.PrivateArchiveUsersTable=uI,e.PrivateChatMessage=cS,e.PrivateChatStore=wE,e.PrivateChatWidget=fS,e.ProblemSetting=GP,e.ProgrammingLanguage=Bk,e.ProgrammingLanguageObject=Dk,e.ProgressBar=Ld,e.PublicStorageFileStore=zG;e.PublicUserStore=sk,e.QuestionPage=NP,e.QuestionnaireAnswersPanel=iX,e.QuestionnaireButton=DP,e.QuestionnaireInstanceStore=AP,e.QuestionnaireModal=PP,e.QuestionnairePanel=RP,e.QuestionnaireQuestion=CR,e.QuestionnaireStore=SR,e.QuestionnaireStyle=IP,e.RadioButtonGroup=Yg,e.RadioButtonGroupStyle=Rd,e.RadioInput=Sg,e.RangePanelInterface=mt,e.RangeTableInterface=vt,e.RawHTML=Qd,e.RecursiveArticleRenderer=UC,e.RegisterWidget=nE,e.RenameFileModal=JG,e.RightSideNavIcon=Vf,e.Route=im,e.Router=nm,e.RowList=Xb,e.RunOnce=ju,e.SVG=ag,e.SVGNodeAttributes=rg,e.Scoreboard=pI,e.ScoreboardEntriesManager=oI,e.ScoreboardTable=lI,e.ScriptDelayedElement=pb,e.ScrollableMixin=ep,e.SectionDivider=tb,e.SectionDividerStyle=Zy,e.Select=Gg,e.ServerTime=yf,e.SessionStorageMap=ec,e.ShareButtons=XZ,e.SidePanel=$f,e.SimpleStyledElement=yd,e.SingleActiveElementDispatcher=Ju,e.SingletonStore=vp,e.Size=Dc,e.SlideBar=Yd,e.SocialApp=jk,e.SocialAppStore=Jk,e.SortableTable=Tb,e.SortableTableInterface=gt,e.SortableTableStyle=gb,e.SourceCardPanel=Mq,e.State=up,e.StateButton=Pd,e.StateDependentElement=iT,e.StemDate=Ap,e.StorageLimits=VG,e.StorageManager=XG,e.StorageMeta=_G,e.StorageServerStore=HG,e.StoreObject=fp,e.StoreSymbol=dp,e.StringStream=lc,e.StrongModifier=vc,e.StyleElement=Uc,e.StyleInstance=Fc,e.StyleSheet=Jc,e.SubmissionSummary=zL,e.SubmissionSummaryContestFilter=GL,e.SubmissionSummaryGlobalFilter=VL,e.SubmissionSummaryInterviewFilter=jL,e.SubmissionSummaryMarkup=HL,e.SubmissionSummaryPanel=WL,e.SubmissionSummaryPrivateArchiveFilter=YL,e.SubmissionSummaryStyle=UL,e.SubmissionWidget=Gq,e.SubmitInput=mg,e.Switcher=Of,e.TabArea=Gb,e.TabTitleArea=Vb,e.Table=vb,e.TableRow=mb,e.TableRowInCollapsibleTable=kb,e.TableStyle=fb,e.Tag=ck,e.TagStore=hk,e.TemporaryMessageArea=$d,e.TermDefinition=Mk,e.TermDefinitionObject=Rk,e.TerminalRoute=qy,e.TestStringStream=Oe,e.TextArea=Vg,e.TextInput=vg,e.Theme=$c,e.ThemeSettingsPanel=TV,e.TimeChart=PU,e.TimePassedSpan=np,e.TimeUnit=Ep,e.TitledDividerStyle=$y,e.TitledSectionDivider=ob,e.Transition=Lf,e.TransitionList=Nf,e.TranslationEntryStore=kk,e.TranslationKeyStore=yk,e.TwitterShare=JZ,e.UI=Lc,e.UIElement=Nc,e.URLRouter=ic,e.UnorderedCallDropper=Iu,e.UploadFilesModal=YG,e.UserCodeEditor=XI,e.UserEditor=JI,e.UserHandle=sE,e.UserInputEditor=qI,e.UserInputField=fB,e.UserMediaRecorder=D$,e.UserMediaStream=sZ,e.UserMentionPlugin=RZ,e.UserNotificationStore=uk,e.UserProfilePanel=jV,e.UserStats=FJ,e.UserStore=rk,e.UserWorkspaceSettingsPanel=YI,e.VKShare=qZ,e.VerticalSlideBar=qd,e.Video=R$,e.ViewportMeta=Zd,e.VirtualParticipationButton=fN,e.VirtualStoreMixin=wp,e.VirtualStoreObjectMixin=kp,e.VisualArray=T$,e.VisualList=k$,e.VisualListElement=b$,e.VisualQueue=w$,e.VisualStack=A$,e.VolatileFloatingWindow=Kg,e.VotableChatMessage=gS,e.VotableGroupChatWidget=mS,e.VoteStatus=Bc,e.VotingWidget=QE,e.WSConnectionData=IJ,e.WSConnectionDataStore=OJ,e.WSConnectionDataUI=MJ,e.WSMediaChannel=NZ,e.WSStreamData=PJ,e.WSStreamDataStore=BJ,e.WSStreamDataUI=_J,e.WSUserData=TJ,e.WSUserDataStore=LJ,e.WSUserDataUI=RJ,e.WebsiteLoggingWidget=lJ,e.WebsocketCommandProcessor=KZ,e.WebsocketStreamHandler=Nk,e.WebsocketSubscriber=Ok,e.WorkspaceCompilerParserPlugin=AN,e.WorkspaceContestSubmitPlugin=xN,e.WorkspaceCustomNamedFilesPlugin=HN,e.WorkspaceCustomRunPlugin=cN,e.WorkspaceEnforcedTemplatePlugin=DN,e.WorkspaceFileStore=iC,e.WorkspaceIDE=pO,e.WorkspaceKeymapPlugin=LN,e.WorkspaceManager=QV,e.WorkspaceManagerWrapper=$V,e.WorkspacePanel=$I,e.WorkspacePlugin=eN,e.WorkspaceSettingsPanel=VI,e.WorkspaceSettingsPlugin=tN,e.WorkspaceSharePlugin=IN,e.WorkspaceSingleFileManagerPlugin=TN,e.WorkspaceStore=tC,e.WorkspaceWatcher=_$,e.WrappedNavIcon=Gf,e.YoutubeIframe=n$,e.active=Ge,e.addCanonicalTimeUnit=tt,e.addCanonicalTimeUnits=nt,e.addVectors=ku,e.angleGrad=au,e.angleRad=lu,e.bound=gu,e.buildColors=Xe,e.buttonColorToStyle=Id,e.cardPanelColorToStyle=ut,e.changeParent=Be,e.circlesIntersection=fu,e.collapsibleTableStyle=Eb,e.computeDFSCoordsDirected=jt,e.computeDFSCoordsUndirected=Gt,e.consoleTokenizer=kt,e.crossProduct=uu,e.d3=TU,e.darken=Je,e.dashCase=J,e.decorateCollapsed=Bt,e.decorateUncollapsed=Dt,e.deepCopy=j,e.defaultComparator=F,e.defaultThemeProperties=FZ,e.defaultToPixelsAttributes=xc,e.deprecate=ve,e.distance=$l,e.distancePointLine=tu;e.enhance=qe,e.equal=Kl,e.equalPoints=Ql,e.extendsNative=te,e.filterIterator=ie,e.focus=je,e.formatCoord=Nl,e.getAttachCleanupJobMethod=de,e.getComputedStyle=De,e.getCookie=q,e.getDefaultContestStartDate=Mt,e.getOffset=Pe,e.getOrdinalSuffix=Z,e.getRanges=_t,e.getTextColor=$e,e.getTextWidth=wt,e.getVector=mu,e.gradian=su,e.hover=Ve,e.inRange=Su,e.initializeNavbar=ng,e.initializeSwipeEvents=lt,e.initializeSwipeLeft=st,e.initializeSwipeRight=ot,e.instantiateNative=ee,e.interpolationValue=Cu,e.isDifferentDay=it,e.isIterable=_,e.isLocalUrl=P,e.isNumber=H,e.isPlainObject=G,e.isString=V,e.isWhiteSpace=bt,e.isZero=ql,e.keyframesRule=jc,e.keyframesRuleInherit=Yc,e.lazyCSS=Ee,e.lazyInheritCSS=Ce,e.lazyInit=sc,e.lazyInitialize=be,e.lighten=Ye,e.lineEquation=ru,e.mapIterator=ne,e.maxDistanceFromSide=Xf,e.navSessionManager=Rf,e.normalizeVector=yu,e.objectFromKeyValue=Y,e.padNumber=Q,e.parseIntegers=Et,e.perpendicularFoot=iu,e.pointOnSegment=nu,e.polarToCartesian=pu,e.radian=ou,e.rand=Xl,e.readOnly=Te,e.registerStyle=Ze,e.removeDecorations=Pt,e.rotatePoint=cu,e.scaleCoord=Ol,e.scalePoint=du,e.scaleVector=bu,e.setCookie=X,e.setObjectPrototype=W,e.signedDistancePointLine=eu,e.slugify=U,e.splitInChunks=B,e.sqr=Zl,e.styleMap=Xc,e.styleRule=Vc,e.styleRuleCustom=We,e.styleRuleInherit=Gc,e.styleRuleWithOptions=ze,e.subtractVectors=wu,e.suffixNumber=z,e.suffixWithOrdinal=$,e.translatePoint=hu,e.triangleArea=Eu,e.trimLocalUrl=D,e.uniqueId=K,e.unwrapArray=M,e.updateAceRanges=Ft,e.vectorLength=vu,e.viewportMeta=HZ,e.wrapCSS=He,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=bundle.js.map
